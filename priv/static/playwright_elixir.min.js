var playwright_elixir=(()=>{var II=Object.create;var Vc=Object.defineProperty,MI=Object.defineProperties,FI=Object.getOwnPropertyDescriptor,RI=Object.getOwnPropertyDescriptors,NI=Object.getOwnPropertyNames,Cw=Object.getOwnPropertySymbols,DI=Object.getPrototypeOf,kw=Object.prototype.hasOwnProperty,LI=Object.prototype.propertyIsEnumerable;var Ow=(r,e,t)=>e in r?Vc(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,y=(r,e)=>{for(var t in e||(e={}))kw.call(e,t)&&Ow(r,t,e[t]);if(Cw)for(var t of Cw(e))LI.call(e,t)&&Ow(r,t,e[t]);return r},R=(r,e)=>MI(r,RI(e)),qI=r=>Vc(r,"__esModule",{value:!0});var x=(r=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(r,{get:(e,t)=>(typeof require!="undefined"?require:e)[t]}):r)(function(r){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var v=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var BI=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of NI(e))!kw.call(r,i)&&i!=="default"&&Vc(r,i,{get:()=>e[i],enumerable:!(t=FI(e,i))||t.enumerable});return r},HI=r=>BI(qI(Vc(r!=null?II(DI(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var c=(r,e,t)=>new Promise((i,n)=>{var s=u=>{try{l(t.next(u))}catch(d){n(d)}},o=u=>{try{l(t.throw(u))}catch(d){n(d)}},l=u=>u.done?i(u.value):Promise.resolve(u.value).then(s,o);l((t=t.apply(r,e)).next())});var qt=v(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.isSafeCloseError=jI;Ur.kBrowserOrContextClosedError=Ur.kBrowserClosedError=Ur.TimeoutError=void 0;var Pw=class extends Error{constructor(e){super(e);this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}},Tw=class extends Pw{};Ur.TimeoutError=Tw;var Aw="Browser has been closed";Ur.kBrowserClosedError=Aw;var Iw="Target page, context or browser has been closed";Ur.kBrowserOrContextClosedError=Iw;function jI(r){return r.message.endsWith(Aw)||r.message.endsWith(Iw)}});var li=v(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});ls.serializeError=UI;ls.parseError=$I;ls.parseSerializedValue=Gc;ls.serializeValue=Kc;var WI=qt();function UI(r){return lp(r)?{error:{message:r.message,stack:r.stack,name:r.name}}:{value:Kc(r,e=>({fallThrough:e}),new Set)}}function $I(r){if(!r.error){if(r.value===void 0)throw new Error("Serialized error must have either an error or a value");return Gc(r.value,void 0)}if(r.error.name==="TimeoutError"){let t=new WI.TimeoutError(r.error.message);return t.stack=r.error.stack||"",t}let e=new Error(r.error.message);return e.stack=r.error.stack||"",e.name=r.error.name,e}function Gc(r,e){if(r.n!==void 0)return r.n;if(r.s!==void 0)return r.s;if(r.b!==void 0)return r.b;if(r.v!==void 0){if(r.v==="undefined")return;if(r.v==="null")return null;if(r.v==="NaN")return NaN;if(r.v==="Infinity")return 1/0;if(r.v==="-Infinity")return-1/0;if(r.v==="-0")return-0}if(r.d!==void 0)return new Date(r.d);if(r.r!==void 0)return new RegExp(r.r.p,r.r.f);if(r.a!==void 0)return r.a.map(t=>Gc(t,e));if(r.o!==void 0){let t={};for(let{k:i,v:n}of r.o)t[i]=Gc(n,e);return t}if(r.h!==void 0){if(e===void 0)throw new Error("Unexpected handle");return e[r.h]}throw new Error("Unexpected value")}function Kc(r,e,t){let i=e(r);if("fallThrough"in i)r=i.fallThrough;else return i;if(t.has(r))throw new Error("Argument is a circular structure");if(typeof r=="symbol")return{v:"undefined"};if(Object.is(r,void 0))return{v:"undefined"};if(Object.is(r,null))return{v:"null"};if(Object.is(r,NaN))return{v:"NaN"};if(Object.is(r,1/0))return{v:"Infinity"};if(Object.is(r,-1/0))return{v:"-Infinity"};if(Object.is(r,-0))return{v:"-0"};if(typeof r=="boolean")return{b:r};if(typeof r=="number")return{n:r};if(typeof r=="string")return{s:r};if(lp(r)){let n=r;return"captureStackTrace"in global.Error?{s:n.stack||""}:{s:`${n.name}: ${n.message}
${n.stack}`}}if(VI(r))return{d:r.toJSON()};if(zI(r))return{r:{p:r.source,f:r.flags}};if(Array.isArray(r)){let n=[];t.add(r);for(let s=0;s<r.length;++s)n.push(Kc(r[s],e,t));return t.delete(r),{a:n}}if(typeof r=="object"){let n=[];t.add(r);for(let s of Object.keys(r))n.push({k:s,v:Kc(r[s],e,t)});return t.delete(r),{o:n}}throw new Error("Unexpected value")}function zI(r){return r instanceof RegExp||Object.prototype.toString.call(r)==="[object RegExp]"}function VI(r){return r instanceof Date||Object.prototype.toString.call(r)==="[object Date]"}function lp(r){var e;return r instanceof Error||(r==null||(e=r.__proto__)===null||e===void 0?void 0:e.name)==="Error"||(r==null?void 0:r.__proto__)&&lp(r.__proto__)}});var Mw=v(up=>{var hn=x("path"),ui=process.platform==="win32",di=x("fs"),GI=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function KI(){var r;if(GI){var e=new Error;r=t}else r=i;return r;function t(n){n&&(e.message=n.message,n=e,i(n))}function i(n){if(n){if(process.throwDeprecation)throw n;if(!process.noDeprecation){var s="fs: missing callback "+(n.stack||n.message);process.traceDeprecation?console.trace(s):console.error(s)}}}}function JI(r){return typeof r=="function"?r:KI()}var _8=hn.normalize;ui?$r=/(.*?)(?:[\/\\]+|$)/g:$r=/(.*?)(?:[\/]+|$)/g;var $r;ui?Jo=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:Jo=/^[\/]*/;var Jo;up.realpathSync=function(e,t){if(e=hn.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var i=e,n={},s={},o,l,u,d;h();function h(){var w=Jo.exec(e);o=w[0].length,l=w[0],u=w[0],d="",ui&&!s[u]&&(di.lstatSync(u),s[u]=!0)}for(;o<e.length;){$r.lastIndex=o;var p=$r.exec(e);if(d=l,l+=p[0],u=d+p[1],o=$r.lastIndex,!(s[u]||t&&t[u]===u)){var f;if(t&&Object.prototype.hasOwnProperty.call(t,u))f=t[u];else{var m=di.lstatSync(u);if(!m.isSymbolicLink()){s[u]=!0,t&&(t[u]=u);continue}var _=null;if(!ui){var g=m.dev.toString(32)+":"+m.ino.toString(32);n.hasOwnProperty(g)&&(_=n[g])}_===null&&(di.statSync(u),_=di.readlinkSync(u)),f=hn.resolve(d,_),t&&(t[u]=f),ui||(n[g]=_)}e=hn.resolve(f,e.slice(o)),h()}}return t&&(t[i]=e),e};up.realpath=function(e,t,i){if(typeof i!="function"&&(i=JI(t),t=null),e=hn.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(i.bind(null,null,t[e]));var n=e,s={},o={},l,u,d,h;p();function p(){var w=Jo.exec(e);l=w[0].length,u=w[0],d=w[0],h="",ui&&!o[d]?di.lstat(d,function(b){if(b)return i(b);o[d]=!0,f()}):process.nextTick(f)}function f(){if(l>=e.length)return t&&(t[n]=e),i(null,e);$r.lastIndex=l;var w=$r.exec(e);return h=u,u+=w[0],d=h+w[1],l=$r.lastIndex,o[d]||t&&t[d]===d?process.nextTick(f):t&&Object.prototype.hasOwnProperty.call(t,d)?g(t[d]):di.lstat(d,m)}function m(w,b){if(w)return i(w);if(!b.isSymbolicLink())return o[d]=!0,t&&(t[d]=d),process.nextTick(f);if(!ui){var C=b.dev.toString(32)+":"+b.ino.toString(32);if(s.hasOwnProperty(C))return _(null,s[C],d)}di.stat(d,function(E){if(E)return i(E);di.readlink(d,function(N,P){ui||(s[C]=P),_(N,P)})})}function _(w,b,C){if(w)return i(w);var E=hn.resolve(h,b);t&&(t[C]=E),g(E)}function g(w){e=hn.resolve(w,e.slice(l)),p()}}});var fp=v((w8,Dw)=>{Dw.exports=hi;hi.realpath=hi;hi.sync=pp;hi.realpathSync=pp;hi.monkeypatch=YI;hi.unmonkeypatch=ZI;var us=x("fs"),dp=us.realpath,hp=us.realpathSync,XI=process.version,Fw=/^v[0-5]\./.test(XI),Rw=Mw();function Nw(r){return r&&r.syscall==="realpath"&&(r.code==="ELOOP"||r.code==="ENOMEM"||r.code==="ENAMETOOLONG")}function hi(r,e,t){if(Fw)return dp(r,e,t);typeof e=="function"&&(t=e,e=null),dp(r,e,function(i,n){Nw(i)?Rw.realpath(r,e,t):t(i,n)})}function pp(r,e){if(Fw)return hp(r,e);try{return hp(r,e)}catch(t){if(Nw(t))return Rw.realpathSync(r,e);throw t}}function YI(){us.realpath=hi,us.realpathSync=pp}function ZI(){us.realpath=dp,us.realpathSync=hp}});var qw=v((v8,Lw)=>{Lw.exports=function(r,e){for(var t=[],i=0;i<r.length;i++){var n=e(r[i],i);QI(n)?t.push.apply(t,n):t.push(n)}return t};var QI=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"}});var Uw=v((y8,Ww)=>{"use strict";Ww.exports=Bw;function Bw(r,e,t){r instanceof RegExp&&(r=Hw(r,t)),e instanceof RegExp&&(e=Hw(e,t));var i=jw(r,e,t);return i&&{start:i[0],end:i[1],pre:t.slice(0,i[0]),body:t.slice(i[0]+r.length,i[1]),post:t.slice(i[1]+e.length)}}function Hw(r,e){var t=e.match(r);return t?t[0]:null}Bw.range=jw;function jw(r,e,t){var i,n,s,o,l,u=t.indexOf(r),d=t.indexOf(e,u+1),h=u;if(u>=0&&d>0){if(r===e)return[u,d];for(i=[],s=t.length;h>=0&&!l;)h==u?(i.push(h),u=t.indexOf(r,h+1)):i.length==1?l=[i.pop(),d]:(n=i.pop(),n<s&&(s=n,o=d),d=t.indexOf(e,h+1)),h=u<d&&u>=0?u:d;i.length&&(l=[s,o])}return l}});var Yw=v((b8,Xw)=>{var eM=qw(),$w=Uw();Xw.exports=iM;var zw="\0SLASH"+Math.random()+"\0",Vw="\0OPEN"+Math.random()+"\0",mp="\0CLOSE"+Math.random()+"\0",Gw="\0COMMA"+Math.random()+"\0",Kw="\0PERIOD"+Math.random()+"\0";function _p(r){return parseInt(r,10)==r?parseInt(r,10):r.charCodeAt(0)}function tM(r){return r.split("\\\\").join(zw).split("\\{").join(Vw).split("\\}").join(mp).split("\\,").join(Gw).split("\\.").join(Kw)}function rM(r){return r.split(zw).join("\\").split(Vw).join("{").split(mp).join("}").split(Gw).join(",").split(Kw).join(".")}function Jw(r){if(!r)return[""];var e=[],t=$w("{","}",r);if(!t)return r.split(",");var i=t.pre,n=t.body,s=t.post,o=i.split(",");o[o.length-1]+="{"+n+"}";var l=Jw(s);return s.length&&(o[o.length-1]+=l.shift(),o.push.apply(o,l)),e.push.apply(e,o),e}function iM(r){return r?(r.substr(0,2)==="{}"&&(r="\\{\\}"+r.substr(2)),ds(tM(r),!0).map(rM)):[]}function nM(r){return"{"+r+"}"}function sM(r){return/^-?0\d/.test(r)}function oM(r,e){return r<=e}function aM(r,e){return r>=e}function ds(r,e){var t=[],i=$w("{","}",r);if(!i||/\$$/.test(i.pre))return[r];var n=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),o=n||s,l=i.body.indexOf(",")>=0;if(!o&&!l)return i.post.match(/,.*\}/)?(r=i.pre+"{"+i.body+mp+i.post,ds(r)):[r];var u;if(o)u=i.body.split(/\.\./);else if(u=Jw(i.body),u.length===1&&(u=ds(u[0],!1).map(nM),u.length===1)){var h=i.post.length?ds(i.post,!1):[""];return h.map(function(z){return i.pre+u[0]+z})}var d=i.pre,h=i.post.length?ds(i.post,!1):[""],p;if(o){var f=_p(u[0]),m=_p(u[1]),_=Math.max(u[0].length,u[1].length),g=u.length==3?Math.abs(_p(u[2])):1,w=oM,b=m<f;b&&(g*=-1,w=aM);var C=u.some(sM);p=[];for(var E=f;w(E,m);E+=g){var N;if(s)N=String.fromCharCode(E),N==="\\"&&(N="");else if(N=String(E),C){var P=_-N.length;if(P>0){var L=new Array(P+1).join("0");E<0?N="-"+L+N.slice(1):N=L+N}}p.push(N)}}else p=eM(u,function(q){return ds(q,!1)});for(var S=0;S<p.length;S++)for(var T=0;T<h.length;T++){var F=d+p[S]+h[T];(!e||o||F)&&t.push(F)}return t}});var Xc=v((x8,iv)=>{iv.exports=Zt;Zt.Minimatch=lt;var Xo={sep:"/"};try{Xo=x("path")}catch(r){}var gp=Zt.GLOBSTAR=lt.GLOBSTAR={},cM=Yw(),Zw={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},wp="[^/]",vp=wp+"*?",lM="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",uM="(?:(?!(?:\\/|^)\\.).)*?",Qw=dM("().*{}+?[]^$\\!");function dM(r){return r.split("").reduce(function(e,t){return e[t]=!0,e},{})}var ev=/\/+/;Zt.filter=hM;function hM(r,e){return e=e||{},function(t,i,n){return Zt(t,r,e)}}function tv(r,e){r=r||{},e=e||{};var t={};return Object.keys(e).forEach(function(i){t[i]=e[i]}),Object.keys(r).forEach(function(i){t[i]=r[i]}),t}Zt.defaults=function(r){if(!r||!Object.keys(r).length)return Zt;var e=Zt,t=function(n,s,o){return e.minimatch(n,s,tv(r,o))};return t.Minimatch=function(n,s){return new e.Minimatch(n,tv(r,s))},t};lt.defaults=function(r){return!r||!Object.keys(r).length?lt:Zt.defaults(r).Minimatch};function Zt(r,e,t){if(typeof e!="string")throw new TypeError("glob pattern string required");return t||(t={}),!t.nocomment&&e.charAt(0)==="#"?!1:e.trim()===""?r==="":new lt(e,t).match(r)}function lt(r,e){if(!(this instanceof lt))return new lt(r,e);if(typeof r!="string")throw new TypeError("glob pattern string required");e||(e={}),r=r.trim(),Xo.sep!=="/"&&(r=r.split(Xo.sep).join("/")),this.options=e,this.set=[],this.pattern=r,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}lt.prototype.debug=function(){};lt.prototype.make=pM;function pM(){if(!this._made){var r=this.pattern,e=this.options;if(!e.nocomment&&r.charAt(0)==="#"){this.comment=!0;return}if(!r){this.empty=!0;return}this.parseNegate();var t=this.globSet=this.braceExpand();e.debug&&(this.debug=console.error),this.debug(this.pattern,t),t=this.globParts=t.map(function(i){return i.split(ev)}),this.debug(this.pattern,t),t=t.map(function(i,n,s){return i.map(this.parse,this)},this),this.debug(this.pattern,t),t=t.filter(function(i){return i.indexOf(!1)===-1}),this.debug(this.pattern,t),this.set=t}}lt.prototype.parseNegate=fM;function fM(){var r=this.pattern,e=!1,t=this.options,i=0;if(!t.nonegate){for(var n=0,s=r.length;n<s&&r.charAt(n)==="!";n++)e=!e,i++;i&&(this.pattern=r.substr(i)),this.negate=e}}Zt.braceExpand=function(r,e){return rv(r,e)};lt.prototype.braceExpand=rv;function rv(r,e){if(e||(this instanceof lt?e=this.options:e={}),r=typeof r=="undefined"?this.pattern:r,typeof r=="undefined")throw new TypeError("undefined pattern");return e.nobrace||!r.match(/\{.*\}/)?[r]:cM(r)}lt.prototype.parse=mM;var Jc={};function mM(r,e){if(r.length>1024*64)throw new TypeError("pattern is too long");var t=this.options;if(!t.noglobstar&&r==="**")return gp;if(r==="")return"";var i="",n=!!t.nocase,s=!1,o=[],l=[],u,d=!1,h=-1,p=-1,f=r.charAt(0)==="."?"":t.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",m=this;function _(){if(u){switch(u){case"*":i+=vp,n=!0;break;case"?":i+=wp,n=!0;break;default:i+="\\"+u;break}m.debug("clearStateChar %j %j",u,i),u=!1}}for(var g=0,w=r.length,b;g<w&&(b=r.charAt(g));g++){if(this.debug("%s	%s %s %j",r,g,i,b),s&&Qw[b]){i+="\\"+b,s=!1;continue}switch(b){case"/":return!1;case"\\":_(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",r,g,i,b),d){this.debug("  in class"),b==="!"&&g===p+1&&(b="^"),i+=b;continue}m.debug("call clearStateChar %j",u),_(),u=b,t.noext&&_();continue;case"(":if(d){i+="(";continue}if(!u){i+="\\(";continue}o.push({type:u,start:g-1,reStart:i.length,open:Zw[u].open,close:Zw[u].close}),i+=u==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",u,i),u=!1;continue;case")":if(d||!o.length){i+="\\)";continue}_(),n=!0;var C=o.pop();i+=C.close,C.type==="!"&&l.push(C),C.reEnd=i.length;continue;case"|":if(d||!o.length||s){i+="\\|",s=!1;continue}_(),i+="|";continue;case"[":if(_(),d){i+="\\"+b;continue}d=!0,p=g,h=i.length,i+=b;continue;case"]":if(g===p+1||!d){i+="\\"+b,s=!1;continue}if(d){var E=r.substring(p+1,g);try{RegExp("["+E+"]")}catch(ee){var N=this.parse(E,Jc);i=i.substr(0,h)+"\\["+N[0]+"\\]",n=n||N[1],d=!1;continue}}n=!0,d=!1,i+=b;continue;default:_(),s?s=!1:Qw[b]&&!(b==="^"&&d)&&(i+="\\"),i+=b}}for(d&&(E=r.substr(p+1),N=this.parse(E,Jc),i=i.substr(0,h)+"\\["+N[0],n=n||N[1]),C=o.pop();C;C=o.pop()){var P=i.slice(C.reStart+C.open.length);this.debug("setting tail",i,C),P=P.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(ee,ae,re){return re||(re="\\"),ae+ae+re+"|"}),this.debug(`tail=%j
   %s`,P,P,C,i);var L=C.type==="*"?vp:C.type==="?"?wp:"\\"+C.type;n=!0,i=i.slice(0,C.reStart)+L+"\\("+P}_(),s&&(i+="\\\\");var S=!1;switch(i.charAt(0)){case".":case"[":case"(":S=!0}for(var T=l.length-1;T>-1;T--){var F=l[T],q=i.slice(0,F.reStart),z=i.slice(F.reStart,F.reEnd-8),Y=i.slice(F.reEnd-8,F.reEnd),I=i.slice(F.reEnd);Y+=I;var Z=q.split("(").length-1,j=I;for(g=0;g<Z;g++)j=j.replace(/\)[+*?]?/,"");I=j;var H="";I===""&&e!==Jc&&(H="$");var pe=q+z+I+H+Y;i=pe}if(i!==""&&n&&(i="(?=.)"+i),S&&(i=f+i),e===Jc)return[i,n];if(!n)return wM(r);var ie=t.nocase?"i":"";try{var W=new RegExp("^"+i+"$",ie)}catch(ee){return new RegExp("$.")}return W._glob=r,W._src=i,W}Zt.makeRe=function(r,e){return new lt(r,e||{}).makeRe()};lt.prototype.makeRe=_M;function _M(){if(this.regexp||this.regexp===!1)return this.regexp;var r=this.set;if(!r.length)return this.regexp=!1,this.regexp;var e=this.options,t=e.noglobstar?vp:e.dot?lM:uM,i=e.nocase?"i":"",n=r.map(function(s){return s.map(function(o){return o===gp?t:typeof o=="string"?vM(o):o._src}).join("\\/")}).join("|");n="^(?:"+n+")$",this.negate&&(n="^(?!"+n+").*$");try{this.regexp=new RegExp(n,i)}catch(s){this.regexp=!1}return this.regexp}Zt.match=function(r,e,t){t=t||{};var i=new lt(e,t);return r=r.filter(function(n){return i.match(n)}),i.options.nonull&&!r.length&&r.push(e),r};lt.prototype.match=gM;function gM(r,e){if(this.debug("match",r,this.pattern),this.comment)return!1;if(this.empty)return r==="";if(r==="/"&&e)return!0;var t=this.options;Xo.sep!=="/"&&(r=r.split(Xo.sep).join("/")),r=r.split(ev),this.debug(this.pattern,"split",r);var i=this.set;this.debug(this.pattern,"set",i);var n,s;for(s=r.length-1;s>=0&&(n=r[s],!n);s--);for(s=0;s<i.length;s++){var o=i[s],l=r;t.matchBase&&o.length===1&&(l=[n]);var u=this.matchOne(l,o,e);if(u)return t.flipNegate?!0:!this.negate}return t.flipNegate?!1:this.negate}lt.prototype.matchOne=function(r,e,t){var i=this.options;this.debug("matchOne",{this:this,file:r,pattern:e}),this.debug("matchOne",r.length,e.length);for(var n=0,s=0,o=r.length,l=e.length;n<o&&s<l;n++,s++){this.debug("matchOne loop");var u=e[s],d=r[n];if(this.debug(e,u,d),u===!1)return!1;if(u===gp){this.debug("GLOBSTAR",[e,u,d]);var h=n,p=s+1;if(p===l){for(this.debug("** at the end");n<o;n++)if(r[n]==="."||r[n]===".."||!i.dot&&r[n].charAt(0)===".")return!1;return!0}for(;h<o;){var f=r[h];if(this.debug(`
globstar while`,r,h,e,p,f),this.matchOne(r.slice(h),e.slice(p),t))return this.debug("globstar found match!",h,o,f),!0;if(f==="."||f===".."||!i.dot&&f.charAt(0)==="."){this.debug("dot detected!",r,h,e,p);break}this.debug("globstar swallow a segment, and continue"),h++}return!!(t&&(this.debug(`
>>> no match, partial?`,r,h,e,p),h===o))}var m;if(typeof u=="string"?(i.nocase?m=d.toLowerCase()===u.toLowerCase():m=d===u,this.debug("string match",u,d,m)):(m=d.match(u),this.debug("pattern match",u,d,m)),!m)return!1}if(n===o&&s===l)return!0;if(n===o)return t;if(s===l){var _=n===o-1&&r[n]==="";return _}throw new Error("wtf?")};function wM(r){return r.replace(/\\(.)/g,"$1")}function vM(r){return r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var nv=v((S8,yp)=>{typeof Object.create=="function"?yp.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:yp.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}});var sv=v((E8,xp)=>{try{if(bp=x("util"),typeof bp.inherits!="function")throw"";xp.exports=bp.inherits}catch(r){xp.exports=nv()}var bp});var Zc=v((C8,Yc)=>{"use strict";function ov(r){return r.charAt(0)==="/"}function av(r){var e=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,t=e.exec(r),i=t[1]||"",n=Boolean(i&&i.charAt(1)!==":");return Boolean(t[2]||n)}Yc.exports=process.platform==="win32"?av:ov;Yc.exports.posix=ov;Yc.exports.win32=av});var Ep=v(pi=>{pi.setopts=CM;pi.ownProp=cv;pi.makeAbs=Yo;pi.finish=kM;pi.mark=OM;pi.isIgnored=uv;pi.childrenIgnored=PM;function cv(r,e){return Object.prototype.hasOwnProperty.call(r,e)}var yM=x("fs"),hs=x("path"),bM=Xc(),lv=Zc(),Sp=bM.Minimatch;function xM(r,e){return r.localeCompare(e,"en")}function SM(r,e){r.ignore=e.ignore||[],Array.isArray(r.ignore)||(r.ignore=[r.ignore]),r.ignore.length&&(r.ignore=r.ignore.map(EM))}function EM(r){var e=null;if(r.slice(-3)==="/**"){var t=r.replace(/(\/\*\*)+$/,"");e=new Sp(t,{dot:!0})}return{matcher:new Sp(r,{dot:!0}),gmatcher:e}}function CM(r,e,t){if(t||(t={}),t.matchBase&&e.indexOf("/")===-1){if(t.noglobstar)throw new Error("base matching requires globstar");e="**/"+e}r.silent=!!t.silent,r.pattern=e,r.strict=t.strict!==!1,r.realpath=!!t.realpath,r.realpathCache=t.realpathCache||Object.create(null),r.follow=!!t.follow,r.dot=!!t.dot,r.mark=!!t.mark,r.nodir=!!t.nodir,r.nodir&&(r.mark=!0),r.sync=!!t.sync,r.nounique=!!t.nounique,r.nonull=!!t.nonull,r.nosort=!!t.nosort,r.nocase=!!t.nocase,r.stat=!!t.stat,r.noprocess=!!t.noprocess,r.absolute=!!t.absolute,r.fs=t.fs||yM,r.maxLength=t.maxLength||1/0,r.cache=t.cache||Object.create(null),r.statCache=t.statCache||Object.create(null),r.symlinks=t.symlinks||Object.create(null),SM(r,t),r.changedCwd=!1;var i=process.cwd();cv(t,"cwd")?(r.cwd=hs.resolve(t.cwd),r.changedCwd=r.cwd!==i):r.cwd=i,r.root=t.root||hs.resolve(r.cwd,"/"),r.root=hs.resolve(r.root),process.platform==="win32"&&(r.root=r.root.replace(/\\/g,"/")),r.cwdAbs=lv(r.cwd)?r.cwd:Yo(r,r.cwd),process.platform==="win32"&&(r.cwdAbs=r.cwdAbs.replace(/\\/g,"/")),r.nomount=!!t.nomount,t.nonegate=!0,t.nocomment=!0,r.minimatch=new Sp(e,t),r.options=r.minimatch.options}function kM(r){for(var e=r.nounique,t=e?[]:Object.create(null),i=0,n=r.matches.length;i<n;i++){var s=r.matches[i];if(!s||Object.keys(s).length===0){if(r.nonull){var o=r.minimatch.globSet[i];e?t.push(o):t[o]=!0}}else{var l=Object.keys(s);e?t.push.apply(t,l):l.forEach(function(u){t[u]=!0})}}if(e||(t=Object.keys(t)),r.nosort||(t=t.sort(xM)),r.mark){for(var i=0;i<t.length;i++)t[i]=r._mark(t[i]);r.nodir&&(t=t.filter(function(u){var d=!/\/$/.test(u),h=r.cache[u]||r.cache[Yo(r,u)];return d&&h&&(d=h!=="DIR"&&!Array.isArray(h)),d}))}r.ignore.length&&(t=t.filter(function(u){return!uv(r,u)})),r.found=t}function OM(r,e){var t=Yo(r,e),i=r.cache[t],n=e;if(i){var s=i==="DIR"||Array.isArray(i),o=e.slice(-1)==="/";if(s&&!o?n+="/":!s&&o&&(n=n.slice(0,-1)),n!==e){var l=Yo(r,n);r.statCache[l]=r.statCache[t],r.cache[l]=r.cache[t]}}return n}function Yo(r,e){var t=e;return e.charAt(0)==="/"?t=hs.join(r.root,e):lv(e)||e===""?t=e:r.changedCwd?t=hs.resolve(r.cwd,e):t=hs.resolve(e),process.platform==="win32"&&(t=t.replace(/\\/g,"/")),t}function uv(r,e){return r.ignore.length?r.ignore.some(function(t){return t.matcher.match(e)||!!(t.gmatcher&&t.gmatcher.match(e))}):!1}function PM(r,e){return r.ignore.length?r.ignore.some(function(t){return!!(t.gmatcher&&t.gmatcher.match(e))}):!1}});var mv=v((A8,fv)=>{fv.exports=pv;pv.GlobSync=it;var TM=fp(),dv=Xc(),O8=dv.Minimatch,P8=Op().Glob,T8=x("util"),Cp=x("path"),hv=x("assert"),Qc=Zc(),pn=Ep(),AM=pn.setopts,kp=pn.ownProp,IM=pn.childrenIgnored,MM=pn.isIgnored;function pv(r,e){if(typeof e=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new it(r,e).found}function it(r,e){if(!r)throw new Error("must provide pattern");if(typeof e=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof it))return new it(r,e);if(AM(this,r,e),this.noprocess)return this;var t=this.minimatch.set.length;this.matches=new Array(t);for(var i=0;i<t;i++)this._process(this.minimatch.set[i],i,!1);this._finish()}it.prototype._finish=function(){if(hv(this instanceof it),this.realpath){var r=this;this.matches.forEach(function(e,t){var i=r.matches[t]=Object.create(null);for(var n in e)try{n=r._makeAbs(n);var s=TM.realpathSync(n,r.realpathCache);i[s]=!0}catch(o){if(o.syscall==="stat")i[r._makeAbs(n)]=!0;else throw o}})}pn.finish(this)};it.prototype._process=function(r,e,t){hv(this instanceof it);for(var i=0;typeof r[i]=="string";)i++;var n;switch(i){case r.length:this._processSimple(r.join("/"),e);return;case 0:n=null;break;default:n=r.slice(0,i).join("/");break}var s=r.slice(i),o;n===null?o=".":((Qc(n)||Qc(r.join("/")))&&(!n||!Qc(n))&&(n="/"+n),o=n);var l=this._makeAbs(o);if(!IM(this,o)){var u=s[0]===dv.GLOBSTAR;u?this._processGlobStar(n,o,l,s,e,t):this._processReaddir(n,o,l,s,e,t)}};it.prototype._processReaddir=function(r,e,t,i,n,s){var o=this._readdir(t,s);if(!!o){for(var l=i[0],u=!!this.minimatch.negate,d=l._glob,h=this.dot||d.charAt(0)===".",p=[],f=0;f<o.length;f++){var m=o[f];if(m.charAt(0)!=="."||h){var _;u&&!r?_=!m.match(l):_=m.match(l),_&&p.push(m)}}var g=p.length;if(g!==0){if(i.length===1&&!this.mark&&!this.stat){this.matches[n]||(this.matches[n]=Object.create(null));for(var f=0;f<g;f++){var m=p[f];r&&(r.slice(-1)!=="/"?m=r+"/"+m:m=r+m),m.charAt(0)==="/"&&!this.nomount&&(m=Cp.join(this.root,m)),this._emitMatch(n,m)}return}i.shift();for(var f=0;f<g;f++){var m=p[f],w;r?w=[r,m]:w=[m],this._process(w.concat(i),n,s)}}}};it.prototype._emitMatch=function(r,e){if(!MM(this,e)){var t=this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=t),!this.matches[r][e]){if(this.nodir){var i=this.cache[t];if(i==="DIR"||Array.isArray(i))return}this.matches[r][e]=!0,this.stat&&this._stat(e)}}};it.prototype._readdirInGlobStar=function(r){if(this.follow)return this._readdir(r,!1);var e,t,i;try{t=this.fs.lstatSync(r)}catch(s){if(s.code==="ENOENT")return null}var n=t&&t.isSymbolicLink();return this.symlinks[r]=n,!n&&t&&!t.isDirectory()?this.cache[r]="FILE":e=this._readdir(r,!1),e};it.prototype._readdir=function(r,e){var t;if(e&&!kp(this.symlinks,r))return this._readdirInGlobStar(r);if(kp(this.cache,r)){var i=this.cache[r];if(!i||i==="FILE")return null;if(Array.isArray(i))return i}try{return this._readdirEntries(r,this.fs.readdirSync(r))}catch(n){return this._readdirError(r,n),null}};it.prototype._readdirEntries=function(r,e){if(!this.mark&&!this.stat)for(var t=0;t<e.length;t++){var i=e[t];r==="/"?i=r+i:i=r+"/"+i,this.cache[i]=!0}return this.cache[r]=e,e};it.prototype._readdirError=function(r,e){switch(e.code){case"ENOTSUP":case"ENOTDIR":var t=this._makeAbs(r);if(this.cache[t]="FILE",t===this.cwdAbs){var i=new Error(e.code+" invalid cwd "+this.cwd);throw i.path=this.cwd,i.code=e.code,i}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(r)]=!1;break;default:if(this.cache[this._makeAbs(r)]=!1,this.strict)throw e;this.silent||console.error("glob error",e);break}};it.prototype._processGlobStar=function(r,e,t,i,n,s){var o=this._readdir(t,s);if(!!o){var l=i.slice(1),u=r?[r]:[],d=u.concat(l);this._process(d,n,!1);var h=o.length,p=this.symlinks[t];if(!(p&&s))for(var f=0;f<h;f++){var m=o[f];if(!(m.charAt(0)==="."&&!this.dot)){var _=u.concat(o[f],l);this._process(_,n,!0);var g=u.concat(o[f],i);this._process(g,n,!0)}}}};it.prototype._processSimple=function(r,e){var t=this._stat(r);if(this.matches[e]||(this.matches[e]=Object.create(null)),!!t){if(r&&Qc(r)&&!this.nomount){var i=/[\/\\]$/.test(r);r.charAt(0)==="/"?r=Cp.join(this.root,r):(r=Cp.resolve(this.root,r),i&&(r+="/"))}process.platform==="win32"&&(r=r.replace(/\\/g,"/")),this._emitMatch(e,r)}};it.prototype._stat=function(r){var e=this._makeAbs(r),t=r.slice(-1)==="/";if(r.length>this.maxLength)return!1;if(!this.stat&&kp(this.cache,e)){var o=this.cache[e];if(Array.isArray(o)&&(o="DIR"),!t||o==="DIR")return o;if(t&&o==="FILE")return!1}var i,n=this.statCache[e];if(!n){var s;try{s=this.fs.lstatSync(e)}catch(l){if(l&&(l.code==="ENOENT"||l.code==="ENOTDIR"))return this.statCache[e]=!1,!1}if(s&&s.isSymbolicLink())try{n=this.fs.statSync(e)}catch(l){n=s}else n=s}this.statCache[e]=n;var o=!0;return n&&(o=n.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||o,t&&o==="FILE"?!1:o};it.prototype._mark=function(r){return pn.mark(this,r)};it.prototype._makeAbs=function(r){return pn.makeAbs(this,r)}});var Pp=v((I8,gv)=>{gv.exports=_v;function _v(r,e){if(r&&e)return _v(r)(e);if(typeof r!="function")throw new TypeError("need wrapper function");return Object.keys(r).forEach(function(i){t[i]=r[i]}),t;function t(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];var s=r.apply(this,i),o=i[i.length-1];return typeof s=="function"&&s!==o&&Object.keys(o).forEach(function(l){s[l]=o[l]}),s}}});var Zo=v((M8,Tp)=>{var wv=Pp();Tp.exports=wv(el);Tp.exports.strict=wv(vv);el.proto=el(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return el(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return vv(this)},configurable:!0})});function el(r){var e=function(){return e.called?e.value:(e.called=!0,e.value=r.apply(this,arguments))};return e.called=!1,e}function vv(r){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=r.apply(this,arguments)},t=r.name||"Function wrapped with `once`";return e.onceError=t+" shouldn't be called more than once",e.called=!1,e}});var bv=v((F8,yv)=>{var FM=Pp(),Qo=Object.create(null),RM=Zo();yv.exports=FM(NM);function NM(r,e){return Qo[r]?(Qo[r].push(e),null):(Qo[r]=[e],DM(r))}function DM(r){return RM(function e(){var t=Qo[r],i=t.length,n=LM(arguments);try{for(var s=0;s<i;s++)t[s].apply(null,n)}finally{t.length>i?(t.splice(0,i),process.nextTick(function(){e.apply(null,n)})):delete Qo[r]}})}function LM(r){for(var e=r.length,t=[],i=0;i<e;i++)t[i]=r[i];return t}});var Op=v((D8,Sv)=>{Sv.exports=mn;var qM=fp(),xv=Xc(),R8=xv.Minimatch,BM=sv(),HM=x("events").EventEmitter,Ap=x("path"),Ip=x("assert"),ea=Zc(),Mp=mv(),fn=Ep(),jM=fn.setopts,Fp=fn.ownProp,Rp=bv(),N8=x("util"),WM=fn.childrenIgnored,UM=fn.isIgnored,$M=Zo();function mn(r,e,t){if(typeof e=="function"&&(t=e,e={}),e||(e={}),e.sync){if(t)throw new TypeError("callback provided to sync glob");return Mp(r,e)}return new Ne(r,e,t)}mn.sync=Mp;var zM=mn.GlobSync=Mp.GlobSync;mn.glob=mn;function VM(r,e){if(e===null||typeof e!="object")return r;for(var t=Object.keys(e),i=t.length;i--;)r[t[i]]=e[t[i]];return r}mn.hasMagic=function(r,e){var t=VM({},e);t.noprocess=!0;var i=new Ne(r,t),n=i.minimatch.set;if(!r)return!1;if(n.length>1)return!0;for(var s=0;s<n[0].length;s++)if(typeof n[0][s]!="string")return!0;return!1};mn.Glob=Ne;BM(Ne,HM);function Ne(r,e,t){if(typeof e=="function"&&(t=e,e=null),e&&e.sync){if(t)throw new TypeError("callback provided to sync glob");return new zM(r,e)}if(!(this instanceof Ne))return new Ne(r,e,t);jM(this,r,e),this._didRealPath=!1;var i=this.minimatch.set.length;this.matches=new Array(i),typeof t=="function"&&(t=$M(t),this.on("error",t),this.on("end",function(u){t(null,u)}));var n=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(i===0)return l();for(var s=!0,o=0;o<i;o++)this._process(this.minimatch.set[o],o,!1,l);s=!1;function l(){--n._processing,n._processing<=0&&(s?process.nextTick(function(){n._finish()}):n._finish())}}Ne.prototype._finish=function(){if(Ip(this instanceof Ne),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();fn.finish(this),this.emit("end",this.found)}};Ne.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var r=this.matches.length;if(r===0)return this._finish();for(var e=this,t=0;t<this.matches.length;t++)this._realpathSet(t,i);function i(){--r==0&&e._finish()}};Ne.prototype._realpathSet=function(r,e){var t=this.matches[r];if(!t)return e();var i=Object.keys(t),n=this,s=i.length;if(s===0)return e();var o=this.matches[r]=Object.create(null);i.forEach(function(l,u){l=n._makeAbs(l),qM.realpath(l,n.realpathCache,function(d,h){d?d.syscall==="stat"?o[l]=!0:n.emit("error",d):o[h]=!0,--s==0&&(n.matches[r]=o,e())})})};Ne.prototype._mark=function(r){return fn.mark(this,r)};Ne.prototype._makeAbs=function(r){return fn.makeAbs(this,r)};Ne.prototype.abort=function(){this.aborted=!0,this.emit("abort")};Ne.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};Ne.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var r=this._emitQueue.slice(0);this._emitQueue.length=0;for(var e=0;e<r.length;e++){var t=r[e];this._emitMatch(t[0],t[1])}}if(this._processQueue.length){var i=this._processQueue.slice(0);this._processQueue.length=0;for(var e=0;e<i.length;e++){var n=i[e];this._processing--,this._process(n[0],n[1],n[2],n[3])}}}};Ne.prototype._process=function(r,e,t,i){if(Ip(this instanceof Ne),Ip(typeof i=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([r,e,t,i]);return}for(var n=0;typeof r[n]=="string";)n++;var s;switch(n){case r.length:this._processSimple(r.join("/"),e,i);return;case 0:s=null;break;default:s=r.slice(0,n).join("/");break}var o=r.slice(n),l;s===null?l=".":((ea(s)||ea(r.join("/")))&&(!s||!ea(s))&&(s="/"+s),l=s);var u=this._makeAbs(l);if(WM(this,l))return i();var d=o[0]===xv.GLOBSTAR;d?this._processGlobStar(s,l,u,o,e,t,i):this._processReaddir(s,l,u,o,e,t,i)}};Ne.prototype._processReaddir=function(r,e,t,i,n,s,o){var l=this;this._readdir(t,s,function(u,d){return l._processReaddir2(r,e,t,i,n,s,d,o)})};Ne.prototype._processReaddir2=function(r,e,t,i,n,s,o,l){if(!o)return l();for(var u=i[0],d=!!this.minimatch.negate,h=u._glob,p=this.dot||h.charAt(0)===".",f=[],m=0;m<o.length;m++){var _=o[m];if(_.charAt(0)!=="."||p){var g;d&&!r?g=!_.match(u):g=_.match(u),g&&f.push(_)}}var w=f.length;if(w===0)return l();if(i.length===1&&!this.mark&&!this.stat){this.matches[n]||(this.matches[n]=Object.create(null));for(var m=0;m<w;m++){var _=f[m];r&&(r!=="/"?_=r+"/"+_:_=r+_),_.charAt(0)==="/"&&!this.nomount&&(_=Ap.join(this.root,_)),this._emitMatch(n,_)}return l()}i.shift();for(var m=0;m<w;m++){var _=f[m],b;r&&(r!=="/"?_=r+"/"+_:_=r+_),this._process([_].concat(i),n,s,l)}l()};Ne.prototype._emitMatch=function(r,e){if(!this.aborted&&!UM(this,e)){if(this.paused){this._emitQueue.push([r,e]);return}var t=ea(e)?e:this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=t),!this.matches[r][e]){if(this.nodir){var i=this.cache[t];if(i==="DIR"||Array.isArray(i))return}this.matches[r][e]=!0;var n=this.statCache[t];n&&this.emit("stat",e,n),this.emit("match",e)}}};Ne.prototype._readdirInGlobStar=function(r,e){if(this.aborted)return;if(this.follow)return this._readdir(r,!1,e);var t="lstat\0"+r,i=this,n=Rp(t,s);n&&i.fs.lstat(r,n);function s(o,l){if(o&&o.code==="ENOENT")return e();var u=l&&l.isSymbolicLink();i.symlinks[r]=u,!u&&l&&!l.isDirectory()?(i.cache[r]="FILE",e()):i._readdir(r,!1,e)}};Ne.prototype._readdir=function(r,e,t){if(!this.aborted&&(t=Rp("readdir\0"+r+"\0"+e,t),!!t)){if(e&&!Fp(this.symlinks,r))return this._readdirInGlobStar(r,t);if(Fp(this.cache,r)){var i=this.cache[r];if(!i||i==="FILE")return t();if(Array.isArray(i))return t(null,i)}var n=this;n.fs.readdir(r,GM(this,r,t))}};function GM(r,e,t){return function(i,n){i?r._readdirError(e,i,t):r._readdirEntries(e,n,t)}}Ne.prototype._readdirEntries=function(r,e,t){if(!this.aborted){if(!this.mark&&!this.stat)for(var i=0;i<e.length;i++){var n=e[i];r==="/"?n=r+n:n=r+"/"+n,this.cache[n]=!0}return this.cache[r]=e,t(null,e)}};Ne.prototype._readdirError=function(r,e,t){if(!this.aborted){switch(e.code){case"ENOTSUP":case"ENOTDIR":var i=this._makeAbs(r);if(this.cache[i]="FILE",i===this.cwdAbs){var n=new Error(e.code+" invalid cwd "+this.cwd);n.path=this.cwd,n.code=e.code,this.emit("error",n),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(r)]=!1;break;default:this.cache[this._makeAbs(r)]=!1,this.strict&&(this.emit("error",e),this.abort()),this.silent||console.error("glob error",e);break}return t()}};Ne.prototype._processGlobStar=function(r,e,t,i,n,s,o){var l=this;this._readdir(t,s,function(u,d){l._processGlobStar2(r,e,t,i,n,s,d,o)})};Ne.prototype._processGlobStar2=function(r,e,t,i,n,s,o,l){if(!o)return l();var u=i.slice(1),d=r?[r]:[],h=d.concat(u);this._process(h,n,!1,l);var p=this.symlinks[t],f=o.length;if(p&&s)return l();for(var m=0;m<f;m++){var _=o[m];if(!(_.charAt(0)==="."&&!this.dot)){var g=d.concat(o[m],u);this._process(g,n,!0,l);var w=d.concat(o[m],i);this._process(w,n,!0,l)}}l()};Ne.prototype._processSimple=function(r,e,t){var i=this;this._stat(r,function(n,s){i._processSimple2(r,e,n,s,t)})};Ne.prototype._processSimple2=function(r,e,t,i,n){if(this.matches[e]||(this.matches[e]=Object.create(null)),!i)return n();if(r&&ea(r)&&!this.nomount){var s=/[\/\\]$/.test(r);r.charAt(0)==="/"?r=Ap.join(this.root,r):(r=Ap.resolve(this.root,r),s&&(r+="/"))}process.platform==="win32"&&(r=r.replace(/\\/g,"/")),this._emitMatch(e,r),n()};Ne.prototype._stat=function(r,e){var t=this._makeAbs(r),i=r.slice(-1)==="/";if(r.length>this.maxLength)return e();if(!this.stat&&Fp(this.cache,t)){var n=this.cache[t];if(Array.isArray(n)&&(n="DIR"),!i||n==="DIR")return e(null,n);if(i&&n==="FILE")return e()}var s,o=this.statCache[t];if(o!==void 0){if(o===!1)return e(null,o);var l=o.isDirectory()?"DIR":"FILE";return i&&l==="FILE"?e():e(null,l,o)}var u=this,d=Rp("stat\0"+t,h);d&&u.fs.lstat(t,d);function h(p,f){if(f&&f.isSymbolicLink())return u.fs.stat(t,function(m,_){m?u._stat2(r,t,null,f,e):u._stat2(r,t,m,_,e)});u._stat2(r,t,p,f,e)}};Ne.prototype._stat2=function(r,e,t,i,n){if(t&&(t.code==="ENOENT"||t.code==="ENOTDIR"))return this.statCache[e]=!1,n();var s=r.slice(-1)==="/";if(this.statCache[e]=i,e.slice(-1)==="/"&&i&&!i.isDirectory())return n(null,!1,i);var o=!0;return i&&(o=i.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||o,s&&o==="FILE"?n():n(null,o,i)}});var Iv=v((L8,Av)=>{var Be=x("assert"),Ev=x("path"),Cv=x("fs"),ps;try{ps=Op()}catch(r){}var KM={nosort:!0,silent:!0},Np=0,ta=process.platform==="win32",kv=r=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(t=>{r[t]=r[t]||Cv[t],t=t+"Sync",r[t]=r[t]||Cv[t]}),r.maxBusyTries=r.maxBusyTries||3,r.emfileWait=r.emfileWait||1e3,r.glob===!1&&(r.disableGlob=!0),r.disableGlob!==!0&&ps===void 0)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");r.disableGlob=r.disableGlob||!1,r.glob=r.glob||KM},Dp=(r,e,t)=>{typeof e=="function"&&(t=e,e={}),Be(r,"rimraf: missing path"),Be.equal(typeof r,"string","rimraf: path should be a string"),Be.equal(typeof t,"function","rimraf: callback function required"),Be(e,"rimraf: invalid options argument provided"),Be.equal(typeof e,"object","rimraf: options should be object"),kv(e);let i=0,n=null,s=0,o=u=>{n=n||u,--s==0&&t(n)},l=(u,d)=>{if(u)return t(u);if(s=d.length,s===0)return t();d.forEach(h=>{let p=f=>{if(f){if((f.code==="EBUSY"||f.code==="ENOTEMPTY"||f.code==="EPERM")&&i<e.maxBusyTries)return i++,setTimeout(()=>Lp(h,e,p),i*100);if(f.code==="EMFILE"&&Np<e.emfileWait)return setTimeout(()=>Lp(h,e,p),Np++);f.code==="ENOENT"&&(f=null)}Np=0,o(f)};Lp(h,e,p)})};if(e.disableGlob||!ps.hasMagic(r))return l(null,[r]);e.lstat(r,(u,d)=>{if(!u)return l(null,[r]);ps(r,e.glob,l)})},Lp=(r,e,t)=>{Be(r),Be(e),Be(typeof t=="function"),e.lstat(r,(i,n)=>{if(i&&i.code==="ENOENT")return t(null);if(i&&i.code==="EPERM"&&ta&&Ov(r,e,i,t),n&&n.isDirectory())return tl(r,e,i,t);e.unlink(r,s=>{if(s){if(s.code==="ENOENT")return t(null);if(s.code==="EPERM")return ta?Ov(r,e,s,t):tl(r,e,s,t);if(s.code==="EISDIR")return tl(r,e,s,t)}return t(s)})})},Ov=(r,e,t,i)=>{Be(r),Be(e),Be(typeof i=="function"),e.chmod(r,438,n=>{n?i(n.code==="ENOENT"?null:t):e.stat(r,(s,o)=>{s?i(s.code==="ENOENT"?null:t):o.isDirectory()?tl(r,e,t,i):e.unlink(r,i)})})},Pv=(r,e,t)=>{Be(r),Be(e);try{e.chmodSync(r,438)}catch(n){if(n.code==="ENOENT")return;throw t}let i;try{i=e.statSync(r)}catch(n){if(n.code==="ENOENT")return;throw t}i.isDirectory()?rl(r,e,t):e.unlinkSync(r)},tl=(r,e,t,i)=>{Be(r),Be(e),Be(typeof i=="function"),e.rmdir(r,n=>{n&&(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")?JM(r,e,i):n&&n.code==="ENOTDIR"?i(t):i(n)})},JM=(r,e,t)=>{Be(r),Be(e),Be(typeof t=="function"),e.readdir(r,(i,n)=>{if(i)return t(i);let s=n.length;if(s===0)return e.rmdir(r,t);let o;n.forEach(l=>{Dp(Ev.join(r,l),e,u=>{if(!o){if(u)return t(o=u);--s==0&&e.rmdir(r,t)}})})})},Tv=(r,e)=>{e=e||{},kv(e),Be(r,"rimraf: missing path"),Be.equal(typeof r,"string","rimraf: path should be a string"),Be(e,"rimraf: missing options"),Be.equal(typeof e,"object","rimraf: options should be object");let t;if(e.disableGlob||!ps.hasMagic(r))t=[r];else try{e.lstatSync(r),t=[r]}catch(i){t=ps.sync(r,e.glob)}if(!!t.length)for(let i=0;i<t.length;i++){let n=t[i],s;try{s=e.lstatSync(n)}catch(o){if(o.code==="ENOENT")return;o.code==="EPERM"&&ta&&Pv(n,e,o)}try{s&&s.isDirectory()?rl(n,e,null):e.unlinkSync(n)}catch(o){if(o.code==="ENOENT")return;if(o.code==="EPERM")return ta?Pv(n,e,o):rl(n,e,o);if(o.code!=="EISDIR")throw o;rl(n,e,o)}}},rl=(r,e,t)=>{Be(r),Be(e);try{e.rmdirSync(r)}catch(i){if(i.code==="ENOENT")return;if(i.code==="ENOTDIR")throw t;(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")&&XM(r,e)}},XM=(r,e)=>{Be(r),Be(e),e.readdirSync(r).forEach(n=>Tv(Ev.join(r,n),e));let t=ta?100:1,i=0;do{let n=!0;try{let s=e.rmdirSync(r,e);return n=!1,s}finally{if(++i<t&&n)continue}}while(!0)};Av.exports=Dp;Dp.sync=Tv});var Fv=v(Mv=>{"use strict";var YM=x("url").parse,ZM={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443},QM=String.prototype.endsWith||function(r){return r.length<=this.length&&this.indexOf(r,this.length-r.length)!==-1};function eF(r){var e=typeof r=="string"?YM(r):r||{},t=e.protocol,i=e.host,n=e.port;if(typeof i!="string"||!i||typeof t!="string"||(t=t.split(":",1)[0],i=i.replace(/:\d*$/,""),n=parseInt(n)||ZM[t]||0,!tF(i,n)))return"";var s=fs("npm_config_"+t+"_proxy")||fs(t+"_proxy")||fs("npm_config_proxy")||fs("all_proxy");return s&&s.indexOf("://")===-1&&(s=t+"://"+s),s}function tF(r,e){var t=(fs("npm_config_no_proxy")||fs("no_proxy")).toLowerCase();return t?t==="*"?!1:t.split(/[,\s]/).every(function(i){if(!i)return!0;var n=i.match(/^(.+):(\d+)$/),s=n?n[1]:i,o=n?parseInt(n[2]):0;return o&&o!==e?!0:/^[.*]/.test(s)?(s.charAt(0)==="*"&&(s=s.slice(1)),!QM.call(r,s)):r!==s}):!0}function fs(r){return process.env[r.toLowerCase()]||process.env[r.toUpperCase()]||""}Mv.getProxyForUrl=eF});var nl=v(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.getUbuntuVersion=nF;il.getUbuntuVersionSync=sF;var ra=iF(x("fs")),Rv=rF(x("os"));function Nv(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(Nv=function(i){return i?t:e})(r)}function rF(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=Nv(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function iF(r){return r&&r.__esModule?r:{default:r}}var ms;function nF(){return c(this,null,function*(){return ms===void 0&&(ms=yield oF()),ms})}function sF(){return ms===void 0&&(ms=aF()),ms}function oF(){return c(this,null,function*(){if(Rv.platform()!=="linux")return"";let r=yield ra.default.promises.readFile("/etc/upstream-release/lsb-release","utf8").catch(e=>"");return r||(r=yield ra.default.promises.readFile("/etc/os-release","utf8").catch(e=>"")),r?Dv(r):""})}function aF(){if(Rv.platform()!=="linux")return"";try{let r;return ra.default.existsSync("/etc/upstream-release/lsb-release")?r=ra.default.readFileSync("/etc/upstream-release/lsb-release","utf8"):r=ra.default.readFileSync("/etc/os-release","utf8"),r?Dv(r):""}catch(r){return""}}function Dv(r){let e=new Map;for(let t of r.split(`
`)){let i=t.split("="),n=i.shift(),s=i.join("=").trim();s.startsWith('"')&&s.endsWith('"')&&(s=s.substring(1,s.length-1)),!!n&&e.set(n.toLowerCase(),s)}return e.get("distrib_id")&&e.get("distrib_id").toLowerCase()==="ubuntu"?e.get("distrib_release")||"":!e.get("name")||e.get("name").toLowerCase()!=="ubuntu"?"":e.get("version_id")||""}});var Bv=v((Lv,qv)=>{Lv=qv.exports=_s;function _s(r,e){if(this.stream=e.stream||process.stderr,typeof e=="number"){var t=e;e={},e.total=t}else{if(e=e||{},typeof r!="string")throw new Error("format required");if(typeof e.total!="number")throw new Error("total required")}this.fmt=r,this.curr=e.curr||0,this.total=e.total,this.width=e.width||this.total,this.clear=e.clear,this.chars={complete:e.complete||"=",incomplete:e.incomplete||"-",head:e.head||e.complete||"="},this.renderThrottle=e.renderThrottle!==0?e.renderThrottle||16:0,this.lastRender=-1/0,this.callback=e.callback||function(){},this.tokens={},this.lastDraw=""}_s.prototype.tick=function(r,e){if(r!==0&&(r=r||1),typeof r=="object"&&(e=r,r=1),e&&(this.tokens=e),this.curr==0&&(this.start=new Date),this.curr+=r,this.render(),this.curr>=this.total){this.render(void 0,!0),this.complete=!0,this.terminate(),this.callback(this);return}};_s.prototype.render=function(r,e){if(e=e!==void 0?e:!1,r&&(this.tokens=r),!!this.stream.isTTY){var t=Date.now(),i=t-this.lastRender;if(!(!e&&i<this.renderThrottle)){this.lastRender=t;var n=this.curr/this.total;n=Math.min(Math.max(n,0),1);var s=Math.floor(n*100),o,l,u,d=new Date-this.start,h=s==100?0:d*(this.total/this.curr-1),p=this.curr/(d/1e3),f=this.fmt.replace(":current",this.curr).replace(":total",this.total).replace(":elapsed",isNaN(d)?"0.0":(d/1e3).toFixed(1)).replace(":eta",isNaN(h)||!isFinite(h)?"0.0":(h/1e3).toFixed(1)).replace(":percent",s.toFixed(0)+"%").replace(":rate",Math.round(p)),m=Math.max(0,this.stream.columns-f.replace(":bar","").length);m&&process.platform==="win32"&&(m=m-1);var _=Math.min(this.width,m);if(u=Math.round(_*n),l=Array(Math.max(0,u+1)).join(this.chars.complete),o=Array(Math.max(0,_-u+1)).join(this.chars.incomplete),u>0&&(l=l.slice(0,-1)+this.chars.head),f=f.replace(":bar",l+o),this.tokens)for(var g in this.tokens)f=f.replace(":"+g,this.tokens[g]);this.lastDraw!==f&&(this.stream.cursorTo(0),this.stream.write(f),this.stream.clearLine(1),this.lastDraw=f)}}};_s.prototype.update=function(r,e){var t=Math.floor(r*this.total),i=t-this.curr;this.tick(i,e)};_s.prototype.interrupt=function(r){this.stream.clearLine(),this.stream.cursorTo(0),this.stream.write(r),this.stream.write(`
`),this.stream.write(this.lastDraw)};_s.prototype.terminate=function(){this.clear?this.stream.clearLine&&(this.stream.clearLine(),this.stream.cursorTo(0)):this.stream.write(`
`)}});var jv=v((H8,Hv)=>{Hv.exports=Bv()});var Uv=v((j8,Wv)=>{var gs=1e3,ws=gs*60,vs=ws*60,_n=vs*24,cF=_n*7,lF=_n*365.25;Wv.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return uF(r);if(t==="number"&&isFinite(r))return e.long?hF(r):dF(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function uF(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),i=(e[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return t*lF;case"weeks":case"week":case"w":return t*cF;case"days":case"day":case"d":return t*_n;case"hours":case"hour":case"hrs":case"hr":case"h":return t*vs;case"minutes":case"minute":case"mins":case"min":case"m":return t*ws;case"seconds":case"second":case"secs":case"sec":case"s":return t*gs;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function dF(r){var e=Math.abs(r);return e>=_n?Math.round(r/_n)+"d":e>=vs?Math.round(r/vs)+"h":e>=ws?Math.round(r/ws)+"m":e>=gs?Math.round(r/gs)+"s":r+"ms"}function hF(r){var e=Math.abs(r);return e>=_n?sl(r,e,_n,"day"):e>=vs?sl(r,e,vs,"hour"):e>=ws?sl(r,e,ws,"minute"):e>=gs?sl(r,e,gs,"second"):r+" ms"}function sl(r,e,t,i){var n=e>=t*1.5;return Math.round(r/t)+" "+i+(n?"s":"")}});var qp=v((W8,$v)=>{function pF(r){t.debug=t,t.default=t,t.coerce=u,t.disable=s,t.enable=n,t.enabled=o,t.humanize=Uv(),t.destroy=d,Object.keys(r).forEach(h=>{t[h]=r[h]}),t.names=[],t.skips=[],t.formatters={};function e(h){let p=0;for(let f=0;f<h.length;f++)p=(p<<5)-p+h.charCodeAt(f),p|=0;return t.colors[Math.abs(p)%t.colors.length]}t.selectColor=e;function t(h){let p,f=null,m,_;function g(...w){if(!g.enabled)return;let b=g,C=Number(new Date),E=C-(p||C);b.diff=E,b.prev=p,b.curr=C,p=C,w[0]=t.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let N=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(L,S)=>{if(L==="%%")return"%";N++;let T=t.formatters[S];if(typeof T=="function"){let F=w[N];L=T.call(b,F),w.splice(N,1),N--}return L}),t.formatArgs.call(b,w),(b.log||t.log).apply(b,w)}return g.namespace=h,g.useColors=t.useColors(),g.color=t.selectColor(h),g.extend=i,g.destroy=t.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(m!==t.namespaces&&(m=t.namespaces,_=t.enabled(h)),_),set:w=>{f=w}}),typeof t.init=="function"&&t.init(g),g}function i(h,p){let f=t(this.namespace+(typeof p=="undefined"?":":p)+h);return f.log=this.log,f}function n(h){t.save(h),t.namespaces=h,t.names=[],t.skips=[];let p,f=(typeof h=="string"?h:"").split(/[\s,]+/),m=f.length;for(p=0;p<m;p++)!f[p]||(h=f[p].replace(/\*/g,".*?"),h[0]==="-"?t.skips.push(new RegExp("^"+h.substr(1)+"$")):t.names.push(new RegExp("^"+h+"$")))}function s(){let h=[...t.names.map(l),...t.skips.map(l).map(p=>"-"+p)].join(",");return t.enable(""),h}function o(h){if(h[h.length-1]==="*")return!0;let p,f;for(p=0,f=t.skips.length;p<f;p++)if(t.skips[p].test(h))return!1;for(p=0,f=t.names.length;p<f;p++)if(t.names[p].test(h))return!0;return!1}function l(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}function u(h){return h instanceof Error?h.stack||h.message:h}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}$v.exports=pF});var zv=v(($t,ol)=>{$t.formatArgs=mF;$t.save=_F;$t.load=gF;$t.useColors=fF;$t.storage=wF();$t.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();$t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function fF(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function mF(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+ol.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,i=0;r[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(t++,n==="%c"&&(i=t))}),r.splice(i,0,e)}$t.log=console.debug||console.log||(()=>{});function _F(r){try{r?$t.storage.setItem("debug",r):$t.storage.removeItem("debug")}catch(e){}}function gF(){let r;try{r=$t.storage.getItem("debug")}catch(e){}return!r&&typeof process!="undefined"&&"env"in process&&(r=process.env.DEBUG),r}function wF(){try{return localStorage}catch(r){}}ol.exports=qp()($t);var{formatters:vF}=ol.exports;vF.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Gv=v((mt,cl)=>{var yF=x("tty"),al=x("util");mt.init=OF;mt.log=EF;mt.formatArgs=xF;mt.save=CF;mt.load=kF;mt.useColors=bF;mt.destroy=al.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");mt.colors=[6,2,3,4,5,1];try{let r=x("supports-color");r&&(r.stderr||r).level>=2&&(mt.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(r){}mt.inspectOpts=Object.keys(process.env).filter(r=>/^debug_/i.test(r)).reduce((r,e)=>{let t=e.substring(6).toLowerCase().replace(/_([a-z])/g,(n,s)=>s.toUpperCase()),i=process.env[e];return/^(yes|on|true|enabled)$/i.test(i)?i=!0:/^(no|off|false|disabled)$/i.test(i)?i=!1:i==="null"?i=null:i=Number(i),r[t]=i,r},{});function bF(){return"colors"in mt.inspectOpts?Boolean(mt.inspectOpts.colors):yF.isatty(process.stderr.fd)}function xF(r){let{namespace:e,useColors:t}=this;if(t){let i=this.color,n="[3"+(i<8?i:"8;5;"+i),s=`  ${n};1m${e} [0m`;r[0]=s+r[0].split(`
`).join(`
`+s),r.push(n+"m+"+cl.exports.humanize(this.diff)+"[0m")}else r[0]=SF()+e+" "+r[0]}function SF(){return mt.inspectOpts.hideDate?"":new Date().toISOString()+" "}function EF(...r){return process.stderr.write(al.format(...r)+`
`)}function CF(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function kF(){return process.env.DEBUG}function OF(r){r.inspectOpts={};let e=Object.keys(mt.inspectOpts);for(let t=0;t<e.length;t++)r.inspectOpts[e[t]]=mt.inspectOpts[e[t]]}cl.exports=qp()(mt);var{formatters:Vv}=cl.exports;Vv.o=function(r){return this.inspectOpts.colors=this.useColors,al.inspect(r,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Vv.O=function(r){return this.inspectOpts.colors=this.useColors,al.inspect(r,this.inspectOpts)}});var Pr=v((U8,Bp)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?Bp.exports=zv():Bp.exports=Gv()});var Kv=v(Hp=>{"use strict";Object.defineProperty(Hp,"__esModule",{value:!0});function PF(r){return function(e,t){return new Promise((i,n)=>{r.call(this,e,t,(s,o)=>{s?n(s):i(o)})})}}Hp.default=PF});var Up=v((Wp,Xv)=>{"use strict";var Jv=Wp&&Wp.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},TF=x("events"),AF=Jv(Pr()),IF=Jv(Kv()),ia=AF.default("agent-base");function MF(r){return Boolean(r)&&typeof r.addRequest=="function"}function jp(){let{stack:r}=new Error;return typeof r!="string"?!1:r.split(`
`).some(e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1)}function ll(r,e){return new ll.Agent(r,e)}(function(r){class e extends TF.EventEmitter{constructor(i,n){super();let s=n;typeof i=="function"?this.callback=i:i&&(s=i),this.timeout=null,s&&typeof s.timeout=="number"&&(this.timeout=s.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:jp()?443:80}set defaultPort(i){this.explicitDefaultPort=i}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:jp()?"https:":"http:"}set protocol(i){this.explicitProtocol=i}callback(i,n,s){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(i,n){let s=Object.assign({},n);typeof s.secureEndpoint!="boolean"&&(s.secureEndpoint=jp()),s.host==null&&(s.host="localhost"),s.port==null&&(s.port=s.secureEndpoint?443:80),s.protocol==null&&(s.protocol=s.secureEndpoint?"https:":"http:"),s.host&&s.path&&delete s.path,delete s.agent,delete s.hostname,delete s._defaultAgent,delete s.defaultPort,delete s.createConnection,i._last=!0,i.shouldKeepAlive=!1;let o=!1,l=null,u=s.timeout||this.timeout,d=m=>{i._hadError||(i.emit("error",m),i._hadError=!0)},h=()=>{l=null,o=!0;let m=new Error(`A "socket" was not created for HTTP request before ${u}ms`);m.code="ETIMEOUT",d(m)},p=m=>{o||(l!==null&&(clearTimeout(l),l=null),d(m))},f=m=>{if(o)return;if(l!=null&&(clearTimeout(l),l=null),MF(m)){ia("Callback returned another Agent instance %o",m.constructor.name),m.addRequest(i,s);return}if(m){m.once("free",()=>{this.freeSocket(m,s)}),i.onSocket(m);return}let _=new Error(`no Duplex stream was returned to agent-base for \`${i.method} ${i.path}\``);d(_)};if(typeof this.callback!="function"){d(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(ia("Converting legacy callback function to promise"),this.promisifiedCallback=IF.default(this.callback)):this.promisifiedCallback=this.callback),typeof u=="number"&&u>0&&(l=setTimeout(h,u)),"port"in s&&typeof s.port!="number"&&(s.port=Number(s.port));try{ia("Resolving socket for %o request: %o",s.protocol,`${i.method} ${i.path}`),Promise.resolve(this.promisifiedCallback(i,s)).then(f,p)}catch(m){Promise.reject(m).catch(p)}}freeSocket(i,n){ia("Freeing socket %o %o",i.constructor.name,n),i.destroy()}destroy(){ia("Destroying agent %o",this.constructor.name)}}r.Agent=e,r.prototype=r.Agent.prototype})(ll||(ll={}));Xv.exports=ll});var Yv=v(sa=>{"use strict";var FF=sa&&sa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(sa,"__esModule",{value:!0});var RF=FF(Pr()),na=RF.default("https-proxy-agent:parse-proxy-response");function NF(r){return new Promise((e,t)=>{let i=0,n=[];function s(){let p=r.read();p?h(p):r.once("readable",s)}function o(){r.removeListener("end",u),r.removeListener("error",d),r.removeListener("close",l),r.removeListener("readable",s)}function l(p){na("onclose had error %o",p)}function u(){na("onend")}function d(p){o(),na("onerror %o",p),t(p)}function h(p){n.push(p),i+=p.length;let f=Buffer.concat(n,i);if(f.indexOf(`\r
\r
`)===-1){na("have not received end of HTTP headers yet..."),s();return}let _=f.toString("ascii",0,f.indexOf(`\r
`)),g=+_.split(" ")[1];na("got proxy server response: %o",_),e({statusCode:g,buffered:f})}r.on("error",d),r.on("close",l),r.on("end",u),s()})}sa.default=NF});var ty=v(gn=>{"use strict";var DF=gn&&gn.__awaiter||function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(h){try{d(i.next(h))}catch(p){o(p)}}function u(h){try{d(i.throw(h))}catch(p){o(p)}}function d(h){h.done?s(h.value):n(h.value).then(l,u)}d((i=i.apply(r,e||[])).next())})},ys=gn&&gn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gn,"__esModule",{value:!0});var Zv=ys(x("net")),Qv=ys(x("tls")),LF=ys(x("url")),qF=ys(x("assert")),BF=ys(Pr()),HF=Up(),jF=ys(Yv()),oa=BF.default("https-proxy-agent:agent"),ey=class extends HF.Agent{constructor(e){let t;if(typeof e=="string"?t=LF.default.parse(e):t=e,!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");oa("creating new HttpsProxyAgent instance: %o",t);super(t);let i=Object.assign({},t);this.secureProxy=t.secureProxy||$F(i.protocol),i.host=i.hostname||i.host,typeof i.port=="string"&&(i.port=parseInt(i.port,10)),!i.port&&i.host&&(i.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in i)&&(i.ALPNProtocols=["http 1.1"]),i.host&&i.path&&(delete i.path,delete i.pathname),this.proxy=i}callback(e,t){return DF(this,void 0,void 0,function*(){let{proxy:i,secureProxy:n}=this,s;n?(oa("Creating `tls.Socket`: %o",i),s=Qv.default.connect(i)):(oa("Creating `net.Socket`: %o",i),s=Zv.default.connect(i));let o=Object.assign({},i.headers),u=`CONNECT ${`${t.host}:${t.port}`} HTTP/1.1\r
`;i.auth&&(o["Proxy-Authorization"]=`Basic ${Buffer.from(i.auth).toString("base64")}`);let{host:d,port:h,secureEndpoint:p}=t;UF(h,p)||(d+=`:${h}`),o.Host=d,o.Connection="close";for(let w of Object.keys(o))u+=`${w}: ${o[w]}\r
`;let f=jF.default(s);s.write(`${u}\r
`);let{statusCode:m,buffered:_}=yield f;if(m===200){if(e.once("socket",WF),t.secureEndpoint){let w=t.servername||t.host;if(!w)throw new Error('Could not determine "servername"');return oa("Upgrading socket connection to TLS"),Qv.default.connect(Object.assign(Object.assign({},zF(t,"host","hostname","path","port")),{socket:s,servername:w}))}return s}s.destroy();let g=new Zv.default.Socket;return g.readable=!0,e.once("socket",w=>{oa("replaying proxy buffer for failed request"),qF.default(w.listenerCount("data")>0),w.push(_),w.push(null)}),g})}};gn.default=ey;function WF(r){r.resume()}function UF(r,e){return Boolean(!e&&r===80||e&&r===443)}function $F(r){return typeof r=="string"?/^https:?$/i.test(r):!1}function zF(r,...e){let t={},i;for(i in r)e.includes(i)||(t[i]=r[i]);return t}});var Gp=v((Vp,ry)=>{"use strict";var VF=Vp&&Vp.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},$p=VF(ty());function zp(r){return new $p.default(r)}(function(r){r.HttpsProxyAgent=$p.default,r.prototype=$p.default.prototype})(zp||(zp={}));ry.exports=zp});var Kp=v((G8,GF)=>{GF.exports={name:"playwright-core",version:"1.16.3",description:"A high-level API to automate web browsers",repository:"github:Microsoft/playwright",homepage:"https://playwright.dev",engines:{node:">=12"},scripts:{prepare:'babel --config-file ../../babel.config.json -s --extensions ".ts" --out-dir lib/utils/ src/utils'},author:{name:"Microsoft Corporation"},license:"Apache-2.0",exports:{".":{import:"./index.mjs",require:"./index.js"},"./cli":"./cli.js","./package.json":"./package.json","./lib/grid/gridServer":"./lib/grid/gridServer.js","./lib/grid/gridClient":"./lib/grid/gridClient.js","./lib/grid/dockerGridFactory":"./lib/grid/dockerGridFactory.js","./lib/utils/async":"./lib/utils/async.js","./lib/utils/httpServer":"./lib/utils/httpServer.js","./lib/utils/multimap":"./lib/utils/multimap.js","./lib/utils/processLauncher":"./lib/utils/processLauncher.js","./lib/utils/registry":"./lib/utils/registry.js","./lib/utils/utils":"./lib/utils/utils.js"},types:"types/types.d.ts",bin:{playwright:"./cli.js"},dependencies:{commander:"^8.2.0",debug:"^4.1.1","extract-zip":"^2.0.1","https-proxy-agent":"^5.0.0","jpeg-js":"^0.4.2",mime:"^2.4.6",pngjs:"^5.0.0",progress:"^2.0.3","proper-lockfile":"^4.1.1","proxy-from-env":"^1.1.0",rimraf:"^3.0.2","socks-proxy-agent":"^6.1.0","stack-utils":"^2.0.3",ws:"^7.4.6",yauzl:"^2.10.0",yazl:"^2.5.1"}}});var G=v(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.fetchData=sR;Ce.download=aR;Ce.spawnAsync=uR;Ce.makeWaitForNextTask=dR;Ce.assert=hR;Ce.debugAssert=pR;Ce.isString=fR;Ce.isRegExp=mR;Ce.isObject=_R;Ce.isError=gR;Ce.debugMode=wR;Ce.setUnderTest=vR;Ce.isUnderTest=ay;Ce.getFromENV=Yp;Ce.getAsBooleanFromENV=yR;Ce.mkdirIfNeeded=bR;Ce.headersObjectToArray=xR;Ce.headersArrayToObject=SR;Ce.monotonicTime=ER;Ce.objectToArray=CR;Ce.arrayToObject=kR;Ce.calculateFileSha1=OR;Ce.calculateSha1=PR;Ce.createGuid=TR;Ce.removeFolders=AR;Ce.canAccessFile=IR;Ce.getUserAgent=MR;Ce.getPlaywrightVersion=ly;Ce.constructURLBasedOnBaseURL=FR;Ce.wrapInASCIIBox=NR;Ce.isFilePayload=DR;Ce.streamToString=LR;Ce.hostPlatform=Ce.existsAsync=void 0;var KF=fi(x("path")),aa=fi(x("fs")),JF=fi(x("stream")),XF=fi(Iv()),Jp=ny(x("crypto")),bs=fi(x("os")),YF=fi(x("http")),ZF=fi(x("https")),QF=x("child_process"),eR=Fv(),ul=ny(x("url")),tR=nl(),rR=fi(jv());function iy(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(iy=function(i){return i?t:e})(r)}function ny(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=iy(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function fi(r){return r&&r.__esModule?r:{default:r}}var iR=Gp(),nR=r=>new Promise(e=>aa.default.stat(r,t=>e(!t)));Ce.existsAsync=nR;function Xp(r,e,t){let i=ul.parse(r.url),n=y({},i);n.method=r.method||"GET",n.headers=r.headers;let s=(0,eR.getProxyForUrl)(r.url);if(s)if(r.url.startsWith("http:")){let u=ul.parse(s);n={path:i.href,host:u.hostname,port:u.port}}else{let u=ul.parse(s);u.secureProxy=u.protocol==="https:",n.agent=new iR(u),n.rejectUnauthorized=!1}let o=u=>{let d=u.statusCode||0;d>=300&&d<400&&u.headers.location?Xp(R(y({},r),{url:u.headers.location}),e,t):e(u)},l=n.protocol==="https:"?ZF.default.request(n,o):YF.default.request(n,o);if(l.on("error",t),r.timeout!==void 0){let u=()=>{t(new Error(`Request to ${r.url} timed out after ${r.timeout}ms`)),l.abort()};if(r.timeout<=0){u();return}l.setTimeout(r.timeout,u)}l.end(r.data)}function sR(r,e){return new Promise((t,i)=>{Xp(r,n=>c(this,null,function*(){if(n.statusCode!==200){let o=e?yield e(n):new Error(`fetch failed: server returned code ${n.statusCode}. URL: ${r.url}`);i(o);return}let s="";n.on("data",o=>s+=o),n.on("error",o=>i(o)),n.on("end",()=>t(s))}),i)})}function oR(r,e,t={}){let{progressCallback:i,log:n=()=>{}}=t;n("running download:"),n(`-- from url: ${r}`),n(`-- to location: ${e}`);let s=({error:h})=>{},o=0,l=0,u=new Promise(h=>{s=h});return Xp({url:r},h=>{if(n(`-- response status code: ${h.statusCode}`),h.statusCode!==200){let f=new Error(`Download failed: server returned code ${h.statusCode}. URL: ${r}`);h.resume(),s({error:f});return}let p=aa.default.createWriteStream(e);p.on("finish",()=>s({error:null})),p.on("error",f=>s({error:f})),h.pipe(p),l=parseInt(h.headers["content-length"]||"0",10),n(`-- total bytes: ${l}`),i&&h.on("data",d)},h=>s({error:h})),u;function d(h){o+=h.length,i(o,l)}}function aR(i,n){return c(this,arguments,function*(r,e,t={}){let{progressBarName:s="file",retryCount:o=3,log:l=()=>{}}=t;for(let u=1;u<=o;++u){l(`downloading ${s} - attempt #${u}`);let{error:d}=yield oR(r,e,{progressCallback:cR(s),log:l});if(!d){l(`SUCCESS downloading ${s}`);break}let h=(d==null?void 0:d.message)||"";if(l(`attempt #${u} - ERROR: ${h}`),u<o&&(h.includes("ECONNRESET")||h.includes("ETIMEDOUT"))){let p=Math.random()*200+250*Math.pow(1.5,u);l(`sleeping ${p}ms before retry...`),yield new Promise(f=>setTimeout(f,p))}else throw d}})}function cR(r){let e,t=0;return(i,n)=>{if(!process.stderr.isTTY)return;e||(e=new rR.default(`Downloading ${r} - ${lR(n)} [:bar] :percent :etas `,{complete:"=",incomplete:" ",width:20,total:n}));let s=i-t;t=i,e.tick(s)}}function lR(r){let e=r/1024/1024;return`${Math.round(e*10)/10} Mb`}function uR(r,e,t={}){let i=(0,QF.spawn)(r,e,t);return new Promise(n=>{let s="",o="";i.stdout&&i.stdout.on("data",l=>s+=l),i.stderr&&i.stderr.on("data",l=>o+=l),i.on("close",l=>n({stdout:s,stderr:o,code:l})),i.on("error",l=>n({stdout:s,stderr:o,code:0,error:l}))})}function dR(){if(process.versions.electron)return i=>setTimeout(i,0);if(parseInt(process.versions.node,10)>=11)return setImmediate;let r=!1,e=[],t=()=>{let i=e.shift();if(!i){r=!1;return}setImmediate(t),i()};return i=>{e.push(i),r||(r=!0,setImmediate(t))}}function hR(r,e){if(!r)throw new Error(e||"Assertion error")}function pR(r,e){if(ay()&&!r)throw new Error(e)}function fR(r){return typeof r=="string"||r instanceof String}function mR(r){return r instanceof RegExp||Object.prototype.toString.call(r)==="[object RegExp]"}function _R(r){return typeof r=="object"&&r!==null}function gR(r){return r instanceof Error||r&&r.__proto__&&r.__proto__.name==="Error"}var sy=Yp("PWDEBUG")||"";function wR(){return sy==="console"?"console":sy?"inspector":""}var oy=!1;function vR(){oy=!0}function ay(){return oy}function Yp(r){let e=process.env[r];return e=e===void 0?process.env[`npm_config_${r.toLowerCase()}`]:e,e=e===void 0?process.env[`npm_package_config_${r.toLowerCase()}`]:e,e}function yR(r){let e=Yp(r);return!!e&&e!=="false"&&e!=="0"}function bR(r){return c(this,null,function*(){yield aa.default.promises.mkdir(KF.default.dirname(r),{recursive:!0}).catch(()=>{})})}function xR(r,e,t){t||(t=e);let i=[];for(let n in r){let s=r[n];if(e){let o=n.toLowerCase()==="set-cookie"?t:e;for(let l of s.split(o))i.push({name:n,value:l.trim()})}else i.push({name:n,value:s})}return i}function SR(r,e){let t={};for(let{name:i,value:n}of r)t[e?i.toLowerCase():i]=n;return t}function ER(){let[r,e]=process.hrtime();return r*1e3+(e/1e3|0)/1e3}var cy=class extends JF.default.Writable{constructor(...e){super(...e);this._hash=Jp.createHash("sha1")}_write(e,t,i){this._hash.update(e),i()}digest(){return this._hash.digest("hex")}};function CR(r){if(!r)return;let e=[];for(let[t,i]of Object.entries(r))e.push({name:t,value:String(i)});return e}function kR(r){if(!r)return;let e={};for(let{name:t,value:i}of r)e[t]=i;return e}function OR(r){return c(this,null,function*(){let e=new cy,t=aa.default.createReadStream(r);return t.on("open",()=>t.pipe(e)),yield new Promise((i,n)=>{e.on("finish",i),e.on("error",n)}),e.digest()})}function PR(r){let e=Jp.createHash("sha1");return e.update(r),e.digest("hex")}function TR(){return Jp.randomBytes(16).toString("hex")}function AR(r){return c(this,null,function*(){return yield Promise.all(r.map(e=>new Promise(t=>{(0,XF.default)(e,{maxBusyTries:10},i=>{t(i!=null?i:void 0)})})))})}function IR(r){if(!r)return!1;try{return aa.default.accessSync(r),!0}catch(e){return!1}}function MR(){return`Playwright/${ly()} (${bs.default.arch()}/${bs.default.platform()}/${bs.default.release()})`}function ly(r=!1){let e=Kp();return r?e.version.split(".").slice(0,2).join("."):e.version}function FR(r,e){try{return new ul.URL(e,r).toString()}catch(t){return e}}var RR=(()=>{let r=bs.default.platform();if(r==="darwin"){let e=bs.default.release().split(".").map(i=>parseInt(i,10)),t="";if(e[0]<18)t="mac10.13";else if(e[0]===18)t="mac10.14";else if(e[0]===19)t="mac10.15";else{let i=11;t="mac"+Math.min(e[0]-9,i),bs.default.cpus().some(n=>n.model.includes("Apple"))&&(t+="-arm64")}return t}if(r==="linux"){let e=(0,tR.getUbuntuVersionSync)();return parseInt(e,10)<=19?"ubuntu18.04":"ubuntu20.04"}return r==="win32"?"win64":r})();Ce.hostPlatform=RR;function NR(r,e=0){let t=r.split(`
`),i=Math.max(...t.map(n=>n.length));return["\u2554"+"\u2550".repeat(i+e*2)+"\u2557",...t.map(n=>"\u2551"+" ".repeat(e)+n+" ".repeat(i-n.length+e)+"\u2551"),"\u255A"+"\u2550".repeat(i+e*2)+"\u255D"].join(`
`)}function DR(r){return typeof r=="object"&&r.name&&r.mimeType&&r.buffer}function LR(r){return new Promise((e,t)=>{let i=[];r.on("data",n=>i.push(Buffer.from(n))),r.on("error",t),r.on("end",()=>e(Buffer.concat(i).toString("utf8")))})}});var Zp=v(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.tEnum=Ve.tObject=Ve.tArray=Ve.tOptional=Ve.tAny=Ve.tUndefined=Ve.tBinary=Ve.tString=Ve.tBoolean=Ve.tNumber=Ve.ValidationError=void 0;var qR=G(),lr=class extends Error{};Ve.ValidationError=lr;var BR=(r,e)=>{if(r instanceof Number)return r.valueOf();if(typeof r=="number")return r;throw new lr(`${e}: expected number, got ${typeof r}`)};Ve.tNumber=BR;var HR=(r,e)=>{if(r instanceof Boolean)return r.valueOf();if(typeof r=="boolean")return r;throw new lr(`${e}: expected boolean, got ${typeof r}`)};Ve.tBoolean=HR;var jR=(r,e)=>{if(r instanceof String)return r.valueOf();if(typeof r=="string")return r;throw new lr(`${e}: expected string, got ${typeof r}`)};Ve.tString=jR;var WR=(r,e)=>{if(r instanceof String)return r.valueOf();if(typeof r=="string")return r;throw new lr(`${e}: expected base64-encoded buffer, got ${typeof r}`)};Ve.tBinary=WR;var UR=(r,e)=>{if(Object.is(r,void 0))return r;throw new lr(`${e}: expected undefined, got ${typeof r}`)};Ve.tUndefined=UR;var $R=(r,e)=>r;Ve.tAny=$R;var zR=r=>(e,t)=>Object.is(e,void 0)?e:r(e,t);Ve.tOptional=zR;var VR=r=>(e,t)=>{if(!Array.isArray(e))throw new lr(`${t}: expected array, got ${typeof e}`);return e.map((i,n)=>r(i,t+"["+n+"]"))};Ve.tArray=VR;var GR=r=>(e,t)=>{if(Object.is(e,null))throw new lr(`${t}: expected object, got null`);if(typeof e!="object")throw new lr(`${t}: expected object, got ${typeof e}`);let i={};for(let[n,s]of Object.entries(r)){let o=s(e[n],t?t+"."+n:n);Object.is(o,void 0)||(i[n]=o)}if((0,qR.isUnderTest)())for(let[n,s]of Object.entries(e))n.startsWith("__testHook")&&(i[n]=s);return i};Ve.tObject=GR;var KR=r=>(e,t)=>{if(!r.includes(e))throw new lr(`${t}: expected one of (${r.join("|")})`);return e};Ve.tEnum=KR});var Qp=v(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});ca.createScheme=JR;Object.defineProperty(ca,"Validator",{enumerable:!0,get:function(){return a.Validator}});Object.defineProperty(ca,"ValidationError",{enumerable:!0,get:function(){return a.ValidationError}});var a=Zp();function JR(r){let e={},t=i=>(n,s)=>{let o=e[i];if(!o)throw new a.ValidationError(s+': unknown type "'+i+'"');return o(n,s)};return e.StackFrame=(0,a.tObject)({file:a.tString,line:(0,a.tOptional)(a.tNumber),column:(0,a.tOptional)(a.tNumber),function:(0,a.tOptional)(a.tString)}),e.Metadata=(0,a.tObject)({stack:(0,a.tOptional)((0,a.tArray)(t("StackFrame"))),apiName:(0,a.tOptional)(a.tString),internal:(0,a.tOptional)(a.tBoolean)}),e.Point=(0,a.tObject)({x:a.tNumber,y:a.tNumber}),e.Rect=(0,a.tObject)({x:a.tNumber,y:a.tNumber,width:a.tNumber,height:a.tNumber}),e.SerializedValue=(0,a.tObject)({n:(0,a.tOptional)(a.tNumber),b:(0,a.tOptional)(a.tBoolean),s:(0,a.tOptional)(a.tString),v:(0,a.tOptional)((0,a.tEnum)(["null","undefined","NaN","Infinity","-Infinity","-0"])),d:(0,a.tOptional)(a.tString),r:(0,a.tOptional)((0,a.tObject)({p:a.tString,f:a.tString})),a:(0,a.tOptional)((0,a.tArray)(t("SerializedValue"))),o:(0,a.tOptional)((0,a.tArray)((0,a.tObject)({k:a.tString,v:t("SerializedValue")}))),h:(0,a.tOptional)(a.tNumber)}),e.SerializedArgument=(0,a.tObject)({value:t("SerializedValue"),handles:(0,a.tArray)(r("*"))}),e.ExpectedTextValue=(0,a.tObject)({string:(0,a.tOptional)(a.tString),regexSource:(0,a.tOptional)(a.tString),regexFlags:(0,a.tOptional)(a.tString),matchSubstring:(0,a.tOptional)(a.tBoolean),normalizeWhiteSpace:(0,a.tOptional)(a.tBoolean)}),e.AXNode=(0,a.tObject)({role:a.tString,name:a.tString,valueString:(0,a.tOptional)(a.tString),valueNumber:(0,a.tOptional)(a.tNumber),description:(0,a.tOptional)(a.tString),keyshortcuts:(0,a.tOptional)(a.tString),roledescription:(0,a.tOptional)(a.tString),valuetext:(0,a.tOptional)(a.tString),disabled:(0,a.tOptional)(a.tBoolean),expanded:(0,a.tOptional)(a.tBoolean),focused:(0,a.tOptional)(a.tBoolean),modal:(0,a.tOptional)(a.tBoolean),multiline:(0,a.tOptional)(a.tBoolean),multiselectable:(0,a.tOptional)(a.tBoolean),readonly:(0,a.tOptional)(a.tBoolean),required:(0,a.tOptional)(a.tBoolean),selected:(0,a.tOptional)(a.tBoolean),checked:(0,a.tOptional)((0,a.tEnum)(["checked","unchecked","mixed"])),pressed:(0,a.tOptional)((0,a.tEnum)(["pressed","released","mixed"])),level:(0,a.tOptional)(a.tNumber),valuemin:(0,a.tOptional)(a.tNumber),valuemax:(0,a.tOptional)(a.tNumber),autocomplete:(0,a.tOptional)(a.tString),haspopup:(0,a.tOptional)(a.tString),invalid:(0,a.tOptional)(a.tString),orientation:(0,a.tOptional)(a.tString),children:(0,a.tOptional)((0,a.tArray)(t("AXNode")))}),e.SetNetworkCookie=(0,a.tObject)({name:a.tString,value:a.tString,url:(0,a.tOptional)(a.tString),domain:(0,a.tOptional)(a.tString),path:(0,a.tOptional)(a.tString),expires:(0,a.tOptional)(a.tNumber),httpOnly:(0,a.tOptional)(a.tBoolean),secure:(0,a.tOptional)(a.tBoolean),sameSite:(0,a.tOptional)((0,a.tEnum)(["Strict","Lax","None"]))}),e.NetworkCookie=(0,a.tObject)({name:a.tString,value:a.tString,domain:a.tString,path:a.tString,expires:a.tNumber,httpOnly:a.tBoolean,secure:a.tBoolean,sameSite:(0,a.tEnum)(["Strict","Lax","None"])}),e.NameValue=(0,a.tObject)({name:a.tString,value:a.tString}),e.OriginStorage=(0,a.tObject)({origin:a.tString,localStorage:(0,a.tArray)(t("NameValue"))}),e.SerializedError=(0,a.tObject)({error:(0,a.tOptional)((0,a.tObject)({message:a.tString,name:a.tString,stack:(0,a.tOptional)(a.tString)})),value:(0,a.tOptional)(t("SerializedValue"))}),e.FormField=(0,a.tObject)({name:a.tString,value:(0,a.tOptional)(a.tString),file:(0,a.tOptional)((0,a.tObject)({name:a.tString,mimeType:a.tString,buffer:a.tBinary}))}),e.InterceptedResponse=(0,a.tObject)({request:r("Request"),status:a.tNumber,statusText:a.tString,headers:(0,a.tArray)(t("NameValue"))}),e.FetchRequestFetchParams=(0,a.tObject)({url:a.tString,params:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),method:(0,a.tOptional)(a.tString),headers:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),postData:(0,a.tOptional)(a.tBinary),jsonData:(0,a.tOptional)(a.tAny),formData:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),multipartData:(0,a.tOptional)((0,a.tArray)(t("FormField"))),timeout:(0,a.tOptional)(a.tNumber),failOnStatusCode:(0,a.tOptional)(a.tBoolean),ignoreHTTPSErrors:(0,a.tOptional)(a.tBoolean)}),e.FetchRequestFetchResponseBodyParams=(0,a.tObject)({fetchUid:a.tString}),e.FetchRequestStorageStateParams=(0,a.tOptional)((0,a.tObject)({})),e.FetchRequestDisposeFetchResponseParams=(0,a.tObject)({fetchUid:a.tString}),e.FetchRequestDisposeParams=(0,a.tOptional)((0,a.tObject)({})),e.FetchResponse=(0,a.tObject)({fetchUid:a.tString,url:a.tString,status:a.tNumber,statusText:a.tString,headers:(0,a.tArray)(t("NameValue"))}),e.RootInitializeParams=(0,a.tObject)({sdkLanguage:a.tString}),e.PlaywrightSocksConnectedParams=(0,a.tObject)({uid:a.tString,host:a.tString,port:a.tNumber}),e.PlaywrightSocksFailedParams=(0,a.tObject)({uid:a.tString,errorCode:a.tString}),e.PlaywrightSocksDataParams=(0,a.tObject)({uid:a.tString,data:a.tBinary}),e.PlaywrightSocksErrorParams=(0,a.tObject)({uid:a.tString,error:a.tString}),e.PlaywrightSocksEndParams=(0,a.tObject)({uid:a.tString}),e.PlaywrightNewRequestParams=(0,a.tObject)({baseURL:(0,a.tOptional)(a.tString),userAgent:(0,a.tOptional)(a.tString),ignoreHTTPSErrors:(0,a.tOptional)(a.tBoolean),extraHTTPHeaders:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),httpCredentials:(0,a.tOptional)((0,a.tObject)({username:a.tString,password:a.tString})),proxy:(0,a.tOptional)((0,a.tObject)({server:a.tString,bypass:(0,a.tOptional)(a.tString),username:(0,a.tOptional)(a.tString),password:(0,a.tOptional)(a.tString)})),timeout:(0,a.tOptional)(a.tNumber),storageState:(0,a.tOptional)((0,a.tObject)({cookies:(0,a.tArray)(t("NetworkCookie")),origins:(0,a.tArray)(t("OriginStorage"))}))}),e.SelectorsRegisterParams=(0,a.tObject)({name:a.tString,source:a.tString,contentScript:(0,a.tOptional)(a.tBoolean)}),e.BrowserTypeConnectParams=(0,a.tObject)({wsEndpoint:a.tString,headers:(0,a.tOptional)(a.tAny),slowMo:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber)}),e.BrowserTypeLaunchParams=(0,a.tObject)({channel:(0,a.tOptional)(a.tString),executablePath:(0,a.tOptional)(a.tString),args:(0,a.tOptional)((0,a.tArray)(a.tString)),ignoreAllDefaultArgs:(0,a.tOptional)(a.tBoolean),ignoreDefaultArgs:(0,a.tOptional)((0,a.tArray)(a.tString)),handleSIGINT:(0,a.tOptional)(a.tBoolean),handleSIGTERM:(0,a.tOptional)(a.tBoolean),handleSIGHUP:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber),env:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),headless:(0,a.tOptional)(a.tBoolean),devtools:(0,a.tOptional)(a.tBoolean),proxy:(0,a.tOptional)((0,a.tObject)({server:a.tString,bypass:(0,a.tOptional)(a.tString),username:(0,a.tOptional)(a.tString),password:(0,a.tOptional)(a.tString)})),downloadsPath:(0,a.tOptional)(a.tString),tracesDir:(0,a.tOptional)(a.tString),chromiumSandbox:(0,a.tOptional)(a.tBoolean),firefoxUserPrefs:(0,a.tOptional)(a.tAny),slowMo:(0,a.tOptional)(a.tNumber)}),e.BrowserTypeLaunchPersistentContextParams=(0,a.tObject)({channel:(0,a.tOptional)(a.tString),executablePath:(0,a.tOptional)(a.tString),args:(0,a.tOptional)((0,a.tArray)(a.tString)),ignoreAllDefaultArgs:(0,a.tOptional)(a.tBoolean),ignoreDefaultArgs:(0,a.tOptional)((0,a.tArray)(a.tString)),handleSIGINT:(0,a.tOptional)(a.tBoolean),handleSIGTERM:(0,a.tOptional)(a.tBoolean),handleSIGHUP:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber),env:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),headless:(0,a.tOptional)(a.tBoolean),devtools:(0,a.tOptional)(a.tBoolean),proxy:(0,a.tOptional)((0,a.tObject)({server:a.tString,bypass:(0,a.tOptional)(a.tString),username:(0,a.tOptional)(a.tString),password:(0,a.tOptional)(a.tString)})),downloadsPath:(0,a.tOptional)(a.tString),tracesDir:(0,a.tOptional)(a.tString),chromiumSandbox:(0,a.tOptional)(a.tBoolean),noDefaultViewport:(0,a.tOptional)(a.tBoolean),viewport:(0,a.tOptional)((0,a.tObject)({width:a.tNumber,height:a.tNumber})),screen:(0,a.tOptional)((0,a.tObject)({width:a.tNumber,height:a.tNumber})),ignoreHTTPSErrors:(0,a.tOptional)(a.tBoolean),javaScriptEnabled:(0,a.tOptional)(a.tBoolean),bypassCSP:(0,a.tOptional)(a.tBoolean),userAgent:(0,a.tOptional)(a.tString),locale:(0,a.tOptional)(a.tString),timezoneId:(0,a.tOptional)(a.tString),geolocation:(0,a.tOptional)((0,a.tObject)({longitude:a.tNumber,latitude:a.tNumber,accuracy:(0,a.tOptional)(a.tNumber)})),permissions:(0,a.tOptional)((0,a.tArray)(a.tString)),extraHTTPHeaders:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),offline:(0,a.tOptional)(a.tBoolean),httpCredentials:(0,a.tOptional)((0,a.tObject)({username:a.tString,password:a.tString})),deviceScaleFactor:(0,a.tOptional)(a.tNumber),isMobile:(0,a.tOptional)(a.tBoolean),hasTouch:(0,a.tOptional)(a.tBoolean),colorScheme:(0,a.tOptional)((0,a.tEnum)(["dark","light","no-preference"])),reducedMotion:(0,a.tOptional)((0,a.tEnum)(["reduce","no-preference"])),forcedColors:(0,a.tOptional)((0,a.tEnum)(["active","none"])),acceptDownloads:(0,a.tOptional)(a.tBoolean),baseURL:(0,a.tOptional)(a.tString),_debugName:(0,a.tOptional)(a.tString),recordVideo:(0,a.tOptional)((0,a.tObject)({dir:a.tString,size:(0,a.tOptional)((0,a.tObject)({width:a.tNumber,height:a.tNumber}))})),recordHar:(0,a.tOptional)((0,a.tObject)({omitContent:(0,a.tOptional)(a.tBoolean),path:a.tString})),strictSelectors:(0,a.tOptional)(a.tBoolean),userDataDir:a.tString,slowMo:(0,a.tOptional)(a.tNumber)}),e.BrowserTypeConnectOverCDPParams=(0,a.tObject)({endpointURL:a.tString,headers:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),slowMo:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber)}),e.BrowserCloseParams=(0,a.tOptional)((0,a.tObject)({})),e.BrowserKillForTestsParams=(0,a.tOptional)((0,a.tObject)({})),e.BrowserNewContextParams=(0,a.tObject)({noDefaultViewport:(0,a.tOptional)(a.tBoolean),viewport:(0,a.tOptional)((0,a.tObject)({width:a.tNumber,height:a.tNumber})),screen:(0,a.tOptional)((0,a.tObject)({width:a.tNumber,height:a.tNumber})),ignoreHTTPSErrors:(0,a.tOptional)(a.tBoolean),javaScriptEnabled:(0,a.tOptional)(a.tBoolean),bypassCSP:(0,a.tOptional)(a.tBoolean),userAgent:(0,a.tOptional)(a.tString),locale:(0,a.tOptional)(a.tString),timezoneId:(0,a.tOptional)(a.tString),geolocation:(0,a.tOptional)((0,a.tObject)({longitude:a.tNumber,latitude:a.tNumber,accuracy:(0,a.tOptional)(a.tNumber)})),permissions:(0,a.tOptional)((0,a.tArray)(a.tString)),extraHTTPHeaders:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),offline:(0,a.tOptional)(a.tBoolean),httpCredentials:(0,a.tOptional)((0,a.tObject)({username:a.tString,password:a.tString})),deviceScaleFactor:(0,a.tOptional)(a.tNumber),isMobile:(0,a.tOptional)(a.tBoolean),hasTouch:(0,a.tOptional)(a.tBoolean),colorScheme:(0,a.tOptional)((0,a.tEnum)(["dark","light","no-preference"])),reducedMotion:(0,a.tOptional)((0,a.tEnum)(["reduce","no-preference"])),forcedColors:(0,a.tOptional)((0,a.tEnum)(["active","none"])),acceptDownloads:(0,a.tOptional)(a.tBoolean),baseURL:(0,a.tOptional)(a.tString),_debugName:(0,a.tOptional)(a.tString),recordVideo:(0,a.tOptional)((0,a.tObject)({dir:a.tString,size:(0,a.tOptional)((0,a.tObject)({width:a.tNumber,height:a.tNumber}))})),recordHar:(0,a.tOptional)((0,a.tObject)({omitContent:(0,a.tOptional)(a.tBoolean),path:a.tString})),strictSelectors:(0,a.tOptional)(a.tBoolean),proxy:(0,a.tOptional)((0,a.tObject)({server:a.tString,bypass:(0,a.tOptional)(a.tString),username:(0,a.tOptional)(a.tString),password:(0,a.tOptional)(a.tString)})),storageState:(0,a.tOptional)((0,a.tObject)({cookies:(0,a.tOptional)((0,a.tArray)(t("SetNetworkCookie"))),origins:(0,a.tOptional)((0,a.tArray)(t("OriginStorage")))}))}),e.BrowserNewBrowserCDPSessionParams=(0,a.tOptional)((0,a.tObject)({})),e.BrowserStartTracingParams=(0,a.tObject)({page:(0,a.tOptional)(r("Page")),path:(0,a.tOptional)(a.tString),screenshots:(0,a.tOptional)(a.tBoolean),categories:(0,a.tOptional)((0,a.tArray)(a.tString))}),e.BrowserStopTracingParams=(0,a.tOptional)((0,a.tObject)({})),e.EventTargetWaitForEventInfoParams=(0,a.tObject)({info:(0,a.tObject)({waitId:a.tString,phase:(0,a.tEnum)(["before","after","log"]),event:(0,a.tOptional)(a.tString),message:(0,a.tOptional)(a.tString),error:(0,a.tOptional)(a.tString)})}),e.BrowserContextWaitForEventInfoParams=t("EventTargetWaitForEventInfoParams"),e.PageWaitForEventInfoParams=t("EventTargetWaitForEventInfoParams"),e.WebSocketWaitForEventInfoParams=t("EventTargetWaitForEventInfoParams"),e.ElectronApplicationWaitForEventInfoParams=t("EventTargetWaitForEventInfoParams"),e.AndroidDeviceWaitForEventInfoParams=t("EventTargetWaitForEventInfoParams"),e.BrowserContextAddCookiesParams=(0,a.tObject)({cookies:(0,a.tArray)(t("SetNetworkCookie"))}),e.BrowserContextAddInitScriptParams=(0,a.tObject)({source:a.tString}),e.BrowserContextClearCookiesParams=(0,a.tOptional)((0,a.tObject)({})),e.BrowserContextClearPermissionsParams=(0,a.tOptional)((0,a.tObject)({})),e.BrowserContextCloseParams=(0,a.tOptional)((0,a.tObject)({})),e.BrowserContextCookiesParams=(0,a.tObject)({urls:(0,a.tArray)(a.tString)}),e.BrowserContextExposeBindingParams=(0,a.tObject)({name:a.tString,needsHandle:(0,a.tOptional)(a.tBoolean)}),e.BrowserContextGrantPermissionsParams=(0,a.tObject)({permissions:(0,a.tArray)(a.tString),origin:(0,a.tOptional)(a.tString)}),e.BrowserContextNewPageParams=(0,a.tOptional)((0,a.tObject)({})),e.BrowserContextSetDefaultNavigationTimeoutNoReplyParams=(0,a.tObject)({timeout:a.tNumber}),e.BrowserContextSetDefaultTimeoutNoReplyParams=(0,a.tObject)({timeout:a.tNumber}),e.BrowserContextSetExtraHTTPHeadersParams=(0,a.tObject)({headers:(0,a.tArray)(t("NameValue"))}),e.BrowserContextSetGeolocationParams=(0,a.tObject)({geolocation:(0,a.tOptional)((0,a.tObject)({longitude:a.tNumber,latitude:a.tNumber,accuracy:(0,a.tOptional)(a.tNumber)}))}),e.BrowserContextSetHTTPCredentialsParams=(0,a.tObject)({httpCredentials:(0,a.tOptional)((0,a.tObject)({username:a.tString,password:a.tString}))}),e.BrowserContextSetNetworkInterceptionEnabledParams=(0,a.tObject)({enabled:a.tBoolean}),e.BrowserContextSetOfflineParams=(0,a.tObject)({offline:a.tBoolean}),e.BrowserContextStorageStateParams=(0,a.tOptional)((0,a.tObject)({})),e.BrowserContextPauseParams=(0,a.tOptional)((0,a.tObject)({})),e.BrowserContextRecorderSupplementEnableParams=(0,a.tObject)({language:(0,a.tOptional)(a.tString),startRecording:(0,a.tOptional)(a.tBoolean),pauseOnNextStatement:(0,a.tOptional)(a.tBoolean),launchOptions:(0,a.tOptional)(a.tAny),contextOptions:(0,a.tOptional)(a.tAny),device:(0,a.tOptional)(a.tString),saveStorage:(0,a.tOptional)(a.tString),outputFile:(0,a.tOptional)(a.tString)}),e.BrowserContextNewCDPSessionParams=(0,a.tObject)({page:(0,a.tOptional)(r("Page")),frame:(0,a.tOptional)(r("Frame"))}),e.BrowserContextTracingStartParams=(0,a.tObject)({name:(0,a.tOptional)(a.tString),snapshots:(0,a.tOptional)(a.tBoolean),screenshots:(0,a.tOptional)(a.tBoolean)}),e.BrowserContextTracingStartChunkParams=(0,a.tOptional)((0,a.tObject)({})),e.BrowserContextTracingStopChunkParams=(0,a.tObject)({save:a.tBoolean}),e.BrowserContextTracingStopParams=(0,a.tOptional)((0,a.tObject)({})),e.BrowserContextHarExportParams=(0,a.tOptional)((0,a.tObject)({})),e.PageSetDefaultNavigationTimeoutNoReplyParams=(0,a.tObject)({timeout:a.tNumber}),e.PageSetDefaultTimeoutNoReplyParams=(0,a.tObject)({timeout:a.tNumber}),e.PageSetFileChooserInterceptedNoReplyParams=(0,a.tObject)({intercepted:a.tBoolean}),e.PageAddInitScriptParams=(0,a.tObject)({source:a.tString}),e.PageCloseParams=(0,a.tObject)({runBeforeUnload:(0,a.tOptional)(a.tBoolean)}),e.PageEmulateMediaParams=(0,a.tObject)({media:(0,a.tOptional)((0,a.tEnum)(["screen","print","null"])),colorScheme:(0,a.tOptional)((0,a.tEnum)(["dark","light","no-preference","null"])),reducedMotion:(0,a.tOptional)((0,a.tEnum)(["reduce","no-preference","null"])),forcedColors:(0,a.tOptional)((0,a.tEnum)(["active","none","null"]))}),e.PageExposeBindingParams=(0,a.tObject)({name:a.tString,needsHandle:(0,a.tOptional)(a.tBoolean)}),e.PageGoBackParams=(0,a.tObject)({timeout:(0,a.tOptional)(a.tNumber),waitUntil:(0,a.tOptional)((0,a.tEnum)(["load","domcontentloaded","networkidle"]))}),e.PageGoForwardParams=(0,a.tObject)({timeout:(0,a.tOptional)(a.tNumber),waitUntil:(0,a.tOptional)((0,a.tEnum)(["load","domcontentloaded","networkidle"]))}),e.PageReloadParams=(0,a.tObject)({timeout:(0,a.tOptional)(a.tNumber),waitUntil:(0,a.tOptional)((0,a.tEnum)(["load","domcontentloaded","networkidle"]))}),e.PageScreenshotParams=(0,a.tObject)({timeout:(0,a.tOptional)(a.tNumber),type:(0,a.tOptional)((0,a.tEnum)(["png","jpeg"])),quality:(0,a.tOptional)(a.tNumber),omitBackground:(0,a.tOptional)(a.tBoolean),fullPage:(0,a.tOptional)(a.tBoolean),clip:(0,a.tOptional)(t("Rect"))}),e.PageSetExtraHTTPHeadersParams=(0,a.tObject)({headers:(0,a.tArray)(t("NameValue"))}),e.PageSetNetworkInterceptionEnabledParams=(0,a.tObject)({enabled:a.tBoolean}),e.PageSetViewportSizeParams=(0,a.tObject)({viewportSize:(0,a.tObject)({width:a.tNumber,height:a.tNumber})}),e.PageKeyboardDownParams=(0,a.tObject)({key:a.tString}),e.PageKeyboardUpParams=(0,a.tObject)({key:a.tString}),e.PageKeyboardInsertTextParams=(0,a.tObject)({text:a.tString}),e.PageKeyboardTypeParams=(0,a.tObject)({text:a.tString,delay:(0,a.tOptional)(a.tNumber)}),e.PageKeyboardPressParams=(0,a.tObject)({key:a.tString,delay:(0,a.tOptional)(a.tNumber)}),e.PageMouseMoveParams=(0,a.tObject)({x:a.tNumber,y:a.tNumber,steps:(0,a.tOptional)(a.tNumber)}),e.PageMouseDownParams=(0,a.tObject)({button:(0,a.tOptional)((0,a.tEnum)(["left","right","middle"])),clickCount:(0,a.tOptional)(a.tNumber)}),e.PageMouseUpParams=(0,a.tObject)({button:(0,a.tOptional)((0,a.tEnum)(["left","right","middle"])),clickCount:(0,a.tOptional)(a.tNumber)}),e.PageMouseClickParams=(0,a.tObject)({x:a.tNumber,y:a.tNumber,delay:(0,a.tOptional)(a.tNumber),button:(0,a.tOptional)((0,a.tEnum)(["left","right","middle"])),clickCount:(0,a.tOptional)(a.tNumber)}),e.PageMouseWheelParams=(0,a.tObject)({deltaX:a.tNumber,deltaY:a.tNumber}),e.PageTouchscreenTapParams=(0,a.tObject)({x:a.tNumber,y:a.tNumber}),e.PageAccessibilitySnapshotParams=(0,a.tObject)({interestingOnly:(0,a.tOptional)(a.tBoolean),root:(0,a.tOptional)(r("ElementHandle"))}),e.PagePdfParams=(0,a.tObject)({scale:(0,a.tOptional)(a.tNumber),displayHeaderFooter:(0,a.tOptional)(a.tBoolean),headerTemplate:(0,a.tOptional)(a.tString),footerTemplate:(0,a.tOptional)(a.tString),printBackground:(0,a.tOptional)(a.tBoolean),landscape:(0,a.tOptional)(a.tBoolean),pageRanges:(0,a.tOptional)(a.tString),format:(0,a.tOptional)(a.tString),width:(0,a.tOptional)(a.tString),height:(0,a.tOptional)(a.tString),preferCSSPageSize:(0,a.tOptional)(a.tBoolean),margin:(0,a.tOptional)((0,a.tObject)({top:(0,a.tOptional)(a.tString),bottom:(0,a.tOptional)(a.tString),left:(0,a.tOptional)(a.tString),right:(0,a.tOptional)(a.tString)}))}),e.PageStartJSCoverageParams=(0,a.tObject)({resetOnNavigation:(0,a.tOptional)(a.tBoolean),reportAnonymousScripts:(0,a.tOptional)(a.tBoolean)}),e.PageStopJSCoverageParams=(0,a.tOptional)((0,a.tObject)({})),e.PageStartCSSCoverageParams=(0,a.tObject)({resetOnNavigation:(0,a.tOptional)(a.tBoolean)}),e.PageStopCSSCoverageParams=(0,a.tOptional)((0,a.tObject)({})),e.PageBringToFrontParams=(0,a.tOptional)((0,a.tObject)({})),e.FrameEvalOnSelectorParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.FrameEvalOnSelectorAllParams=(0,a.tObject)({selector:a.tString,expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.FrameAddScriptTagParams=(0,a.tObject)({url:(0,a.tOptional)(a.tString),content:(0,a.tOptional)(a.tString),type:(0,a.tOptional)(a.tString)}),e.FrameAddStyleTagParams=(0,a.tObject)({url:(0,a.tOptional)(a.tString),content:(0,a.tOptional)(a.tString)}),e.FrameCheckParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),force:(0,a.tOptional)(a.tBoolean),noWaitAfter:(0,a.tOptional)(a.tBoolean),position:(0,a.tOptional)(t("Point")),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.FrameClickParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),force:(0,a.tOptional)(a.tBoolean),noWaitAfter:(0,a.tOptional)(a.tBoolean),modifiers:(0,a.tOptional)((0,a.tArray)((0,a.tEnum)(["Alt","Control","Meta","Shift"]))),position:(0,a.tOptional)(t("Point")),delay:(0,a.tOptional)(a.tNumber),button:(0,a.tOptional)((0,a.tEnum)(["left","right","middle"])),clickCount:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.FrameContentParams=(0,a.tOptional)((0,a.tObject)({})),e.FrameDragAndDropParams=(0,a.tObject)({source:a.tString,target:a.tString,force:(0,a.tOptional)(a.tBoolean),noWaitAfter:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean),sourcePosition:(0,a.tOptional)(t("Point")),targetPosition:(0,a.tOptional)(t("Point"))}),e.FrameDblclickParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),force:(0,a.tOptional)(a.tBoolean),noWaitAfter:(0,a.tOptional)(a.tBoolean),modifiers:(0,a.tOptional)((0,a.tArray)((0,a.tEnum)(["Alt","Control","Meta","Shift"]))),position:(0,a.tOptional)(t("Point")),delay:(0,a.tOptional)(a.tNumber),button:(0,a.tOptional)((0,a.tEnum)(["left","right","middle"])),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.FrameDispatchEventParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),type:a.tString,eventInit:t("SerializedArgument"),timeout:(0,a.tOptional)(a.tNumber)}),e.FrameEvaluateExpressionParams=(0,a.tObject)({expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.FrameEvaluateExpressionHandleParams=(0,a.tObject)({expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.FrameFillParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),value:a.tString,force:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber),noWaitAfter:(0,a.tOptional)(a.tBoolean)}),e.FrameFocusParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.FrameFrameElementParams=(0,a.tOptional)((0,a.tObject)({})),e.FrameGetAttributeParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),name:a.tString,timeout:(0,a.tOptional)(a.tNumber)}),e.FrameGotoParams=(0,a.tObject)({url:a.tString,timeout:(0,a.tOptional)(a.tNumber),waitUntil:(0,a.tOptional)((0,a.tEnum)(["load","domcontentloaded","networkidle"])),referer:(0,a.tOptional)(a.tString)}),e.FrameHoverParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),force:(0,a.tOptional)(a.tBoolean),modifiers:(0,a.tOptional)((0,a.tArray)((0,a.tEnum)(["Alt","Control","Meta","Shift"]))),position:(0,a.tOptional)(t("Point")),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.FrameInnerHTMLParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.FrameInnerTextParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.FrameInputValueParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.FrameIsCheckedParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.FrameIsDisabledParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.FrameIsEnabledParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.FrameIsHiddenParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean)}),e.FrameIsVisibleParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean)}),e.FrameIsEditableParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.FramePressParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),key:a.tString,delay:(0,a.tOptional)(a.tNumber),noWaitAfter:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.FrameQuerySelectorParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean)}),e.FrameQuerySelectorAllParams=(0,a.tObject)({selector:a.tString}),e.FrameSelectOptionParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),elements:(0,a.tOptional)((0,a.tArray)(r("ElementHandle"))),options:(0,a.tOptional)((0,a.tArray)((0,a.tObject)({value:(0,a.tOptional)(a.tString),label:(0,a.tOptional)(a.tString),index:(0,a.tOptional)(a.tNumber)}))),force:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber),noWaitAfter:(0,a.tOptional)(a.tBoolean)}),e.FrameSetContentParams=(0,a.tObject)({html:a.tString,timeout:(0,a.tOptional)(a.tNumber),waitUntil:(0,a.tOptional)((0,a.tEnum)(["load","domcontentloaded","networkidle"]))}),e.FrameSetInputFilesParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),files:(0,a.tArray)((0,a.tObject)({name:a.tString,mimeType:(0,a.tOptional)(a.tString),buffer:a.tBinary})),timeout:(0,a.tOptional)(a.tNumber),noWaitAfter:(0,a.tOptional)(a.tBoolean)}),e.FrameTapParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),force:(0,a.tOptional)(a.tBoolean),noWaitAfter:(0,a.tOptional)(a.tBoolean),modifiers:(0,a.tOptional)((0,a.tArray)((0,a.tEnum)(["Alt","Control","Meta","Shift"]))),position:(0,a.tOptional)(t("Point")),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.FrameTextContentParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.FrameTitleParams=(0,a.tOptional)((0,a.tObject)({})),e.FrameTypeParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),text:a.tString,delay:(0,a.tOptional)(a.tNumber),noWaitAfter:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.FrameUncheckParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),force:(0,a.tOptional)(a.tBoolean),noWaitAfter:(0,a.tOptional)(a.tBoolean),position:(0,a.tOptional)(t("Point")),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.FrameWaitForTimeoutParams=(0,a.tObject)({timeout:a.tNumber}),e.FrameWaitForFunctionParams=(0,a.tObject)({expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument"),timeout:(0,a.tOptional)(a.tNumber),pollingInterval:(0,a.tOptional)(a.tNumber)}),e.FrameWaitForSelectorParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber),state:(0,a.tOptional)((0,a.tEnum)(["attached","detached","visible","hidden"])),omitReturnValue:(0,a.tOptional)(a.tBoolean)}),e.FrameExpectParams=(0,a.tObject)({selector:a.tString,expression:a.tString,expressionArg:(0,a.tOptional)(a.tAny),expectedText:(0,a.tOptional)((0,a.tArray)(t("ExpectedTextValue"))),expectedNumber:(0,a.tOptional)(a.tNumber),expectedValue:(0,a.tOptional)(t("SerializedArgument")),useInnerText:(0,a.tOptional)(a.tBoolean),isNot:a.tBoolean,timeout:(0,a.tOptional)(a.tNumber)}),e.WorkerEvaluateExpressionParams=(0,a.tObject)({expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.WorkerEvaluateExpressionHandleParams=(0,a.tObject)({expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.JSHandleDisposeParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleDisposeParams=t("JSHandleDisposeParams"),e.JSHandleEvaluateExpressionParams=(0,a.tObject)({expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.ElementHandleEvaluateExpressionParams=t("JSHandleEvaluateExpressionParams"),e.JSHandleEvaluateExpressionHandleParams=(0,a.tObject)({expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.ElementHandleEvaluateExpressionHandleParams=t("JSHandleEvaluateExpressionHandleParams"),e.JSHandleGetPropertyListParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleGetPropertyListParams=t("JSHandleGetPropertyListParams"),e.JSHandleGetPropertyParams=(0,a.tObject)({name:a.tString}),e.ElementHandleGetPropertyParams=t("JSHandleGetPropertyParams"),e.JSHandleJsonValueParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleJsonValueParams=t("JSHandleJsonValueParams"),e.ElementHandleEvalOnSelectorParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.ElementHandleEvalOnSelectorAllParams=(0,a.tObject)({selector:a.tString,expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.ElementHandleBoundingBoxParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleCheckParams=(0,a.tObject)({force:(0,a.tOptional)(a.tBoolean),noWaitAfter:(0,a.tOptional)(a.tBoolean),position:(0,a.tOptional)(t("Point")),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleClickParams=(0,a.tObject)({force:(0,a.tOptional)(a.tBoolean),noWaitAfter:(0,a.tOptional)(a.tBoolean),modifiers:(0,a.tOptional)((0,a.tArray)((0,a.tEnum)(["Alt","Control","Meta","Shift"]))),position:(0,a.tOptional)(t("Point")),delay:(0,a.tOptional)(a.tNumber),button:(0,a.tOptional)((0,a.tEnum)(["left","right","middle"])),clickCount:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleContentFrameParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleDblclickParams=(0,a.tObject)({force:(0,a.tOptional)(a.tBoolean),noWaitAfter:(0,a.tOptional)(a.tBoolean),modifiers:(0,a.tOptional)((0,a.tArray)((0,a.tEnum)(["Alt","Control","Meta","Shift"]))),position:(0,a.tOptional)(t("Point")),delay:(0,a.tOptional)(a.tNumber),button:(0,a.tOptional)((0,a.tEnum)(["left","right","middle"])),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleDispatchEventParams=(0,a.tObject)({type:a.tString,eventInit:t("SerializedArgument")}),e.ElementHandleFillParams=(0,a.tObject)({value:a.tString,force:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber),noWaitAfter:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleFocusParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleGetAttributeParams=(0,a.tObject)({name:a.tString}),e.ElementHandleHoverParams=(0,a.tObject)({force:(0,a.tOptional)(a.tBoolean),modifiers:(0,a.tOptional)((0,a.tArray)((0,a.tEnum)(["Alt","Control","Meta","Shift"]))),position:(0,a.tOptional)(t("Point")),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleInnerHTMLParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleInnerTextParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleInputValueParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleIsCheckedParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleIsDisabledParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleIsEditableParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleIsEnabledParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleIsHiddenParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleIsVisibleParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleOwnerFrameParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandlePressParams=(0,a.tObject)({key:a.tString,delay:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber),noWaitAfter:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleQuerySelectorParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleQuerySelectorAllParams=(0,a.tObject)({selector:a.tString}),e.ElementHandleScreenshotParams=(0,a.tObject)({timeout:(0,a.tOptional)(a.tNumber),type:(0,a.tOptional)((0,a.tEnum)(["png","jpeg"])),quality:(0,a.tOptional)(a.tNumber),omitBackground:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleScrollIntoViewIfNeededParams=(0,a.tObject)({timeout:(0,a.tOptional)(a.tNumber)}),e.ElementHandleSelectOptionParams=(0,a.tObject)({elements:(0,a.tOptional)((0,a.tArray)(r("ElementHandle"))),options:(0,a.tOptional)((0,a.tArray)((0,a.tObject)({value:(0,a.tOptional)(a.tString),label:(0,a.tOptional)(a.tString),index:(0,a.tOptional)(a.tNumber)}))),force:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber),noWaitAfter:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleSelectTextParams=(0,a.tObject)({force:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.ElementHandleSetInputFilesParams=(0,a.tObject)({files:(0,a.tArray)((0,a.tObject)({name:a.tString,mimeType:(0,a.tOptional)(a.tString),buffer:a.tBinary})),timeout:(0,a.tOptional)(a.tNumber),noWaitAfter:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleTapParams=(0,a.tObject)({force:(0,a.tOptional)(a.tBoolean),noWaitAfter:(0,a.tOptional)(a.tBoolean),modifiers:(0,a.tOptional)((0,a.tArray)((0,a.tEnum)(["Alt","Control","Meta","Shift"]))),position:(0,a.tOptional)(t("Point")),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleTextContentParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleTypeParams=(0,a.tObject)({text:a.tString,delay:(0,a.tOptional)(a.tNumber),noWaitAfter:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.ElementHandleUncheckParams=(0,a.tObject)({force:(0,a.tOptional)(a.tBoolean),noWaitAfter:(0,a.tOptional)(a.tBoolean),position:(0,a.tOptional)(t("Point")),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleWaitForElementStateParams=(0,a.tObject)({state:(0,a.tEnum)(["visible","hidden","stable","enabled","disabled","editable"]),timeout:(0,a.tOptional)(a.tNumber)}),e.ElementHandleWaitForSelectorParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber),state:(0,a.tOptional)((0,a.tEnum)(["attached","detached","visible","hidden"]))}),e.RequestResponseParams=(0,a.tOptional)((0,a.tObject)({})),e.RequestRawRequestHeadersParams=(0,a.tOptional)((0,a.tObject)({})),e.RouteAbortParams=(0,a.tObject)({errorCode:(0,a.tOptional)(a.tString)}),e.RouteContinueParams=(0,a.tObject)({url:(0,a.tOptional)(a.tString),method:(0,a.tOptional)(a.tString),headers:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),postData:(0,a.tOptional)(a.tBinary),interceptResponse:(0,a.tOptional)(a.tBoolean)}),e.RouteFulfillParams=(0,a.tObject)({status:(0,a.tOptional)(a.tNumber),headers:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),body:(0,a.tOptional)(a.tString),isBase64:(0,a.tOptional)(a.tBoolean),useInterceptedResponseBody:(0,a.tOptional)(a.tBoolean),fetchResponseUid:(0,a.tOptional)(a.tString)}),e.RouteResponseBodyParams=(0,a.tOptional)((0,a.tObject)({})),e.ResourceTiming=(0,a.tObject)({startTime:a.tNumber,domainLookupStart:a.tNumber,domainLookupEnd:a.tNumber,connectStart:a.tNumber,secureConnectionStart:a.tNumber,connectEnd:a.tNumber,requestStart:a.tNumber,responseStart:a.tNumber}),e.ResponseBodyParams=(0,a.tOptional)((0,a.tObject)({})),e.ResponseSecurityDetailsParams=(0,a.tOptional)((0,a.tObject)({})),e.ResponseServerAddrParams=(0,a.tOptional)((0,a.tObject)({})),e.ResponseRawResponseHeadersParams=(0,a.tOptional)((0,a.tObject)({})),e.ResponseSizesParams=(0,a.tOptional)((0,a.tObject)({})),e.SecurityDetails=(0,a.tObject)({issuer:(0,a.tOptional)(a.tString),protocol:(0,a.tOptional)(a.tString),subjectName:(0,a.tOptional)(a.tString),validFrom:(0,a.tOptional)(a.tNumber),validTo:(0,a.tOptional)(a.tNumber)}),e.RequestSizes=(0,a.tObject)({requestBodySize:a.tNumber,requestHeadersSize:a.tNumber,responseBodySize:a.tNumber,responseHeadersSize:a.tNumber}),e.RemoteAddr=(0,a.tObject)({ipAddress:a.tString,port:a.tNumber}),e.BindingCallRejectParams=(0,a.tObject)({error:t("SerializedError")}),e.BindingCallResolveParams=(0,a.tObject)({result:t("SerializedArgument")}),e.DialogAcceptParams=(0,a.tObject)({promptText:(0,a.tOptional)(a.tString)}),e.DialogDismissParams=(0,a.tOptional)((0,a.tObject)({})),e.ArtifactPathAfterFinishedParams=(0,a.tOptional)((0,a.tObject)({})),e.ArtifactSaveAsParams=(0,a.tObject)({path:a.tString}),e.ArtifactSaveAsStreamParams=(0,a.tOptional)((0,a.tObject)({})),e.ArtifactFailureParams=(0,a.tOptional)((0,a.tObject)({})),e.ArtifactStreamParams=(0,a.tOptional)((0,a.tObject)({})),e.ArtifactCancelParams=(0,a.tOptional)((0,a.tObject)({})),e.ArtifactDeleteParams=(0,a.tOptional)((0,a.tObject)({})),e.StreamReadParams=(0,a.tObject)({size:(0,a.tOptional)(a.tNumber)}),e.StreamCloseParams=(0,a.tOptional)((0,a.tObject)({})),e.CDPSessionSendParams=(0,a.tObject)({method:a.tString,params:(0,a.tOptional)(a.tAny)}),e.CDPSessionDetachParams=(0,a.tOptional)((0,a.tObject)({})),e.ElectronLaunchParams=(0,a.tObject)({executablePath:(0,a.tOptional)(a.tString),args:(0,a.tOptional)((0,a.tArray)(a.tString)),cwd:(0,a.tOptional)(a.tString),env:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),timeout:(0,a.tOptional)(a.tNumber),acceptDownloads:(0,a.tOptional)(a.tBoolean),bypassCSP:(0,a.tOptional)(a.tBoolean),colorScheme:(0,a.tOptional)((0,a.tEnum)(["dark","light","no-preference"])),extraHTTPHeaders:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),geolocation:(0,a.tOptional)((0,a.tObject)({longitude:a.tNumber,latitude:a.tNumber,accuracy:(0,a.tOptional)(a.tNumber)})),httpCredentials:(0,a.tOptional)((0,a.tObject)({username:a.tString,password:a.tString})),ignoreHTTPSErrors:(0,a.tOptional)(a.tBoolean),locale:(0,a.tOptional)(a.tString),offline:(0,a.tOptional)(a.tBoolean),recordHar:(0,a.tOptional)((0,a.tObject)({omitContent:(0,a.tOptional)(a.tBoolean),path:a.tString})),recordVideo:(0,a.tOptional)((0,a.tObject)({dir:a.tString,size:(0,a.tOptional)((0,a.tObject)({width:a.tNumber,height:a.tNumber}))})),strictSelectors:(0,a.tOptional)(a.tBoolean),timezoneId:(0,a.tOptional)(a.tString)}),e.ElectronApplicationBrowserWindowParams=(0,a.tObject)({page:r("Page")}),e.ElectronApplicationEvaluateExpressionParams=(0,a.tObject)({expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.ElectronApplicationEvaluateExpressionHandleParams=(0,a.tObject)({expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.ElectronApplicationCloseParams=(0,a.tOptional)((0,a.tObject)({})),e.AndroidDevicesParams=(0,a.tOptional)((0,a.tObject)({})),e.AndroidSetDefaultTimeoutNoReplyParams=(0,a.tObject)({timeout:a.tNumber}),e.AndroidSocketWriteParams=(0,a.tObject)({data:a.tBinary}),e.AndroidSocketCloseParams=(0,a.tOptional)((0,a.tObject)({})),e.AndroidDeviceWaitParams=(0,a.tObject)({selector:t("AndroidSelector"),state:(0,a.tOptional)((0,a.tEnum)(["gone"])),timeout:(0,a.tOptional)(a.tNumber)}),e.AndroidDeviceFillParams=(0,a.tObject)({selector:t("AndroidSelector"),text:a.tString,timeout:(0,a.tOptional)(a.tNumber)}),e.AndroidDeviceTapParams=(0,a.tObject)({selector:t("AndroidSelector"),duration:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber)}),e.AndroidDeviceDragParams=(0,a.tObject)({selector:t("AndroidSelector"),dest:t("Point"),speed:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber)}),e.AndroidDeviceFlingParams=(0,a.tObject)({selector:t("AndroidSelector"),direction:(0,a.tEnum)(["up","down","left","right"]),speed:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber)}),e.AndroidDeviceLongTapParams=(0,a.tObject)({selector:t("AndroidSelector"),timeout:(0,a.tOptional)(a.tNumber)}),e.AndroidDevicePinchCloseParams=(0,a.tObject)({selector:t("AndroidSelector"),percent:a.tNumber,speed:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber)}),e.AndroidDevicePinchOpenParams=(0,a.tObject)({selector:t("AndroidSelector"),percent:a.tNumber,speed:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber)}),e.AndroidDeviceScrollParams=(0,a.tObject)({selector:t("AndroidSelector"),direction:(0,a.tEnum)(["up","down","left","right"]),percent:a.tNumber,speed:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber)}),e.AndroidDeviceSwipeParams=(0,a.tObject)({selector:t("AndroidSelector"),direction:(0,a.tEnum)(["up","down","left","right"]),percent:a.tNumber,speed:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber)}),e.AndroidDeviceInfoParams=(0,a.tObject)({selector:t("AndroidSelector")}),e.AndroidDeviceScreenshotParams=(0,a.tOptional)((0,a.tObject)({})),e.AndroidDeviceInputTypeParams=(0,a.tObject)({text:a.tString}),e.AndroidDeviceInputPressParams=(0,a.tObject)({key:a.tString}),e.AndroidDeviceInputTapParams=(0,a.tObject)({point:t("Point")}),e.AndroidDeviceInputSwipeParams=(0,a.tObject)({segments:(0,a.tArray)(t("Point")),steps:a.tNumber}),e.AndroidDeviceInputDragParams=(0,a.tObject)({from:t("Point"),to:t("Point"),steps:a.tNumber}),e.AndroidDeviceLaunchBrowserParams=(0,a.tObject)({pkg:(0,a.tOptional)(a.tString),ignoreHTTPSErrors:(0,a.tOptional)(a.tBoolean),javaScriptEnabled:(0,a.tOptional)(a.tBoolean),bypassCSP:(0,a.tOptional)(a.tBoolean),userAgent:(0,a.tOptional)(a.tString),locale:(0,a.tOptional)(a.tString),timezoneId:(0,a.tOptional)(a.tString),geolocation:(0,a.tOptional)((0,a.tObject)({longitude:a.tNumber,latitude:a.tNumber,accuracy:(0,a.tOptional)(a.tNumber)})),permissions:(0,a.tOptional)((0,a.tArray)(a.tString)),extraHTTPHeaders:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),offline:(0,a.tOptional)(a.tBoolean),httpCredentials:(0,a.tOptional)((0,a.tObject)({username:a.tString,password:a.tString})),deviceScaleFactor:(0,a.tOptional)(a.tNumber),isMobile:(0,a.tOptional)(a.tBoolean),hasTouch:(0,a.tOptional)(a.tBoolean),colorScheme:(0,a.tOptional)((0,a.tEnum)(["dark","light","no-preference"])),reducedMotion:(0,a.tOptional)((0,a.tEnum)(["reduce","no-preference"])),forcedColors:(0,a.tOptional)((0,a.tEnum)(["active","none"])),acceptDownloads:(0,a.tOptional)(a.tBoolean),_debugName:(0,a.tOptional)(a.tString),recordVideo:(0,a.tOptional)((0,a.tObject)({dir:a.tString,size:(0,a.tOptional)((0,a.tObject)({width:a.tNumber,height:a.tNumber}))})),recordHar:(0,a.tOptional)((0,a.tObject)({omitContent:(0,a.tOptional)(a.tBoolean),path:a.tString})),strictSelectors:(0,a.tOptional)(a.tBoolean),proxy:(0,a.tOptional)((0,a.tObject)({server:a.tString,bypass:(0,a.tOptional)(a.tString),username:(0,a.tOptional)(a.tString),password:(0,a.tOptional)(a.tString)}))}),e.AndroidDeviceOpenParams=(0,a.tObject)({command:a.tString}),e.AndroidDeviceShellParams=(0,a.tObject)({command:a.tString}),e.AndroidDeviceInstallApkParams=(0,a.tObject)({file:a.tBinary,args:(0,a.tOptional)((0,a.tArray)(a.tString))}),e.AndroidDevicePushParams=(0,a.tObject)({file:a.tBinary,path:a.tString,mode:(0,a.tOptional)(a.tNumber)}),e.AndroidDeviceSetDefaultTimeoutNoReplyParams=(0,a.tObject)({timeout:a.tNumber}),e.AndroidDeviceConnectToWebViewParams=(0,a.tObject)({pid:a.tNumber}),e.AndroidDeviceCloseParams=(0,a.tOptional)((0,a.tObject)({})),e.AndroidWebView=(0,a.tObject)({pid:a.tNumber,pkg:a.tString}),e.AndroidSelector=(0,a.tObject)({checkable:(0,a.tOptional)(a.tBoolean),checked:(0,a.tOptional)(a.tBoolean),clazz:(0,a.tOptional)(a.tString),clickable:(0,a.tOptional)(a.tBoolean),depth:(0,a.tOptional)(a.tNumber),desc:(0,a.tOptional)(a.tString),enabled:(0,a.tOptional)(a.tBoolean),focusable:(0,a.tOptional)(a.tBoolean),focused:(0,a.tOptional)(a.tBoolean),hasChild:(0,a.tOptional)((0,a.tObject)({selector:t("AndroidSelector")})),hasDescendant:(0,a.tOptional)((0,a.tObject)({selector:t("AndroidSelector"),maxDepth:(0,a.tOptional)(a.tNumber)})),longClickable:(0,a.tOptional)(a.tBoolean),pkg:(0,a.tOptional)(a.tString),res:(0,a.tOptional)(a.tString),scrollable:(0,a.tOptional)(a.tBoolean),selected:(0,a.tOptional)(a.tBoolean),text:(0,a.tOptional)(a.tString)}),e.AndroidElementInfo=(0,a.tObject)({children:(0,a.tOptional)((0,a.tArray)(t("AndroidElementInfo"))),clazz:a.tString,desc:a.tString,res:a.tString,pkg:a.tString,text:a.tString,bounds:t("Rect"),checkable:a.tBoolean,checked:a.tBoolean,clickable:a.tBoolean,enabled:a.tBoolean,focusable:a.tBoolean,focused:a.tBoolean,longClickable:a.tBoolean,scrollable:a.tBoolean,selected:a.tBoolean}),e.JsonPipeSendParams=(0,a.tObject)({message:a.tAny}),e.JsonPipeCloseParams=(0,a.tOptional)((0,a.tObject)({})),e}});var dy=v(uy=>{"use strict";Object.defineProperty(uy,"__esModule",{value:!0})});var nt=v(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.createInstrumentation=QR;wn.internalCallMetadata=eN;Object.defineProperty(wn,"CallMetadata",{enumerable:!0,get:function(){return ZR.CallMetadata}});wn.SdkObject=void 0;var XR=x("events"),YR=G(),ZR=dy(),hy=class extends XR.EventEmitter{constructor(e,t,i){super();this.guid=void 0,this.attribution=void 0,this.instrumentation=void 0,this.guid=i||`${t||""}@${(0,YR.createGuid)()}`,this.setMaxListeners(0),this.attribution=y({},e.attribution),this.instrumentation=e.instrumentation}};wn.SdkObject=hy;function QR(){let r=[];return new Proxy({},{get:(e,t)=>t==="addListener"?i=>r.push(i):t==="removeListener"?i=>r.splice(r.indexOf(i),1):t.startsWith("on")?(...i)=>c(this,null,function*(){for(let o of r){var n,s;yield(n=(s=o)[t])===null||n===void 0?void 0:n.call(s,...i)}}):e[t]})}function eN(){return{id:"",startTime:0,endTime:0,type:"Internal",method:"",params:{},log:[],snapshots:[]}}});var fy=v((Q8,py)=>{"use strict";var tN=/[|\\{}()[\]^$+*?.-]/g;py.exports=r=>{if(typeof r!="string")throw new TypeError("Expected a string");return r.replace(tN,"\\$&")}});var wy=v((eV,gy)=>{"use strict";var rN=fy(),iN=typeof process=="object"&&process&&typeof process.cwd=="function"?process.cwd():".",my=[].concat(x("module").builtinModules,"bootstrap_node","node").map(r=>new RegExp(`(?:\\((?:node:)?${r}(?:\\.js)?:\\d+:\\d+\\)$|^\\s*at (?:node:)?${r}(?:\\.js)?:\\d+:\\d+$)`));my.push(/\((?:node:)?internal\/[^:]+:\d+:\d+\)$/,/\s*at (?:node:)?internal\/[^:]+:\d+:\d+$/,/\/\.node-spawn-wrap-\w+-\w+\/node:\d+:\d+\)?$/);var dl=class{constructor(e){e=y({ignoredPackages:[]},e),"internals"in e||(e.internals=dl.nodeInternals()),"cwd"in e||(e.cwd=iN),this._cwd=e.cwd.replace(/\\/g,"/"),this._internals=[].concat(e.internals,nN(e.ignoredPackages)),this._wrapCallSite=e.wrapCallSite||!1}static nodeInternals(){return[...my]}clean(e,t=0){t=" ".repeat(t),Array.isArray(e)||(e=e.split(`
`)),!/^\s*at /.test(e[0])&&/^\s*at /.test(e[1])&&(e=e.slice(1));let i=!1,n=null,s=[];return e.forEach(o=>{if(o=o.replace(/\\/g,"/"),this._internals.some(u=>u.test(o)))return;let l=/^\s*at /.test(o);i?o=o.trimEnd().replace(/^(\s+)at /,"$1"):(o=o.trim(),l&&(o=o.slice(3))),o=o.replace(`${this._cwd}/`,""),o&&(l?(n&&(s.push(n),n=null),s.push(o)):(i=!0,n=o))}),s.map(o=>`${t}${o}
`).join("")}captureString(e,t=this.captureString){typeof e=="function"&&(t=e,e=1/0);let{stackTraceLimit:i}=Error;e&&(Error.stackTraceLimit=e);let n={};Error.captureStackTrace(n,t);let{stack:s}=n;return Error.stackTraceLimit=i,this.clean(s)}capture(e,t=this.capture){typeof e=="function"&&(t=e,e=1/0);let{prepareStackTrace:i,stackTraceLimit:n}=Error;Error.prepareStackTrace=(l,u)=>this._wrapCallSite?u.map(this._wrapCallSite):u,e&&(Error.stackTraceLimit=e);let s={};Error.captureStackTrace(s,t);let{stack:o}=s;return Object.assign(Error,{prepareStackTrace:i,stackTraceLimit:n}),o}at(e=this.at){let[t]=this.capture(1,e);if(!t)return{};let i={line:t.getLineNumber(),column:t.getColumnNumber()};_y(i,t.getFileName(),this._cwd),t.isConstructor()&&(i.constructor=!0),t.isEval()&&(i.evalOrigin=t.getEvalOrigin()),t.isNative()&&(i.native=!0);let n;try{n=t.getTypeName()}catch(l){}n&&n!=="Object"&&n!=="[object Object]"&&(i.type=n);let s=t.getFunctionName();s&&(i.function=s);let o=t.getMethodName();return o&&s!==o&&(i.method=o),i}parseLine(e){let t=e&&e.match(sN);if(!t)return null;let i=t[1]==="new",n=t[2],s=t[3],o=t[4],l=Number(t[5]),u=Number(t[6]),d=t[7],h=t[8],p=t[9],f=t[10]==="native",m=t[11]===")",_,g={};if(h&&(g.line=Number(h)),p&&(g.column=Number(p)),m&&d){let w=0;for(let b=d.length-1;b>0;b--)if(d.charAt(b)===")")w++;else if(d.charAt(b)==="("&&d.charAt(b-1)===" "&&(w--,w===-1&&d.charAt(b-1)===" ")){let C=d.slice(0,b-1);d=d.slice(b+1),n+=` (${C}`;break}}if(n){let w=n.match(oN);w&&(n=w[1],_=w[2])}return _y(g,d,this._cwd),i&&(g.constructor=!0),s&&(g.evalOrigin=s,g.evalLine=l,g.evalColumn=u,g.evalFile=o&&o.replace(/\\/g,"/")),f&&(g.native=!0),n&&(g.function=n),_&&n!==_&&(g.method=_),g}};function _y(r,e,t){e&&(e=e.replace(/\\/g,"/"),e.startsWith(`${t}/`)&&(e=e.slice(t.length+1)),r.file=e)}function nN(r){if(r.length===0)return[];let e=r.map(t=>rN(t));return new RegExp(`[/\\\\]node_modules[/\\\\](?:${e.join("|")})[/\\\\][^:]+:\\d+:\\d+`)}var sN=new RegExp("^(?:\\s*at )?(?:(new) )?(?:(.*?) \\()?(?:eval at ([^ ]+) \\((.+?):(\\d+):(\\d+)\\), )?(?:(.+?):(\\d+):(\\d+)|(native))(\\)?)$"),oN=/^(.*?) \[as (.*?)\]$/;gy.exports=dl});var Bt=v(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});ua.rewriteErrorMessage=uN;ua.captureStackTrace=mN;ua.splitErrorMessage=_N;var vn=vy(x("path")),aN=vy(wy()),cN=G();function vy(r){return r&&r.__esModule?r:{default:r}}var lN=new aN.default;function uN(r,e){var t;let i=(((t=r.stack)===null||t===void 0?void 0:t.split(`
`))||[]).filter(s=>s.startsWith("    at "));r.message=e;let n=`${r.name}: ${r.message}`;return i.length&&(r.stack=`${n}
${i.join(`
`)}`),r}var la=vn.default.resolve(__dirname,"..",".."),dN=vn.default.join(la,"lib","client"),hN=vn.default.join(la,"src","client"),pN=vn.default.resolve(la,"..","playwright-test"),fN=vn.default.resolve(la,"..","@playwright","test");function mN(){let r=Error.stackTraceLimit;Error.stackTraceLimit=30;let t=new Error().stack;Error.stackTraceLimit=r;let i=(0,cN.isUnderTest)(),n=t.split(`
`).map(d=>{var h;let p=lN.parseLine(d);if(!p||!p.file||p.file.startsWith("internal")||p.file.startsWith("node:")||p.file==="events.js"&&(h=p.function)!==null&&h!==void 0&&h.endsWith(".emit"))return null;let f=vn.default.resolve(process.cwd(),p.file);if(i&&f.includes(vn.default.join("playwright","tests","config","coverage.js")))return null;let m=f.startsWith(dN)||f.startsWith(hN);return{frame:{file:f,line:p.line,column:p.column,function:p.function},frameText:d,inClient:m}}).filter(Boolean),s="",o=n,l="__PWTRAP__[",u=n.findIndex(d=>d.frameText.includes(l));if(u!==-1){let d=n[u].frameText,h=d.indexOf(l);s=d.substring(h+l.length,d.indexOf("]")),n=n.slice(u+3)}else for(let d=0;d<n.length-1;d++)if(n[d].inClient&&!n[d+1].inClient){let h=n[d].frame;s=h.function?h.function[0].toLowerCase()+h.function.slice(1):"",n=n.slice(d+1);break}return n=n.filter((d,h)=>!(d.frame.file.startsWith(pN)||d.frame.file.startsWith(fN)||h&&d.frame.file.startsWith(la))),{allFrames:o.map(d=>d.frame),frames:n.map(d=>d.frame),frameTexts:n.map(d=>d.frameText),apiName:s}}function _N(r){let e=r.indexOf(":");return{name:e!==-1?r.slice(0,e):"",message:e!==-1&&e+2<=r.length?r.substring(e+2):r}}});var Je=v(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.lookupDispatcher=by;zt.existingDispatcher=bN;zt.lookupNullableDispatcher=xN;zt.DispatcherConnection=zt.Root=zt.Dispatcher=zt.dispatcherSymbol=void 0;var gN=x("events"),hl=li(),da=Qp(),ur=G(),wN=Zp(),vN=qt(),yy=nt(),yN=Bt(),pl=Symbol("dispatcher");zt.dispatcherSymbol=pl;function by(r){let e=r[pl];return(0,ur.debugAssert)(e),e}function bN(r){return r[pl]}function xN(r){return r?by(r):void 0}var fl=class extends gN.EventEmitter{constructor(e,t,i,n,s){super();this._connection=void 0,this._isScope=void 0,this._parent=void 0,this._dispatchers=new Map,this._disposed=!1,this._guid=void 0,this._type=void 0,this._scope=void 0,this._object=void 0,this._connection=e instanceof ml?e:e._connection,this._isScope=!!s,this._parent=e instanceof ml?void 0:e,this._scope=s?this:this._parent;let o=t.guid;(0,ur.assert)(!this._connection._dispatchers.has(o)),this._connection._dispatchers.set(o,this),this._parent&&((0,ur.assert)(!this._parent._dispatchers.has(o)),this._parent._dispatchers.set(o,this)),this._type=i,this._guid=o,this._object=t,t[pl]=this,this._parent&&this._connection.sendMessageToClient(this._parent._guid,i,"__create__",{type:i,initializer:n,guid:o},this._parent._object)}_dispatchEvent(e,t){if(this._disposed){if((0,ur.isUnderTest)())throw new Error(`${this._guid} is sending "${e}" event after being disposed`);return}let i=this._object instanceof yy.SdkObject?this._object:void 0;this._connection.sendMessageToClient(this._guid,this._type,e,t,i)}_dispose(){(0,ur.assert)(!this._disposed),this._disposed=!0,this._parent&&this._parent._dispatchers.delete(this._guid),this._connection._dispatchers.delete(this._guid);for(let e of[...this._dispatchers.values()])e._dispose();this._dispatchers.clear(),this._isScope&&this._connection.sendMessageToClient(this._guid,this._type,"__dispose__",{})}_debugScopeState(){return{_guid:this._guid,objects:Array.from(this._dispatchers.values()).map(e=>e._debugScopeState())}}waitForEventInfo(){return c(this,null,function*(){})}};zt.Dispatcher=fl;var xy=class extends fl{constructor(e,t){super(e,{guid:""},"Root",{},!0);this._initialized=!1,this.createPlaywright=t}initialize(e){return c(this,null,function*(){return(0,ur.assert)(this.createPlaywright),(0,ur.assert)(!this._initialized),this._initialized=!0,{playwright:yield this.createPlaywright(this,e)}})}};zt.Root=xy;var ml=class{sendMessageToClient(e,t,i,n,s){if(n=this._replaceDispatchersWithGuids(n),s){var o,l,u,d,h;let p={id:`event@${++EN}`,objectId:s==null?void 0:s.guid,pageId:s==null||(o=s.attribution)===null||o===void 0||(l=o.page)===null||l===void 0?void 0:l.guid,frameId:s==null||(u=s.attribution)===null||u===void 0||(d=u.frame)===null||d===void 0?void 0:d.guid,startTime:(0,ur.monotonicTime)(),endTime:0,type:t,method:i,params:n||{},log:[],snapshots:[]};(h=s.instrumentation)===null||h===void 0||h.onEvent(s,p)}this.onmessage({guid:e,method:i,params:n})}constructor(){this._dispatchers=new Map,this.onmessage=i=>{},this._validateParams=void 0,this._validateMetadata=void 0,this._waitOperations=new Map;let e=i=>(n,s)=>{if(n&&typeof n=="object"&&typeof n.guid=="string"){let o=n.guid,l=this._dispatchers.get(o);if(!l)throw new da.ValidationError(`${s}: no object with guid ${o}`);if(i!=="*"&&l._type!==i)throw new da.ValidationError(`${s}: object with guid ${o} has type ${l._type}, expected ${i}`);return l}throw new da.ValidationError(`${s}: expected ${i}`)},t=(0,da.createScheme)(e);this._validateParams=(i,n,s)=>{let o=i+n[0].toUpperCase()+n.substring(1)+"Params";if(!t[o])throw new da.ValidationError(`Unknown scheme for ${i}.${n}`);return t[o](s,"")},this._validateMetadata=i=>(0,wN.tOptional)(t.Metadata)(i,"")}dispatch(e){return c(this,null,function*(){var t,i,n,s,o;let{id:l,guid:u,method:d,params:h,metadata:p}=e,f=this._dispatchers.get(u);if(!f){this.onmessage({id:l,error:(0,hl.serializeError)(new Error(vN.kBrowserOrContextClosedError))});return}if(d==="debugScopeState"){let E=this._dispatchers.get("");this.onmessage({id:l,result:E._debugScopeState()});return}let m,_;try{if(m=this._validateParams(f._type,d,h),_=this._validateMetadata(p),typeof f[d]!="function")throw new Error(`Mismatching dispatcher: "${f._type}" does not implement "${d}"`)}catch(E){this.onmessage({id:l,error:(0,hl.serializeError)(E)});return}let g=f._object instanceof yy.SdkObject?f._object:void 0,w={id:`call@${l}`,stack:_.stack,apiName:_.apiName,internal:_.internal,objectId:g==null?void 0:g.guid,pageId:g==null||(t=g.attribution)===null||t===void 0||(i=t.page)===null||i===void 0?void 0:i.guid,frameId:g==null||(n=g.attribution)===null||n===void 0||(s=n.frame)===null||s===void 0?void 0:s.guid,startTime:(0,ur.monotonicTime)(),endTime:0,type:f._type,method:d,params:h||{},log:[],snapshots:[]};if(g&&h!==null&&h!==void 0&&(o=h.info)!==null&&o!==void 0&&o.waitId){let E=h.info;switch(E.phase){case"before":{this._waitOperations.set(E.waitId,w),yield g.instrumentation.onBeforeCall(g,w),this.onmessage({id:l});return}case"log":{let N=this._waitOperations.get(E.waitId);N.log.push(E.message),g.instrumentation.onCallLog("api",E.message,g,N),this.onmessage({id:l});return}case"after":{let N=this._waitOperations.get(E.waitId);N.endTime=(0,ur.monotonicTime)(),N.error=E.error?{error:{name:"Error",message:E.error}}:void 0,this._waitOperations.delete(E.waitId),yield g.instrumentation.onAfterCall(g,N),this.onmessage({id:l});return}}}let b;yield g==null?void 0:g.instrumentation.onBeforeCall(g,w);try{let E=yield f[d](m,w);w.result=this._replaceDispatchersWithGuids(E)}catch(E){w.error=(0,hl.serializeError)(E),w.log.length&&(0,yN.rewriteErrorMessage)(E,E.message+SN(w.log)),b=(0,hl.serializeError)(E)}finally{w.endTime=(0,ur.monotonicTime)(),yield g==null?void 0:g.instrumentation.onAfterCall(g,w)}let C={id:l};w.result&&(C.result=w.result),b&&(C.error=b),this.onmessage(C)})}_replaceDispatchersWithGuids(e){if(!e)return e;if(e instanceof fl)return{guid:e._guid};if(Array.isArray(e))return e.map(t=>this._replaceDispatchersWithGuids(t));if(typeof e=="object"){let t={};for(let i of Object.keys(e))t[i]=this._replaceDispatchersWithGuids(e[i]);return t}return e}};zt.DispatcherConnection=ml;function SN(r){if(!r.length)return"";let e=" logs ",t=60,i=(t-e.length)/2,n=t-e.length-i;return`
${"=".repeat(i)}${e}${"=".repeat(n)}
${r.join(`
`)}
${"=".repeat(t)}`}var EN=0});var yn=v((iV,Sy)=>{"use strict";Sy.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}});var ha=v((nV,ef)=>{"use strict";var{EMPTY_BUFFER:CN}=yn();function Ey(r,e){if(r.length===0)return CN;if(r.length===1)return r[0];let t=Buffer.allocUnsafe(e),i=0;for(let n=0;n<r.length;n++){let s=r[n];t.set(s,i),i+=s.length}return i<e?t.slice(0,i):t}function Cy(r,e,t,i,n){for(let s=0;s<n;s++)t[i+s]=r[s]^e[s&3]}function ky(r,e){let t=r.length;for(let i=0;i<t;i++)r[i]^=e[i&3]}function Oy(r){return r.byteLength===r.buffer.byteLength?r.buffer:r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}function _l(r){if(_l.readOnly=!0,Buffer.isBuffer(r))return r;let e;return r instanceof ArrayBuffer?e=Buffer.from(r):ArrayBuffer.isView(r)?e=Buffer.from(r.buffer,r.byteOffset,r.byteLength):(e=Buffer.from(r),_l.readOnly=!1),e}try{let r=x("bufferutil"),e=r.BufferUtil||r;ef.exports={concat:Ey,mask(t,i,n,s,o){o<48?Cy(t,i,n,s,o):e.mask(t,i,n,s,o)},toArrayBuffer:Oy,toBuffer:_l,unmask(t,i){t.length<32?ky(t,i):e.unmask(t,i)}}}catch(r){ef.exports={concat:Ey,mask:Cy,toArrayBuffer:Oy,toBuffer:_l,unmask:ky}}});var Iy=v((sV,Ay)=>{"use strict";var Py=Symbol("kDone"),tf=Symbol("kRun"),Ty=class{constructor(e){this[Py]=()=>{this.pending--,this[tf]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[tf]()}[tf](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[Py])}}};Ay.exports=Ty});var ma=v((oV,Dy)=>{"use strict";var pa=x("zlib"),My=ha(),kN=Iy(),{kStatusCode:Fy,NOOP:ON}=yn(),PN=Buffer.from([0,0,255,255]),gl=Symbol("permessage-deflate"),zr=Symbol("total-length"),fa=Symbol("callback"),mi=Symbol("buffers"),wl=Symbol("error"),vl,Ry=class{constructor(e,t,i){if(this._maxPayload=i|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!vl){let n=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;vl=new kN(n)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[fa];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let t=this._options,i=e.find(n=>!(t.serverNoContextTakeover===!1&&n.server_no_context_takeover||n.server_max_window_bits&&(t.serverMaxWindowBits===!1||typeof t.serverMaxWindowBits=="number"&&t.serverMaxWindowBits>n.server_max_window_bits)||typeof t.clientMaxWindowBits=="number"&&!n.client_max_window_bits));if(!i)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(i.server_no_context_takeover=!0),t.clientNoContextTakeover&&(i.client_no_context_takeover=!0),typeof t.serverMaxWindowBits=="number"&&(i.server_max_window_bits=t.serverMaxWindowBits),typeof t.clientMaxWindowBits=="number"?i.client_max_window_bits=t.clientMaxWindowBits:(i.client_max_window_bits===!0||t.clientMaxWindowBits===!1)&&delete i.client_max_window_bits,i}acceptAsClient(e){let t=e[0];if(this._options.clientNoContextTakeover===!1&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!t.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(t.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return t}normalizeParams(e){return e.forEach(t=>{Object.keys(t).forEach(i=>{let n=t[i];if(n.length>1)throw new Error(`Parameter "${i}" must have only a single value`);if(n=n[0],i==="client_max_window_bits"){if(n!==!0){let s=+n;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${i}": ${n}`);n=s}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${i}": ${n}`)}else if(i==="server_max_window_bits"){let s=+n;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${i}": ${n}`);n=s}else if(i==="client_no_context_takeover"||i==="server_no_context_takeover"){if(n!==!0)throw new TypeError(`Invalid value for parameter "${i}": ${n}`)}else throw new Error(`Unknown parameter "${i}"`);t[i]=n})}),e}decompress(e,t,i){vl.add(n=>{this._decompress(e,t,(s,o)=>{n(),i(s,o)})})}compress(e,t,i){vl.add(n=>{this._compress(e,t,(s,o)=>{n(),i(s,o)})})}_decompress(e,t,i){let n=this._isServer?"client":"server";if(!this._inflate){let s=`${n}_max_window_bits`,o=typeof this.params[s]!="number"?pa.Z_DEFAULT_WINDOWBITS:this.params[s];this._inflate=pa.createInflateRaw(R(y({},this._options.zlibInflateOptions),{windowBits:o})),this._inflate[gl]=this,this._inflate[zr]=0,this._inflate[mi]=[],this._inflate.on("error",AN),this._inflate.on("data",Ny)}this._inflate[fa]=i,this._inflate.write(e),t&&this._inflate.write(PN),this._inflate.flush(()=>{let s=this._inflate[wl];if(s){this._inflate.close(),this._inflate=null,i(s);return}let o=My.concat(this._inflate[mi],this._inflate[zr]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[zr]=0,this._inflate[mi]=[],t&&this.params[`${n}_no_context_takeover`]&&this._inflate.reset()),i(null,o)})}_compress(e,t,i){let n=this._isServer?"server":"client";if(!this._deflate){let s=`${n}_max_window_bits`,o=typeof this.params[s]!="number"?pa.Z_DEFAULT_WINDOWBITS:this.params[s];this._deflate=pa.createDeflateRaw(R(y({},this._options.zlibDeflateOptions),{windowBits:o})),this._deflate[zr]=0,this._deflate[mi]=[],this._deflate.on("error",ON),this._deflate.on("data",TN)}this._deflate[fa]=i,this._deflate.write(e),this._deflate.flush(pa.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let s=My.concat(this._deflate[mi],this._deflate[zr]);t&&(s=s.slice(0,s.length-4)),this._deflate[fa]=null,this._deflate[zr]=0,this._deflate[mi]=[],t&&this.params[`${n}_no_context_takeover`]&&this._deflate.reset(),i(null,s)})}};Dy.exports=Ry;function TN(r){this[mi].push(r),this[zr]+=r.length}function Ny(r){if(this[zr]+=r.length,this[gl]._maxPayload<1||this[zr]<=this[gl]._maxPayload){this[mi].push(r);return}this[wl]=new RangeError("Max payload size exceeded"),this[wl].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[wl][Fy]=1009,this.removeListener("data",Ny),this.reset()}function AN(r){this[gl]._inflate=null,r[Fy]=1007,this[fa](r)}});var nf=v((aV,rf)=>{"use strict";function Ly(r){return r>=1e3&&r<=1014&&r!==1004&&r!==1005&&r!==1006||r>=3e3&&r<=4999}function qy(r){let e=r.length,t=0;for(;t<e;)if((r[t]&128)==0)t++;else if((r[t]&224)==192){if(t+1===e||(r[t+1]&192)!=128||(r[t]&254)==192)return!1;t+=2}else if((r[t]&240)==224){if(t+2>=e||(r[t+1]&192)!=128||(r[t+2]&192)!=128||r[t]===224&&(r[t+1]&224)==128||r[t]===237&&(r[t+1]&224)==160)return!1;t+=3}else if((r[t]&248)==240){if(t+3>=e||(r[t+1]&192)!=128||(r[t+2]&192)!=128||(r[t+3]&192)!=128||r[t]===240&&(r[t+1]&240)==128||r[t]===244&&r[t+1]>143||r[t]>244)return!1;t+=4}else return!1;return!0}try{let r=x("utf-8-validate");typeof r=="object"&&(r=r.Validation.isValidUTF8),rf.exports={isValidStatusCode:Ly,isValidUTF8(e){return e.length<150?qy(e):r(e)}}}catch(r){rf.exports={isValidStatusCode:Ly,isValidUTF8:qy}}});var af=v((cV,zy)=>{"use strict";var{Writable:IN}=x("stream"),By=ma(),{BINARY_TYPES:MN,EMPTY_BUFFER:FN,kStatusCode:RN,kWebSocket:NN}=yn(),{concat:sf,toArrayBuffer:DN,unmask:LN}=ha(),{isValidStatusCode:qN,isValidUTF8:Hy}=nf(),_a=0,jy=1,Wy=2,Uy=3,of=4,BN=5,$y=class extends IN{constructor(e,t,i,n){super();this._binaryType=e||MN[0],this[NN]=void 0,this._extensions=t||{},this._isServer=!!i,this._maxPayload=n|0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=_a,this._loop=!1}_write(e,t,i){if(this._opcode===8&&this._state==_a)return i();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(i)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let i=this._buffers[0];return this._buffers[0]=i.slice(e),i.slice(0,e)}let t=Buffer.allocUnsafe(e);do{let i=this._buffers[0],n=t.length-e;e>=i.length?t.set(this._buffers.shift(),n):(t.set(new Uint8Array(i.buffer,i.byteOffset,e),n),this._buffers[0]=i.slice(e)),e-=i.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do switch(this._state){case _a:t=this.getInfo();break;case jy:t=this.getPayloadLength16();break;case Wy:t=this.getPayloadLength64();break;case Uy:this.getMask();break;case of:t=this.getData(e);break;default:this._loop=!1;return}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}let e=this.consume(2);if((e[0]&48)!=0)return this._loop=!1,st(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");let t=(e[0]&64)==64;if(t&&!this._extensions[By.extensionName])return this._loop=!1,st(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(e[0]&128)==128,this._opcode=e[0]&15,this._payloadLength=e[1]&127,this._opcode===0){if(t)return this._loop=!1,st(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,st(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented)return this._loop=!1,st(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=t}else if(this._opcode>7&&this._opcode<11){if(!this._fin)return this._loop=!1,st(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(t)return this._loop=!1,st(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,st(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}else return this._loop=!1,st(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(e[1]&128)==128,this._isServer){if(!this._masked)return this._loop=!1,st(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,st(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(this._payloadLength===126)this._state=jy;else if(this._payloadLength===127)this._state=Wy;else return this.haveLength()}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}let e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,53-32)-1?(this._loop=!1,st(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,st(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=Uy:this._state=of}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=of}getData(e){let t=FN;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}t=this.consume(this._payloadLength),this._masked&&LN(t,this._mask)}if(this._opcode>7)return this.controlMessage(t);if(this._compressed){this._state=BN,this.decompress(t,e);return}return t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage()}decompress(e,t){this._extensions[By.extensionName].decompress(e,this._fin,(n,s)=>{if(n)return t(n);if(s.length){if(this._messageLength+=s.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(st(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(s)}let o=this.dataMessage();if(o)return t(o);this.startLoop(t)})}dataMessage(){if(this._fin){let e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let i;this._binaryType==="nodebuffer"?i=sf(t,e):this._binaryType==="arraybuffer"?i=DN(sf(t,e)):i=t,this.emit("message",i)}else{let i=sf(t,e);if(!Hy(i))return this._loop=!1,st(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",i.toString())}}this._state=_a}controlMessage(e){if(this._opcode===8)if(this._loop=!1,e.length===0)this.emit("conclude",1005,""),this.end();else{if(e.length===1)return st(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");{let t=e.readUInt16BE(0);if(!qN(t))return st(RangeError,`invalid status code ${t}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");let i=e.slice(2);if(!Hy(i))return st(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",t,i.toString()),this.end()}}else this._opcode===9?this.emit("ping",e):this.emit("pong",e);this._state=_a}};zy.exports=$y;function st(r,e,t,i,n){let s=new r(t?`Invalid WebSocket frame: ${e}`:e);return Error.captureStackTrace(s,st),s.code=n,s[RN]=i,s}});var cf=v((dV,Ky)=>{"use strict";var lV=x("net"),uV=x("tls"),{randomFillSync:HN}=x("crypto"),Vy=ma(),{EMPTY_BUFFER:jN}=yn(),{isValidStatusCode:WN}=nf(),{mask:Gy,toBuffer:Vr}=ha(),bn=Buffer.alloc(4),Gr=class{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){let i=t.mask&&t.readOnly,n=t.mask?6:2,s=e.length;e.length>=65536?(n+=8,s=127):e.length>125&&(n+=2,s=126);let o=Buffer.allocUnsafe(i?e.length+n:n);return o[0]=t.fin?t.opcode|128:t.opcode,t.rsv1&&(o[0]|=64),o[1]=s,s===126?o.writeUInt16BE(e.length,2):s===127&&(o.writeUInt32BE(0,2),o.writeUInt32BE(e.length,6)),t.mask?(HN(bn,0,4),o[1]|=128,o[n-4]=bn[0],o[n-3]=bn[1],o[n-2]=bn[2],o[n-1]=bn[3],i?(Gy(e,bn,o,n,e.length),[o]):(Gy(e,bn,e,0,e.length),[o,e])):[o,e]}close(e,t,i,n){let s;if(e===void 0)s=jN;else{if(typeof e!="number"||!WN(e))throw new TypeError("First argument must be a valid error code number");if(t===void 0||t==="")s=Buffer.allocUnsafe(2),s.writeUInt16BE(e,0);else{let o=Buffer.byteLength(t);if(o>123)throw new RangeError("The message must not be greater than 123 bytes");s=Buffer.allocUnsafe(2+o),s.writeUInt16BE(e,0),s.write(t,2)}}this._deflating?this.enqueue([this.doClose,s,i,n]):this.doClose(s,i,n)}doClose(e,t,i){this.sendFrame(Gr.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),i)}ping(e,t,i){let n=Vr(e);if(n.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,n,t,Vr.readOnly,i]):this.doPing(n,t,Vr.readOnly,i)}doPing(e,t,i,n){this.sendFrame(Gr.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:i}),n)}pong(e,t,i){let n=Vr(e);if(n.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,n,t,Vr.readOnly,i]):this.doPong(n,t,Vr.readOnly,i)}doPong(e,t,i,n){this.sendFrame(Gr.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:i}),n)}send(e,t,i){let n=Vr(e),s=this._extensions[Vy.extensionName],o=t.binary?2:1,l=t.compress;if(this._firstFragment?(this._firstFragment=!1,l&&s&&(l=n.length>=s._threshold),this._compress=l):(l=!1,o=0),t.fin&&(this._firstFragment=!0),s){let u={fin:t.fin,rsv1:l,opcode:o,mask:t.mask,readOnly:Vr.readOnly};this._deflating?this.enqueue([this.dispatch,n,this._compress,u,i]):this.dispatch(n,this._compress,u,i)}else this.sendFrame(Gr.frame(n,{fin:t.fin,rsv1:!1,opcode:o,mask:t.mask,readOnly:Vr.readOnly}),i)}dispatch(e,t,i,n){if(!t){this.sendFrame(Gr.frame(e,i),n);return}let s=this._extensions[Vy.extensionName];this._bufferedBytes+=e.length,this._deflating=!0,s.compress(e,i.fin,(o,l)=>{if(this._socket.destroyed){let u=new Error("The socket was closed while data was being compressed");typeof n=="function"&&n(u);for(let d=0;d<this._queue.length;d++){let h=this._queue[d][4];typeof h=="function"&&h(u)}return}this._bufferedBytes-=e.length,this._deflating=!1,i.readOnly=!1,this.sendFrame(Gr.frame(l,i),n),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[1].length,Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}};Ky.exports=Gr});var e0=v((hV,Qy)=>{"use strict";var ga=class{constructor(e,t){this.target=t,this.type=e}},Jy=class extends ga{constructor(e,t){super("message",t);this.data=e}},Xy=class extends ga{constructor(e,t,i){super("close",i);this.wasClean=i._closeFrameReceived&&i._closeFrameSent,this.reason=t,this.code=e}},Yy=class extends ga{constructor(e){super("open",e)}},Zy=class extends ga{constructor(e,t){super("error",t);this.message=e.message,this.error=e}},UN={addEventListener(r,e,t){if(typeof e!="function")return;function i(u){e.call(this,new Jy(u,this))}function n(u,d){e.call(this,new Xy(u,d,this))}function s(u){e.call(this,new Zy(u,this))}function o(){e.call(this,new Yy(this))}let l=t&&t.once?"once":"on";r==="message"?(i._listener=e,this[l](r,i)):r==="close"?(n._listener=e,this[l](r,n)):r==="error"?(s._listener=e,this[l](r,s)):r==="open"?(o._listener=e,this[l](r,o)):this[l](r,e)},removeEventListener(r,e){let t=this.listeners(r);for(let i=0;i<t.length;i++)(t[i]===e||t[i]._listener===e)&&this.removeListener(r,t[i])}};Qy.exports=UN});var lf=v((pV,t0)=>{"use strict";var wa=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function Tr(r,e,t){r[e]===void 0?r[e]=[t]:r[e].push(t)}function $N(r){let e=Object.create(null);if(r===void 0||r==="")return e;let t=Object.create(null),i=!1,n=!1,s=!1,o,l,u=-1,d=-1,h=0;for(;h<r.length;h++){let f=r.charCodeAt(h);if(o===void 0)if(d===-1&&wa[f]===1)u===-1&&(u=h);else if(f===32||f===9)d===-1&&u!==-1&&(d=h);else if(f===59||f===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${h}`);d===-1&&(d=h);let m=r.slice(u,d);f===44?(Tr(e,m,t),t=Object.create(null)):o=m,u=d=-1}else throw new SyntaxError(`Unexpected character at index ${h}`);else if(l===void 0)if(d===-1&&wa[f]===1)u===-1&&(u=h);else if(f===32||f===9)d===-1&&u!==-1&&(d=h);else if(f===59||f===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${h}`);d===-1&&(d=h),Tr(t,r.slice(u,d),!0),f===44&&(Tr(e,o,t),t=Object.create(null),o=void 0),u=d=-1}else if(f===61&&u!==-1&&d===-1)l=r.slice(u,h),u=d=-1;else throw new SyntaxError(`Unexpected character at index ${h}`);else if(n){if(wa[f]!==1)throw new SyntaxError(`Unexpected character at index ${h}`);u===-1?u=h:i||(i=!0),n=!1}else if(s)if(wa[f]===1)u===-1&&(u=h);else if(f===34&&u!==-1)s=!1,d=h;else if(f===92)n=!0;else throw new SyntaxError(`Unexpected character at index ${h}`);else if(f===34&&r.charCodeAt(h-1)===61)s=!0;else if(d===-1&&wa[f]===1)u===-1&&(u=h);else if(u!==-1&&(f===32||f===9))d===-1&&(d=h);else if(f===59||f===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${h}`);d===-1&&(d=h);let m=r.slice(u,d);i&&(m=m.replace(/\\/g,""),i=!1),Tr(t,l,m),f===44&&(Tr(e,o,t),t=Object.create(null),o=void 0),l=void 0,u=d=-1}else throw new SyntaxError(`Unexpected character at index ${h}`)}if(u===-1||s)throw new SyntaxError("Unexpected end of input");d===-1&&(d=h);let p=r.slice(u,d);return o===void 0?Tr(e,p,t):(l===void 0?Tr(t,p,!0):i?Tr(t,l,p.replace(/\\/g,"")):Tr(t,l,p),Tr(e,o,t)),e}function zN(r){return Object.keys(r).map(e=>{let t=r[e];return Array.isArray(t)||(t=[t]),t.map(i=>[e].concat(Object.keys(i).map(n=>{let s=i[n];return Array.isArray(s)||(s=[s]),s.map(o=>o===!0?n:`${n}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}t0.exports={format:zN,parse:$N}});var ff=v((mV,d0)=>{"use strict";var VN=x("events"),GN=x("https"),KN=x("http"),r0=x("net"),JN=x("tls"),{randomBytes:XN,createHash:YN}=x("crypto"),{Readable:fV}=x("stream"),{URL:uf}=x("url"),_i=ma(),ZN=af(),QN=cf(),{BINARY_TYPES:i0,EMPTY_BUFFER:df,GUID:eD,kStatusCode:tD,kWebSocket:Ct,NOOP:n0}=yn(),{addEventListener:rD,removeEventListener:iD}=e0(),{format:nD,parse:sD}=lf(),{toBuffer:oD}=ha(),Kr=["CONNECTING","OPEN","CLOSING","CLOSED"],hf=[8,13],aD=30*1e3,ke=class extends VN{constructor(e,t,i){super();this._binaryType=i0[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._extensions={},this._protocol="",this._readyState=ke.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,Array.isArray(t)?t=t.join(", "):typeof t=="object"&&t!==null&&(i=t,t=void 0),s0(this,e,t,i)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){!i0.includes(e)||(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get onclose(){}set onclose(e){}get onerror(){}set onerror(e){}get onopen(){}set onopen(e){}get onmessage(){}set onmessage(e){}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,i){let n=new ZN(this.binaryType,this._extensions,this._isServer,i);this._sender=new QN(e,this._extensions),this._receiver=n,this._socket=e,n[Ct]=this,e[Ct]=this,n.on("conclude",uD),n.on("drain",dD),n.on("error",hD),n.on("message",pD),n.on("ping",fD),n.on("pong",mD),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",c0),e.on("data",yl),e.on("end",l0),e.on("error",u0),this._readyState=ke.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=ke.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[_i.extensionName]&&this._extensions[_i.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=ke.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==ke.CLOSED){if(this.readyState===ke.CONNECTING){let i="WebSocket was closed before the connection was established";return Qt(this,this._req,i)}if(this.readyState===ke.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=ke.CLOSING,this._sender.close(e,t,!this._isServer,i=>{i||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),aD)}}ping(e,t,i){if(this.readyState===ke.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(i=e,e=t=void 0):typeof t=="function"&&(i=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==ke.OPEN){pf(this,e,i);return}t===void 0&&(t=!this._isServer),this._sender.ping(e||df,t,i)}pong(e,t,i){if(this.readyState===ke.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(i=e,e=t=void 0):typeof t=="function"&&(i=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==ke.OPEN){pf(this,e,i);return}t===void 0&&(t=!this._isServer),this._sender.pong(e||df,t,i)}send(e,t,i){if(this.readyState===ke.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"&&(i=t,t={}),typeof e=="number"&&(e=e.toString()),this.readyState!==ke.OPEN){pf(this,e,i);return}let n=y({binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0},t);this._extensions[_i.extensionName]||(n.compress=!1),this._sender.send(e||df,n,i)}terminate(){if(this.readyState!==ke.CLOSED){if(this.readyState===ke.CONNECTING){let e="WebSocket was closed before the connection was established";return Qt(this,this._req,e)}this._socket&&(this._readyState=ke.CLOSING,this._socket.destroy())}}};Object.defineProperty(ke,"CONNECTING",{enumerable:!0,value:Kr.indexOf("CONNECTING")});Object.defineProperty(ke.prototype,"CONNECTING",{enumerable:!0,value:Kr.indexOf("CONNECTING")});Object.defineProperty(ke,"OPEN",{enumerable:!0,value:Kr.indexOf("OPEN")});Object.defineProperty(ke.prototype,"OPEN",{enumerable:!0,value:Kr.indexOf("OPEN")});Object.defineProperty(ke,"CLOSING",{enumerable:!0,value:Kr.indexOf("CLOSING")});Object.defineProperty(ke.prototype,"CLOSING",{enumerable:!0,value:Kr.indexOf("CLOSING")});Object.defineProperty(ke,"CLOSED",{enumerable:!0,value:Kr.indexOf("CLOSED")});Object.defineProperty(ke.prototype,"CLOSED",{enumerable:!0,value:Kr.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach(r=>{Object.defineProperty(ke.prototype,r,{enumerable:!0})});["open","error","close","message"].forEach(r=>{Object.defineProperty(ke.prototype,`on${r}`,{enumerable:!0,get(){let e=this.listeners(r);for(let t=0;t<e.length;t++)if(e[t]._listener)return e[t]._listener},set(e){let t=this.listeners(r);for(let i=0;i<t.length;i++)t[i]._listener&&this.removeListener(r,t[i]);this.addEventListener(r,e)}})});ke.prototype.addEventListener=rD;ke.prototype.removeEventListener=iD;d0.exports=ke;function s0(r,e,t,i){let n=R(y({protocolVersion:hf[1],maxPayload:100*1024*1024,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10},i),{createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0});if(!hf.includes(n.protocolVersion))throw new RangeError(`Unsupported protocol version: ${n.protocolVersion} (supported versions: ${hf.join(", ")})`);let s;e instanceof uf?(s=e,r._url=e.href):(s=new uf(e),r._url=e);let o=s.protocol==="ws+unix:";if(!s.host&&(!o||!s.pathname))throw new Error(`Invalid URL: ${r.url}`);let l=s.protocol==="wss:"||s.protocol==="https:",u=l?443:80,d=XN(16).toString("base64"),h=l?GN.get:KN.get,p;if(n.createConnection=l?lD:cD,n.defaultPort=n.defaultPort||u,n.port=s.port||u,n.host=s.hostname.startsWith("[")?s.hostname.slice(1,-1):s.hostname,n.headers=y({"Sec-WebSocket-Version":n.protocolVersion,"Sec-WebSocket-Key":d,Connection:"Upgrade",Upgrade:"websocket"},n.headers),n.path=s.pathname+s.search,n.timeout=n.handshakeTimeout,n.perMessageDeflate&&(p=new _i(n.perMessageDeflate!==!0?n.perMessageDeflate:{},!1,n.maxPayload),n.headers["Sec-WebSocket-Extensions"]=nD({[_i.extensionName]:p.offer()})),t&&(n.headers["Sec-WebSocket-Protocol"]=t),n.origin&&(n.protocolVersion<13?n.headers["Sec-WebSocket-Origin"]=n.origin:n.headers.Origin=n.origin),(s.username||s.password)&&(n.auth=`${s.username}:${s.password}`),o){let m=n.path.split(":");n.socketPath=m[0],n.path=m[1]}let f=r._req=h(n);n.timeout&&f.on("timeout",()=>{Qt(r,f,"Opening handshake has timed out")}),f.on("error",m=>{f===null||f.aborted||(f=r._req=null,r._readyState=ke.CLOSING,r.emit("error",m),r.emitClose())}),f.on("response",m=>{let _=m.headers.location,g=m.statusCode;if(_&&n.followRedirects&&g>=300&&g<400){if(++r._redirects>n.maxRedirects){Qt(r,f,"Maximum redirects exceeded");return}f.abort();let w=new uf(_,e);s0(r,w,t,i)}else r.emit("unexpected-response",f,m)||Qt(r,f,`Unexpected server response: ${m.statusCode}`)}),f.on("upgrade",(m,_,g)=>{if(r.emit("upgrade",m),r.readyState!==ke.CONNECTING)return;f=r._req=null;let w=YN("sha1").update(d+eD).digest("base64");if(m.headers["sec-websocket-accept"]!==w){Qt(r,_,"Invalid Sec-WebSocket-Accept header");return}let b=m.headers["sec-websocket-protocol"],C=(t||"").split(/, */),E;if(!t&&b?E="Server sent a subprotocol but none was requested":t&&!b?E="Server sent no subprotocol":b&&!C.includes(b)&&(E="Server sent an invalid subprotocol"),E){Qt(r,_,E);return}b&&(r._protocol=b);let N=m.headers["sec-websocket-extensions"];if(N!==void 0){if(!p){Qt(r,_,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let P;try{P=sD(N)}catch(S){Qt(r,_,"Invalid Sec-WebSocket-Extensions header");return}let L=Object.keys(P);if(L.length){if(L.length!==1||L[0]!==_i.extensionName){Qt(r,_,"Server indicated an extension that was not requested");return}try{p.accept(P[_i.extensionName])}catch(S){Qt(r,_,"Invalid Sec-WebSocket-Extensions header");return}r._extensions[_i.extensionName]=p}}r.setSocket(_,g,n.maxPayload)})}function cD(r){return r.path=r.socketPath,r0.connect(r)}function lD(r){return r.path=void 0,!r.servername&&r.servername!==""&&(r.servername=r0.isIP(r.host)?"":r.host),JN.connect(r)}function Qt(r,e,t){r._readyState=ke.CLOSING;let i=new Error(t);Error.captureStackTrace(i,Qt),e.setHeader?(e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),e.once("abort",r.emitClose.bind(r)),r.emit("error",i)):(e.destroy(i),e.once("error",r.emit.bind(r,"error")),e.once("close",r.emitClose.bind(r)))}function pf(r,e,t){if(e){let i=oD(e).length;r._socket?r._sender._bufferedBytes+=i:r._bufferedAmount+=i}if(t){let i=new Error(`WebSocket is not open: readyState ${r.readyState} (${Kr[r.readyState]})`);t(i)}}function uD(r,e){let t=this[Ct];t._closeFrameReceived=!0,t._closeMessage=e,t._closeCode=r,t._socket[Ct]!==void 0&&(t._socket.removeListener("data",yl),process.nextTick(a0,t._socket),r===1005?t.close():t.close(r,e))}function dD(){this[Ct]._socket.resume()}function hD(r){let e=this[Ct];e._socket[Ct]!==void 0&&(e._socket.removeListener("data",yl),process.nextTick(a0,e._socket),e.close(r[tD])),e.emit("error",r)}function o0(){this[Ct].emitClose()}function pD(r){this[Ct].emit("message",r)}function fD(r){let e=this[Ct];e.pong(r,!e._isServer,n0),e.emit("ping",r)}function mD(r){this[Ct].emit("pong",r)}function a0(r){r.resume()}function c0(){let r=this[Ct];this.removeListener("close",c0),this.removeListener("data",yl),this.removeListener("end",l0),r._readyState=ke.CLOSING;let e;!this._readableState.endEmitted&&!r._closeFrameReceived&&!r._receiver._writableState.errorEmitted&&(e=r._socket.read())!==null&&r._receiver.write(e),r._receiver.end(),this[Ct]=void 0,clearTimeout(r._closeTimer),r._receiver._writableState.finished||r._receiver._writableState.errorEmitted?r.emitClose():(r._receiver.on("error",o0),r._receiver.on("finish",o0))}function yl(r){this[Ct]._receiver.write(r)||this.pause()}function l0(){let r=this[Ct];r._readyState=ke.CLOSING,r._receiver.end(),this.end()}function u0(){let r=this[Ct];this.removeListener("error",u0),this.on("error",n0),r&&(r._readyState=ke.CLOSING,this.destroy())}});var m0=v((_V,f0)=>{"use strict";var{Duplex:_D}=x("stream");function h0(r){r.emit("close")}function gD(){!this.destroyed&&this._writableState.finished&&this.destroy()}function p0(r){this.removeListener("error",p0),this.destroy(),this.listenerCount("error")===0&&this.emit("error",r)}function wD(r,e){let t=!0,i=!0;function n(){t&&r._socket.resume()}r.readyState===r.CONNECTING?r.once("open",function(){r._receiver.removeAllListeners("drain"),r._receiver.on("drain",n)}):(r._receiver.removeAllListeners("drain"),r._receiver.on("drain",n));let s=new _D(R(y({},e),{autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1}));return r.on("message",function(l){s.push(l)||(t=!1,r._socket.pause())}),r.once("error",function(l){s.destroyed||(i=!1,s.destroy(l))}),r.once("close",function(){s.destroyed||s.push(null)}),s._destroy=function(o,l){if(r.readyState===r.CLOSED){l(o),process.nextTick(h0,s);return}let u=!1;r.once("error",function(h){u=!0,l(h)}),r.once("close",function(){u||l(o),process.nextTick(h0,s)}),i&&r.terminate()},s._final=function(o){if(r.readyState===r.CONNECTING){r.once("open",function(){s._final(o)});return}r._socket!==null&&(r._socket._writableState.finished?(o(),s._readableState.endEmitted&&s.destroy()):(r._socket.once("finish",function(){o()}),r.close()))},s._read=function(){r.readyState===r.OPEN&&!t&&(t=!0,r._receiver._writableState.needDrain||r._socket.resume())},s._write=function(o,l,u){if(r.readyState===r.CONNECTING){r.once("open",function(){s._write(o,l,u)});return}r.send(o,u)},s.on("end",gD),s.on("error",p0),s}f0.exports=wD});var b0=v((yV,y0)=>{"use strict";var vD=x("events"),bl=x("http"),gV=x("https"),wV=x("net"),vV=x("tls"),{createHash:yD}=x("crypto"),xn=ma(),bD=ff(),{format:xD,parse:SD}=lf(),{GUID:ED,kWebSocket:CD}=yn(),kD=/^[+/0-9A-Za-z]{22}==$/,_0=0,g0=1,w0=2,v0=class extends vD{constructor(e,t){super();if(e=y({maxPayload:100*1024*1024,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null},e),e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=bl.createServer((i,n)=>{let s=bl.STATUS_CODES[426];n.writeHead(426,{"Content-Length":s.length,"Content-Type":"text/plain"}),n.end(s)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){let i=this.emit.bind(this,"connection");this._removeListeners=OD(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(n,s,o)=>{this.handleUpgrade(n,s,o,i)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e,this._state=_0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(e&&this.once("close",e),this._state===w0){process.nextTick(mf,this);return}if(this._state===g0)return;if(this._state=g0,this.clients)for(let i of this.clients)i.terminate();let t=this._server;if(t&&(this._removeListeners(),this._removeListeners=this._server=null,this.options.port!=null)){t.close(mf.bind(void 0,this));return}process.nextTick(mf,this)}shouldHandle(e){if(this.options.path){let t=e.url.indexOf("?");if((t!==-1?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,i,n){t.on("error",_f);let s=e.headers["sec-websocket-key"]!==void 0?e.headers["sec-websocket-key"].trim():!1,o=+e.headers["sec-websocket-version"],l={};if(e.method!=="GET"||e.headers.upgrade.toLowerCase()!=="websocket"||!s||!kD.test(s)||o!==8&&o!==13||!this.shouldHandle(e))return va(t,400);if(this.options.perMessageDeflate){let u=new xn(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let d=SD(e.headers["sec-websocket-extensions"]);d[xn.extensionName]&&(u.accept(d[xn.extensionName]),l[xn.extensionName]=u)}catch(d){return va(t,400)}}if(this.options.verifyClient){let u={origin:e.headers[`${o===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(u,(d,h,p,f)=>{if(!d)return va(t,h||401,p,f);this.completeUpgrade(s,l,e,t,i,n)});return}if(!this.options.verifyClient(u))return va(t,401)}this.completeUpgrade(s,l,e,t,i,n)}completeUpgrade(e,t,i,n,s,o){if(!n.readable||!n.writable)return n.destroy();if(n[CD])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>_0)return va(n,503);let l=yD("sha1").update(e+ED).digest("base64"),u=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${l}`],d=new bD(null),h=i.headers["sec-websocket-protocol"];if(h&&(h=h.split(",").map(PD),this.options.handleProtocols?h=this.options.handleProtocols(h,i):h=h[0],h&&(u.push(`Sec-WebSocket-Protocol: ${h}`),d._protocol=h)),t[xn.extensionName]){let p=t[xn.extensionName].params,f=xD({[xn.extensionName]:[p]});u.push(`Sec-WebSocket-Extensions: ${f}`),d._extensions=t}this.emit("headers",u,i),n.write(u.concat(`\r
`).join(`\r
`)),n.removeListener("error",_f),d.setSocket(n,s,this.options.maxPayload),this.clients&&(this.clients.add(d),d.on("close",()=>this.clients.delete(d))),o(d,i)}};y0.exports=v0;function OD(r,e){for(let t of Object.keys(e))r.on(t,e[t]);return function(){for(let i of Object.keys(e))r.removeListener(i,e[i])}}function mf(r){r._state=w0,r.emit("close")}function _f(){this.destroy()}function va(r,e,t,i){r.writable&&(t=t||bl.STATUS_CODES[e],i=y({Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(t)},i),r.write(`HTTP/1.1 ${e} ${bl.STATUS_CODES[e]}\r
`+Object.keys(i).map(n=>`${n}: ${i[n]}`).join(`\r
`)+`\r
\r
`+t)),r.removeListener("error",_f),r.destroy()}function PD(r){return r.trim()}});var xs=v((bV,x0)=>{"use strict";var ya=ff();ya.createWebSocketStream=m0();ya.Server=b0();ya.Receiver=af();ya.Sender=cf();x0.exports=ya});var er=v(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});Ss.TimeoutSettings=Ss.DEFAULT_TIMEOUT=void 0;var TD=G(),S0=3e4;Ss.DEFAULT_TIMEOUT=S0;var gf=(0,TD.debugMode)()?0:S0,E0=class{constructor(e){this._parent=void 0,this._defaultTimeout=null,this._defaultNavigationTimeout=null,this._parent=e}setDefaultTimeout(e){this._defaultTimeout=e}setDefaultNavigationTimeout(e){this._defaultNavigationTimeout=e}navigationTimeout(e){return typeof e.timeout=="number"?e.timeout:this._defaultNavigationTimeout!==null?this._defaultNavigationTimeout:this._defaultTimeout!==null?this._defaultTimeout:this._parent?this._parent.navigationTimeout(e):gf}timeout(e){return typeof e.timeout=="number"?e.timeout:this._defaultTimeout!==null?this._defaultTimeout:this._parent?this._parent.timeout(e):gf}static timeout(e){return typeof e.timeout=="number"?e.timeout:gf}};Ss.TimeoutSettings=E0});var Xe=v(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.RecentLogsCollector=Es.debugLogger=void 0;var wf=C0(Pr()),AD=C0(x("fs"));function C0(r){return r&&r.__esModule?r:{default:r}}var ID={api:45,protocol:34,install:34,download:34,browser:0,proxy:92,error:160,"channel:command":33,"channel:response":202,"channel:event":207},k0=class{constructor(){if(this._debuggers=new Map,process.env.DEBUG_FILE){let e=new RegExp(["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|"),"g"),t=AD.default.createWriteStream(process.env.DEBUG_FILE);wf.default.log=i=>{t.write(i.replace(e,"")),t.write(`
`)}}}log(e,t){let i=this._debuggers.get(e);i||(i=(0,wf.default)(`pw:${e}`),this._debuggers.set(e,i),i.color=ID[e]),i(t)}isEnabled(e){return wf.default.enabled(`pw:${e}`)}},MD=new k0;Es.debugLogger=MD;var xl=150,O0=class{constructor(){this._logs=[]}log(e){this._logs.push(e),this._logs.length===xl*2&&this._logs.splice(0,xl)}recentLogs(){return this._logs.length>xl?this._logs.slice(-xl):this._logs}};Es.RecentLogsCollector=O0});var _t=v(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});Sl.eventsHelper=void 0;var P0=class{static addEventListener(e,t,i){return e.on(t,i),{emitter:e,eventName:t,handler:i}}static removeEventListeners(e){for(let t of e)t.emitter.removeListener(t.eventName,t.handler);e.splice(0,e.length)}},FD=P0;Sl.eventsHelper=FD});var Mt=v(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.helper=void 0;var T0=Xe(),El=_t(),A0=class{static completeUserURL(e){return(e.startsWith("localhost")||e.startsWith("127.0.0.1"))&&(e="http://"+e),e}static enclosingIntRect(e){let t=Math.floor(e.x+.001),i=Math.floor(e.y+.001),n=Math.ceil(e.x+e.width-.001),s=Math.ceil(e.y+e.height-.001);return{x:t,y:i,width:n-t,height:s-i}}static enclosingIntSize(e){return{width:Math.floor(e.width+.001),height:Math.floor(e.height+.001)}}static getViewportSizeFromWindowFeatures(e){let t=e.find(o=>o.startsWith("width=")),i=e.find(o=>o.startsWith("height=")),n=t?parseInt(t.substring(6),10):NaN,s=i?parseInt(i.substring(7),10):NaN;return!Number.isNaN(n)&&!Number.isNaN(s)?{width:n,height:s}:null}static waitForEvent(e,t,i,n){let s=[],o=new Promise((u,d)=>{s.push(El.eventsHelper.addEventListener(t,i,h=>{try{if(n&&!n(h))return;El.eventsHelper.removeEventListeners(s),u(h)}catch(p){El.eventsHelper.removeEventListeners(s),d(p)}}))}),l=()=>El.eventsHelper.removeEventListeners(s);return e&&e.cleanupWhenAborted(l),{promise:o,dispose:l}}static secondsToRoundishMillis(e){return(e*1e6|0)/1e3}static millisToRoundishMillis(e){return(e*1e3|0)/1e3}static debugProtocolLogger(e){return(t,i)=>{e&&e(t,i),T0.debugLogger.isEnabled("protocol")&&T0.debugLogger.log("protocol",(t==="send"?"SEND \u25BA ":"\u25C0 RECV ")+JSON.stringify(i))}}static formatBrowserLogs(e){return e.length?`
`+"=".repeat(20)+" Browser output: "+"=".repeat(20)+`
`+e.join(`
`):""}},RD=A0;Cl.helper=RD});var Vt=v(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.raceAgainstDeadline=DD;Sn.ManualPromise=Sn.DeadlineRunner=void 0;var ND=G(),I0,M0,vf=class{constructor(e,t){this._timer=void 0,this.result=new yf,e.then(i=>{this._finish({result:i})}).catch(i=>{this._finish(void 0,i)}),this.updateDeadline(t)}_finish(e,t){this.result.isDone()||(this.updateDeadline(0),e?this.result.resolve(e):this.result.reject(t))}interrupt(){this.updateDeadline(-1)}updateDeadline(e){if(this._timer&&(clearTimeout(this._timer),this._timer=void 0),e===0)return;let t=e-(0,ND.monotonicTime)();t<=0?this._finish({timedOut:!0}):this._timer=setTimeout(()=>this._finish({timedOut:!0}),t)}};Sn.DeadlineRunner=vf;function DD(r,e){return c(this,null,function*(){return new vf(r,e).result})}I0=Symbol.species;M0=Symbol.toStringTag;var yf=class extends Promise{constructor(){let e,t;super((i,n)=>{e=i,t=n});this._resolve=void 0,this._reject=void 0,this._isDone=void 0,this._isDone=!1,this._resolve=e,this._reject=t}isDone(){return this._isDone}resolve(e){this._isDone=!0,this._resolve(e)}reject(e){this._isDone=!0,this._reject(e)}static get[I0](){return Promise}get[M0](){return"ManualPromise"}};Sn.ManualPromise=yf});var R0=v(F0=>{"use strict";var de=F0,kl=x("buffer").Buffer,LD=x("os");de.toBuffer=function(r,e,t){t=~~t;var i;if(this.isV4Format(r))i=e||new kl(t+4),r.split(/\./g).map(function(h){i[t++]=parseInt(h,10)&255});else if(this.isV6Format(r)){var n=r.split(":",8),s;for(s=0;s<n.length;s++){var o=this.isV4Format(n[s]),l;o&&(l=this.toBuffer(n[s]),n[s]=l.slice(0,2).toString("hex")),l&&++s<8&&n.splice(s,0,l.slice(2,4).toString("hex"))}if(n[0]==="")for(;n.length<8;)n.unshift("0");else if(n[n.length-1]==="")for(;n.length<8;)n.push("0");else if(n.length<8){for(s=0;s<n.length&&n[s]!=="";s++);var u=[s,1];for(s=9-n.length;s>0;s--)u.push("0");n.splice.apply(n,u)}for(i=e||new kl(t+16),s=0;s<n.length;s++){var d=parseInt(n[s],16);i[t++]=d>>8&255,i[t++]=d&255}}if(!i)throw Error("Invalid ip address: "+r);return i};de.toString=function(r,e,t){e=~~e,t=t||r.length-e;var i=[];if(t===4){for(var n=0;n<t;n++)i.push(r[e+n]);i=i.join(".")}else if(t===16){for(var n=0;n<t;n+=2)i.push(r.readUInt16BE(e+n).toString(16));i=i.join(":"),i=i.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),i=i.replace(/:{3,4}/,"::")}return i};var qD=/^(\d{1,3}\.){3,3}\d{1,3}$/,BD=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;de.isV4Format=function(r){return qD.test(r)};de.isV6Format=function(r){return BD.test(r)};function bf(r){return r?r.toLowerCase():"ipv4"}de.fromPrefixLen=function(r,e){r>32?e="ipv6":e=bf(e);var t=4;e==="ipv6"&&(t=16);for(var i=new kl(t),n=0,s=i.length;n<s;++n){var o=8;r<8&&(o=r),r-=o,i[n]=~(255>>o)&255}return de.toString(i)};de.mask=function(r,e){r=de.toBuffer(r),e=de.toBuffer(e);var t=new kl(Math.max(r.length,e.length)),i=0;if(r.length===e.length)for(i=0;i<r.length;i++)t[i]=r[i]&e[i];else if(e.length===4)for(i=0;i<e.length;i++)t[i]=r[r.length-4+i]&e[i];else{for(var i=0;i<t.length-6;i++)t[i]=0;for(t[10]=255,t[11]=255,i=0;i<r.length;i++)t[i+12]=r[i]&e[i+12];i=i+12}for(;i<t.length;i++)t[i]=0;return de.toString(t)};de.cidr=function(r){var e=r.split("/"),t=e[0];if(e.length!==2)throw new Error("invalid CIDR subnet: "+t);var i=de.fromPrefixLen(parseInt(e[1],10));return de.mask(t,i)};de.subnet=function(r,e){for(var t=de.toLong(de.mask(r,e)),i=de.toBuffer(e),n=0,s=0;s<i.length;s++)if(i[s]===255)n+=8;else for(var o=i[s]&255;o;)o=o<<1&255,n++;var l=Math.pow(2,32-n);return{networkAddress:de.fromLong(t),firstAddress:l<=2?de.fromLong(t):de.fromLong(t+1),lastAddress:l<=2?de.fromLong(t+l-1):de.fromLong(t+l-2),broadcastAddress:de.fromLong(t+l-1),subnetMask:e,subnetMaskLength:n,numHosts:l<=2?l:l-2,length:l,contains:function(u){return t===de.toLong(de.mask(u,e))}}};de.cidrSubnet=function(r){var e=r.split("/"),t=e[0];if(e.length!==2)throw new Error("invalid CIDR subnet: "+t);var i=de.fromPrefixLen(parseInt(e[1],10));return de.subnet(t,i)};de.not=function(r){for(var e=de.toBuffer(r),t=0;t<e.length;t++)e[t]=255^e[t];return de.toString(e)};de.or=function(r,e){if(r=de.toBuffer(r),e=de.toBuffer(e),r.length===e.length){for(var t=0;t<r.length;++t)r[t]|=e[t];return de.toString(r)}else{var i=r,n=e;e.length>r.length&&(i=e,n=r);for(var s=i.length-n.length,t=s;t<i.length;++t)i[t]|=n[t-s];return de.toString(i)}};de.isEqual=function(r,e){if(r=de.toBuffer(r),e=de.toBuffer(e),r.length===e.length){for(var t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}if(e.length===4){var i=e;e=r,r=i}for(var t=0;t<10;t++)if(e[t]!==0)return!1;var n=e.readUInt16BE(10);if(n!==0&&n!==65535)return!1;for(var t=0;t<4;t++)if(r[t]!==e[t+12])return!1;return!0};de.isPrivate=function(r){return/^(::f{4}:)?10\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(r)||/^(::f{4}:)?192\.168\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(r)||/^(::f{4}:)?172\.(1[6-9]|2\d|30|31)\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(r)||/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(r)||/^(::f{4}:)?169\.254\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(r)||/^f[cd][0-9a-f]{2}:/i.test(r)||/^fe80:/i.test(r)||/^::1$/.test(r)||/^::$/.test(r)};de.isPublic=function(r){return!de.isPrivate(r)};de.isLoopback=function(r){return/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})/.test(r)||/^fe80::1$/.test(r)||/^::1$/.test(r)||/^::$/.test(r)};de.loopback=function(r){if(r=bf(r),r!=="ipv4"&&r!=="ipv6")throw new Error("family must be ipv4 or ipv6");return r==="ipv4"?"127.0.0.1":"fe80::1"};de.address=function(r,e){var t=LD.networkInterfaces(),i;if(e=bf(e),r&&r!=="private"&&r!=="public"){var n=t[r].filter(function(s){var o=s.family.toLowerCase();return o===e});return n.length===0?void 0:n[0].address}var i=Object.keys(t).map(function(s){var o=t[s].filter(function(l){return l.family=l.family.toLowerCase(),l.family!==e||de.isLoopback(l.address)?!1:r?r==="public"?de.isPrivate(l.address):de.isPublic(l.address):!0});return o.length?o[0].address:void 0}).filter(Boolean);return i.length?i[0]:de.loopback(e)};de.toLong=function(r){var e=0;return r.split(".").forEach(function(t){e<<=8,e+=parseInt(t)}),e>>>0};de.fromLong=function(r){return(r>>>24)+"."+(r>>16&255)+"."+(r>>8&255)+"."+(r&255)}});var q0=v(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});var N0=x("buffer"),En={INVALID_ENCODING:"Invalid encoding provided. Please specify a valid encoding the internal Node.js Buffer supports.",INVALID_SMARTBUFFER_SIZE:"Invalid size provided. Size must be a valid integer greater than zero.",INVALID_SMARTBUFFER_BUFFER:"Invalid Buffer provided in SmartBufferOptions.",INVALID_SMARTBUFFER_OBJECT:"Invalid SmartBufferOptions object supplied to SmartBuffer constructor or factory methods.",INVALID_OFFSET:"An invalid offset value was provided.",INVALID_OFFSET_NON_NUMBER:"An invalid offset value was provided. A numeric value is required.",INVALID_LENGTH:"An invalid length value was provided.",INVALID_LENGTH_NON_NUMBER:"An invalid length value was provived. A numeric value is required.",INVALID_TARGET_OFFSET:"Target offset is beyond the bounds of the internal SmartBuffer data.",INVALID_TARGET_LENGTH:"Specified length value moves cursor beyong the bounds of the internal SmartBuffer data.",INVALID_READ_BEYOND_BOUNDS:"Attempted to read beyond the bounds of the managed data.",INVALID_WRITE_BEYOND_BOUNDS:"Attempted to write beyond the bounds of the managed data."};Jr.ERRORS=En;function HD(r){if(!N0.Buffer.isEncoding(r))throw new Error(En.INVALID_ENCODING)}Jr.checkEncoding=HD;function D0(r){return typeof r=="number"&&isFinite(r)&&$D(r)}Jr.isFiniteInteger=D0;function L0(r,e){if(typeof r=="number"){if(!D0(r)||r<0)throw new Error(e?En.INVALID_OFFSET:En.INVALID_LENGTH)}else throw new Error(e?En.INVALID_OFFSET_NON_NUMBER:En.INVALID_LENGTH_NON_NUMBER)}function jD(r){L0(r,!1)}Jr.checkLengthValue=jD;function WD(r){L0(r,!0)}Jr.checkOffsetValue=WD;function UD(r,e){if(r<0||r>e.length)throw new Error(En.INVALID_TARGET_OFFSET)}Jr.checkTargetOffset=UD;function $D(r){return typeof r=="number"&&isFinite(r)&&Math.floor(r)===r}function zD(r){if(typeof BigInt=="undefined")throw new Error("Platform does not support JS BigInt type.");if(typeof N0.Buffer.prototype[r]=="undefined")throw new Error(`Platform does not support Buffer.prototype.${r}.`)}Jr.bigIntAndBufferInt64Check=zD});var H0=v(xf=>{"use strict";Object.defineProperty(xf,"__esModule",{value:!0});var xe=q0(),B0=4096,VD="utf8",Ol=class{constructor(e){if(this.length=0,this._encoding=VD,this._writeOffset=0,this._readOffset=0,Ol.isSmartBufferOptions(e))if(e.encoding&&(xe.checkEncoding(e.encoding),this._encoding=e.encoding),e.size)if(xe.isFiniteInteger(e.size)&&e.size>0)this._buff=Buffer.allocUnsafe(e.size);else throw new Error(xe.ERRORS.INVALID_SMARTBUFFER_SIZE);else if(e.buff)if(Buffer.isBuffer(e.buff))this._buff=e.buff,this.length=e.buff.length;else throw new Error(xe.ERRORS.INVALID_SMARTBUFFER_BUFFER);else this._buff=Buffer.allocUnsafe(B0);else{if(typeof e!="undefined")throw new Error(xe.ERRORS.INVALID_SMARTBUFFER_OBJECT);this._buff=Buffer.allocUnsafe(B0)}}static fromSize(e,t){return new this({size:e,encoding:t})}static fromBuffer(e,t){return new this({buff:e,encoding:t})}static fromOptions(e){return new this(e)}static isSmartBufferOptions(e){let t=e;return t&&(t.encoding!==void 0||t.size!==void 0||t.buff!==void 0)}readInt8(e){return this._readNumberValue(Buffer.prototype.readInt8,1,e)}readInt16BE(e){return this._readNumberValue(Buffer.prototype.readInt16BE,2,e)}readInt16LE(e){return this._readNumberValue(Buffer.prototype.readInt16LE,2,e)}readInt32BE(e){return this._readNumberValue(Buffer.prototype.readInt32BE,4,e)}readInt32LE(e){return this._readNumberValue(Buffer.prototype.readInt32LE,4,e)}readBigInt64BE(e){return xe.bigIntAndBufferInt64Check("readBigInt64BE"),this._readNumberValue(Buffer.prototype.readBigInt64BE,8,e)}readBigInt64LE(e){return xe.bigIntAndBufferInt64Check("readBigInt64LE"),this._readNumberValue(Buffer.prototype.readBigInt64LE,8,e)}writeInt8(e,t){return this._writeNumberValue(Buffer.prototype.writeInt8,1,e,t),this}insertInt8(e,t){return this._insertNumberValue(Buffer.prototype.writeInt8,1,e,t)}writeInt16BE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt16BE,2,e,t)}insertInt16BE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt16BE,2,e,t)}writeInt16LE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt16LE,2,e,t)}insertInt16LE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt16LE,2,e,t)}writeInt32BE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt32BE,4,e,t)}insertInt32BE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt32BE,4,e,t)}writeInt32LE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt32LE,4,e,t)}insertInt32LE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt32LE,4,e,t)}writeBigInt64BE(e,t){return xe.bigIntAndBufferInt64Check("writeBigInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigInt64BE,8,e,t)}insertBigInt64BE(e,t){return xe.bigIntAndBufferInt64Check("writeBigInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigInt64BE,8,e,t)}writeBigInt64LE(e,t){return xe.bigIntAndBufferInt64Check("writeBigInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigInt64LE,8,e,t)}insertBigInt64LE(e,t){return xe.bigIntAndBufferInt64Check("writeBigInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigInt64LE,8,e,t)}readUInt8(e){return this._readNumberValue(Buffer.prototype.readUInt8,1,e)}readUInt16BE(e){return this._readNumberValue(Buffer.prototype.readUInt16BE,2,e)}readUInt16LE(e){return this._readNumberValue(Buffer.prototype.readUInt16LE,2,e)}readUInt32BE(e){return this._readNumberValue(Buffer.prototype.readUInt32BE,4,e)}readUInt32LE(e){return this._readNumberValue(Buffer.prototype.readUInt32LE,4,e)}readBigUInt64BE(e){return xe.bigIntAndBufferInt64Check("readBigUInt64BE"),this._readNumberValue(Buffer.prototype.readBigUInt64BE,8,e)}readBigUInt64LE(e){return xe.bigIntAndBufferInt64Check("readBigUInt64LE"),this._readNumberValue(Buffer.prototype.readBigUInt64LE,8,e)}writeUInt8(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt8,1,e,t)}insertUInt8(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt8,1,e,t)}writeUInt16BE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt16BE,2,e,t)}insertUInt16BE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt16BE,2,e,t)}writeUInt16LE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt16LE,2,e,t)}insertUInt16LE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt16LE,2,e,t)}writeUInt32BE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt32BE,4,e,t)}insertUInt32BE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt32BE,4,e,t)}writeUInt32LE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt32LE,4,e,t)}insertUInt32LE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt32LE,4,e,t)}writeBigUInt64BE(e,t){return xe.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64BE,8,e,t)}insertBigUInt64BE(e,t){return xe.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64BE,8,e,t)}writeBigUInt64LE(e,t){return xe.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64LE,8,e,t)}insertBigUInt64LE(e,t){return xe.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64LE,8,e,t)}readFloatBE(e){return this._readNumberValue(Buffer.prototype.readFloatBE,4,e)}readFloatLE(e){return this._readNumberValue(Buffer.prototype.readFloatLE,4,e)}writeFloatBE(e,t){return this._writeNumberValue(Buffer.prototype.writeFloatBE,4,e,t)}insertFloatBE(e,t){return this._insertNumberValue(Buffer.prototype.writeFloatBE,4,e,t)}writeFloatLE(e,t){return this._writeNumberValue(Buffer.prototype.writeFloatLE,4,e,t)}insertFloatLE(e,t){return this._insertNumberValue(Buffer.prototype.writeFloatLE,4,e,t)}readDoubleBE(e){return this._readNumberValue(Buffer.prototype.readDoubleBE,8,e)}readDoubleLE(e){return this._readNumberValue(Buffer.prototype.readDoubleLE,8,e)}writeDoubleBE(e,t){return this._writeNumberValue(Buffer.prototype.writeDoubleBE,8,e,t)}insertDoubleBE(e,t){return this._insertNumberValue(Buffer.prototype.writeDoubleBE,8,e,t)}writeDoubleLE(e,t){return this._writeNumberValue(Buffer.prototype.writeDoubleLE,8,e,t)}insertDoubleLE(e,t){return this._insertNumberValue(Buffer.prototype.writeDoubleLE,8,e,t)}readString(e,t){let i;typeof e=="number"?(xe.checkLengthValue(e),i=Math.min(e,this.length-this._readOffset)):(t=e,i=this.length-this._readOffset),typeof t!="undefined"&&xe.checkEncoding(t);let n=this._buff.slice(this._readOffset,this._readOffset+i).toString(t||this._encoding);return this._readOffset+=i,n}insertString(e,t,i){return xe.checkOffsetValue(t),this._handleString(e,!0,t,i)}writeString(e,t,i){return this._handleString(e,!1,t,i)}readStringNT(e){typeof e!="undefined"&&xe.checkEncoding(e);let t=this.length;for(let n=this._readOffset;n<this.length;n++)if(this._buff[n]===0){t=n;break}let i=this._buff.slice(this._readOffset,t);return this._readOffset=t+1,i.toString(e||this._encoding)}insertStringNT(e,t,i){return xe.checkOffsetValue(t),this.insertString(e,t,i),this.insertUInt8(0,t+e.length),this}writeStringNT(e,t,i){return this.writeString(e,t,i),this.writeUInt8(0,typeof t=="number"?t+e.length:this.writeOffset),this}readBuffer(e){typeof e!="undefined"&&xe.checkLengthValue(e);let t=typeof e=="number"?e:this.length,i=Math.min(this.length,this._readOffset+t),n=this._buff.slice(this._readOffset,i);return this._readOffset=i,n}insertBuffer(e,t){return xe.checkOffsetValue(t),this._handleBuffer(e,!0,t)}writeBuffer(e,t){return this._handleBuffer(e,!1,t)}readBufferNT(){let e=this.length;for(let i=this._readOffset;i<this.length;i++)if(this._buff[i]===0){e=i;break}let t=this._buff.slice(this._readOffset,e);return this._readOffset=e+1,t}insertBufferNT(e,t){return xe.checkOffsetValue(t),this.insertBuffer(e,t),this.insertUInt8(0,t+e.length),this}writeBufferNT(e,t){return typeof t!="undefined"&&xe.checkOffsetValue(t),this.writeBuffer(e,t),this.writeUInt8(0,typeof t=="number"?t+e.length:this._writeOffset),this}clear(){return this._writeOffset=0,this._readOffset=0,this.length=0,this}remaining(){return this.length-this._readOffset}get readOffset(){return this._readOffset}set readOffset(e){xe.checkOffsetValue(e),xe.checkTargetOffset(e,this),this._readOffset=e}get writeOffset(){return this._writeOffset}set writeOffset(e){xe.checkOffsetValue(e),xe.checkTargetOffset(e,this),this._writeOffset=e}get encoding(){return this._encoding}set encoding(e){xe.checkEncoding(e),this._encoding=e}get internalBuffer(){return this._buff}toBuffer(){return this._buff.slice(0,this.length)}toString(e){let t=typeof e=="string"?e:this._encoding;return xe.checkEncoding(t),this._buff.toString(t,0,this.length)}destroy(){return this.clear(),this}_handleString(e,t,i,n){let s=this._writeOffset,o=this._encoding;typeof i=="number"?s=i:typeof i=="string"&&(xe.checkEncoding(i),o=i),typeof n=="string"&&(xe.checkEncoding(n),o=n);let l=Buffer.byteLength(e,o);return t?this.ensureInsertable(l,s):this._ensureWriteable(l,s),this._buff.write(e,s,l,o),t?this._writeOffset+=l:typeof i=="number"?this._writeOffset=Math.max(this._writeOffset,s+l):this._writeOffset+=l,this}_handleBuffer(e,t,i){let n=typeof i=="number"?i:this._writeOffset;return t?this.ensureInsertable(e.length,n):this._ensureWriteable(e.length,n),e.copy(this._buff,n),t?this._writeOffset+=e.length:typeof i=="number"?this._writeOffset=Math.max(this._writeOffset,n+e.length):this._writeOffset+=e.length,this}ensureReadable(e,t){let i=this._readOffset;if(typeof t!="undefined"&&(xe.checkOffsetValue(t),i=t),i<0||i+e>this.length)throw new Error(xe.ERRORS.INVALID_READ_BEYOND_BOUNDS)}ensureInsertable(e,t){xe.checkOffsetValue(t),this._ensureCapacity(this.length+e),t<this.length&&this._buff.copy(this._buff,t+e,t,this._buff.length),t+e>this.length?this.length=t+e:this.length+=e}_ensureWriteable(e,t){let i=typeof t=="number"?t:this._writeOffset;this._ensureCapacity(i+e),i+e>this.length&&(this.length=i+e)}_ensureCapacity(e){let t=this._buff.length;if(e>t){let i=this._buff,n=t*3/2+1;n<e&&(n=e),this._buff=Buffer.allocUnsafe(n),i.copy(this._buff,0,0,t)}}_readNumberValue(e,t,i){this.ensureReadable(t,i);let n=e.call(this._buff,typeof i=="number"?i:this._readOffset);return typeof i=="undefined"&&(this._readOffset+=t),n}_insertNumberValue(e,t,i,n){return xe.checkOffsetValue(n),this.ensureInsertable(t,n),e.call(this._buff,i,n),this._writeOffset+=t,this}_writeNumberValue(e,t,i,n){if(typeof n=="number"){if(n<0)throw new Error(xe.ERRORS.INVALID_WRITE_BEYOND_BOUNDS);xe.checkOffsetValue(n)}let s=typeof n=="number"?n:this._writeOffset;return this._ensureWriteable(t,s),e.call(this._buff,i,s),typeof n=="number"?this._writeOffset=Math.max(this._writeOffset,s+t):this._writeOffset+=t,this}};xf.SmartBuffer=Ol});var Tf=v(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.SOCKS5_NO_ACCEPTABLE_AUTH=je.SOCKS5_CUSTOM_AUTH_END=je.SOCKS5_CUSTOM_AUTH_START=je.SOCKS_INCOMING_PACKET_SIZES=je.SocksClientState=je.Socks5Response=je.Socks5HostType=je.Socks5Auth=je.Socks4Response=je.SocksCommand=je.ERRORS=je.DEFAULT_TIMEOUT=void 0;var GD=3e4;je.DEFAULT_TIMEOUT=GD;var KD={InvalidSocksCommand:"An invalid SOCKS command was provided. Valid options are connect, bind, and associate.",InvalidSocksCommandForOperation:"An invalid SOCKS command was provided. Only a subset of commands are supported for this operation.",InvalidSocksCommandChain:"An invalid SOCKS command was provided. Chaining currently only supports the connect command.",InvalidSocksClientOptionsDestination:"An invalid destination host was provided.",InvalidSocksClientOptionsExistingSocket:"An invalid existing socket was provided. This should be an instance of stream.Duplex.",InvalidSocksClientOptionsProxy:"Invalid SOCKS proxy details were provided.",InvalidSocksClientOptionsTimeout:"An invalid timeout value was provided. Please enter a value above 0 (in ms).",InvalidSocksClientOptionsProxiesLength:"At least two socks proxies must be provided for chaining.",InvalidSocksClientOptionsCustomAuthRange:"Custom auth must be a value between 0x80 and 0xFE.",InvalidSocksClientOptionsCustomAuthOptions:"When a custom_auth_method is provided, custom_auth_request_handler, custom_auth_response_size, and custom_auth_response_handler must also be provided and valid.",NegotiationError:"Negotiation error",SocketClosed:"Socket closed",ProxyConnectionTimedOut:"Proxy connection timed out",InternalError:"SocksClient internal error (this should not happen)",InvalidSocks4HandshakeResponse:"Received invalid Socks4 handshake response",Socks4ProxyRejectedConnection:"Socks4 Proxy rejected connection",InvalidSocks4IncomingConnectionResponse:"Socks4 invalid incoming connection response",Socks4ProxyRejectedIncomingBoundConnection:"Socks4 Proxy rejected incoming bound connection",InvalidSocks5InitialHandshakeResponse:"Received invalid Socks5 initial handshake response",InvalidSocks5IntiailHandshakeSocksVersion:"Received invalid Socks5 initial handshake (invalid socks version)",InvalidSocks5InitialHandshakeNoAcceptedAuthType:"Received invalid Socks5 initial handshake (no accepted authentication type)",InvalidSocks5InitialHandshakeUnknownAuthType:"Received invalid Socks5 initial handshake (unknown authentication type)",Socks5AuthenticationFailed:"Socks5 Authentication failed",InvalidSocks5FinalHandshake:"Received invalid Socks5 final handshake response",InvalidSocks5FinalHandshakeRejected:"Socks5 proxy rejected connection",InvalidSocks5IncomingConnectionResponse:"Received invalid Socks5 incoming connection response",Socks5ProxyRejectedIncomingBoundConnection:"Socks5 Proxy rejected incoming bound connection"};je.ERRORS=KD;var JD={Socks5InitialHandshakeResponse:2,Socks5UserPassAuthenticationResponse:2,Socks5ResponseHeader:5,Socks5ResponseIPv4:10,Socks5ResponseIPv6:22,Socks5ResponseHostname:r=>r+7,Socks4Response:8};je.SOCKS_INCOMING_PACKET_SIZES=JD;var Sf;(function(r){r[r.connect=1]="connect",r[r.bind=2]="bind",r[r.associate=3]="associate"})(Sf||(Sf={}));je.SocksCommand=Sf;var Ef;(function(r){r[r.Granted=90]="Granted",r[r.Failed=91]="Failed",r[r.Rejected=92]="Rejected",r[r.RejectedIdent=93]="RejectedIdent"})(Ef||(Ef={}));je.Socks4Response=Ef;var Cf;(function(r){r[r.NoAuth=0]="NoAuth",r[r.GSSApi=1]="GSSApi",r[r.UserPass=2]="UserPass"})(Cf||(Cf={}));je.Socks5Auth=Cf;var XD=128;je.SOCKS5_CUSTOM_AUTH_START=XD;var YD=254;je.SOCKS5_CUSTOM_AUTH_END=YD;var ZD=255;je.SOCKS5_NO_ACCEPTABLE_AUTH=ZD;var kf;(function(r){r[r.Granted=0]="Granted",r[r.Failure=1]="Failure",r[r.NotAllowed=2]="NotAllowed",r[r.NetworkUnreachable=3]="NetworkUnreachable",r[r.HostUnreachable=4]="HostUnreachable",r[r.ConnectionRefused=5]="ConnectionRefused",r[r.TTLExpired=6]="TTLExpired",r[r.CommandNotSupported=7]="CommandNotSupported",r[r.AddressNotSupported=8]="AddressNotSupported"})(kf||(kf={}));je.Socks5Response=kf;var Of;(function(r){r[r.IPv4=1]="IPv4",r[r.Hostname=3]="Hostname",r[r.IPv6=4]="IPv6"})(Of||(Of={}));je.Socks5HostType=Of;var Pf;(function(r){r[r.Created=0]="Created",r[r.Connecting=1]="Connecting",r[r.Connected=2]="Connected",r[r.SentInitialHandshake=3]="SentInitialHandshake",r[r.ReceivedInitialHandshakeResponse=4]="ReceivedInitialHandshakeResponse",r[r.SentAuthentication=5]="SentAuthentication",r[r.ReceivedAuthenticationResponse=6]="ReceivedAuthenticationResponse",r[r.SentFinalHandshake=7]="SentFinalHandshake",r[r.ReceivedFinalResponse=8]="ReceivedFinalResponse",r[r.BoundWaitingForConnection=9]="BoundWaitingForConnection",r[r.Established=10]="Established",r[r.Disconnected=11]="Disconnected",r[r.Error=99]="Error"})(Pf||(Pf={}));je.SocksClientState=Pf});var Af=v(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.shuffleArray=Cs.SocksClientError=void 0;var j0=class extends Error{constructor(e,t){super(e);this.options=t}};Cs.SocksClientError=j0;function QD(r){for(let e=r.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[r[e],r[t]]=[r[t],r[e]]}}Cs.shuffleArray=QD});var V0=v(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.validateSocksClientChainOptions=ks.validateSocksClientOptions=void 0;var Ft=Af(),ut=Tf(),eL=x("stream");function tL(r,e=["connect","bind","associate"]){if(!ut.SocksCommand[r.command])throw new Ft.SocksClientError(ut.ERRORS.InvalidSocksCommand,r);if(e.indexOf(r.command)===-1)throw new Ft.SocksClientError(ut.ERRORS.InvalidSocksCommandForOperation,r);if(!U0(r.destination))throw new Ft.SocksClientError(ut.ERRORS.InvalidSocksClientOptionsDestination,r);if(!$0(r.proxy))throw new Ft.SocksClientError(ut.ERRORS.InvalidSocksClientOptionsProxy,r);if(W0(r.proxy,r),r.timeout&&!z0(r.timeout))throw new Ft.SocksClientError(ut.ERRORS.InvalidSocksClientOptionsTimeout,r);if(r.existing_socket&&!(r.existing_socket instanceof eL.Duplex))throw new Ft.SocksClientError(ut.ERRORS.InvalidSocksClientOptionsExistingSocket,r)}ks.validateSocksClientOptions=tL;function rL(r){if(r.command!=="connect")throw new Ft.SocksClientError(ut.ERRORS.InvalidSocksCommandChain,r);if(!U0(r.destination))throw new Ft.SocksClientError(ut.ERRORS.InvalidSocksClientOptionsDestination,r);if(!(r.proxies&&Array.isArray(r.proxies)&&r.proxies.length>=2))throw new Ft.SocksClientError(ut.ERRORS.InvalidSocksClientOptionsProxiesLength,r);if(r.proxies.forEach(e=>{if(!$0(e))throw new Ft.SocksClientError(ut.ERRORS.InvalidSocksClientOptionsProxy,r);W0(e,r)}),r.timeout&&!z0(r.timeout))throw new Ft.SocksClientError(ut.ERRORS.InvalidSocksClientOptionsTimeout,r)}ks.validateSocksClientChainOptions=rL;function W0(r,e){if(r.custom_auth_method!==void 0){if(r.custom_auth_method<ut.SOCKS5_CUSTOM_AUTH_START||r.custom_auth_method>ut.SOCKS5_CUSTOM_AUTH_END)throw new Ft.SocksClientError(ut.ERRORS.InvalidSocksClientOptionsCustomAuthRange,e);if(r.custom_auth_request_handler===void 0||typeof r.custom_auth_request_handler!="function")throw new Ft.SocksClientError(ut.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,e);if(r.custom_auth_response_size===void 0)throw new Ft.SocksClientError(ut.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,e);if(r.custom_auth_response_handler===void 0||typeof r.custom_auth_response_handler!="function")throw new Ft.SocksClientError(ut.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,e)}}function U0(r){return r&&typeof r.host=="string"&&typeof r.port=="number"&&r.port>=0&&r.port<=65535}function $0(r){return r&&(typeof r.host=="string"||typeof r.ipaddress=="string")&&typeof r.port=="number"&&r.port>=0&&r.port<=65535&&(r.type===4||r.type===5)}function z0(r){return typeof r=="number"&&r>0}});var K0=v(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.ReceiveBuffer=void 0;var G0=class{constructor(e=4096){this.buffer=Buffer.allocUnsafe(e),this.offset=0,this.originalSize=e}get length(){return this.offset}append(e){if(!Buffer.isBuffer(e))throw new Error("Attempted to append a non-buffer instance to ReceiveBuffer.");if(this.offset+e.length>=this.buffer.length){let t=this.buffer;this.buffer=Buffer.allocUnsafe(Math.max(this.buffer.length+this.originalSize,this.buffer.length+e.length)),t.copy(this.buffer)}return e.copy(this.buffer,this.offset),this.offset+=e.length}peek(e){if(e>this.offset)throw new Error("Attempted to read beyond the bounds of the managed internal data.");return this.buffer.slice(0,e)}get(e){if(e>this.offset)throw new Error("Attempted to read beyond the bounds of the managed internal data.");let t=Buffer.allocUnsafe(e);return this.buffer.slice(0,e).copy(t),this.buffer.copyWithin(0,e,e+this.offset-e),this.offset-=e,t}};Pl.ReceiveBuffer=G0});var J0=v(gi=>{"use strict";var Os=gi&&gi.__awaiter||function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(h){try{d(i.next(h))}catch(p){o(p)}}function u(h){try{d(i.throw(h))}catch(p){o(p)}}function d(h){h.done?s(h.value):n(h.value).then(l,u)}d((i=i.apply(r,e||[])).next())})};Object.defineProperty(gi,"__esModule",{value:!0});gi.SocksClientError=gi.SocksClient=void 0;var iL=x("events"),Ps=x("net"),Gt=R0(),Ht=H0(),B=Tf(),If=V0(),nL=K0(),Mf=Af();Object.defineProperty(gi,"SocksClientError",{enumerable:!0,get:function(){return Mf.SocksClientError}});var ba=class extends iL.EventEmitter{constructor(e){super();this.options=Object.assign({},e),If.validateSocksClientOptions(e),this.setState(B.SocksClientState.Created)}static createConnection(e,t){return new Promise((i,n)=>{try{If.validateSocksClientOptions(e,["connect"])}catch(o){return typeof t=="function"?(t(o),i(o)):n(o)}let s=new ba(e);s.connect(e.existing_socket),s.once("established",o=>{s.removeAllListeners(),typeof t=="function"&&t(null,o),i(o)}),s.once("error",o=>{s.removeAllListeners(),typeof t=="function"?(t(o),i(o)):n(o)})})}static createConnectionChain(e,t){return new Promise((i,n)=>Os(this,void 0,void 0,function*(){try{If.validateSocksClientChainOptions(e)}catch(o){return typeof t=="function"?(t(o),i(o)):n(o)}let s;e.randomizeChain&&Mf.shuffleArray(e.proxies);try{for(let o=0;o<e.proxies.length;o++){let l=e.proxies[o],u=o===e.proxies.length-1?e.destination:{host:e.proxies[o+1].ipaddress,port:e.proxies[o+1].port},d=yield ba.createConnection({command:"connect",proxy:l,destination:u});s||(s=d.socket)}typeof t=="function"?(t(null,{socket:s}),i({socket:s})):i({socket:s})}catch(o){typeof t=="function"?(t(o),i(o)):n(o)}}))}static createUDPFrame(e){let t=new Ht.SmartBuffer;return t.writeUInt16BE(0),t.writeUInt8(e.frameNumber||0),Ps.isIPv4(e.remoteHost.host)?(t.writeUInt8(B.Socks5HostType.IPv4),t.writeUInt32BE(Gt.toLong(e.remoteHost.host))):Ps.isIPv6(e.remoteHost.host)?(t.writeUInt8(B.Socks5HostType.IPv6),t.writeBuffer(Gt.toBuffer(e.remoteHost.host))):(t.writeUInt8(B.Socks5HostType.Hostname),t.writeUInt8(Buffer.byteLength(e.remoteHost.host)),t.writeString(e.remoteHost.host)),t.writeUInt16BE(e.remoteHost.port),t.writeBuffer(e.data),t.toBuffer()}static parseUDPFrame(e){let t=Ht.SmartBuffer.fromBuffer(e);t.readOffset=2;let i=t.readUInt8(),n=t.readUInt8(),s;n===B.Socks5HostType.IPv4?s=Gt.fromLong(t.readUInt32BE()):n===B.Socks5HostType.IPv6?s=Gt.toString(t.readBuffer(16)):s=t.readString(t.readUInt8());let o=t.readUInt16BE();return{frameNumber:i,remoteHost:{host:s,port:o},data:t.readBuffer()}}setState(e){this.state!==B.SocksClientState.Error&&(this.state=e)}connect(e){this.onDataReceived=i=>this.onDataReceivedHandler(i),this.onClose=()=>this.onCloseHandler(),this.onError=i=>this.onErrorHandler(i),this.onConnect=()=>this.onConnectHandler();let t=setTimeout(()=>this.onEstablishedTimeout(),this.options.timeout||B.DEFAULT_TIMEOUT);t.unref&&typeof t.unref=="function"&&t.unref(),e?this.socket=e:this.socket=new Ps.Socket,this.socket.once("close",this.onClose),this.socket.once("error",this.onError),this.socket.once("connect",this.onConnect),this.socket.on("data",this.onDataReceived),this.setState(B.SocksClientState.Connecting),this.receiveBuffer=new nL.ReceiveBuffer,e?this.socket.emit("connect"):(this.socket.connect(this.getSocketOptions()),this.options.set_tcp_nodelay!==void 0&&this.options.set_tcp_nodelay!==null&&this.socket.setNoDelay(!!this.options.set_tcp_nodelay)),this.prependOnceListener("established",i=>{setImmediate(()=>{if(this.receiveBuffer.length>0){let n=this.receiveBuffer.get(this.receiveBuffer.length);i.socket.emit("data",n)}i.socket.resume()})})}getSocketOptions(){return Object.assign(Object.assign({},this.options.socket_options),{host:this.options.proxy.host||this.options.proxy.ipaddress,port:this.options.proxy.port})}onEstablishedTimeout(){this.state!==B.SocksClientState.Established&&this.state!==B.SocksClientState.BoundWaitingForConnection&&this.closeSocket(B.ERRORS.ProxyConnectionTimedOut)}onConnectHandler(){this.setState(B.SocksClientState.Connected),this.options.proxy.type===4?this.sendSocks4InitialHandshake():this.sendSocks5InitialHandshake(),this.setState(B.SocksClientState.SentInitialHandshake)}onDataReceivedHandler(e){this.receiveBuffer.append(e),this.processData()}processData(){for(;this.state!==B.SocksClientState.Established&&this.state!==B.SocksClientState.Error&&this.receiveBuffer.length>=this.nextRequiredPacketBufferSize;)if(this.state===B.SocksClientState.SentInitialHandshake)this.options.proxy.type===4?this.handleSocks4FinalHandshakeResponse():this.handleInitialSocks5HandshakeResponse();else if(this.state===B.SocksClientState.SentAuthentication)this.handleInitialSocks5AuthenticationHandshakeResponse();else if(this.state===B.SocksClientState.SentFinalHandshake)this.handleSocks5FinalHandshakeResponse();else if(this.state===B.SocksClientState.BoundWaitingForConnection)this.options.proxy.type===4?this.handleSocks4IncomingConnectionResponse():this.handleSocks5IncomingConnectionResponse();else{this.closeSocket(B.ERRORS.InternalError);break}}onCloseHandler(){this.closeSocket(B.ERRORS.SocketClosed)}onErrorHandler(e){this.closeSocket(e.message)}removeInternalSocketHandlers(){this.socket.pause(),this.socket.removeListener("data",this.onDataReceived),this.socket.removeListener("close",this.onClose),this.socket.removeListener("error",this.onError),this.socket.removeListener("connect",this.onConnect)}closeSocket(e){this.state!==B.SocksClientState.Error&&(this.setState(B.SocksClientState.Error),this.socket.destroy(),this.removeInternalSocketHandlers(),this.emit("error",new Mf.SocksClientError(e,this.options)))}sendSocks4InitialHandshake(){let e=this.options.proxy.userId||"",t=new Ht.SmartBuffer;t.writeUInt8(4),t.writeUInt8(B.SocksCommand[this.options.command]),t.writeUInt16BE(this.options.destination.port),Ps.isIPv4(this.options.destination.host)?(t.writeBuffer(Gt.toBuffer(this.options.destination.host)),t.writeStringNT(e)):(t.writeUInt8(0),t.writeUInt8(0),t.writeUInt8(0),t.writeUInt8(1),t.writeStringNT(e),t.writeStringNT(this.options.destination.host)),this.nextRequiredPacketBufferSize=B.SOCKS_INCOMING_PACKET_SIZES.Socks4Response,this.socket.write(t.toBuffer())}handleSocks4FinalHandshakeResponse(){let e=this.receiveBuffer.get(8);if(e[1]!==B.Socks4Response.Granted)this.closeSocket(`${B.ERRORS.Socks4ProxyRejectedConnection} - (${B.Socks4Response[e[1]]})`);else if(B.SocksCommand[this.options.command]===B.SocksCommand.bind){let t=Ht.SmartBuffer.fromBuffer(e);t.readOffset=2;let i={port:t.readUInt16BE(),host:Gt.fromLong(t.readUInt32BE())};i.host==="0.0.0.0"&&(i.host=this.options.proxy.ipaddress),this.setState(B.SocksClientState.BoundWaitingForConnection),this.emit("bound",{remoteHost:i,socket:this.socket})}else this.setState(B.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{socket:this.socket})}handleSocks4IncomingConnectionResponse(){let e=this.receiveBuffer.get(8);if(e[1]!==B.Socks4Response.Granted)this.closeSocket(`${B.ERRORS.Socks4ProxyRejectedIncomingBoundConnection} - (${B.Socks4Response[e[1]]})`);else{let t=Ht.SmartBuffer.fromBuffer(e);t.readOffset=2;let i={port:t.readUInt16BE(),host:Gt.fromLong(t.readUInt32BE())};this.setState(B.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:i,socket:this.socket})}}sendSocks5InitialHandshake(){let e=new Ht.SmartBuffer,t=[B.Socks5Auth.NoAuth];(this.options.proxy.userId||this.options.proxy.password)&&t.push(B.Socks5Auth.UserPass),this.options.proxy.custom_auth_method!==void 0&&t.push(this.options.proxy.custom_auth_method),e.writeUInt8(5),e.writeUInt8(t.length);for(let i of t)e.writeUInt8(i);this.nextRequiredPacketBufferSize=B.SOCKS_INCOMING_PACKET_SIZES.Socks5InitialHandshakeResponse,this.socket.write(e.toBuffer()),this.setState(B.SocksClientState.SentInitialHandshake)}handleInitialSocks5HandshakeResponse(){let e=this.receiveBuffer.get(2);e[0]!==5?this.closeSocket(B.ERRORS.InvalidSocks5IntiailHandshakeSocksVersion):e[1]===B.SOCKS5_NO_ACCEPTABLE_AUTH?this.closeSocket(B.ERRORS.InvalidSocks5InitialHandshakeNoAcceptedAuthType):e[1]===B.Socks5Auth.NoAuth?(this.socks5ChosenAuthType=B.Socks5Auth.NoAuth,this.sendSocks5CommandRequest()):e[1]===B.Socks5Auth.UserPass?(this.socks5ChosenAuthType=B.Socks5Auth.UserPass,this.sendSocks5UserPassAuthentication()):e[1]===this.options.proxy.custom_auth_method?(this.socks5ChosenAuthType=this.options.proxy.custom_auth_method,this.sendSocks5CustomAuthentication()):this.closeSocket(B.ERRORS.InvalidSocks5InitialHandshakeUnknownAuthType)}sendSocks5UserPassAuthentication(){let e=this.options.proxy.userId||"",t=this.options.proxy.password||"",i=new Ht.SmartBuffer;i.writeUInt8(1),i.writeUInt8(Buffer.byteLength(e)),i.writeString(e),i.writeUInt8(Buffer.byteLength(t)),i.writeString(t),this.nextRequiredPacketBufferSize=B.SOCKS_INCOMING_PACKET_SIZES.Socks5UserPassAuthenticationResponse,this.socket.write(i.toBuffer()),this.setState(B.SocksClientState.SentAuthentication)}sendSocks5CustomAuthentication(){return Os(this,void 0,void 0,function*(){this.nextRequiredPacketBufferSize=this.options.proxy.custom_auth_response_size,this.socket.write(yield this.options.proxy.custom_auth_request_handler()),this.setState(B.SocksClientState.SentAuthentication)})}handleSocks5CustomAuthHandshakeResponse(e){return Os(this,void 0,void 0,function*(){return yield this.options.proxy.custom_auth_response_handler(e)})}handleSocks5AuthenticationNoAuthHandshakeResponse(e){return Os(this,void 0,void 0,function*(){return e[1]===0})}handleSocks5AuthenticationUserPassHandshakeResponse(e){return Os(this,void 0,void 0,function*(){return e[1]===0})}handleInitialSocks5AuthenticationHandshakeResponse(){return Os(this,void 0,void 0,function*(){this.setState(B.SocksClientState.ReceivedAuthenticationResponse);let e=!1;this.socks5ChosenAuthType===B.Socks5Auth.NoAuth?e=yield this.handleSocks5AuthenticationNoAuthHandshakeResponse(this.receiveBuffer.get(2)):this.socks5ChosenAuthType===B.Socks5Auth.UserPass?e=yield this.handleSocks5AuthenticationUserPassHandshakeResponse(this.receiveBuffer.get(2)):this.socks5ChosenAuthType===this.options.proxy.custom_auth_method&&(e=yield this.handleSocks5CustomAuthHandshakeResponse(this.receiveBuffer.get(this.options.proxy.custom_auth_response_size))),e?this.sendSocks5CommandRequest():this.closeSocket(B.ERRORS.Socks5AuthenticationFailed)})}sendSocks5CommandRequest(){let e=new Ht.SmartBuffer;e.writeUInt8(5),e.writeUInt8(B.SocksCommand[this.options.command]),e.writeUInt8(0),Ps.isIPv4(this.options.destination.host)?(e.writeUInt8(B.Socks5HostType.IPv4),e.writeBuffer(Gt.toBuffer(this.options.destination.host))):Ps.isIPv6(this.options.destination.host)?(e.writeUInt8(B.Socks5HostType.IPv6),e.writeBuffer(Gt.toBuffer(this.options.destination.host))):(e.writeUInt8(B.Socks5HostType.Hostname),e.writeUInt8(this.options.destination.host.length),e.writeString(this.options.destination.host)),e.writeUInt16BE(this.options.destination.port),this.nextRequiredPacketBufferSize=B.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this.socket.write(e.toBuffer()),this.setState(B.SocksClientState.SentFinalHandshake)}handleSocks5FinalHandshakeResponse(){let e=this.receiveBuffer.peek(5);if(e[0]!==5||e[1]!==B.Socks5Response.Granted)this.closeSocket(`${B.ERRORS.InvalidSocks5FinalHandshakeRejected} - ${B.Socks5Response[e[1]]}`);else{let t=e[3],i,n;if(t===B.Socks5HostType.IPv4){let s=B.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this.receiveBuffer.length<s){this.nextRequiredPacketBufferSize=s;return}n=Ht.SmartBuffer.fromBuffer(this.receiveBuffer.get(s).slice(4)),i={host:Gt.fromLong(n.readUInt32BE()),port:n.readUInt16BE()},i.host==="0.0.0.0"&&(i.host=this.options.proxy.ipaddress)}else if(t===B.Socks5HostType.Hostname){let s=e[4],o=B.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname(s);if(this.receiveBuffer.length<o){this.nextRequiredPacketBufferSize=o;return}n=Ht.SmartBuffer.fromBuffer(this.receiveBuffer.get(o).slice(5)),i={host:n.readString(s),port:n.readUInt16BE()}}else if(t===B.Socks5HostType.IPv6){let s=B.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this.receiveBuffer.length<s){this.nextRequiredPacketBufferSize=s;return}n=Ht.SmartBuffer.fromBuffer(this.receiveBuffer.get(s).slice(4)),i={host:Gt.toString(n.readBuffer(16)),port:n.readUInt16BE()}}this.setState(B.SocksClientState.ReceivedFinalResponse),B.SocksCommand[this.options.command]===B.SocksCommand.connect?(this.setState(B.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:i,socket:this.socket})):B.SocksCommand[this.options.command]===B.SocksCommand.bind?(this.setState(B.SocksClientState.BoundWaitingForConnection),this.nextRequiredPacketBufferSize=B.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this.emit("bound",{remoteHost:i,socket:this.socket})):B.SocksCommand[this.options.command]===B.SocksCommand.associate&&(this.setState(B.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:i,socket:this.socket}))}}handleSocks5IncomingConnectionResponse(){let e=this.receiveBuffer.peek(5);if(e[0]!==5||e[1]!==B.Socks5Response.Granted)this.closeSocket(`${B.ERRORS.Socks5ProxyRejectedIncomingBoundConnection} - ${B.Socks5Response[e[1]]}`);else{let t=e[3],i,n;if(t===B.Socks5HostType.IPv4){let s=B.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this.receiveBuffer.length<s){this.nextRequiredPacketBufferSize=s;return}n=Ht.SmartBuffer.fromBuffer(this.receiveBuffer.get(s).slice(4)),i={host:Gt.fromLong(n.readUInt32BE()),port:n.readUInt16BE()},i.host==="0.0.0.0"&&(i.host=this.options.proxy.ipaddress)}else if(t===B.Socks5HostType.Hostname){let s=e[4],o=B.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname(s);if(this.receiveBuffer.length<o){this.nextRequiredPacketBufferSize=o;return}n=Ht.SmartBuffer.fromBuffer(this.receiveBuffer.get(o).slice(5)),i={host:n.readString(s),port:n.readUInt16BE()}}else if(t===B.Socks5HostType.IPv6){let s=B.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this.receiveBuffer.length<s){this.nextRequiredPacketBufferSize=s;return}n=Ht.SmartBuffer.fromBuffer(this.receiveBuffer.get(s).slice(4)),i={host:Gt.toString(n.readBuffer(16)),port:n.readUInt16BE()}}this.setState(B.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:i,socket:this.socket})}}get socksClientOptions(){return Object.assign({},this.options)}};gi.SocksClient=ba});var X0=v(Cn=>{"use strict";var sL=Cn&&Cn.__createBinding||(Object.create?function(r,e,t,i){i===void 0&&(i=t),Object.defineProperty(r,i,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}),oL=Cn&&Cn.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&sL(e,r,t)};Object.defineProperty(Cn,"__esModule",{value:!0});oL(J0(),Cn)});var Z0=v(kn=>{"use strict";var aL=kn&&kn.__awaiter||function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(h){try{d(i.next(h))}catch(p){o(p)}}function u(h){try{d(i.throw(h))}catch(p){o(p)}}function d(h){h.done?s(h.value):n(h.value).then(l,u)}d((i=i.apply(r,e||[])).next())})},Tl=kn&&kn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(kn,"__esModule",{value:!0});var cL=Tl(x("dns")),lL=Tl(x("tls")),uL=Tl(x("url")),dL=Tl(Pr()),hL=Up(),pL=X0(),Ff=dL.default("socks-proxy-agent");function fL(r){return new Promise((e,t)=>{cL.default.lookup(r,(i,n)=>{i?t(i):e(n)})})}function mL(r){let e=0,t=!1,i=5,n=r.hostname||r.host;if(!n)throw new TypeError('No "host"');if(typeof r.port=="number"?e=r.port:typeof r.port=="string"&&(e=parseInt(r.port,10)),e||(e=1080),r.protocol)switch(r.protocol.replace(":","")){case"socks4":t=!0;case"socks4a":i=4;break;case"socks5":t=!0;case"socks":case"socks5h":i=5;break;default:throw new TypeError(`A "socks" protocol must be specified! Got: ${r.protocol}`)}if(typeof r.type!="undefined")if(r.type===4||r.type===5)i=r.type;else throw new TypeError(`"type" must be 4 or 5, got: ${r.type}`);let s={host:n,port:e,type:i},o=r.userId||r.username,l=r.password;if(r.auth){let u=r.auth.split(":");o=u[0],l=u[1]}return o&&Object.defineProperty(s,"userId",{value:o,enumerable:!1}),l&&Object.defineProperty(s,"password",{value:l,enumerable:!1}),{lookup:t,proxy:s}}var Y0=class extends hL.Agent{constructor(e){let t;if(typeof e=="string"?t=uL.default.parse(e):t=e,!t)throw new TypeError("a SOCKS proxy server `host` and `port` must be specified!");super(t);let i=mL(t);this.lookup=i.lookup,this.proxy=i.proxy,this.tlsConnectionOptions=t.tls||{}}callback(e,t){return aL(this,void 0,void 0,function*(){let{lookup:i,proxy:n}=this,{host:s,port:o,timeout:l}=t;if(!s)throw new Error("No `host` defined!");i&&(s=yield fL(s));let u={proxy:n,destination:{host:s,port:o},command:"connect",timeout:l};Ff("Creating socks proxy connection: %o",u);let{socket:d}=yield pL.SocksClient.createConnection(u);if(Ff("Successfully created socks proxy connection"),t.secureEndpoint){Ff("Upgrading socket connection to TLS");let h=t.servername||t.host;return lL.default.connect(Object.assign(Object.assign(Object.assign({},_L(t,"host","hostname","path","port")),{socket:d,servername:h}),this.tlsConnectionOptions))}return d})}};kn.default=Y0;function _L(r,...e){let t={},i;for(i in r)e.includes(i)||(t[i]=r[i]);return t}});var eb=v((Df,Q0)=>{"use strict";var gL=Df&&Df.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},Rf=gL(Z0());function Nf(r){return new Rf.default(r)}(function(r){r.SocksProxyAgent=Rf.default,r.prototype=Rf.default.prototype})(Nf||(Nf={}));Q0.exports=Nf});var ib=v(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});Sa.domainMatches=rb;Sa.CookieStore=void 0;var tb=class{constructor(e){this._raw=void 0,this._raw=e}name(){return this._raw.name}matches(e){return!(this._raw.secure&&e.protocol!=="https:"||!rb(e.hostname,this._raw.domain)||!wL(e.pathname,this._raw.path))}equals(e){return this._raw.name===e._raw.name&&this._raw.domain===e._raw.domain&&this._raw.path===e._raw.path}networkCookie(){return this._raw}updateExpiresFrom(e){this._raw.expires=e._raw.expires}expired(){return this._raw.expires===-1?!1:this._raw.expires*1e3<Date.now()}},xa=class{constructor(){this._nameToCookies=new Map}addCookies(e){for(let t of e)this._addCookie(new tb(t))}cookies(e){let t=[];for(let i of this._cookiesIterator())i.matches(e)&&t.push(i.networkCookie());return t}allCookies(){let e=[];for(let t of this._cookiesIterator())e.push(t.networkCookie());return e}_addCookie(e){if(e.expired())return;let t=this._nameToCookies.get(e.name());t||(t=new Set,this._nameToCookies.set(e.name(),t)),xa.pruneExpired(t);for(let i of t)i.equals(e)&&(e.updateExpiresFrom(i),t.delete(i));t.add(e)}*_cookiesIterator(){for(let[e,t]of this._nameToCookies){xa.pruneExpired(t);for(let i of t)yield i;t.size===0&&this._nameToCookies.delete(e)}}static pruneExpired(e){for(let t of e)t.expired()&&e.delete(t)}};Sa.CookieStore=xa;function rb(r,e){return r===e?!0:e.startsWith(".")?(r="."+r,r.endsWith(e)):!1}function wL(r,e){return r===e?!0:(r.endsWith("/")||(r=r+"/"),e.endsWith("/")||(e=e+"/"),r.startsWith(e))}});var ob=v(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});Al.MultipartFormData=void 0;var nb=class{constructor(){this._boundary=void 0,this._chunks=[],this._boundary=vL()}contentTypeHeader(){return`multipart/form-data; boundary=${this._boundary}`}addField(e,t){this._beginMultiPartHeader(e),this._finishMultiPartHeader(),this._chunks.push(Buffer.from(t)),this._finishMultiPartField()}addFileField(e,t){this._beginMultiPartHeader(e),this._chunks.push(Buffer.from(`; filename="${t.name}"`)),this._chunks.push(Buffer.from(`\r
content-type: ${t.mimeType||"application/octet-stream"}`)),this._finishMultiPartHeader(),this._chunks.push(Buffer.from(t.buffer,"base64")),this._finishMultiPartField()}finish(){return this._addBoundary(!0),Buffer.concat(this._chunks)}_beginMultiPartHeader(e){this._addBoundary(),this._chunks.push(Buffer.from(`content-disposition: form-data; name="${e}"`))}_finishMultiPartHeader(){this._chunks.push(Buffer.from(`\r
\r
`))}_finishMultiPartField(){this._chunks.push(Buffer.from(`\r
`))}_addBoundary(e){this._chunks.push(Buffer.from("--"+this._boundary)),e&&this._chunks.push(Buffer.from("--")),this._chunks.push(Buffer.from(`\r
`))}};Al.MultipartFormData=nb;var sb=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,65,66];function vL(){let r=[];for(let e=0;e<16;e++)r.push(sb[Math.floor(Math.random()*sb.length)]);return"----WebKitFormBoundary"+String.fromCharCode(...r)}});var Ca=v(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});wi.GlobalFetchRequest=wi.BrowserContextFetchRequest=wi.FetchRequest=void 0;var yL=ub(x("http")),bL=ub(x("https")),xL=Gp(),SL=eb(),EL=x("stream"),CL=cb(x("url")),Ea=cb(x("zlib")),Ts=Xe(),kL=er(),As=G(),OL=gt(),ab=ib(),PL=ob(),TL=nt();function cb(r){return r&&r.__esModule?r:{default:r}}function lb(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(lb=function(i){return i?t:e})(r)}function ub(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=lb(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var Kt=class extends TL.SdkObject{static findResponseBody(e){for(let t of Kt.allInstances){let i=t.fetchResponses.get(e);if(i)return i}}constructor(e){super(e,"fetchRequest");this.fetchResponses=new Map,Kt.allInstances.add(this)}_disposeImpl(){Kt.allInstances.delete(this),this.fetchResponses.clear(),this.emit(Kt.Events.Dispose)}_storeResponseBody(e){let t=(0,As.createGuid)();return this.fetchResponses.set(t,e),t}fetch(e){return c(this,null,function*(){try{var t;let n={},s=this._defaultOptions();if(n["user-agent"]=s.userAgent,n.accept="*/*",n["accept-encoding"]="gzip,deflate,br",s.extraHTTPHeaders)for(let{name:w,value:b}of s.extraHTTPHeaders)n[w.toLowerCase()]=b;if(e.headers)for(let{name:w,value:b}of e.headers)n[w.toLowerCase()]=b;let o=((t=e.method)===null||t===void 0?void 0:t.toUpperCase())||"GET",l=s.proxy,u;if(l){var i;let w=CL.default.parse(l.server);(i=w.protocol)!==null&&i!==void 0&&i.startsWith("socks")?u=new SL.SocksProxyAgent({host:w.hostname,port:w.port||void 0}):(l.username&&(w.auth=`${l.username}:${l.password||""}`),u=new xL.HttpsProxyAgent(w))}let d=s.timeoutSettings.timeout(e),h=d&&(0,As.monotonicTime)()+d,p={method:o,headers:n,agent:u,maxRedirects:20,timeout:d,deadline:h};(e.ignoreHTTPSErrors||s.ignoreHTTPSErrors)&&(p.rejectUnauthorized=!1);let f=new URL(e.url,s.baseURL);if(e.params)for(let{name:w,value:b}of e.params)f.searchParams.set(w,b);let m;if(["POST","PUT","PATCH"].includes(o))m=FL(e,n);else if(e.postData||e.jsonData||e.formData||e.multipartData)throw new Error(`Method ${o} does not accept post data`);m&&(n["content-length"]=String(m.byteLength));let _=yield this._sendRequest(f,p,m),g=this._storeResponseBody(_.body);return e.failOnStatusCode&&(_.status<200||_.status>=400)?{error:`${_.status} ${_.statusText}`}:{fetchResponse:R(y({},_),{fetchUid:g})}}catch(n){return{error:String(n)}}})}_updateCookiesFromHeader(e,t){return c(this,null,function*(){let i=new URL(e),n="/"+i.pathname.substr(1).split("/").slice(0,-1).join("/"),s=[];for(let o of t){let l=ML(o);!l||(l.domain?(0,As.assert)(l.domain.startsWith(".")):l.domain=i.hostname,!!(0,ab.domainMatches)(i.hostname,l.domain)&&((!l.path||!l.path.startsWith("/"))&&(l.path=n),s.push(l)))}s.length&&(yield this._addCookies(s))})}_updateRequestCookieHeader(e,t){return c(this,null,function*(){if(t.headers.cookie!==void 0)return;let i=yield this._cookies(e);if(i.length){let n=i.map(s=>`${s.name}=${s.value}`);t.headers.cookie=n.join("; ")}})}_sendRequest(e,t,i){return c(this,null,function*(){return yield this._updateRequestCookieHeader(e,t),new Promise((n,s)=>{let l=(e.protocol==="https:"?bL:yL).request(e,t,d=>c(this,null,function*(){if(Ts.debugLogger.isEnabled("api")){Ts.debugLogger.log("api",`\u2190 ${d.statusCode} ${d.statusMessage}`);for(let[_,g]of Object.entries(d.headers))Ts.debugLogger.log("api",`  ${_}: ${g}`)}if(d.headers["set-cookie"]&&(yield this._updateCookiesFromHeader(d.url||e.toString(),d.headers["set-cookie"])),IL.includes(d.statusCode)){if(!t.maxRedirects){s(new Error("Max redirect count exceeded")),l.destroy();return}let _=y({},t.headers);delete _.cookie;let g=d.statusCode,w=t.method;((g===301||g===302)&&w==="POST"||g===303&&!["GET","HEAD"].includes(w))&&(w="GET",i=void 0,delete _["content-encoding"],delete _["content-language"],delete _["content-length"],delete _["content-location"],delete _["content-type"]);let b={method:w,headers:_,agent:t.agent,maxRedirects:t.maxRedirects-1,timeout:t.timeout,deadline:t.deadline};if(t.rejectUnauthorized===!1&&(b.rejectUnauthorized=!1),d.headers.location){let C=new URL(d.headers.location,e);n(this._sendRequest(C,b,i)),l.destroy();return}}if(d.statusCode===401&&!t.headers.authorization){let _=d.headers["www-authenticate"],g=this._defaultOptions().httpCredentials;if(_!=null&&_.trim().startsWith("Basic ")&&g){let{username:w,password:b}=g,C=Buffer.from(`${w||""}:${b||""}`).toString("base64");t.headers.authorization=`Basic ${C}`,n(this._sendRequest(e,t,i)),l.destroy();return}}d.on("aborted",()=>s(new Error("aborted")));let h=d,p,f=d.headers["content-encoding"];f==="gzip"||f==="x-gzip"?p=Ea.default.createGunzip({flush:Ea.default.constants.Z_SYNC_FLUSH,finishFlush:Ea.default.constants.Z_SYNC_FLUSH}):f==="br"?p=Ea.default.createBrotliDecompress():f==="deflate"&&(p=Ea.default.createInflate()),p&&(h=(0,EL.pipeline)(d,p,_=>{_&&s(new Error(`failed to decompress '${f}' encoding: ${_}`))}));let m=[];h.on("data",_=>m.push(_)),h.on("end",()=>{let _=Buffer.concat(m);n({url:d.url||e.toString(),status:d.statusCode||0,statusText:d.statusMessage||"",headers:AL(d.rawHeaders),body:_})}),h.on("error",s)}));l.on("error",s);let u=()=>{s(new Error("Request context disposed.")),l.destroy()};if(this.on(Kt.Events.Dispose,u),l.on("close",()=>this.off(Kt.Events.Dispose,u)),Ts.debugLogger.isEnabled("api")&&(Ts.debugLogger.log("api",`\u2192 ${t.method} ${e.toString()}`),t.headers))for(let[d,h]of Object.entries(t.headers))Ts.debugLogger.log("api",`  ${d}: ${h}`);if(t.deadline){let d=()=>{s(new Error(`Request timed out after ${t.timeout}ms`)),l.destroy()},h=t.deadline-(0,As.monotonicTime)();if(h<=0){d();return}l.setTimeout(h,d)}i&&l.write(i),l.end()})})}};wi.FetchRequest=Kt;Kt.Events={Dispose:"dispose"};Kt.allInstances=new Set;var db=class extends Kt{constructor(e){super(e);this._context=void 0,this._context=e,e.once(OL.BrowserContext.Events.Close,()=>this._disposeImpl())}dispose(){this.fetchResponses.clear()}_defaultOptions(){return{userAgent:this._context._options.userAgent||this._context._browser.userAgent(),extraHTTPHeaders:this._context._options.extraHTTPHeaders,httpCredentials:this._context._options.httpCredentials,proxy:this._context._options.proxy||this._context._browser.options.proxy,timeoutSettings:this._context._timeoutSettings,ignoreHTTPSErrors:this._context._options.ignoreHTTPSErrors,baseURL:this._context._options.baseURL}}_addCookies(e){return c(this,null,function*(){yield this._context.addCookies(e)})}_cookies(e){return c(this,null,function*(){return yield this._context.cookies(e.toString())})}storageState(){return c(this,null,function*(){return this._context.storageState()})}};wi.BrowserContextFetchRequest=db;var hb=class extends Kt{constructor(e,t){super(e);this._cookieStore=new ab.CookieStore,this._options=void 0,this._origins=void 0;let i=new kL.TimeoutSettings;t.timeout!==void 0&&i.setDefaultTimeout(t.timeout);let n=t.proxy;if(n!=null&&n.server){let s=n==null?void 0:n.server.trim();/^\w+:\/\//.test(s)||(s="http://"+s),n.server=s}t.storageState&&(this._origins=t.storageState.origins,this._cookieStore.addCookies(t.storageState.cookies)),this._options={baseURL:t.baseURL,userAgent:t.userAgent||`Playwright/${(0,As.getPlaywrightVersion)()}`,extraHTTPHeaders:t.extraHTTPHeaders,ignoreHTTPSErrors:!!t.ignoreHTTPSErrors,httpCredentials:t.httpCredentials,proxy:n,timeoutSettings:i}}dispose(){this._disposeImpl()}_defaultOptions(){return this._options}_addCookies(e){return c(this,null,function*(){this._cookieStore.addCookies(e)})}_cookies(e){return c(this,null,function*(){return this._cookieStore.cookies(e)})}storageState(){return c(this,null,function*(){return{cookies:this._cookieStore.allCookies(),origins:this._origins||[]}})}};wi.GlobalFetchRequest=hb;function AL(r){let e=[];for(let t=0;t<r.length;t+=2)e.push({name:r[t],value:r[t+1]});return e}var IL=[301,302,303,307,308];function ML(r){let e=r.split(";").filter(s=>s.trim().length>0).map(s=>s.split("=").map(o=>o.trim()));if(!e.length)return null;let[t,i]=e[0],n={name:t,value:i,domain:"",path:"",expires:-1,httpOnly:!1,secure:!1,sameSite:"Lax"};for(let s=1;s<e.length;s++){let[o,l]=e[s];switch(o.toLowerCase()){case"expires":let u=+new Date(l);isFinite(u)&&(n.expires=u/1e3);break;case"max-age":let d=parseInt(l,10);isFinite(d)&&(n.expires=Date.now()/1e3+d);break;case"domain":n.domain=l.toLocaleLowerCase()||"",n.domain&&!n.domain.startsWith(".")&&(n.domain="."+n.domain);break;case"path":n.path=l||"";break;case"secure":n.secure=!0;break;case"httponly":n.httpOnly=!0;break}}return n}function FL(r,e){if((0,As.assert)((r.postData?1:0)+(r.jsonData?1:0)+(r.formData?1:0)+(r.multipartData?1:0)<=1,"Only one of 'data', 'form' or 'multipart' can be specified"),r.jsonData){var t,i;let h=JSON.stringify(r.jsonData);return(i=e[t="content-type"])!==null&&i!==void 0||(e[t]="application/json"),Buffer.from(h,"utf8")}else if(r.formData){var n,s;let h=new URLSearchParams;for(let{name:p,value:f}of r.formData)h.append(p,f);return(s=e[n="content-type"])!==null&&s!==void 0||(e[n]="application/x-www-form-urlencoded"),Buffer.from(h.toString(),"utf8")}else if(r.multipartData){var o,l;let h=new PL.MultipartFormData;for(let p of r.multipartData)p.file?h.addFileField(p.name,p.file):p.value&&h.addField(p.name,p.value);return(l=e[o="content-type"])!==null&&l!==void 0||(e[o]=h.contentTypeHeader()),h.finish()}else if(r.postData){var u,d;return(d=e[u="content-type"])!==null&&d!==void 0||(e[u]="application/octet-stream"),Buffer.from(r.postData,"base64")}}});var jt=v(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.filterCookies=NL;Qe.rewriteCookies=DL;Qe.parsedURL=LL;Qe.stripFragmentFromUrl=pb;Qe.singleHeader=BL;Qe.mergeHeaders=HL;Qe.STATUS_TEXTS=Qe.WebSocket=Qe.InterceptedResponse=Qe.Response=Qe.Route=Qe.Request=void 0;var Jt=G(),vi=Vt(),ka=nt(),RL=Ca();function NL(r,e){let t=e.map(i=>new URL(i));return r.filter(i=>{if(!t.length)return!0;for(let n of t){let s=i.domain;if(s.startsWith(".")||(s="."+s),!!("."+n.hostname).endsWith(s)&&!!n.pathname.startsWith(i.path)&&!(n.protocol!=="https:"&&i.secure))return!0}return!1})}function DL(r){return r.map(e=>{(0,Jt.assert)(e.name,"Cookie should have a name"),(0,Jt.assert)(e.url||e.domain&&e.path,"Cookie should have a url or a domain/path pair"),(0,Jt.assert)(!(e.url&&e.domain),"Cookie should have either url or domain"),(0,Jt.assert)(!(e.url&&e.path),"Cookie should have either url or path");let t=y({},e);if(t.url){(0,Jt.assert)(t.url!=="about:blank",`Blank page can not have cookie "${e.name}"`),(0,Jt.assert)(!t.url.startsWith("data:"),`Data URL page can not have cookie "${e.name}"`);let i=new URL(t.url);t.domain=i.hostname,t.path=i.pathname.substring(0,i.pathname.lastIndexOf("/")+1),t.secure=i.protocol==="https:"}return t})}function LL(r){try{return new URL(r)}catch(e){return null}}function pb(r){return r.includes("#")?r.substring(0,r.indexOf("#")):r}var fb=class extends ka.SdkObject{constructor(e,t,i,n,s,o,l,u){super(e,"request");this._response=null,this._redirectedFrom=void 0,this._redirectedTo=null,this._documentId=void 0,this._isFavicon=void 0,this._failureText=null,this._url=void 0,this._resourceType=void 0,this._method=void 0,this._postData=void 0,this._headers=void 0,this._headersMap=new Map,this._rawRequestHeadersPromise=void 0,this._frame=void 0,this._waitForResponsePromise=new vi.ManualPromise,this._responseEndTiming=-1,this.responseSize={encodedBodySize:0,transferSize:0,responseHeadersSize:0},(0,Jt.assert)(!n.startsWith("data:"),"Data urls should not fire requests"),this._frame=e,this._redirectedFrom=t,t&&(t._redirectedTo=this),this._documentId=i,this._url=pb(n),this._resourceType=s,this._method=o,this._postData=l,this._headers=u;for(let{name:d,value:h}of this._headers)this._headersMap.set(d.toLowerCase(),h);this._isFavicon=n.endsWith("/favicon.ico")||!!(t!=null&&t._isFavicon)}_setFailureText(e){this._failureText=e,this._waitForResponsePromise.resolve(null)}url(){return this._url}resourceType(){return this._resourceType}method(){return this._method}postDataBuffer(){return this._postData}headers(){return this._headers}headerValue(e){return this._headersMap.get(e)}setWillReceiveExtraHeaders(){this._rawRequestHeadersPromise||(this._rawRequestHeadersPromise=new vi.ManualPromise)}setRawRequestHeaders(e){this._rawRequestHeadersPromise||(this._rawRequestHeadersPromise=new vi.ManualPromise),this._rawRequestHeadersPromise.resolve(e)}rawRequestHeaders(){return c(this,null,function*(){return this._rawRequestHeadersPromise||Promise.resolve(this._headers)})}rawRequestHeadersPromise(){return this._rawRequestHeadersPromise}response(){return this._waitForResponsePromise}_existingResponse(){return this._response}_setResponse(e){this._response=e,this._waitForResponsePromise.resolve(e)}_finalRequest(){return this._redirectedTo?this._redirectedTo._finalRequest():this}frame(){return this._frame}isNavigationRequest(){return!!this._documentId}redirectedFrom(){return this._redirectedFrom}failure(){return this._failureText===null?null:{errorText:this._failureText}}bodySize(){var e;return((e=this.postDataBuffer())===null||e===void 0?void 0:e.length)||0}requestHeadersSize(){return c(this,null,function*(){let e=4;e+=this.method().length,e+=new URL(this.url()).pathname.length,e+=8;let t=this.rawRequestHeadersPromise()?yield this.rawRequestHeadersPromise():this._headers;for(let i of t)e+=i.name.length+i.value.length+4;return e})}};Qe.Request=fb;var mb=class extends ka.SdkObject{constructor(e,t){super(e.frame(),"route");this._request=void 0,this._delegate=void 0,this._handled=!1,this._response=null,this._request=e,this._delegate=t}request(){return this._request}abort(e="failed"){return c(this,null,function*(){(0,Jt.assert)(!this._handled,"Route is already handled!"),this._handled=!0,yield this._delegate.abort(e)})}fulfill(e){return c(this,null,function*(){(0,Jt.assert)(!this._handled,"Route is already handled!"),this._handled=!0;let t=e.body,i=e.isBase64||!1;if(t===void 0)if(e.fetchResponseUid){let s=this._request.frame()._page._browserContext.fetchRequest.fetchResponses.get(e.fetchResponseUid)||RL.FetchRequest.findResponseBody(e.fetchResponseUid);(0,Jt.assert)(s,"Fetch response has been disposed"),t=s.toString("base64"),i=!0}else this._response&&e.useInterceptedResponseBody?(t=(yield this._delegate.responseBody()).toString("base64"),i=!0):(t="",i=!1);yield this._delegate.fulfill({status:e.status||200,headers:e.headers||[],body:t,isBase64:i})})}continue(){return c(this,arguments,function*(e={}){if((0,Jt.assert)(!this._handled,"Route is already handled!"),(0,Jt.assert)(!this._response,"Cannot call continue after response interception!"),e.url){let t=new URL(e.url);if(new URL(this._request.url()).protocol!==t.protocol)throw new Error("New URL must have same protocol as overridden URL")}return this._response=yield this._delegate.continue(this._request,e),this._response})}responseBody(){return c(this,null,function*(){return(0,Jt.assert)(!this._handled,"Route is already handled!"),this._delegate.responseBody()})}};Qe.Route=mb;var _b=class extends ka.SdkObject{constructor(e,t,i,n,s,o,l){super(e.frame(),"response");this._request=void 0,this._contentPromise=null,this._finishedPromise=new vi.ManualPromise,this._status=void 0,this._statusText=void 0,this._url=void 0,this._headers=void 0,this._headersMap=new Map,this._getResponseBodyCallback=void 0,this._timing=void 0,this._serverAddrPromise=new vi.ManualPromise,this._securityDetailsPromise=new vi.ManualPromise,this._rawResponseHeadersPromise=void 0,this._httpVersion=void 0,this._request=e,this._timing=s,this._status=t,this._statusText=i,this._url=e.url(),this._headers=n;for(let{name:u,value:d}of this._headers)this._headersMap.set(u.toLowerCase(),d);this._getResponseBodyCallback=o,this._request._setResponse(this),this._httpVersion=l}_serverAddrFinished(e){this._serverAddrPromise.resolve(e)}_securityDetailsFinished(e){this._securityDetailsPromise.resolve(e)}_requestFinished(e){this._request._responseEndTiming=Math.max(e,this._timing.responseStart),this._finishedPromise.resolve()}_setHttpVersion(e){this._httpVersion=e}url(){return this._url}status(){return this._status}statusText(){return this._statusText}headers(){return this._headers}headerValue(e){return this._headersMap.get(e)}rawResponseHeaders(){return c(this,null,function*(){return this._rawResponseHeadersPromise||Promise.resolve(this._headers)})}setWillReceiveExtraHeaders(){this._request.setWillReceiveExtraHeaders(),this._rawResponseHeadersPromise=new vi.ManualPromise}setRawResponseHeaders(e){this._rawResponseHeadersPromise||(this._rawResponseHeadersPromise=new vi.ManualPromise),this._rawResponseHeadersPromise.resolve(e)}timing(){return this._timing}serverAddr(){return c(this,null,function*(){return(yield this._serverAddrPromise)||null})}securityDetails(){return c(this,null,function*(){return(yield this._securityDetailsPromise)||null})}body(){return this._contentPromise||(this._contentPromise=this._finishedPromise.then(()=>c(this,null,function*(){if(this._status>=300&&this._status<=399)throw new Error("Response body is unavailable for redirect responses");return this._getResponseBodyCallback()}))),this._contentPromise}request(){return this._request}frame(){return this._request.frame()}httpVersion(){return!this._httpVersion||this._httpVersion==="http/1.1"?"HTTP/1.1":this._httpVersion}_responseHeadersSize(){return c(this,null,function*(){if(this._request.responseSize.responseHeadersSize)return this._request.responseSize.responseHeadersSize;let e=4;e+=8,e+=3,e+=this.statusText().length;let t=yield this._bestEffortResponseHeaders();for(let i of t)e+=i.name.length+i.value.length+4;return e+=2,e})}_bestEffortResponseHeaders(){return c(this,null,function*(){return this._rawResponseHeadersPromise?yield this._rawResponseHeadersPromise:this._headers})}sizes(){return c(this,null,function*(){yield this._finishedPromise;let e=yield this._request.requestHeadersSize(),t=yield this._responseHeadersSize(),{encodedBodySize:i}=this._request.responseSize;if(!i){var n;let o=(n=(yield this._bestEffortResponseHeaders()).find(l=>l.name.toLowerCase()==="content-length"))===null||n===void 0?void 0:n.value;i=o?+o:0}return{requestBodySize:this._request.bodySize(),requestHeadersSize:e,responseBodySize:i,responseHeadersSize:t}})}};Qe.Response=_b;var gb=class extends ka.SdkObject{constructor(e,t,i,n){super(e.frame(),"interceptedResponse");this._request=void 0,this._status=void 0,this._statusText=void 0,this._headers=void 0,this._request=e._finalRequest(),this._status=t,this._statusText=i,this._headers=n}status(){return this._status}statusText(){return this._statusText}headers(){return this._headers}request(){return this._request}};Qe.InterceptedResponse=gb;var yi=class extends ka.SdkObject{constructor(e,t){super(e,"ws");this._url=void 0,this._url=t}url(){return this._url}frameSent(e,t){this.emit(yi.Events.FrameSent,{opcode:e,data:t})}frameReceived(e,t){this.emit(yi.Events.FrameReceived,{opcode:e,data:t})}error(e){this.emit(yi.Events.SocketError,e)}closed(){this.emit(yi.Events.Close)}};Qe.WebSocket=yi;yi.Events={Close:"close",SocketError:"socketerror",FrameReceived:"framereceived",FrameSent:"framesent"};var qL={"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","306":"Switch Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","510":"Not Extended","511":"Network Authentication Required"};Qe.STATUS_TEXTS=qL;function BL(r,e){return[{name:r,value:e}]}function HL(r){let e=new Map,t=new Map;for(let n of r)if(!!n)for(let{name:s,value:o}of n){let l=s.toLowerCase();t.set(l,s),e.set(l,o)}let i=[];for(let[n,s]of e)i.push({name:t.get(n),value:s});return i}});var vb=v((jV,wb)=>{"use strict";function Il(){this._types=Object.create(null),this._extensions=Object.create(null);for(let r=0;r<arguments.length;r++)this.define(arguments[r]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}Il.prototype.define=function(r,e){for(let t in r){let i=r[t].map(function(n){return n.toLowerCase()});t=t.toLowerCase();for(let n=0;n<i.length;n++){let s=i[n];if(s[0]!=="*"){if(!e&&s in this._types)throw new Error('Attempt to change mapping for "'+s+'" extension from "'+this._types[s]+'" to "'+t+'". Pass `force=true` to allow this, otherwise remove "'+s+'" from the list of extensions for "'+t+'".');this._types[s]=t}}if(e||!this._extensions[t]){let n=i[0];this._extensions[t]=n[0]!=="*"?n:n.substr(1)}}};Il.prototype.getType=function(r){r=String(r);let e=r.replace(/^.*[/\\]/,"").toLowerCase(),t=e.replace(/^.*\./,"").toLowerCase(),i=e.length<r.length;return(t.length<e.length-1||!i)&&this._types[t]||null};Il.prototype.getExtension=function(r){return r=/^\s*([^;\s]*)/.test(r)&&RegExp.$1,r&&this._extensions[r.toLowerCase()]||null};wb.exports=Il});var bb=v((WV,yb)=>{yb.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}});var Sb=v((UV,xb)=>{xb.exports={"application/prs.cww":["cww"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mapbox-vector-tile":["mvt"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-iwork-keynote-sffkey":["*key"],"application/x-iwork-numbers-sffnumbers":["*numbers"],"application/x-iwork-pages-sffpages":["*pages"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.sap.vds":["vds"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}});var bi=v(($V,Eb)=>{"use strict";var jL=vb();Eb.exports=new jL(bb(),Sb())});var Cb=v(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});Ml.source=void 0;var WL='var pwExport;(()=>{"use strict";var e={204:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.checkComponentAttribute=function(e,t){for(const n of t.jsonPath)null!=e&&(e=e[n]);const n="string"!=typeof e||t.caseSensetive?e:e.toUpperCase(),r="string"!=typeof t.value||t.caseSensetive?t.value:t.value.toUpperCase();return"<truthy>"===t.op?!!n:"="===t.op?n===r:"string"==typeof n&&"string"==typeof r&&("*="===t.op?n.includes(r):"^="===t.op?n.startsWith(r):"$="===t.op?n.endsWith(r):"|="===t.op?n===r||n.startsWith(r+"-"):"~="===t.op&&n.split(" ").includes(r))},t.parseComponentSelector=function(e){let t=0,n=0===e.length;const r=()=>e[t]||"",o=()=>{const o=r();return++t,n=t>=e.length,o},i=o=>{if(n)throw new Error(`Unexpected end of selector while parsing selector \\`${e}\\``);throw new Error(`Error while parsing selector \\`${e}\\` - unexpected symbol "${r()}" at position ${t}`+(o?" during "+o:""))};function s(){for(;!n&&/\\s/.test(r());)o()}function c(){let e="";for(s();!n&&/[-$0-9A-Z_]/i.test(r());)e+=o();return e}function a(e){let t=o();for(t!==e&&i("parsing quoted string");!n&&r()!==e;)"\\\\"===r()&&o(),t+=o();return r()!==e&&i("parsing quoted string"),t+=o(),t}function u(){let e="";return s(),e="\'"===r()||\'"\'===r()?a(r()).slice(1,-1):c(),e||i("parsing property path"),e}function l(){o();const t=[];for(t.push(u()),s();"."===r();)o(),t.push(u()),s();if("]"===r())return o(),{jsonPath:t,op:"<truthy>",value:null,caseSensetive:!1};const c=function(){s();let e="";return n||(e+=o()),n||"="===e||(e+=o()),["=","*=","^=","$=","|=","~="].includes(e)||i("parsing operator"),e}();let l,h=!0;if(s(),"\'"===r()||\'"\'===r())l=a(r()).slice(1,-1),s(),"i"===r()||"I"===r()?(h=!1,o()):"s"!==r()&&"S"!==r()||(h=!0,o());else{for(l="";!n&&!/\\s/.test(r())&&"]"!==r();)l+=o();"true"===l?l=!0:"false"===l?l=!1:(l=+l,isNaN(l)&&i("parsing attribute value"))}if(s(),"]"!==r()&&i("parsing attribute value"),o(),"="!==c&&"string"!=typeof l)throw new Error(`Error while parsing selector \\`${e}\\` - cannot use ${c} in attribute with non-string matching value - ${l}`);return{jsonPath:t,op:c,value:l,caseSensetive:h}}const h={name:"",attributes:[]};for(h.name=c(),s();"["===r();)h.attributes.push(l()),s();if(n||i(void 0),!h.name&&!h.attributes.length)throw new Error(`Error while parsing selector \\`${e}\\` - selector cannot be empty`);return h}},317:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseCSS=function(e,t){let n;try{n=r.tokenize(e),n[n.length-1]instanceof r.EOFToken||n.push(new r.EOFToken)}catch(t){const n=t.message+` while parsing selector "${e}"`,r=(t.stack||"").indexOf(t.message);throw-1!==r&&(t.stack=t.stack.substring(0,r)+n+t.stack.substring(r+t.message.length)),t.message=n,t}const o=n.find((e=>e instanceof r.AtKeywordToken||e instanceof r.BadStringToken||e instanceof r.BadURLToken||e instanceof r.ColumnToken||e instanceof r.CDOToken||e instanceof r.CDCToken||e instanceof r.SemicolonToken||e instanceof r.OpenCurlyToken||e instanceof r.CloseCurlyToken||e instanceof r.URLToken||e instanceof r.PercentageToken));if(o)throw new Error(`Unsupported token "${o.toSource()}" while parsing selector "${e}"`);let i=0;const s=new Set;function c(){return new Error(`Unexpected token "${n[i].toSource()}" while parsing selector "${e}"`)}function a(){for(;n[i]instanceof r.WhitespaceToken;)i++}function u(e=i){return n[e]instanceof r.IdentToken}function l(e=i){return n[e]instanceof r.CommaToken}function h(e=i){return n[e]instanceof r.CloseParenToken}function p(e=i){return n[e]instanceof r.DelimToken&&"*"===n[e].value}function f(e=i){return n[e]instanceof r.EOFToken}function d(e=i){return n[e]instanceof r.DelimToken&&[">","+","~"].includes(n[e].value)}function m(e=i){return l(e)||h(e)||f(e)||d(e)||n[e]instanceof r.WhitespaceToken}function g(){const e=[y()];for(;a(),l();)i++,e.push(y());return e}function y(){return a(),function(e=i){return n[e]instanceof r.NumberToken}()||function(e=i){return n[e]instanceof r.StringToken}()?n[i++].value:function(){const e={simples:[]};for(a(),d()?e.simples.push({selector:{functions:[{name:"scope",args:[]}]},combinator:""}):e.simples.push({selector:v(),combinator:""});;){if(a(),d())e.simples[e.simples.length-1].combinator=n[i++].value,a();else if(m())break;e.simples.push({combinator:"",selector:v()})}return e}()}function v(){let e="";const o=[];for(;!m();)if(u()||p())e+=n[i++].toSource();else if(n[i]instanceof r.HashToken)e+=n[i++].toSource();else if(n[i]instanceof r.DelimToken&&"."===n[i].value){if(i++,!u())throw c();e+="."+n[i++].toSource()}else if(n[i]instanceof r.ColonToken)if(i++,u())if(t.has(n[i].value.toLowerCase())){const e=n[i++].value.toLowerCase();o.push({name:e,args:[]}),s.add(e)}else e+=":"+n[i++].toSource();else{if(!(n[i]instanceof r.FunctionToken))throw c();{const r=n[i++].value.toLowerCase();if(t.has(r)?(o.push({name:r,args:g()}),s.add(r)):e+=`:${r}(${w()})`,a(),!h())throw c();i++}}else{if(!(n[i]instanceof r.OpenSquareToken))throw c();for(e+="[",i++;!(n[i]instanceof r.CloseSquareToken||f());)e+=n[i++].toSource();if(!(n[i]instanceof r.CloseSquareToken))throw c();e+="]",i++}if(!e&&!o.length)throw c();return{css:e||void 0,functions:o}}function w(){let e="";for(;!h()&&!f();)e+=n[i++].toSource();return e}const b=g();if(!f())throw new Error(`Error while parsing selector "${e}"`);if(b.some((e=>"object"!=typeof e||!("simples"in e))))throw new Error(`Error while parsing selector "${e}"`);return{selector:b,names:Array.from(s)}},t.serializeSelector=function e(t){return t.map((t=>"string"==typeof t?`"${t}"`:"number"==typeof t?String(t):t.simples.map((({selector:t,combinator:n})=>{let r=t.css||"";return r+=t.functions.map((t=>`:${t.name}(${e(t.args)})`)).join(""),n&&(r+=" "+n),r})).join(" "))).join(", ")};var r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=i?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(r,s,c):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(n(503));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}},503:(e,t)=>{var n,r;n=function(e){var t=function(e,t,n){return e>=t&&e<=n};function n(e){return t(e,48,57)}function r(e){return n(e)||t(e,65,70)||t(e,97,102)}function o(e){return function(e){return t(e,65,90)}(e)||function(e){return t(e,97,122)}(e)}function i(e){return o(e)||function(e){return e>=128}(e)||95==e}function s(e){return i(e)||n(e)||45==e}function c(e){return t(e,0,8)||11==e||t(e,14,31)||127==e}function a(e){return 10==e}function u(e){return a(e)||9==e||32==e}var l=function(e){this.message=e};function h(e){if(e<=65535)return String.fromCharCode(e);e-=Math.pow(2,16);var t=Math.floor(e/Math.pow(2,10))+55296,n=e%Math.pow(2,10)+56320;return String.fromCharCode(t)+String.fromCharCode(n)}function p(){throw"Abstract Base Class"}function f(){return this}function d(){return this}function m(){return this}function g(){return this}function y(){return this}function v(){return this}function w(){return this}function b(){return this}function E(){throw"Abstract Base Class"}function _(){return this.value="{",this.mirror="}",this}function S(){return this.value="}",this.mirror="{",this}function T(){return this.value="[",this.mirror="]",this}function k(){return this.value="]",this.mirror="[",this}function N(){return this.value="(",this.mirror=")",this}function x(){return this.value=")",this.mirror="(",this}function C(){return this}function A(){return this}function O(){return this}function M(){return this}function $(){return this}function R(){return this}function j(){return this}function L(e){return this.value=h(e),this}function P(){throw"Abstract Base Class"}function q(e){this.value=e}function D(e){this.value=e,this.mirror=")"}function I(e){this.value=e}function U(e){this.value=e,this.type="unrestricted"}function W(e){this.value=e}function F(e){this.value=e}function B(){this.value=null,this.type="integer",this.repr=""}function z(){this.value=null,this.repr=""}function V(){this.value=null,this.type="integer",this.repr="",this.unit=""}function H(e){for(var n="",r=(e=""+e).charCodeAt(0),o=0;o<e.length;o++){var i=e.charCodeAt(o);if(0==i)throw new l("Invalid character: the input contains U+0000.");t(i,1,31)||127==i||0==o&&t(i,48,57)||1==o&&t(i,48,57)&&45==r?n+="\\\\"+i.toString(16)+" ":i>=128||45==i||95==i||t(i,48,57)||t(i,65,90)||t(i,97,122)?n+=e[o]:n+="\\\\"+e[o]}return n}function J(e){e=""+e;for(var n="",r=0;r<e.length;r++){var o=e.charCodeAt(r);if(0==o)throw new l("Invalid character: the input contains U+0000.");t(o,1,31)||127==o?n+="\\\\"+o.toString(16)+" ":n+=34==o||92==o?"\\\\"+e[r]:e[r]}return n}(l.prototype=new Error).name="InvalidCharacterError",p.prototype.toJSON=function(){return{token:this.tokenType}},p.prototype.toString=function(){return this.tokenType},p.prototype.toSource=function(){return""+this},f.prototype=Object.create(p.prototype),f.prototype.tokenType="BADSTRING",d.prototype=Object.create(p.prototype),d.prototype.tokenType="BADURL",m.prototype=Object.create(p.prototype),m.prototype.tokenType="WHITESPACE",m.prototype.toString=function(){return"WS"},m.prototype.toSource=function(){return" "},g.prototype=Object.create(p.prototype),g.prototype.tokenType="CDO",g.prototype.toSource=function(){return"\\x3c!--"},y.prototype=Object.create(p.prototype),y.prototype.tokenType="CDC",y.prototype.toSource=function(){return"--\\x3e"},v.prototype=Object.create(p.prototype),v.prototype.tokenType=":",w.prototype=Object.create(p.prototype),w.prototype.tokenType=";",b.prototype=Object.create(p.prototype),b.prototype.tokenType=",",E.prototype=Object.create(p.prototype),_.prototype=Object.create(E.prototype),_.prototype.tokenType="{",S.prototype=Object.create(E.prototype),S.prototype.tokenType="}",T.prototype=Object.create(E.prototype),T.prototype.tokenType="[",k.prototype=Object.create(E.prototype),k.prototype.tokenType="]",N.prototype=Object.create(E.prototype),N.prototype.tokenType="(",x.prototype=Object.create(E.prototype),x.prototype.tokenType=")",C.prototype=Object.create(p.prototype),C.prototype.tokenType="~=",A.prototype=Object.create(p.prototype),A.prototype.tokenType="|=",O.prototype=Object.create(p.prototype),O.prototype.tokenType="^=",M.prototype=Object.create(p.prototype),M.prototype.tokenType="$=",$.prototype=Object.create(p.prototype),$.prototype.tokenType="*=",R.prototype=Object.create(p.prototype),R.prototype.tokenType="||",j.prototype=Object.create(p.prototype),j.prototype.tokenType="EOF",j.prototype.toSource=function(){return""},L.prototype=Object.create(p.prototype),L.prototype.tokenType="DELIM",L.prototype.toString=function(){return"DELIM("+this.value+")"},L.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},L.prototype.toSource=function(){return"\\\\"==this.value?"\\\\\\n":this.value},P.prototype=Object.create(p.prototype),P.prototype.ASCIIMatch=function(e){return this.value.toLowerCase()==e.toLowerCase()},P.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},q.prototype=Object.create(P.prototype),q.prototype.tokenType="IDENT",q.prototype.toString=function(){return"IDENT("+this.value+")"},q.prototype.toSource=function(){return H(this.value)},D.prototype=Object.create(P.prototype),D.prototype.tokenType="FUNCTION",D.prototype.toString=function(){return"FUNCTION("+this.value+")"},D.prototype.toSource=function(){return H(this.value)+"("},I.prototype=Object.create(P.prototype),I.prototype.tokenType="AT-KEYWORD",I.prototype.toString=function(){return"AT("+this.value+")"},I.prototype.toSource=function(){return"@"+H(this.value)},U.prototype=Object.create(P.prototype),U.prototype.tokenType="HASH",U.prototype.toString=function(){return"HASH("+this.value+")"},U.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e},U.prototype.toSource=function(){return"id"==this.type?"#"+H(this.value):"#"+function(e){for(var n="",r=((e=""+e).charCodeAt(0),0);r<e.length;r++){var o=e.charCodeAt(r);if(0==o)throw new l("Invalid character: the input contains U+0000.");o>=128||45==o||95==o||t(o,48,57)||t(o,65,90)||t(o,97,122)?n+=e[r]:n+="\\\\"+o.toString(16)+" "}return n}(this.value)},W.prototype=Object.create(P.prototype),W.prototype.tokenType="STRING",W.prototype.toString=function(){return\'"\'+J(this.value)+\'"\'},F.prototype=Object.create(P.prototype),F.prototype.tokenType="URL",F.prototype.toString=function(){return"URL("+this.value+")"},F.prototype.toSource=function(){return\'url("\'+J(this.value)+\'")\'},B.prototype=Object.create(p.prototype),B.prototype.tokenType="NUMBER",B.prototype.toString=function(){return"integer"==this.type?"INT("+this.value+")":"NUMBER("+this.value+")"},B.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e},B.prototype.toSource=function(){return this.repr},z.prototype=Object.create(p.prototype),z.prototype.tokenType="PERCENTAGE",z.prototype.toString=function(){return"PERCENTAGE("+this.value+")"},z.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.repr=this.repr,e},z.prototype.toSource=function(){return this.repr+"%"},V.prototype=Object.create(p.prototype),V.prototype.tokenType="DIMENSION",V.prototype.toString=function(){return"DIM("+this.value+","+this.unit+")"},V.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e.unit=this.unit,e},V.prototype.toSource=function(){var e=this.repr,n=H(this.unit);return"e"!=n[0].toLowerCase()||"-"!=n[1]&&!t(n.charCodeAt(1),48,57)||(n="\\\\65 "+n.slice(1,n.length)),e+n},e.tokenize=function(e){e=function(e){for(var n=[],r=0;r<e.length;r++){var o=e.charCodeAt(r);if(13==o&&10==e.charCodeAt(r+1)&&(o=10,r++),13!=o&&12!=o||(o=10),0==o&&(o=65533),t(o,55296,56319)&&t(e.charCodeAt(r+1),56320,57343)){var i=o-55296,s=e.charCodeAt(r+1)-56320;o=Math.pow(2,16)+i*Math.pow(2,10)+s,r++}n.push(o)}return n}(e);for(var o,l=-1,p=[],E=0,P=0,H=0,J={line:E,column:P},Q=function(t){return t>=e.length?-1:e[t]},X=function(e){if(void 0===e&&(e=1),e>3)throw"Spec Error: no more than three codepoints of lookahead.";return Q(l+e)},G=function(e){return void 0===e&&(e=1),a(o=Q(l+=e))?(E+=1,H=P,P=0):P+=e,!0},K=function(){return l-=1,a(o)?(E-=1,P=H):P-=1,J.line=E,J.column=P,!0},Z=function(e){return void 0===e&&(e=o),-1==e},Y=function(){return console.log("Parse error at index "+l+", processing codepoint 0x"+o.toString(16)+"."),!0},ee=function(){if(te(),G(),u(o)){for(;u(X());)G();return new m}if(34==o)return oe();if(35==o){if(s(X())||ce(X(1),X(2))){var e=new U;return ue(X(1),X(2),X(3))&&(e.type="id"),e.value=pe(),e}return new L(o)}return 36==o?61==X()?(G(),new M):new L(o):39==o?oe():40==o?new N:41==o?new x:42==o?61==X()?(G(),new $):new L(o):43==o?he()?(K(),ne()):new L(o):44==o?new b:45==o?he()?(K(),ne()):45==X(1)&&62==X(2)?(G(2),new y):le()?(K(),re()):new L(o):46==o?he()?(K(),ne()):new L(o):58==o?new v:59==o?new w:60==o?33==X(1)&&45==X(2)&&45==X(3)?(G(3),new g):new L(o):64==o?ue(X(1),X(2),X(3))?new I(pe()):new L(o):91==o?new T:92==o?ae()?(K(),re()):(Y(),new L(o)):93==o?new k:94==o?61==X()?(G(),new O):new L(o):123==o?new _:124==o?61==X()?(G(),new A):124==X()?(G(),new R):new L(o):125==o?new S:126==o?61==X()?(G(),new C):new L(o):n(o)?(K(),ne()):i(o)?(K(),re()):Z()?new j:new L(o)},te=function(){for(;47==X(1)&&42==X(2);)for(G(2);;){if(G(),42==o&&47==X()){G();break}if(Z())return void Y()}},ne=function(){var e,t=fe();return ue(X(1),X(2),X(3))?((e=new V).value=t.value,e.repr=t.repr,e.type=t.type,e.unit=pe(),e):37==X()?(G(),(e=new z).value=t.value,e.repr=t.repr,e):((e=new B).value=t.value,e.repr=t.repr,e.type=t.type,e)},re=function(){var e=pe();if("url"==e.toLowerCase()&&40==X()){for(G();u(X(1))&&u(X(2));)G();return 34==X()||39==X()?new D(e):!u(X())||34!=X(2)&&39!=X(2)?ie():new D(e)}return 40==X()?(G(),new D(e)):new q(e)},oe=function(e){void 0===e&&(e=o);for(var t="";G();){if(o==e||Z())return new W(t);if(a(o))return Y(),K(),new f;92==o?Z(X())||(a(X())?G():t+=h(se())):t+=h(o)}},ie=function(){for(var e=new F("");u(X());)G();if(Z(X()))return e;for(;G();){if(41==o||Z())return e;if(u(o)){for(;u(X());)G();return 41==X()||Z(X())?(G(),e):(me(),new d)}if(34==o||39==o||40==o||c(o))return Y(),me(),new d;if(92==o){if(!ae())return Y(),me(),new d;e.value+=h(se())}else e.value+=h(o)}},se=function(){if(G(),r(o)){for(var e=[o],t=0;t<5&&r(X());t++)G(),e.push(o);u(X())&&G();var n=parseInt(e.map((function(e){return String.fromCharCode(e)})).join(""),16);return n>1114111&&(n=65533),n}return Z()?65533:o},ce=function(e,t){return 92==e&&!a(t)},ae=function(){return ce(o,X())},ue=function(e,t,n){return 45==e?i(t)||45==t||ce(t,n):!!i(e)||92==e&&ce(e,t)},le=function(){return ue(o,X(1),X(2))},he=function(){return e=o,t=X(1),r=X(2),43==e||45==e?!!n(t)||!(46!=t||!n(r)):46==e?!!n(t):!!n(e);var e,t,r},pe=function(){for(var e="";G();)if(s(o))e+=h(o);else{if(!ae())return K(),e;e+=h(se())}},fe=function(){var e=[],t="integer";for(43!=X()&&45!=X()||(G(),e+=h(o));n(X());)G(),e+=h(o);if(46==X(1)&&n(X(2)))for(G(),e+=h(o),G(),e+=h(o),t="number";n(X());)G(),e+=h(o);var r=X(1),i=X(2),s=X(3);if(69!=r&&101!=r||!n(i)){if((69==r||101==r)&&(43==i||45==i)&&n(s))for(G(),e+=h(o),G(),e+=h(o),G(),e+=h(o),t="number";n(X());)G(),e+=h(o)}else for(G(),e+=h(o),G(),e+=h(o),t="number";n(X());)G(),e+=h(o);return{type:t,value:de(e),repr:e}},de=function(e){return+e},me=function(){for(;G();){if(41==o||Z())return;ae()&&se()}},ge=0;!Z(X());)if(p.push(ee()),++ge>2*e.length)return"I\'m infinite-looping!";return p},e.IdentToken=q,e.FunctionToken=D,e.AtKeywordToken=I,e.HashToken=U,e.StringToken=W,e.BadStringToken=f,e.URLToken=F,e.BadURLToken=d,e.DelimToken=L,e.NumberToken=B,e.PercentageToken=z,e.DimensionToken=V,e.IncludeMatchToken=C,e.DashMatchToken=A,e.PrefixMatchToken=O,e.SuffixMatchToken=M,e.SubstringMatchToken=$,e.ColumnToken=R,e.WhitespaceToken=m,e.CDOToken=g,e.CDCToken=y,e.ColonToken=v,e.SemicolonToken=w,e.CommaToken=b,e.OpenParenToken=N,e.CloseParenToken=x,e.OpenSquareToken=T,e.CloseSquareToken=k,e.OpenCurlyToken=_,e.CloseCurlyToken=S,e.EOFToken=j,e.CSSParserToken=p,e.GroupingToken=E},void 0===(r=n.apply(t,[t]))||(e.exports=r)},461:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseSelector=function(e){const t=function(e){let t,n=0,r=0;const o={parts:[]},i=()=>{const t=e.substring(r,n).trim(),i=t.indexOf("=");let s,c;-1!==i&&t.substring(0,i).trim().match(/^[a-zA-Z_0-9-+:*]+$/)?(s=t.substring(0,i).trim(),c=t.substring(i+1)):t.length>1&&\'"\'===t[0]&&\'"\'===t[t.length-1]||t.length>1&&"\'"===t[0]&&"\'"===t[t.length-1]?(s="text",c=t):/^\\(*\\/\\//.test(t)||t.startsWith("..")?(s="xpath",c=t):(s="css",c=t);let a=!1;if("*"===s[0]&&(a=!0,s=s.substring(1)),o.parts.push({name:s,body:c}),a){if(void 0!==o.capture)throw new Error("Only one of the selectors can capture using * modifier");o.capture=o.parts.length-1}};if(!e.includes(">>"))return n=e.length,i(),o;for(;n<e.length;){const o=e[n];"\\\\"===o&&n+1<e.length?n+=2:o===t?(t=void 0,n++):t||\'"\'!==o&&"\'"!==o&&"`"!==o?t||">"!==o||">"!==e[n+1]?n++:(i(),n+=2,r=n):(t=o,n++)}return i(),o}(e),n=t.parts.map((e=>"css"===e.name||"css:light"===e.name?("css:light"===e.name&&(e.body=":light("+e.body+")"),{name:"css",body:(0,r.parseCSS)(e.body,o).selector}):e));return{selector:e,capture:t.capture,parts:n}},t.customCSSNames=void 0;var r=n(317);const o=new Set(["not","is","where","has","scope","light","visible","text","text-matches","text-is","has-text","above","below","right-of","left-of","near","nth-match"]);t.customCSSNames=o},836:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ReactEngine=void 0;var r=n(204);function o(e){if("function"==typeof e.type)return e.type.displayName||e.type.name||"Anonymous";if("string"==typeof e.type)return e.type;if(e._currentElement){const t=e._currentElement.type;if("string"==typeof t)return t;if("function"==typeof t)return t.displayName||t.name||"Anonymous"}return""}function i(e){if(e.child){const t=[];for(let n=e.child;n;n=n.sibling)t.push(n);return t}if(!e._currentElement)return[];const t=e=>{var t;const n=null===(t=e._currentElement)||void 0===t?void 0:t.type;return"function"==typeof n||"string"==typeof n};if(e._renderedComponent){const n=e._renderedComponent;return t(n)?[n]:[]}return e._renderedChildren?[...Object.values(e._renderedChildren)].filter(t):[]}function s(e){var t;const n=e.memoizedProps||(null===(t=e._currentElement)||void 0===t?void 0:t.props);if(!n||"string"==typeof n)return n;const r={...n};return delete r.children,r}function c(e){var t;const n={name:o(e),children:i(e).map(c),rootElements:[],props:s(e)},r=e.stateNode||e._hostNode||(null===(t=e._renderedComponent)||void 0===t?void 0:t._hostNode);if(r instanceof Element)n.rootElements.push(r);else for(const e of n.children)n.rootElements.push(...e.rootElements);return n}function a(e,t,n=[]){t(e)&&n.push(e);for(const r of e.children)a(r,t,n);return n}const u={queryAll(e,t){const{name:n,attributes:o}=(0,r.parseComponentSelector)(t),i=function(){const e=[],t=document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT);for(;t.nextNode();){const n=t.currentNode;n.hasOwnProperty("_reactRootContainer")&&e.push(n._reactRootContainer._internalRoot.current)}for(const t of document.querySelectorAll("[data-reactroot]"))for(const n of Object.keys(t))(n.startsWith("__reactInternalInstance")||n.startsWith("__reactFiber"))&&e.push(t[n]);return e}().map((e=>c(e))).map((t=>a(t,(t=>{if(n&&t.name!==n)return!1;if(t.rootElements.some((t=>!e.contains(t))))return!1;for(const e of o)if(!(0,r.checkComponentAttribute)(t.props,e))return!1;return!0})))).flat(),s=new Set;for(const e of i)for(const t of e.rootElements)s.add(t);return[...s]}};t.ReactEngine=u},848:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createLaxTextMatcher=d,t.createStrictTextMatcher=m,t.createRegexTextMatcher=g,t.elementText=v,t.elementMatchesText=w,t.parentElementOrShadowHost=x,t.isVisible=O,t.SelectorEvaluatorImpl=void 0;var r=n(461);t.SelectorEvaluatorImpl=class{constructor(e){this._engines=new Map,this._cacheQueryCSS=new Map,this._cacheMatches=new Map,this._cacheQuery=new Map,this._cacheMatchesSimple=new Map,this._cacheMatchesParents=new Map,this._cacheCallMatches=new Map,this._cacheCallQuery=new Map,this._cacheQuerySimple=new Map,this._cacheText=new Map,this._scoreMap=void 0,this._retainCacheCounter=0;for(const[t,n]of e)this._engines.set(t,n);this._engines.set("not",c),this._engines.set("is",o),this._engines.set("where",o),this._engines.set("has",i),this._engines.set("scope",s),this._engines.set("light",a),this._engines.set("visible",u),this._engines.set("text",l),this._engines.set("text-is",h),this._engines.set("text-matches",p),this._engines.set("has-text",f),this._engines.set("right-of",k("right-of",b)),this._engines.set("left-of",k("left-of",E)),this._engines.set("above",k("above",_)),this._engines.set("below",k("below",S)),this._engines.set("near",k("near",T)),this._engines.set("nth-match",N);const t=[...this._engines.keys()];t.sort();const n=[...r.customCSSNames];if(n.sort(),t.join("|")!==n.join("|"))throw new Error(`Please keep customCSSNames in sync with evaluator engines: ${t.join("|")} vs ${n.join("|")}`)}begin(){++this._retainCacheCounter}end(){--this._retainCacheCounter,this._retainCacheCounter||(this._cacheQueryCSS.clear(),this._cacheMatches.clear(),this._cacheQuery.clear(),this._cacheMatchesSimple.clear(),this._cacheMatchesParents.clear(),this._cacheCallMatches.clear(),this._cacheCallQuery.clear(),this._cacheQuerySimple.clear(),this._cacheText.clear())}_cached(e,t,n,r){e.has(t)||e.set(t,[]);const o=e.get(t),i=o.find((e=>n.every(((t,n)=>e.rest[n]===t))));if(i)return i.result;const s=r();return o.push({rest:n,result:s}),s}_checkSelector(e){if("object"!=typeof e||!e||!(Array.isArray(e)||"simples"in e&&e.simples.length))throw new Error(`Malformed selector "${e}"`);return e}matches(e,t,n){const r=this._checkSelector(t);this.begin();try{return this._cached(this._cacheMatches,e,[r,n.scope,n.pierceShadow],(()=>Array.isArray(r)?this._matchesEngine(o,e,r,n):!!this._matchesSimple(e,r.simples[r.simples.length-1].selector,n)&&this._matchesParents(e,r,r.simples.length-2,n)))}finally{this.end()}}query(e,t){const n=this._checkSelector(t);this.begin();try{return this._cached(this._cacheQuery,n,[e.scope,e.pierceShadow],(()=>{if(Array.isArray(n))return this._queryEngine(o,e,n);const t=this._scoreMap;this._scoreMap=new Map;let r=this._querySimple(e,n.simples[n.simples.length-1].selector);return r=r.filter((t=>this._matchesParents(t,n,n.simples.length-2,e))),this._scoreMap.size&&r.sort(((e,t)=>{const n=this._scoreMap.get(e),r=this._scoreMap.get(t);return n===r?0:void 0===n?1:void 0===r?-1:n-r})),this._scoreMap=t,r}))}finally{this.end()}}_markScore(e,t){this._scoreMap&&this._scoreMap.set(e,t)}_matchesSimple(e,t,n){return this._cached(this._cacheMatchesSimple,e,[t,n.scope,n.pierceShadow],(()=>{if(!t.functions.some((e=>"scope"===e.name||"is"===e.name))&&e===n.scope)return!1;if(t.css&&!this._matchesCSS(e,t.css))return!1;for(const r of t.functions)if(!this._matchesEngine(this._getEngine(r.name),e,r.args,n))return!1;return!0}))}_querySimple(e,t){return t.functions.length?this._cached(this._cacheQuerySimple,t,[e.scope,e.pierceShadow],(()=>{let n=t.css;const r=t.functions;let o;"*"===n&&r.length&&(n=void 0);let i=-1;void 0!==n?o=this._queryCSS(e,n):(i=r.findIndex((e=>void 0!==this._getEngine(e.name).query)),-1===i&&(i=0),o=this._queryEngine(this._getEngine(r[i].name),e,r[i].args));for(let t=0;t<r.length;t++){if(t===i)continue;const n=this._getEngine(r[t].name);void 0!==n.matches&&(o=o.filter((o=>this._matchesEngine(n,o,r[t].args,e))))}for(let t=0;t<r.length;t++){if(t===i)continue;const n=this._getEngine(r[t].name);void 0===n.matches&&(o=o.filter((o=>this._matchesEngine(n,o,r[t].args,e))))}return o})):this._queryCSS(e,t.css||"*")}_matchesParents(e,t,n,r){return n<0||this._cached(this._cacheMatchesParents,e,[t,n,r.scope,r.pierceShadow],(()=>{const{selector:o,combinator:i}=t.simples[n];if(">"===i){const i=C(e,r);return!(!i||!this._matchesSimple(i,o,r))&&this._matchesParents(i,t,n-1,r)}if("+"===i){const i=A(e,r);return!(!i||!this._matchesSimple(i,o,r))&&this._matchesParents(i,t,n-1,r)}if(""===i){let i=C(e,r);for(;i;){if(this._matchesSimple(i,o,r)){if(this._matchesParents(i,t,n-1,r))return!0;if(""===t.simples[n-1].combinator)break}i=C(i,r)}return!1}if("~"===i){let i=A(e,r);for(;i;){if(this._matchesSimple(i,o,r)){if(this._matchesParents(i,t,n-1,r))return!0;if("~"===t.simples[n-1].combinator)break}i=A(i,r)}return!1}if(">="===i){let i=e;for(;i;){if(this._matchesSimple(i,o,r)){if(this._matchesParents(i,t,n-1,r))return!0;if(""===t.simples[n-1].combinator)break}i=C(i,r)}return!1}throw new Error(`Unsupported combinator "${i}"`)}))}_matchesEngine(e,t,n,r){if(e.matches)return this._callMatches(e,t,n,r);if(e.query)return this._callQuery(e,n,r).includes(t);throw new Error(\'Selector engine should implement "matches" or "query"\')}_queryEngine(e,t,n){if(e.query)return this._callQuery(e,n,t);if(e.matches)return this._queryCSS(t,"*").filter((r=>this._callMatches(e,r,n,t)));throw new Error(\'Selector engine should implement "matches" or "query"\')}_callMatches(e,t,n,r){return this._cached(this._cacheCallMatches,t,[e,r.scope,r.pierceShadow,...n],(()=>e.matches(t,n,r,this)))}_callQuery(e,t,n){return this._cached(this._cacheCallQuery,e,[n.scope,n.pierceShadow,...t],(()=>e.query(n,t,this)))}_matchesCSS(e,t){return e.matches(t)}_queryCSS(e,t){return this._cached(this._cacheQueryCSS,t,[e.scope,e.pierceShadow],(()=>{let n=[];return function r(o){if(n=n.concat([...o.querySelectorAll(t)]),e.pierceShadow){o.shadowRoot&&r(o.shadowRoot);for(const e of o.querySelectorAll("*"))e.shadowRoot&&r(e.shadowRoot)}}(e.scope),n}))}_getEngine(e){const t=this._engines.get(e);if(!t)throw new Error(`Unknown selector engine "${e}"`);return t}};const o={matches(e,t,n,r){if(0===t.length)throw new Error(\'"is" engine expects non-empty selector list\');return t.some((t=>r.matches(e,t,n)))},query(e,t,n){if(0===t.length)throw new Error(\'"is" engine expects non-empty selector list\');let r=[];for(const o of t)r=r.concat(n.query(e,o));return 1===t.length?r:function(e){const t=new Map,n=[],r=[];function o(e){let r=t.get(e);if(r)return r;const i=x(e);return i?o(i).children.push(e):n.push(e),r={children:[],taken:!1},t.set(e,r),r}return e.forEach((e=>o(e).taken=!0)),n.forEach((function e(n){const o=t.get(n);if(o.taken&&r.push(n),o.children.length>1){const e=new Set(o.children);o.children=[];let t=n.firstElementChild;for(;t&&o.children.length<e.size;)e.has(t)&&o.children.push(t),t=t.nextElementSibling;for(t=n.shadowRoot?n.shadowRoot.firstElementChild:null;t&&o.children.length<e.size;)e.has(t)&&o.children.push(t),t=t.nextElementSibling}o.children.forEach(e)})),r}(r)}},i={matches(e,t,n,r){if(0===t.length)throw new Error(\'"has" engine expects non-empty selector list\');return r.query({...n,scope:e},t).length>0}},s={matches(e,t,n,r){if(0!==t.length)throw new Error(\'"scope" engine expects no arguments\');return 9===n.scope.nodeType?e===n.scope.documentElement:e===n.scope},query(e,t,n){if(0!==t.length)throw new Error(\'"scope" engine expects no arguments\');if(9===e.scope.nodeType){const t=e.scope.documentElement;return t?[t]:[]}return 1===e.scope.nodeType?[e.scope]:[]}},c={matches(e,t,n,r){if(0===t.length)throw new Error(\'"not" engine expects non-empty selector list\');return!r.matches(e,t,n)}},a={query:(e,t,n)=>n.query({...e,pierceShadow:!1},t),matches:(e,t,n,r)=>r.matches(e,t,{...n,pierceShadow:!1})},u={matches(e,t,n,r){if(t.length)throw new Error(\'"visible" engine expects no arguments\');return O(e)}},l={matches(e,t,n,r){if(1!==t.length||"string"!=typeof t[0])throw new Error(\'"text" engine expects a single string\');return"self"===w(r,e,d(t[0]))}},h={matches(e,t,n,r){if(1!==t.length||"string"!=typeof t[0])throw new Error(\'"text-is" engine expects a single string\');return"none"!==w(r,e,m(t[0]))}},p={matches(e,t,n,r){if(0===t.length||"string"!=typeof t[0]||t.length>2||2===t.length&&"string"!=typeof t[1])throw new Error(\'"text-matches" engine expects a regexp body and optional regexp flags\');return"self"===w(r,e,g(t[0],2===t.length?t[1]:void 0))}},f={matches(e,t,n,r){if(1!==t.length||"string"!=typeof t[0])throw new Error(\'"has-text" engine expects a single string\');return!y(e)&&d(t[0])(v(r,e))}};function d(e){return e=e.trim().replace(/\\s+/g," ").toLowerCase(),t=>t.full.trim().replace(/\\s+/g," ").toLowerCase().includes(e)}function m(e){return e=e.trim().replace(/\\s+/g," "),t=>!e&&!t.immediate.length||t.immediate.some((t=>t.trim().replace(/\\s+/g," ")===e))}function g(e,t){const n=new RegExp(e,t);return e=>n.test(e.full)}function y(e){return"SCRIPT"===e.nodeName||"STYLE"===e.nodeName||document.head&&document.head.contains(e)}function v(e,t){let n=e._cacheText.get(t);if(void 0===n){if(n={full:"",immediate:[]},!y(t)){let r="";if(t instanceof HTMLInputElement&&("submit"===t.type||"button"===t.type))n={full:t.value,immediate:[t.value]};else{for(let o=t.firstChild;o;o=o.nextSibling)o.nodeType===Node.TEXT_NODE?(n.full+=o.nodeValue||"",r+=o.nodeValue||""):(r&&n.immediate.push(r),r="",o.nodeType===Node.ELEMENT_NODE&&(n.full+=v(e,o).full));r&&n.immediate.push(r),t.shadowRoot&&(n.full+=v(e,t.shadowRoot).full)}}e._cacheText.set(t,n)}return n}function w(e,t,n){if(y(t))return"none";if(!n(v(e,t)))return"none";for(let r=t.firstChild;r;r=r.nextSibling)if(r.nodeType===Node.ELEMENT_NODE&&n(v(e,r)))return"selfAndChildren";return t.shadowRoot&&n(v(e,t.shadowRoot))?"selfAndChildren":"self"}function b(e,t,n){const r=e.left-t.right;if(!(r<0||void 0!==n&&r>n))return r+Math.max(t.bottom-e.bottom,0)+Math.max(e.top-t.top,0)}function E(e,t,n){const r=t.left-e.right;if(!(r<0||void 0!==n&&r>n))return r+Math.max(t.bottom-e.bottom,0)+Math.max(e.top-t.top,0)}function _(e,t,n){const r=t.top-e.bottom;if(!(r<0||void 0!==n&&r>n))return r+Math.max(e.left-t.left,0)+Math.max(t.right-e.right,0)}function S(e,t,n){const r=e.top-t.bottom;if(!(r<0||void 0!==n&&r>n))return r+Math.max(e.left-t.left,0)+Math.max(t.right-e.right,0)}function T(e,t,n){const r=void 0===n?50:n;let o=0;return e.left-t.right>=0&&(o+=e.left-t.right),t.left-e.right>=0&&(o+=t.left-e.right),t.top-e.bottom>=0&&(o+=t.top-e.bottom),e.top-t.bottom>=0&&(o+=e.top-t.bottom),o>r?void 0:o}function k(e,t){return{matches(n,r,o,i){const s=r.length&&"number"==typeof r[r.length-1]?r[r.length-1]:void 0,c=void 0===s?r:r.slice(0,r.length-1);if(r.length<1+(void 0===s?0:1))throw new Error(`"${e}" engine expects a selector list and optional maximum distance in pixels`);const a=n.getBoundingClientRect();let u;for(const e of i.query(o,c)){if(e===n)continue;const r=t(a,e.getBoundingClientRect(),s);void 0!==r&&(void 0===u||r<u)&&(u=r)}return void 0!==u&&(i._markScore(n,u),!0)}}}const N={query(e,t,n){let r=t[t.length-1];if(t.length<2)throw new Error(\'"nth-match" engine expects non-empty selector list and an index argument\');if("number"!=typeof r||r<1)throw new Error(\'"nth-match" engine expects a one-based index as the last argument\');const i=o.query(e,t.slice(0,t.length-1),n);return r--,r<i.length?[i[r]]:[]}};function x(e){return e.parentElement?e.parentElement:e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.parentNode.host?e.parentNode.host:void 0}function C(e,t){if(e!==t.scope)return t.pierceShadow?x(e):e.parentElement||void 0}function A(e,t){if(e!==t.scope)return e.previousElementSibling||void 0}function O(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return!0;const t=e.ownerDocument.defaultView.getComputedStyle(e);if(!t||"hidden"===t.visibility)return!1;const n=e.getBoundingClientRect();return n.width>0&&n.height>0}},854:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.querySelector=function(e,t,n){try{const r=e.parseSelector(t);return{selector:t,elements:e.querySelectorAll(r,n)}}catch(e){return{selector:t,elements:[]}}},t.generateSelector=function(e,t){e._evaluator.begin();try{const n=function(e,t){if(t.ownerDocument.documentElement===t)return[{engine:"css",selector:"html",score:1}];const n=(u,h)=>{const d=h?o:i;let m=d.get(u);return void 0===m&&(m=((o,i)=>{const u=o===t;let h=i?function(e,t,n){if("SELECT"===t.nodeName)return[];const o=(0,r.elementText)(e._evaluator,t).full.trim().replace(/\\s+/g," ").substring(0,80);if(!o)return[];const i=[];let s=o;if((o.includes(\'"\')||o.includes(">>")||"/"===o[0])&&(s=`/.*${function(e){return e.replace(/[.*+?^>${}()|[\\]\\\\]/g,"\\\\$&")}(o)}.*/`),i.push({engine:"text",selector:s,score:10}),n&&s===o){let e=t.nodeName.toLocaleLowerCase();t.hasAttribute("role")&&(e+=`[role=${l(t.getAttribute("role"))}]`),i.push({engine:"css",selector:`${e}:has-text("${o}")`,score:30})}return i}(e,o,o===t).map((e=>[e])):[];o!==t&&(h=s(h));const d=function(e,t){const n=[];for(const e of["data-testid","data-test-id","data-test"])t.hasAttribute(e)&&n.push({engine:"css",selector:`[${e}=${l(t.getAttribute(e))}]`,score:1});if("INPUT"===t.nodeName){const e=t;e.placeholder&&n.push({engine:"css",selector:`[placeholder=${l(e.placeholder)}]`,score:10})}t.hasAttribute("aria-label")&&n.push({engine:"css",selector:`[aria-label=${l(t.getAttribute("aria-label"))}]`,score:10}),t.getAttribute("alt")&&["APPLET","AREA","IMG","INPUT"].includes(t.nodeName)&&n.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[alt=${l(t.getAttribute("alt"))}]`,score:10}),t.hasAttribute("role")&&n.push({engine:"css",selector:`${t.nodeName.toLocaleLowerCase()}[role=${l(t.getAttribute("role"))}]`,score:50}),t.getAttribute("name")&&["BUTTON","FORM","FIELDSET","IFRAME","INPUT","KEYGEN","OBJECT","OUTPUT","SELECT","TEXTAREA","MAP","META","PARAM"].includes(t.nodeName)&&n.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[name=${l(t.getAttribute("name"))}]`,score:50}),["INPUT","TEXTAREA"].includes(t.nodeName)&&"hidden"!==t.getAttribute("type")&&t.getAttribute("type")&&n.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[type=${l(t.getAttribute("type"))}]`,score:50}),["INPUT","TEXTAREA","SELECT"].includes(t.nodeName)&&n.push({engine:"css",selector:t.nodeName.toLowerCase(),score:50});const r=t.getAttribute("id");return r&&!function(e){let t,n=0;for(let r=0;r<e.length;++r){const o=e[r];let i;"-"!==o&&"_"!==o&&(i=o>="a"&&o<="z"?"lower":o>="A"&&o<="Z"?"upper":o>="0"&&o<="9"?"digit":"other","lower"!==i||"upper"!==t?(t&&t!==i&&++n,t=i):t=i)}return n>=e.length/4}(r)&&n.push({engine:"css",selector:a(r),score:100}),n.push({engine:"css",selector:t.nodeName.toLocaleLowerCase(),score:200}),n}(0,o).map((e=>[e]));let m=f(e,t.ownerDocument,o,[...h,...d],u);h=s(h);const g=t=>{const r=i&&!t.length,s=[...t,...d].filter((e=>!m||p(e)<p(m)));let a=s[0];if(a)for(let t=c(o);t;t=c(t)){const i=n(t,r);if(!i)continue;if(m&&p([...i,...a])>=p(m))continue;if(a=f(e,t,o,s,u),!a)return;const c=[...i,...a];(!m||p(c)<p(m))&&(m=c)}};return g(h),o===t&&h.length&&g([]),m})(u,h),d.set(u,m)),m};return n(t,!0)}(e,t=t.closest("button,select,input,[role=button],[role=checkbox],[role=radio]")||t),d=h(n||[u(e,t)]),m=e.parseSelector(d);return{selector:d,elements:e.querySelectorAll(m,t.ownerDocument)}}finally{o.clear(),i.clear(),e._evaluator.end()}};var r=n(848);const o=new Map,i=new Map;function s(e){return e.filter((e=>"/"!==e[0].selector[0]))}function c(e){return e.parentElement?e.parentElement:e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.parentNode.host?e.parentNode.host:null}function a(e){return/^[a-zA-Z][a-zA-Z0-9\\-\\_]+$/.test(e)?"#"+e:`[id="${e}"]`}function u(e,t){const n=1e7,r=t.ownerDocument,o=[];function i(n){const r=o.slice();n&&r.unshift(n);const i=r.join(" "),s=e.parseSelector(i);return e.querySelector(s,t.ownerDocument,!1)===t?i:void 0}for(let e=t;e&&e!==r;e=c(e)){const t=e.nodeName.toLowerCase();let r="";if(e.id){const t=a(e.id),o=i(t);if(o)return{engine:"css",selector:o,score:n};r=t}const s=e.parentNode,c=[...e.classList];for(let e=0;e<c.length;++e){const t="."+c.slice(0,e+1).join("."),o=i(t);if(o)return{engine:"css",selector:o,score:n};!r&&s&&1===s.querySelectorAll(t).length&&(r=t)}if(s){const o=[...s.children],c=0===o.filter((e=>e.nodeName.toLowerCase()===t)).indexOf(e)?t:`${t}:nth-child(${1+o.indexOf(e)})`,a=i(c);if(a)return{engine:"css",selector:a,score:n};r||(r=c)}else r||(r=t);o.unshift(r)}return{engine:"css",selector:i(),score:n}}function l(e){return`"${e.replace(/"/g,\'\\\\"\').replace(/\\n/g,"\\\\n")}"`}function h(e){const t=[];let n="";for(const{engine:r,selector:o}of e)t.length&&("css"!==n||"css"!==r||o.startsWith(":nth-match("))&&t.push(">>"),n=r,"css"===r?t.push(o):t.push(`${r}=${o}`);return t.join(" ")}function p(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n].score*(e.length-n);return t}function f(e,t,n,r,o){const i=r.map((e=>({tokens:e,score:p(e)})));i.sort(((e,t)=>e.score-t.score));let s=null;for(const{tokens:r}of i){const i=e.parseSelector(h(r)),c=e.querySelectorAll(i,t),a=c.indexOf(n);if(0===a)return r;if(!o||s||-1===a||c.length>5)continue;const u=r.map((e=>"text"!==e.engine?e:e.selector.startsWith("/")&&e.selector.endsWith("/")?{engine:"css",selector:`:text-matches("${e.selector.substring(1,e.selector.length-1)}")`,score:e.score}:{engine:"css",selector:`:text("${e.selector}")`,score:e.score}));s=[{engine:"css",selector:`:nth-match(${h(u)}, ${a+1})`,score:p(u)+1e3}]}return s}},12:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VueEngine=void 0;var r=n(204);function o(e,t){const n=e.replace(/^[a-zA-Z]:/,"").replace(/\\\\/g,"/");let r=n.substring(n.lastIndexOf("/")+1);return t&&r.endsWith(t)&&(r=r.substring(0,r.length-t.length)),r}function i(e,t){return t?t.toUpperCase():""}const s=/(?:^|[-_/])(\\w)/g,c=e=>e&&e.replace(s,i);function a(e,t,n=[]){t(e)&&n.push(e);for(const r of e.children)a(r,t,n);return n}const u={queryAll(e,t){const{name:n,attributes:i}=(0,r.parseComponentSelector)(t),s=function(){const e=[];for(const t of document.querySelectorAll("[data-v-app]"))t._vnode&&t._vnode.component&&e.push({root:t._vnode.component,version:3});const t=document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT),n=new Set;for(;t.nextNode();){const e=t.currentNode;e&&e.__vue__&&n.add(e.__vue__.$root)}for(const t of n)e.push({version:2,root:t});return e}().map((e=>3===e.version?function(e){function t(e,t){return e.type.__playwright_guessedName=t,t}function n(e){const n=function(e){const t=e.name||e._componentTag||e.__playwright_guessedName;if(t)return t;const n=e.__file;return n?c(o(n,".vue")):void 0}(e.type||{});if(n)return n;if(e.root===e)return"Root";for(const n in null===(r=e.parent)||void 0===r||null===(i=r.type)||void 0===i?void 0:i.components){var r,i,s;if((null===(s=e.parent)||void 0===s?void 0:s.type.components[n])===e.type)return t(e,n)}for(const n in null===(a=e.appContext)||void 0===a?void 0:a.components){var a;if(e.appContext.components[n]===e.type)return t(e,n)}return"Anonymous Component"}function r(e){const t=[];return e.component&&t.push(e.component),e.suspense&&t.push(...r(e.suspense.activeBranch)),Array.isArray(e.children)&&e.children.forEach((e=>{e.component?t.push(e.component):t.push(...r(e))})),t.filter((e=>{var t;return!(function(e){return e._isBeingDestroyed||e.isUnmounted}(e)||null!==(t=e.type.devtools)&&void 0!==t&&t.hide)}))}function i(e){return function(e){return"Symbol(Fragment)"===e.subTree.type.toString()}(e)?function(e){if(!e.children)return[];const t=[];for(let n=0,r=e.children.length;n<r;n++){const r=e.children[n];r.component?t.push(...i(r.component)):r.el&&t.push(r.el)}return t}(e.subTree):[e.subTree.el]}return function e(t){return{name:n(t),children:r(t.subTree).map(e),rootElements:i(t),props:t.props}}(e)}(e.root):function(e){function t(e){return function(e){const t=e.displayName||e.name||e._componentTag;if(t)return t;const n=e.__file;return n?c(o(n,".vue")):void 0}(e.$options||e.fnOptions||{})||(e.$root===e?"Root":"Anonymous Component")}function n(e){return e.$children?e.$children:Array.isArray(e.subTree.children)?e.subTree.children.filter((e=>!!e.component)).map((e=>e.component)):[]}return function e(r){return{name:t(r),children:n(r).map(e),rootElements:[r.$el],props:r._props}}(e)}(e.root))).map((t=>a(t,(t=>{if(n&&t.name!==n)return!1;if(t.rootElements.some((t=>!e.contains(t))))return!1;for(const e of i)if(!(0,r.checkComponentAttribute)(t.props,e))return!1;return!0})))).flat(),u=new Set;for(const e of s)for(const t of e.rootElements)u.add(t);return[...u]}};t.VueEngine=u},530:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XPathEngine=void 0;const n={queryAll(e,t){t.startsWith("/")&&(t="."+t);const n=[],r=e instanceof Document?e:e.ownerDocument;if(!r)return n;const o=r.evaluate(t,e,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE);for(let e=o.iterateNext();e;e=o.iterateNext())e.nodeType===Node.ELEMENT_NODE&&n.push(e);return n}};t.XPathEngine=n}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var r={};(()=>{var e=r;e.default=void 0;var t=n(530),o=n(836),i=n(12),s=n(461),c=n(848),a=n(854);const u=new Set(["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","MENUITEM","META","PARAM","SOURCE","TRACK","WBR"]),l=new Set(["checked","selected","disabled","readonly","multiple"]);function h(e){return e.replace(/\\n/g,"\u21B5").replace(/\\t/g,"\u21C6")}const p=new Map([["auxclick","mouse"],["click","mouse"],["dblclick","mouse"],["mousedown","mouse"],["mouseeenter","mouse"],["mouseleave","mouse"],["mousemove","mouse"],["mouseout","mouse"],["mouseover","mouse"],["mouseup","mouse"],["mouseleave","mouse"],["mousewheel","mouse"],["keydown","keyboard"],["keyup","keyboard"],["keypress","keyboard"],["textInput","keyboard"],["touchstart","touch"],["touchmove","touch"],["touchend","touch"],["touchcancel","touch"],["pointerover","pointer"],["pointerout","pointer"],["pointerenter","pointer"],["pointerleave","pointer"],["pointerdown","pointer"],["pointerup","pointer"],["pointermove","pointer"],["pointercancel","pointer"],["gotpointercapture","pointer"],["lostpointercapture","pointer"],["focus","focus"],["blur","focus"],["drag","drag"],["dragstart","drag"],["dragend","drag"],["dragover","drag"],["dragenter","drag"],["dragleave","drag"],["dragexit","drag"],["drop","drag"]]);function f(e){if(!e.includes("\\\\"))return e;const t=[];let n=0;for(;n<e.length;)"\\\\"===e[n]&&n+1<e.length&&n++,t.push(e[n++]);return t.join("")}class d{constructor(e){this._string=void 0,this._substring=void 0,this._regex=void 0,this._normalizeWhiteSpace=void 0,this._normalizeWhiteSpace=e.normalizeWhiteSpace,this._string=e.matchSubstring?void 0:this.normalizeWhiteSpace(e.string),this._substring=e.matchSubstring?this.normalizeWhiteSpace(e.string):void 0,this._regex=e.regexSource?new RegExp(e.regexSource,e.regexFlags):void 0}matches(e){return this._normalizeWhiteSpace&&!this._regex&&(e=this.normalizeWhiteSpace(e)),void 0!==this._string?e===this._string:void 0!==this._substring?e.includes(this._substring):!!this._regex&&!!this._regex.test(e)}normalizeWhiteSpace(e){return e&&this._normalizeWhiteSpace?e.trim().replace(/\\s+/g," "):e}}function m(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!m(e[n],t[n]))return!1;return!0}if(e instanceof RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let e=0;e<n.length;++e)if(!t.hasOwnProperty(n[e]))return!1;for(const r of n)if(!m(e[r],t[r]))return!1;return!0}return isNaN(e)===isNaN(t)}var g=class{constructor(e,n,r,s){this._engines=void 0,this._evaluator=void 0,this._stableRafCount=void 0,this._replaceRafWithTimeout=void 0,this._browserName=void 0,this._evaluator=new c.SelectorEvaluatorImpl(new Map),this._engines=new Map,this._engines.set("xpath",t.XPathEngine),this._engines.set("xpath:light",t.XPathEngine),this._engines.set("_react",o.ReactEngine),this._engines.set("_vue",i.VueEngine),this._engines.set("text",this._createTextEngine(!0)),this._engines.set("text:light",this._createTextEngine(!1)),this._engines.set("id",this._createAttributeEngine("id",!0)),this._engines.set("id:light",this._createAttributeEngine("id",!1)),this._engines.set("data-testid",this._createAttributeEngine("data-testid",!0)),this._engines.set("data-testid:light",this._createAttributeEngine("data-testid",!1)),this._engines.set("data-test-id",this._createAttributeEngine("data-test-id",!0)),this._engines.set("data-test-id:light",this._createAttributeEngine("data-test-id",!1)),this._engines.set("data-test",this._createAttributeEngine("data-test",!0)),this._engines.set("data-test:light",this._createAttributeEngine("data-test",!1)),this._engines.set("css",this._createCSSEngine()),this._engines.set("nth",{queryAll:()=>[]}),this._engines.set("visible",{queryAll:()=>[]});for(const{name:e,engine:t}of s)this._engines.set(e,t);this._stableRafCount=e,this._replaceRafWithTimeout=n,this._browserName=r}eval(e){return n.g.eval(e)}parseSelector(e){const t=(0,s.parseSelector)(e);for(const n of t.parts)if(!this._engines.has(n.name))throw this.createStacklessError(`Unknown engine "${n.name}" while parsing selector ${e}`);return t}querySelector(e,t,n){if(!t.querySelector)throw this.createStacklessError("Node is not queryable.");this._evaluator.begin();try{var r,o;const i=this._querySelectorRecursively([{element:t,capture:void 0}],e,0,new Map);if(n&&i.length>1)throw this.strictModeViolationError(e,i.map((e=>e.element)));return(null===(r=i[0])||void 0===r?void 0:r.capture)||(null===(o=i[0])||void 0===o?void 0:o.element)}finally{this._evaluator.end()}}_querySelectorRecursively(e,t,n,r){if(n===t.parts.length)return e;const o=t.parts[n];if("nth"===o.name){let i=[];if("0"===o.body)i=e.slice(0,1);else if("-1"===o.body)e.length&&(i=e.slice(e.length-1));else{if("number"==typeof t.capture)throw this.createStacklessError("Can\'t query n-th element in a request with the capture.");const n=+o.body,r=new Set;for(const t of e)r.add(t.element),n+1===r.size&&(i=[t])}return this._querySelectorRecursively(i,t,n+1,r)}if("visible"===o.name){const i=Boolean(o.body),s=e.filter((e=>i===(0,c.isVisible)(e.element)));return this._querySelectorRecursively(s,t,n+1,r)}const i=[];for(const o of e){const e=n-1===t.capture?o.element:o.capture;let s=r.get(o.element);s||(s=[],r.set(o.element,s));let c=s[n];c||(c=this._queryEngineAll(t.parts[n],o.element),s[n]=c);for(const t of c){if(!("nodeName"in t))throw this.createStacklessError(`Expected a Node but got ${Object.prototype.toString.call(t)}`);i.push({element:t,capture:e})}}return this._querySelectorRecursively(i,t,n+1,r)}querySelectorAll(e,t){if(!t.querySelectorAll)throw this.createStacklessError("Node is not queryable.");this._evaluator.begin();try{const n=this._querySelectorRecursively([{element:t,capture:void 0}],e,0,new Map),r=new Set;for(const e of n)r.add(e.capture||e.element);return[...r]}finally{this._evaluator.end()}}_queryEngineAll(e,t){return this._engines.get(e.name).queryAll(t,e.body)}_createAttributeEngine(e,t){return{queryAll:(n,r)=>this._evaluator.query({scope:n,pierceShadow:t},(t=>[{simples:[{selector:{css:`[${e}=${JSON.stringify(t)}]`,functions:[]},combinator:""}]}])(r))}}_createCSSEngine(){const e=this._evaluator;return{queryAll:(t,n)=>e.query({scope:t,pierceShadow:!0},n)}}_createTextEngine(e){const t=(t,n)=>{const{matcher:r,kind:o}=function(e){if("/"===e[0]&&e.lastIndexOf("/")>0){const t=e.lastIndexOf("/");return{matcher:(0,c.createRegexTextMatcher)(e.substring(1,t),e.substring(t+1)),kind:"regex"}}let t=!1;return e.length>1&&\'"\'===e[0]&&\'"\'===e[e.length-1]&&(e=f(e.substring(1,e.length-1)),t=!0),e.length>1&&"\'"===e[0]&&"\'"===e[e.length-1]&&(e=f(e.substring(1,e.length-1)),t=!0),{matcher:t?(0,c.createStrictTextMatcher)(e):(0,c.createLaxTextMatcher)(e),kind:t?"strict":"lax"}}(n),i=[];let s=null;const a=e=>{if("lax"===o&&s&&s.contains(e))return!1;const t=(0,c.elementMatchesText)(this._evaluator,e,r);"none"===t&&(s=e),("self"===t||"selfAndChildren"===t&&"strict"===o)&&i.push(e)};t.nodeType===Node.ELEMENT_NODE&&a(t);const u=this._evaluator._queryCSS({scope:t,pierceShadow:e},"*");for(const e of u)a(e);return i};return{queryAll:(e,n)=>t(e,n)}}extend(e,t){return new(n.g.eval(`\\n    (() => {\\n      ${e}\\n      return pwExport;\\n    })()`))(this,t)}isVisible(e){return(0,c.isVisible)(e)}pollRaf(e){return this.poll(e,(e=>requestAnimationFrame(e)))}pollInterval(e,t){return this.poll(t,(t=>setTimeout(t,e)))}pollLogScale(e){const t=[100,250,500];let n=0;return this.poll(e,(e=>setTimeout(e,t[n++]||1e3)))}poll(e,t){return this._runAbortableTask((n=>{let r,o;const i=new Promise(((e,t)=>{r=e,o=t})),s=()=>{if(!n.aborted)try{const o=Symbol("continuePolling"),i=e(n,o);i!==o?r(i):t(s)}catch(e){n.log("  "+e.message),o(e)}};return s(),i}))}_runAbortableTask(e){let t,n=[],r=!1;const o=()=>{t&&(t(n),n=[],t=void 0)};let i,s="";const c={injectedScript:this,aborted:!1,log:e=>{s=e,n.push({message:e}),o()},logRepeating:e=>{e!==s&&c.log(e)},setIntermediateResult:e=>{i!==e&&(i=e,n.push({intermediateResult:e}),o())}};return{takeNextLogs:()=>new Promise((e=>{t=e,(n.length||r)&&o()})),run:()=>{const t=e(c);return t.finally((()=>{r=!0,o()})),t},cancel:()=>{c.aborted=!0},takeLastLogs:()=>n}}getElementBorderWidth(e){if(e.nodeType!==Node.ELEMENT_NODE||!e.ownerDocument||!e.ownerDocument.defaultView)return{left:0,top:0};const t=e.ownerDocument.defaultView.getComputedStyle(e);return{left:parseInt(t.borderLeftWidth||"",10),top:parseInt(t.borderTopWidth||"",10)}}retarget(e,t){let n=e.nodeType===Node.ELEMENT_NODE?e:e.parentElement;return n?(n.matches("input, textarea, select")||(n=n.closest("button, [role=button], [role=checkbox], [role=radio]")||n),"follow-label"===t&&(n.matches("input, textarea, button, select, [role=button], [role=checkbox], [role=radio]")||n.isContentEditable||(n=n.closest("label")||n),"LABEL"===n.nodeName&&(n=n.control||n)),n):null}waitForElementStatesAndPerformAction(e,t,n,r){let o,i=0,s=0,c=0;const a=(a,u)=>{if(n)return a.log("    forcing action"),r(e,a,u);for(const n of t){if("stable"!==n){const t=this.elementState(e,n);if("boolean"!=typeof t)return t;if(!t)return a.logRepeating(`    element is not ${n} - waiting...`),u;continue}const t=this.retarget(e,"no-follow-label");if(!t)return"error:notconnected";if(1==++i)return u;const r=performance.now();if(this._stableRafCount>1&&r-c<15)return u;c=r;const l=t.getBoundingClientRect(),h={x:l.top,y:l.left,width:l.width,height:l.height};o&&h.x===o.x&&h.y===o.y&&h.width===o.width&&h.height===o.height?++s:s=0;const p=s>=this._stableRafCount,f=p||!o;if(o=h,f||a.logRepeating("    element is not stable - waiting..."),!p)return u}return r(e,a,u)};return this._replaceRafWithTimeout?this.pollInterval(16,a):this.pollRaf(a)}elementState(e,t){const n=this.retarget(e,["stable","visible","hidden"].includes(t)?"no-follow-label":"follow-label");if(!n||!n.isConnected)return"hidden"===t||"error:notconnected";if("visible"===t)return this.isVisible(n);if("hidden"===t)return!this.isVisible(n);const r=["BUTTON","INPUT","SELECT","TEXTAREA"].includes(n.nodeName)&&n.hasAttribute("disabled");if("disabled"===t)return r;if("enabled"===t)return!r;const o=!(["INPUT","TEXTAREA","SELECT"].includes(n.nodeName)&&n.hasAttribute("readonly"));if("editable"===t)return!r&&o;if("checked"===t){if(["checkbox","radio"].includes(n.getAttribute("role")||""))return"true"===n.getAttribute("aria-checked");if("INPUT"!==n.nodeName)throw this.createStacklessError("Not a checkbox or radio button");if(!["radio","checkbox"].includes(n.type.toLowerCase()))throw this.createStacklessError("Not a checkbox or radio button");return n.checked}throw this.createStacklessError(`Unexpected element state "${t}"`)}selectOptions(e,t,n,r){const o=this.retarget(t,"follow-label");if(!o)return"error:notconnected";if("select"!==o.nodeName.toLowerCase())throw this.createStacklessError("Element is not a <select> element");const i=o,s=[...i.options],c=[];let a=e.slice();for(let e=0;e<s.length;e++){const t=s[e],n=n=>{if(n instanceof Node)return t===n;let r=!0;return void 0!==n.value&&(r=r&&n.value===t.value),void 0!==n.label&&(r=r&&n.label===t.label),void 0!==n.index&&(r=r&&n.index===e),r};if(a.some(n)){if(c.push(t),!i.multiple){a=[];break}a=a.filter((e=>!n(e)))}}return a.length?(n.logRepeating("    did not find some options - waiting... "),r):(i.value=void 0,c.forEach((e=>e.selected=!0)),n.log("    selected specified option(s)"),i.dispatchEvent(new Event("input",{bubbles:!0})),i.dispatchEvent(new Event("change",{bubbles:!0})),c.map((e=>e.value)))}fill(e,t,n){const r=this.retarget(t,"follow-label");if(!r)return"error:notconnected";if("input"===r.nodeName.toLowerCase()){const t=r,o=t.type.toLowerCase(),i=new Set(["date","time","datetime","datetime-local","month","week"]);if(!new Set(["","email","number","password","search","tel","text","url"]).has(o)&&!i.has(o))throw n.log(`    input of type "${o}" cannot be filled`),this.createStacklessError(`Input of type "${o}" cannot be filled`);if("number"===o&&(e=e.trim(),isNaN(Number(e))))throw this.createStacklessError("Cannot type text into input[type=number]");if(i.has(o)){if(e=e.trim(),t.focus(),t.value=e,t.value!==e)throw this.createStacklessError("Malformed value");return r.dispatchEvent(new Event("input",{bubbles:!0})),r.dispatchEvent(new Event("change",{bubbles:!0})),"done"}}else if("textarea"===r.nodeName.toLowerCase());else if(!r.isContentEditable)throw this.createStacklessError("Element is not an <input>, <textarea> or [contenteditable] element");return this.selectText(r),"needsinput"}selectText(e){const t=this.retarget(e,"follow-label");if(!t)return"error:notconnected";if("input"===t.nodeName.toLowerCase()){const e=t;return e.select(),e.focus(),"done"}if("textarea"===t.nodeName.toLowerCase()){const e=t;return e.selectionStart=0,e.selectionEnd=e.value.length,e.focus(),"done"}const n=t.ownerDocument.createRange();n.selectNodeContents(t);const r=t.ownerDocument.defaultView.getSelection();return r&&(r.removeAllRanges(),r.addRange(n)),t.focus(),"done"}focusNode(e,t){if(!e.isConnected)return"error:notconnected";if(e.nodeType!==Node.ELEMENT_NODE)throw this.createStacklessError("Node is not an element");const n=e.getRootNode().activeElement===e&&e.ownerDocument&&e.ownerDocument.hasFocus();if(e.focus(),t&&!n&&"input"===e.nodeName.toLowerCase())try{e.setSelectionRange(0,0)}catch(e){}return"done"}setInputFiles(e,t){if(e.nodeType!==Node.ELEMENT_NODE)return"Node is not of type HTMLElement";const n=e;if("INPUT"!==n.nodeName)return"Not an <input> element";const r=n;if("file"!==(r.getAttribute("type")||"").toLowerCase())return"Not an input[type=file] element";const o=t.map((e=>{const t=Uint8Array.from(atob(e.buffer),(e=>e.charCodeAt(0)));return new File([t],e.name,{type:e.mimeType})})),i=new DataTransfer;for(const e of o)i.items.add(e);r.files=i.files,r.dispatchEvent(new Event("input",{bubbles:!0})),r.dispatchEvent(new Event("change",{bubbles:!0}))}checkHitTargetAt(e,t){let n=e.nodeType===Node.ELEMENT_NODE?e:e.parentElement;if(!n||!n.isConnected)return"error:notconnected";n=n.closest("button, [role=button]")||n;let r=this.deepElementFromPoint(document,t.x,t.y);const o=[];for(;r&&r!==n;)o.push(r),r=(0,c.parentElementOrShadowHost)(r);if(r===n)return"done";const i=this.previewNode(o[0]);let s;for(;n;){const e=o.indexOf(n);if(-1!==e){e>1&&(s=this.previewNode(o[e-1]));break}n=(0,c.parentElementOrShadowHost)(n)}return s?{hitTargetDescription:`${i} from ${s} subtree`}:{hitTargetDescription:i}}dispatchEvent(e,t,n){let r;switch(n={bubbles:!0,cancelable:!0,composed:!0,...n},p.get(t)){case"mouse":r=new MouseEvent(t,n);break;case"keyboard":r=new KeyboardEvent(t,n);break;case"touch":r=new TouchEvent(t,n);break;case"pointer":r=new PointerEvent(t,n);break;case"focus":r=new FocusEvent(t,n);break;case"drag":r=new DragEvent(t,n);break;default:r=new Event(t,n)}e.dispatchEvent(r)}deepElementFromPoint(e,t,n){let r,o=e;for(;o;){const e=o.elementsFromPoint(t,n)[0];if(!e||r===e)break;r=e,o=r.shadowRoot}return r}previewNode(e){if(e.nodeType===Node.TEXT_NODE)return h(`#text=${e.nodeValue||""}`);if(e.nodeType!==Node.ELEMENT_NODE)return h(`<${e.nodeName.toLowerCase()} />`);const t=e,n=[];for(let e=0;e<t.attributes.length;e++){const{name:r,value:o}=t.attributes[e];"style"===r||r.startsWith("__playwright")||(!o&&l.has(r)?n.push(` ${r}`):n.push(` ${r}="${o}"`))}n.sort(((e,t)=>e.length-t.length));let r=n.join("");if(r.length>50&&(r=r.substring(0,49)+"\u2026"),u.has(t.nodeName))return h(`<${t.nodeName.toLowerCase()}${r}/>`);const o=t.childNodes;let i=!1;if(o.length<=5){i=!0;for(let e=0;e<o.length;e++)i=i&&o[e].nodeType===Node.TEXT_NODE}let s=i?t.textContent||"":o.length?"\u2026":"";return s.length>50&&(s=s.substring(0,49)+"\u2026"),h(`<${t.nodeName.toLowerCase()}${r}>${s}</${t.nodeName.toLowerCase()}>`)}strictModeViolationError(e,t){const n=t.slice(0,10).map((e=>({preview:this.previewNode(e),selector:(0,a.generateSelector)(this,e).selector}))),r=n.map(((e,t)=>`\\n    ${t+1}) ${e.preview} aka playwright.$("${e.selector}")`));return n.length<t.length&&r.push("\\n    ..."),this.createStacklessError(`strict mode violation: "${e.selector}" resolved to ${t.length} elements:${r.join("")}\\n`)}createStacklessError(e){if("firefox"===this._browserName){const t=new Error("Error: "+e);return t.stack="",t}const t=new Error(e);return delete t.stack,t}expect(e,t,n,r){const o=e.injectedScript,i=n.expression;{let n;if("to.be.checked"===i)n=e.injectedScript.elementState(t,"checked");else if("to.be.disabled"===i)n=e.injectedScript.elementState(t,"disabled");else if("to.be.editable"===i)n=e.injectedScript.elementState(t,"editable");else if("to.be.empty"===i){var s;n="INPUT"===t.nodeName||"TEXTAREA"===t.nodeName?!t.value:!(null!==(s=t.textContent)&&void 0!==s&&s.trim())}else"to.be.enabled"===i?n=e.injectedScript.elementState(t,"enabled"):"to.be.focused"===i?n=document.activeElement===t:"to.be.hidden"===i?n=e.injectedScript.elementState(t,"hidden"):"to.be.visible"===i&&(n=e.injectedScript.elementState(t,"visible"));if(void 0!==n){if("error:notcheckbox"===n)throw o.createStacklessError("Element is not a checkbox");if("error:notconnected"===n)throw o.createStacklessError("Element is not connected");return{received:n,matches:n}}}if("to.have.count"===i){const e=r.length;return{received:e,matches:e===n.expectedNumber}}if("to.have.property"===i){const e=t[n.expressionArg];return{received:e,matches:m(e,n.expectedValue)}}{let e;if("to.have.attribute"===i)e=t.getAttribute(n.expressionArg)||"";else if("to.have.class"===i)e=t.className;else if("to.have.css"===i)e=window.getComputedStyle(t)[n.expressionArg];else if("to.have.id"===i)e=t.id;else if("to.have.text"===i)e=n.useInnerText?t.innerText:t.textContent||"";else if("to.have.title"===i)e=document.title;else if("to.have.url"===i)e=document.location.href;else if("to.have.value"===i){if("INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName)throw this.createStacklessError("Not an input element");e=t.value}if(void 0!==e&&n.expectedText)return{received:e,matches:new d(n.expectedText[0]).matches(e)}}{let e;if("to.have.text.array"===i||"to.contain.text.array"===i?e=r.map((e=>n.useInnerText?e.innerText:e.textContent||"")):"to.have.class.array"===i&&(e=r.map((e=>e.className))),e&&n.expectedText){const t="to.contain.text.array"!==i;if(e.length!==n.expectedText.length&&t)return{received:e,matches:!1};let r=0;const o=n.expectedText.map((e=>new d(e)));let s=!0;for(const t of o){for(;r<e.length&&!t.matches(e[r]);)r++;if(r>=e.length){s=!1;break}}return{received:e,matches:s}}}throw this.createStacklessError("Unknown expect matcher: "+n.expression)}};e.default=g})(),pwExport=r.default})();';Ml.source=WL});var Xr=v(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});Oa.isSessionClosedError=UL;Oa.ProtocolError=void 0;var Lf=class extends Error{constructor(e,t){super(t);this.sessionClosed=void 0,this.sessionClosed=e||!1}};Oa.ProtocolError=Lf;function UL(r){return r instanceof Lf&&r.sessionClosed}});var kb=v(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});Fl.source=void 0;var $L='var pwExport;(()=>{"use strict";var t={645:(t,e,r)=>{function n(t,e,o){const i=e(t);if(!("fallThrough"in i))return i;if(t=i.fallThrough,o.has(t))throw new Error("Argument is a circular structure");if("symbol"==typeof t)return{v:"undefined"};if(Object.is(t,void 0))return{v:"undefined"};if(Object.is(t,null))return{v:"null"};if(Object.is(t,NaN))return{v:"NaN"};if(Object.is(t,1/0))return{v:"Infinity"};if(Object.is(t,-1/0))return{v:"-Infinity"};if(Object.is(t,-0))return{v:"-0"};if("boolean"==typeof t)return t;if("number"==typeof t)return t;if("string"==typeof t)return t;if((u=t)instanceof Error||u&&u.__proto__&&"Error"===u.__proto__.name){const e=t;return"captureStackTrace"in r.g.Error?e.stack||"":`${e.name}: ${e.message}\\n${e.stack}`}var u;if(function(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}(t))return{d:t.toJSON()};if(function(t){return t instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(t)}(t))return{r:{p:t.source,f:t.flags}};if(Array.isArray(t)){const r=[];o.add(t);for(let i=0;i<t.length;++i)r.push(n(t[i],e,o));return o.delete(t),{a:r}}if("object"==typeof t){const r=[];o.add(t);for(const i of Object.keys(t)){let u;try{u=t[i]}catch(t){continue}"toJSON"===i&&"function"==typeof u?r.push({k:i,v:{o:[]}}):r.push({k:i,v:n(u,e,o)})}return o.delete(t),{o:r}}}Object.defineProperty(e,"__esModule",{value:!0}),e.parseEvaluationResultValue=function t(e,r=[]){if(!Object.is(e,void 0)){if("object"==typeof e&&e){if("v"in e){if("undefined"===e.v)return;return"null"===e.v?null:"NaN"===e.v?NaN:"Infinity"===e.v?1/0:"-Infinity"===e.v?-1/0:"-0"===e.v?-0:void 0}if("d"in e)return new Date(e.d);if("r"in e)return new RegExp(e.r.p,e.r.f);if("a"in e)return e.a.map((e=>t(e,r)));if("o"in e){const n={};for(const{k:o,v:i}of e.o)n[o]=t(i,r);return n}if("h"in e)return r[e.h]}return e}},e.serializeAsCallArgument=function(t,e){return n(t,e,new Set)}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();var n={};(()=>{var t=n;t.default=void 0;var e=r(645);t.default=class{evaluate(t,n,o,i,...u){const a=u.slice(0,i),f=u.slice(i),s=a.map((t=>(0,e.parseEvaluationResultValue)(t,f)));let c=r.g.eval(o);return!0===t?c=c(...s):!1===t?c=c:"function"==typeof c&&(c=c(...s)),n?this._promiseAwareJsonValueNoThrow(c):c}jsonValue(t,r){if(!Object.is(r,void 0))return(0,e.serializeAsCallArgument)(r,(t=>({fallThrough:t})))}_promiseAwareJsonValueNoThrow(t){const e=t=>{try{return this.jsonValue(!0,t)}catch(t){return}};return t&&"object"==typeof t&&"function"==typeof t.then?(async()=>{const r=await t;return e(r)})():e(t)}}})(),pwExport=n.default})();';Fl.source=$L});var Pa=v(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.parseEvaluationResultValue=qf;Rl.serializeAsCallArgument=KL;function zL(r){return r instanceof RegExp||Object.prototype.toString.call(r)==="[object RegExp]"}function VL(r){return r instanceof Date||Object.prototype.toString.call(r)==="[object Date]"}function GL(r){return r instanceof Error||r&&r.__proto__&&r.__proto__.name==="Error"}function qf(r,e=[]){if(!Object.is(r,void 0)){if(typeof r=="object"&&r){if("v"in r)return r.v==="undefined"?void 0:r.v==="null"?null:r.v==="NaN"?NaN:r.v==="Infinity"?1/0:r.v==="-Infinity"?-1/0:r.v==="-0"?-0:void 0;if("d"in r)return new Date(r.d);if("r"in r)return new RegExp(r.r.p,r.r.f);if("a"in r)return r.a.map(t=>qf(t,e));if("o"in r){let t={};for(let{k:i,v:n}of r.o)t[i]=qf(n,e);return t}if("h"in r)return e[r.h]}return r}}function KL(r,e){return Bf(r,e,new Set)}function Bf(r,e,t){let i=e(r);if("fallThrough"in i)r=i.fallThrough;else return i;if(t.has(r))throw new Error("Argument is a circular structure");if(typeof r=="symbol")return{v:"undefined"};if(Object.is(r,void 0))return{v:"undefined"};if(Object.is(r,null))return{v:"null"};if(Object.is(r,NaN))return{v:"NaN"};if(Object.is(r,1/0))return{v:"Infinity"};if(Object.is(r,-1/0))return{v:"-Infinity"};if(Object.is(r,-0))return{v:"-0"};if(typeof r=="boolean"||typeof r=="number"||typeof r=="string")return r;if(GL(r)){let n=r;return"captureStackTrace"in global.Error?n.stack||"":`${n.name}: ${n.message}
${n.stack}`}if(VL(r))return{d:r.toJSON()};if(zL(r))return{r:{p:r.source,f:r.flags}};if(Array.isArray(r)){let n=[];t.add(r);for(let s=0;s<r.length;++s)n.push(Bf(r[s],e,t));return t.delete(r),{a:n}}if(typeof r=="object"){let n=[];t.add(r);for(let s of Object.keys(r)){let o;try{o=r[s]}catch(l){continue}s==="toJSON"&&typeof o=="function"?n.push({k:s,v:{o:[]}}):n.push({k:s,v:Bf(o,e,t)})}return t.delete(r),{o:n}}}});var xi=v(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.evaluate=Hf;Wt.evaluateExpression=jf;Wt.evaluateExpressionAndWaitForSignals=Ab;Wt.parseUnserializableValue=ZL;Wt.normalizeEvaluationExpression=Ib;Wt.isJavaScriptErrorInEvaluate=QL;Wt.JavaScriptErrorInEvaluate=Wt.JSHandle=Wt.ExecutionContext=void 0;var JL=YL(kb()),XL=Pa(),Ob=nt();function Pb(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(Pb=function(i){return i?t:e})(r)}function YL(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=Pb(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var Tb=class extends Ob.SdkObject{constructor(e,t){super(e,"execution-context");this._delegate=void 0,this._utilityScriptPromise=void 0,this._delegate=t}waitForSignalsCreatedBy(e){return c(this,null,function*(){return e()})}adoptIfNeeded(e){return null}utilityScript(){if(!this._utilityScriptPromise){let e=`
      (() => {
        ${JL.source}
        return new pwExport();
      })();`;this._utilityScriptPromise=this._delegate.rawEvaluateHandle(e).then(t=>new Nl(this,"object",void 0,t))}return this._utilityScriptPromise}createHandle(e){return this._delegate.createHandle(this,e)}rawEvaluateJSON(e){return c(this,null,function*(){return yield this._delegate.rawEvaluateJSON(e)})}doSlowMo(){return c(this,null,function*(){})}};Wt.ExecutionContext=Tb;var Nl=class extends Ob.SdkObject{constructor(e,t,i,n,s){super(e,"handle");this._context=void 0,this._disposed=!1,this._objectId=void 0,this._value=void 0,this._objectType=void 0,this._preview=void 0,this._previewCallback=void 0,this._context=e,this._objectId=n,this._value=s,this._objectType=t,this._preview=this._objectId?i||`JSHandle@${this._objectType}`:String(s)}callFunctionNoReply(e,t){this._context._delegate.rawCallFunctionNoReply(e,this,t)}evaluate(e,t){return c(this,null,function*(){return Hf(this._context,!0,e,this,t)})}evaluateHandle(e,t){return c(this,null,function*(){return Hf(this._context,!1,e,this,t)})}evaluateExpressionAndWaitForSignals(e,t,i,n){return c(this,null,function*(){let s=yield Ab(this._context,i,e,t,this,n);return yield this._context.doSlowMo(),s})}getProperty(e){return c(this,null,function*(){let t=yield this.evaluateHandle((s,o)=>{let l={__proto__:null};return l[o]=s[o],l},e),n=(yield t.getProperties()).get(e);return t.dispose(),n})}getProperties(){return c(this,null,function*(){return this._objectId?this._context._delegate.getProperties(this._context,this._objectId):new Map})}rawValue(){return this._value}jsonValue(){return c(this,null,function*(){if(!this._objectId)return this._value;let e=yield this._context.utilityScript(),t="(utilityScript, ...args) => utilityScript.jsonValue(...args)";return this._context._delegate.evaluateWithArguments(t,!0,e,[!0],[this._objectId])})}asElement(){return null}dispose(){this._disposed||(this._disposed=!0,this._objectId&&this._context._delegate.releaseHandle(this._objectId).catch(e=>{}))}toString(){return this._preview}_setPreviewCallback(e){this._previewCallback=e}preview(){return this._preview}_setPreview(e){this._preview=e,this._previewCallback&&this._previewCallback(e)}};Wt.JSHandle=Nl;function Hf(r,e,t,...i){return c(this,null,function*(){return jf(r,e,String(t),typeof t=="function",...i)})}function jf(r,e,t,i,...n){return c(this,null,function*(){let s=yield r.utilityScript();t=Ib(t,i);let o=[],l=[],u=f=>(o.push(f),o.length-1);n=n.map(f=>(0,XL.serializeAsCallArgument)(f,m=>{if(m instanceof Nl){if(!m._objectId)return{fallThrough:m._value};if(m._disposed)throw new Error("JSHandle is disposed!");let _=r.adoptIfNeeded(m);return _===null?{h:u(Promise.resolve(m))}:(l.push(_),{h:u(_)})}return{fallThrough:m}}));let d=[];for(let f of yield Promise.all(o)){if(f._context!==r)throw new Error("JSHandles can be evaluated only in the context they were created!");d.push(f._objectId)}let h=[i,e,t,n.length,...n],p="(utilityScript, ...args) => utilityScript.evaluate(...args)";try{return yield r._delegate.evaluateWithArguments(p,e,s,h,d)}finally{l.map(f=>f.then(m=>m.dispose()))}})}function Ab(r,e,t,i,...n){return c(this,null,function*(){return yield r.waitForSignalsCreatedBy(()=>jf(r,e,t,i,...n))})}function ZL(r){if(r==="NaN")return NaN;if(r==="Infinity")return 1/0;if(r==="-Infinity")return-1/0;if(r==="-0")return-0}function Ib(r,e){if(r=r.trim(),e)try{new Function("("+r+")")}catch(t){r.startsWith("async ")?r="async function "+r.substring("async ".length):r="function "+r;try{new Function("("+r+")")}catch(i){throw new Error("Passed function is not well-serializable!")}}return/^(async)?\s*function(\s|\()/.test(r)&&(r="("+r+")"),r}var Wf=class extends Error{};Wt.JavaScriptErrorInEvaluate=Wf;function QL(r){return r instanceof Wf}});var Ar=v(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.ProgressController=void 0;var eq=qt(),Uf=G(),tq=Vt(),Mb=class{constructor(e,t){this._forceAbortPromise=new tq.ManualPromise,this._cleanups=[],this._logName="api",this._state="before",this._deadline=0,this._timeout=0,this._lastIntermediateResult=void 0,this.metadata=void 0,this.instrumentation=void 0,this.sdkObject=void 0,this.metadata=e,this.sdkObject=t,this.instrumentation=t.instrumentation,this._forceAbortPromise.catch(i=>null)}setLogName(e){this._logName=e}lastIntermediateResult(){return this._lastIntermediateResult}run(e,t){return c(this,null,function*(){t&&(this._timeout=t,this._deadline=t?(0,Uf.monotonicTime)()+t:0),(0,Uf.assert)(this._state==="before"),this._state="running";let i={log:o=>{i.logEntry({message:o})},logEntry:o=>{if("message"in o){let l=o.message;this._state==="running"&&this.metadata.log.push(l),this.instrumentation.onCallLog(this._logName,l,this.sdkObject,this.metadata)}"intermediateResult"in o&&(this._lastIntermediateResult=o.intermediateResult)},timeUntilDeadline:()=>this._deadline?this._deadline-(0,Uf.monotonicTime)():2147483647,isRunning:()=>this._state==="running",cleanupWhenAborted:o=>{this._state==="running"?this._cleanups.push(o):Fb(o)},throwIfAborted:()=>{if(this._state==="aborted")throw new Rb},beforeInputAction:o=>c(this,null,function*(){yield this.instrumentation.onBeforeInputAction(this.sdkObject,this.metadata,o)}),metadata:this.metadata},n=new eq.TimeoutError(`Timeout ${this._timeout}ms exceeded.`),s=setTimeout(()=>this._forceAbortPromise.reject(n),i.timeUntilDeadline());try{let o=e(i),l=yield Promise.race([o,this._forceAbortPromise]);return this._state="finished",l}catch(o){throw this._state="aborted",yield Promise.all(this._cleanups.splice(0).map(Fb)),o}finally{clearTimeout(s)}})}};Dl.ProgressController=Mb;function Fb(r){return c(this,null,function*(){try{yield r()}catch(e){}})}var Rb=class extends Error{}});var Is=v(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.throwRetargetableDOMError=Ie;Xt.assertDone=vt;Xt.waitForSelectorTask=Lb;Xt.kUnableToAdoptErrorMessage=Xt.InjectedScriptPollHandler=Xt.ElementHandle=Xt.FrameExecutionContext=void 0;var rq=zf(bi()),iq=zf(Cb()),$f=Xr(),Ir=zf(xi()),wt=Ar();function Nb(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(Nb=function(i){return i?t:e})(r)}function zf(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=Nb(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var Db=class extends Ir.ExecutionContext{constructor(e,t,i){super(t,e);this.frame=void 0,this._injectedScriptPromise=void 0,this.world=void 0,this.frame=t,this.world=i}waitForSignalsCreatedBy(e){return c(this,null,function*(){return this.frame._page._frameManager.waitForSignalsCreatedBy(null,!1,e)})}adoptIfNeeded(e){return e instanceof Ll&&e._context!==this?this.frame._page._delegate.adoptElementHandle(e,this):null}evaluate(e,t){return c(this,null,function*(){return Ir.evaluate(this,!0,e,t)})}evaluateHandle(e,t){return c(this,null,function*(){return Ir.evaluate(this,!1,e,t)})}evaluateExpression(e,t,i){return c(this,null,function*(){return Ir.evaluateExpression(this,!0,e,t,i)})}evaluateAndWaitForSignals(e,t){return c(this,null,function*(){return yield this.frame._page._frameManager.waitForSignalsCreatedBy(null,!1,()=>c(this,null,function*(){return this.evaluate(e,t)}))})}evaluateExpressionAndWaitForSignals(e,t,i){return c(this,null,function*(){return yield this.frame._page._frameManager.waitForSignalsCreatedBy(null,!1,()=>c(this,null,function*(){return this.evaluateExpression(e,t,i)}))})}evaluateExpressionHandleAndWaitForSignals(e,t,i){return c(this,null,function*(){return yield this.frame._page._frameManager.waitForSignalsCreatedBy(null,!1,()=>c(this,null,function*(){return Ir.evaluateExpression(this,!1,e,t,i)}))})}createHandle(e){return this.frame._page._delegate.isElementHandle(e)?new Ll(this,e.objectId):super.createHandle(e)}injectedScript(){if(!this._injectedScriptPromise){let e=[];for(let[i,{source:n}]of this.frame._page.selectors._engines)e.push(`{ name: '${i}', engine: (${n}) }`);let t=`
        (() => {
        ${iq.source}
        return new pwExport(
          ${this.frame._page._delegate.rafCountForStablePosition()},
          ${!!process.env.PWTEST_USE_TIMEOUT_FOR_RAF},
          "${this.frame._page._browserContext._browser.options.name}",
          [${e.join(`,
`)}]
        );
        })();
      `;this._injectedScriptPromise=this._delegate.rawEvaluateHandle(t).then(i=>new Ir.JSHandle(this,"object",void 0,i))}return this._injectedScriptPromise}doSlowMo(){return c(this,null,function*(){return this.frame._page._doSlowMo()})}};Xt.FrameExecutionContext=Db;var Ll=class extends Ir.JSHandle{constructor(e,t){super(e,"node",void 0,t);this._page=void 0,this._page=e.frame._page,this._initializePreview().catch(i=>{})}_initializePreview(){return c(this,null,function*(){let e=yield this._context.injectedScript();this._setPreview(yield e.evaluate((t,i)=>"JSHandle@"+t.previewNode(i),this))})}asElement(){return this}_evaluateInMainAndWaitForSignals(e,t){return c(this,null,function*(){let i=yield this._context.frame._mainContext();return i.evaluateAndWaitForSignals(e,[yield i.injectedScript(),this,t])})}evaluateInUtility(e,t){return c(this,null,function*(){try{let i=yield this._context.frame._utilityContext();return yield i.evaluate(e,[yield i.injectedScript(),this,t])}catch(i){if(Ir.isJavaScriptErrorInEvaluate(i)||(0,$f.isSessionClosedError)(i))throw i;return"error:notconnected"}})}evaluateHandleInUtility(e,t){return c(this,null,function*(){try{let i=yield this._context.frame._utilityContext();return yield i.evaluateHandle(e,[yield i.injectedScript(),this,t])}catch(i){if(Ir.isJavaScriptErrorInEvaluate(i)||(0,$f.isSessionClosedError)(i))throw i;return"error:notconnected"}})}ownerFrame(){return c(this,null,function*(){let e=yield this._page._delegate.getOwnerFrame(this);if(!e)return null;let t=this._page._frameManager.frame(e);if(t)return t;for(let i of this._page._browserContext.pages()){let n=i._frameManager.frame(e);if(n)return n}return null})}contentFrame(){return c(this,null,function*(){return Ie(yield this.evaluateInUtility(([t,i])=>i&&(i.nodeName==="IFRAME"||i.nodeName==="FRAME"),{}))?this._page._delegate.getContentFrame(this):null})}getAttribute(e){return c(this,null,function*(){return Ie(yield this.evaluateInUtility(([t,i,n])=>{if(i.nodeType!==Node.ELEMENT_NODE)throw t.createStacklessError("Node is not an element");return{value:i.getAttribute(n)}},e)).value})}inputValue(){return c(this,null,function*(){return Ie(yield this.evaluateInUtility(([e,t])=>{if(t.nodeType!==Node.ELEMENT_NODE||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"&&t.nodeName!=="SELECT")throw e.createStacklessError("Node is not an <input>, <textarea> or <select> element");return{value:t.value}},void 0)).value})}textContent(){return c(this,null,function*(){return Ie(yield this.evaluateInUtility(([e,t])=>({value:t.textContent}),void 0)).value})}innerText(){return c(this,null,function*(){return Ie(yield this.evaluateInUtility(([e,t])=>{if(t.nodeType!==Node.ELEMENT_NODE)throw e.createStacklessError("Node is not an element");if(t.namespaceURI!=="http://www.w3.org/1999/xhtml")throw e.createStacklessError("Node is not an HTMLElement");return{value:t.innerText}},void 0)).value})}innerHTML(){return c(this,null,function*(){return Ie(yield this.evaluateInUtility(([e,t])=>{if(t.nodeType!==Node.ELEMENT_NODE)throw e.createStacklessError("Node is not an element");return{value:t.innerHTML}},void 0)).value})}dispatchEvent(i){return c(this,arguments,function*(e,t={}){yield this._evaluateInMainAndWaitForSignals(([n,s,{type:o,eventInit:l}])=>n.dispatchEvent(s,o,l),{type:e,eventInit:t}),yield this._page._doSlowMo()})}_scrollRectIntoViewIfNeeded(e){return c(this,null,function*(){return yield this._page._delegate.scrollRectIntoViewIfNeeded(this,e)})}_waitAndScrollIntoViewIfNeeded(e){return c(this,null,function*(){for(;e.isRunning();){vt(Ie(yield this._waitForDisplayedAtStablePosition(e,!1,!1))),e.throwIfAborted();let t=Ie(yield this._scrollRectIntoViewIfNeeded());if(t!=="error:notvisible"){vt(t);return}}})}scrollIntoViewIfNeeded(i){return c(this,arguments,function*(e,t={}){return new wt.ProgressController(e,this).run(s=>this._waitAndScrollIntoViewIfNeeded(s),this._page._timeoutSettings.timeout(t))})}_clickablePoint(){return c(this,null,function*(){let e=l=>l.map(u=>({x:Math.min(Math.max(u.x,0),n.width),y:Math.min(Math.max(u.y,0),n.height)})),t=l=>{let u=0;for(let d=0;d<l.length;++d){let h=l[d],p=l[(d+1)%l.length];u+=(h.x*p.y-p.x*h.y)/2}return Math.abs(u)},[i,n]=yield Promise.all([this._page._delegate.getContentQuads(this),this._page.mainFrame()._utilityContext().then(l=>l.evaluate(()=>({width:innerWidth,height:innerHeight})))]);if(!i||!i.length)return"error:notvisible";let s=i.map(l=>e(l)).filter(l=>t(l)>.99);if(!s.length)return"error:notinviewport";let o={x:0,y:0};for(let l of s[0])o.x+=l.x/4,o.y+=l.y/4;return sq(o),o})}_offsetPoint(e){return c(this,null,function*(){let[t,i]=yield Promise.all([this.boundingBox(),this.evaluateInUtility(([n,s])=>n.getElementBorderWidth(s),{}).catch(n=>{})]);return!t||!i?"error:notvisible":i==="error:notconnected"?i:{x:t.x+i.left+e.x,y:t.y+i.top+e.y}})}_retryPointerAction(e,t,i,n,s){return c(this,null,function*(){let o=0,l=[0,20,100,100,500],u=[void 0,{block:"end",inline:"end"},{block:"center",inline:"center"},{block:"start",inline:"start"}];for(;e.isRunning();){if(o){e.log(`retrying ${t} action${s.trial?" (trial run)":""}, attempt #${o}`);let p=l[Math.min(o-1,l.length-1)];if(p){e.log(`  waiting ${p}ms`);let f=yield this.evaluateInUtility(([m,_,g])=>new Promise(w=>setTimeout(w,g)),p);if(f==="error:notconnected")return f}}else e.log(`attempting ${t} action${s.trial?" (trial run)":""}`);let d=u[o%u.length],h=yield this._performPointerAction(e,t,i,n,d,s);if(++o,h==="error:notvisible"){if(s.force)throw new Error("Element is not visible");e.log("  element is not visible");continue}if(h==="error:notinviewport"){if(s.force)throw new Error("Element is outside of the viewport");e.log("  element is outside of the viewport");continue}if(typeof h=="object"&&"hitTargetDescription"in h){if(s.force)throw new Error(`Element does not receive pointer events, ${h.hitTargetDescription} intercepts them`);e.log(`  ${h.hitTargetDescription} intercepts pointer events`);continue}return h}return"done"})}_performPointerAction(e,t,i,n,s,o){return c(this,null,function*(){let{force:l=!1,position:u}=o;o.__testHookBeforeStable&&(yield o.__testHookBeforeStable());let d=yield this._waitForDisplayedAtStablePosition(e,l,i);if(d!=="done")return d;if(o.__testHookAfterStable&&(yield o.__testHookAfterStable()),e.log("  scrolling into view if needed"),e.throwIfAborted(),s){let f=yield this.evaluateInUtility(([m,_,g])=>{_.nodeType===1&&_.scrollIntoView(g)},s);if(f==="error:notconnected")return f}else{let f=yield this._scrollRectIntoViewIfNeeded(u?{x:u.x,y:u.y,width:0,height:0}:void 0);if(f!=="done")return f}e.log("  done scrolling");let h=u?yield this._offsetPoint(u):yield this._clickablePoint();if(typeof h=="string")return h;let p=nq(h);if(!l){o.__testHookBeforeHitTarget&&(yield o.__testHookBeforeHitTarget()),e.log(`  checking that element receives pointer events at (${p.x},${p.y})`);let f=yield this._checkHitTargetAt(p);if(f!=="done")return f;e.log("  element does receive pointer events")}return e.metadata.point=p,o.trial?(e.log(`  trial ${t} has finished`),"done"):(yield e.beforeInputAction(this),yield this._page._frameManager.waitForSignalsCreatedBy(e,o.noWaitAfter,()=>c(this,null,function*(){o.__testHookBeforePointerAction&&(yield o.__testHookBeforePointerAction()),e.throwIfAborted();let f;o&&o.modifiers&&(f=yield this._page.keyboard._ensureModifiers(o.modifiers)),e.log(`  performing ${t} action`),yield n(p),e.log(`  ${t} action done`),e.log("  waiting for scheduled navigations to finish"),o.__testHookAfterPointerAction&&(yield o.__testHookAfterPointerAction()),f&&(yield this._page.keyboard._ensureModifiers(f))}),"input"),e.log("  navigations have finished"),"done")})}hover(e,t){return c(this,null,function*(){return new wt.ProgressController(e,this).run(n=>c(this,null,function*(){let s=yield this._hover(n,t);return vt(Ie(s))}),this._page._timeoutSettings.timeout(t))})}_hover(e,t){return this._retryPointerAction(e,"hover",!1,i=>this._page.mouse.move(i.x,i.y),t)}click(i){return c(this,arguments,function*(e,t={}){return new wt.ProgressController(e,this).run(s=>c(this,null,function*(){let o=yield this._click(s,t);return vt(Ie(o))}),this._page._timeoutSettings.timeout(t))})}_click(e,t){return this._retryPointerAction(e,"click",!0,i=>this._page.mouse.click(i.x,i.y,t),t)}dblclick(e,t){return c(this,null,function*(){return new wt.ProgressController(e,this).run(n=>c(this,null,function*(){let s=yield this._dblclick(n,t);return vt(Ie(s))}),this._page._timeoutSettings.timeout(t))})}_dblclick(e,t){return this._retryPointerAction(e,"dblclick",!0,i=>this._page.mouse.dblclick(i.x,i.y,t),t)}tap(i){return c(this,arguments,function*(e,t={}){return new wt.ProgressController(e,this).run(s=>c(this,null,function*(){let o=yield this._tap(s,t);return vt(Ie(o))}),this._page._timeoutSettings.timeout(t))})}_tap(e,t){return this._retryPointerAction(e,"tap",!0,i=>this._page.touchscreen.tap(i.x,i.y),t)}selectOption(e,t,i,n){return c(this,null,function*(){return new wt.ProgressController(e,this).run(o=>c(this,null,function*(){let l=yield this._selectOption(o,t,i,n);return Ie(l)}),this._page._timeoutSettings.timeout(n))})}_selectOption(e,t,i,n){return c(this,null,function*(){let s=[...t,...i];return yield e.beforeInputAction(this),this._page._frameManager.waitForSignalsCreatedBy(e,n.noWaitAfter,()=>c(this,null,function*(){e.throwIfAborted(),e.log("  selecting specified option(s)");let o=yield this.evaluateHandleInUtility(([d,h,{optionsToSelect:p,force:f}])=>d.waitForElementStatesAndPerformAction(h,["visible","enabled"],f,d.selectOptions.bind(d,p)),{optionsToSelect:s,force:n.force});if(o==="error:notconnected")return o;let u=yield new Si(e,o).finishMaybeNotConnected();return yield this._page._doSlowMo(),u}))})}fill(n,s){return c(this,arguments,function*(e,t,i={}){return new wt.ProgressController(e,this).run(l=>c(this,null,function*(){let u=yield this._fill(l,t,i);vt(Ie(u))}),this._page._timeoutSettings.timeout(i))})}_fill(e,t,i){return c(this,null,function*(){return e.log(`elementHandle.fill("${t}")`),yield e.beforeInputAction(this),this._page._frameManager.waitForSignalsCreatedBy(e,i.noWaitAfter,()=>c(this,null,function*(){e.log("  waiting for element to be visible, enabled and editable");let n=yield this.evaluateHandleInUtility(([l,u,{value:d,force:h}])=>l.waitForElementStatesAndPerformAction(u,["visible","enabled","editable"],h,l.fill.bind(l,d)),{value:t,force:i.force});if(n==="error:notconnected")return n;let o=yield new Si(e,n).finishMaybeNotConnected();return e.throwIfAborted(),o==="error:notconnected"?o:(e.log("  element is visible, enabled and editable"),o==="needsinput"?(e.throwIfAborted(),t?yield this._page.keyboard.insertText(t):yield this._page.keyboard.press("Delete")):vt(o),"done")}),"input")})}selectText(i){return c(this,arguments,function*(e,t={}){return new wt.ProgressController(e,this).run(s=>c(this,null,function*(){s.throwIfAborted();let o=yield this.evaluateHandleInUtility(([d,h,p])=>d.waitForElementStatesAndPerformAction(h,["visible"],p,d.selectText.bind(d)),t.force),u=yield new Si(s,Ie(o)).finishMaybeNotConnected();vt(Ie(u))}),this._page._timeoutSettings.timeout(t))})}setInputFiles(e,t,i){return c(this,null,function*(){return new wt.ProgressController(e,this).run(s=>c(this,null,function*(){let o=yield this._setInputFiles(s,t,i);return vt(Ie(o))}),this._page._timeoutSettings.timeout(i))})}_setInputFiles(e,t,i){return c(this,null,function*(){for(let s of t)s.mimeType||(s.mimeType=rq.getType(s.name)||"application/octet-stream");let n=yield this.evaluateHandleInUtility(([s,o,l])=>{let u=s.retarget(o,"follow-label");if(!u)return"error:notconnected";if(u.tagName!=="INPUT")throw s.createStacklessError("Node is not an HTMLInputElement");if(l&&!u.multiple)throw s.createStacklessError("Non-multiple file input can only accept single file");return u},t.length>1);return n==="error:notconnected"?n:n._objectId?(yield e.beforeInputAction(this),yield this._page._frameManager.waitForSignalsCreatedBy(e,i.noWaitAfter,()=>c(this,null,function*(){e.throwIfAborted(),yield this._page._delegate.setInputFiles(n,t)})),yield this._page._doSlowMo(),"done"):n.rawValue()})}focus(e){return c(this,null,function*(){yield new wt.ProgressController(e,this).run(i=>c(this,null,function*(){let n=yield this._focus(i);return yield this._page._doSlowMo(),vt(Ie(n))}),0)})}_focus(e,t){return c(this,null,function*(){return e.throwIfAborted(),yield this.evaluateInUtility(([i,n,s])=>i.focusNode(n,s),t)})}type(e,t,i){return c(this,null,function*(){return new wt.ProgressController(e,this).run(s=>c(this,null,function*(){let o=yield this._type(s,t,i);return vt(Ie(o))}),this._page._timeoutSettings.timeout(i))})}_type(e,t,i){return c(this,null,function*(){return e.log(`elementHandle.type("${t}")`),yield e.beforeInputAction(this),this._page._frameManager.waitForSignalsCreatedBy(e,i.noWaitAfter,()=>c(this,null,function*(){let n=yield this._focus(e,!0);return n!=="done"?n:(e.throwIfAborted(),yield this._page.keyboard.type(t,i),"done")}),"input")})}press(e,t,i){return c(this,null,function*(){return new wt.ProgressController(e,this).run(s=>c(this,null,function*(){let o=yield this._press(s,t,i);return vt(Ie(o))}),this._page._timeoutSettings.timeout(i))})}_press(e,t,i){return c(this,null,function*(){return e.log(`elementHandle.press("${t}")`),yield e.beforeInputAction(this),this._page._frameManager.waitForSignalsCreatedBy(e,i.noWaitAfter,()=>c(this,null,function*(){let n=yield this._focus(e,!0);return n!=="done"?n:(e.throwIfAborted(),yield this._page.keyboard.press(t,i),"done")}),"input")})}check(e,t){return c(this,null,function*(){return new wt.ProgressController(e,this).run(n=>c(this,null,function*(){let s=yield this._setChecked(n,!0,t);return vt(Ie(s))}),this._page._timeoutSettings.timeout(t))})}uncheck(e,t){return c(this,null,function*(){return new wt.ProgressController(e,this).run(n=>c(this,null,function*(){let s=yield this._setChecked(n,!1,t);return vt(Ie(s))}),this._page._timeoutSettings.timeout(t))})}_setChecked(e,t,i){return c(this,null,function*(){let n=()=>c(this,null,function*(){let o=yield this.evaluateInUtility(([l,u])=>l.elementState(u,"checked"),{});return Ie(o)});if((yield n())===t)return"done";let s=yield this._click(e,i);if(s!=="done")return s;if(i.trial)return"done";if((yield n())!==t)throw new Error("Clicking the checkbox did not change its state");return"done"})}boundingBox(){return c(this,null,function*(){return this._page._delegate.getBoundingBox(this)})}screenshot(i){return c(this,arguments,function*(e,t={}){return new wt.ProgressController(e,this).run(s=>this._page._screenshotter.screenshotElement(s,this,t),this._page._timeoutSettings.timeout(t))})}querySelector(e,t){return c(this,null,function*(){return this._page.selectors.query(this._context.frame,e,t,this)})}querySelectorAll(e){return c(this,null,function*(){return this._page.selectors._queryAll(this._context.frame,e,this,!0)})}evalOnSelectorAndWaitForSignals(e,t,i,n,s){return c(this,null,function*(){let o=yield this._page.selectors.query(this._context.frame,e,{strict:t},this);if(!o)throw new Error(`Error: failed to find element matching selector "${e}"`);let l=yield o.evaluateExpressionAndWaitForSignals(i,n,!0,s);return o.dispose(),l})}evalOnSelectorAllAndWaitForSignals(e,t,i,n){return c(this,null,function*(){let s=yield this._page.selectors._queryArray(this._context.frame,e,this),o=yield s.evaluateExpressionAndWaitForSignals(t,i,!0,n);return s.dispose(),o})}isVisible(){return c(this,null,function*(){let e=yield this.evaluateInUtility(([t,i])=>t.elementState(i,"visible"),{});return e==="error:notconnected"?!1:e})}isHidden(){return c(this,null,function*(){let e=yield this.evaluateInUtility(([t,i])=>t.elementState(i,"hidden"),{});return Ie(e)})}isEnabled(){return c(this,null,function*(){let e=yield this.evaluateInUtility(([t,i])=>t.elementState(i,"enabled"),{});return Ie(e)})}isDisabled(){return c(this,null,function*(){let e=yield this.evaluateInUtility(([t,i])=>t.elementState(i,"disabled"),{});return Ie(e)})}isEditable(){return c(this,null,function*(){let e=yield this.evaluateInUtility(([t,i])=>t.elementState(i,"editable"),{});return Ie(e)})}isChecked(){return c(this,null,function*(){let e=yield this.evaluateInUtility(([t,i])=>t.elementState(i,"checked"),{});return Ie(e)})}waitForElementState(n,s){return c(this,arguments,function*(e,t,i={}){return new wt.ProgressController(e,this).run(l=>c(this,null,function*(){l.log(`  waiting for element to be ${t}`);let u=yield this.evaluateHandleInUtility(([h,p,f])=>h.waitForElementStatesAndPerformAction(p,[f],!1,()=>"done"),t),d=new Si(l,Ie(u));vt(Ie(yield d.finishMaybeNotConnected()))}),this._page._timeoutSettings.timeout(i))})}waitForSelector(n,s){return c(this,arguments,function*(e,t,i={}){let{state:o="visible"}=i;if(!["attached","detached","visible","hidden"].includes(o))throw new Error("state: expected one of (attached|detached|visible|hidden)");let l=this._page.parseSelector(t,i),u=Lb(l,o,!1,this);return new wt.ProgressController(e,this).run(h=>c(this,null,function*(){h.log(`waiting for selector "${t}"${o==="attached"?"":" to be "+o}`);let f=yield(yield this._context.frame._context(l.world)).injectedScript(),_=yield new Si(h,yield u(f)).finishHandle();return _.asElement()?_.asElement()._adoptTo(yield this._context.frame._mainContext()):(_.dispose(),null)}),this._page._timeoutSettings.timeout(i))})}_adoptTo(e){return c(this,null,function*(){if(this._context!==e){let t=yield this._page._delegate.adoptElementHandle(this,e);return this.dispose(),t}return this})}_waitForDisplayedAtStablePosition(e,t,i){return c(this,null,function*(){i?e.log("  waiting for element to be visible, enabled and stable"):e.log("  waiting for element to be visible and stable");let n=yield this.evaluateHandleInUtility(([l,u,{waitForEnabled:d,force:h}])=>l.waitForElementStatesAndPerformAction(u,d?["visible","stable","enabled"]:["visible","stable"],h,()=>"done"),{waitForEnabled:i,force:t});if(n==="error:notconnected")return n;let o=yield new Si(e,n).finishMaybeNotConnected();return i?e.log("  element is visible, enabled and stable"):e.log("  element is visible and stable"),o})}_checkHitTargetAt(e){return c(this,null,function*(){let t=yield this.ownerFrame();if(t&&t.parentFrame()){let n=yield(yield t.frameElement()).boundingBox();if(!n)return"error:notconnected";e={x:e.x-n.x,y:e.y-n.y}}return this.evaluateInUtility(([i,n,s])=>i.checkHitTargetAt(n,s),e)})}};Xt.ElementHandle=Ll;var Si=class{constructor(e,t){this._progress=void 0,this._poll=void 0,this._progress=e,this._poll=t,this._progress.cleanupWhenAborted(()=>this.cancel()),this._streamLogs()}_streamLogs(){return c(this,null,function*(){for(;this._poll&&this._progress.isRunning();){let e=yield this._poll.evaluate(t=>t.takeNextLogs()).catch(t=>[]);if(!this._poll||!this._progress.isRunning())return;for(let t of e)this._progress.logEntry(t)}})}finishHandle(){return c(this,null,function*(){try{let e=yield this._poll.evaluateHandle(t=>t.run());return yield this._finishInternal(),e}finally{yield this.cancel()}})}finish(){return c(this,null,function*(){try{let e=yield this._poll.evaluate(t=>t.run());return yield this._finishInternal(),e}finally{yield this.cancel()}})}finishMaybeNotConnected(){return c(this,null,function*(){try{let e=yield this._poll.evaluate(t=>t.run());return yield this._finishInternal(),e}catch(e){if(Ir.isJavaScriptErrorInEvaluate(e)||(0,$f.isSessionClosedError)(e))throw e;return"error:notconnected"}finally{yield this.cancel()}})}_finishInternal(){return c(this,null,function*(){if(!this._poll)return;let e=yield this._poll.evaluate(t=>t.takeLastLogs()).catch(t=>[]);for(let t of e)this._progress.logEntry(t)})}cancel(){return c(this,null,function*(){if(!this._poll)return;let e=this._poll;this._poll=null,yield e.evaluate(t=>t.cancel()).catch(t=>{}),e.dispose()})}};Xt.InjectedScriptPollHandler=Si;function Ie(r){if(r==="error:notconnected")throw new Error("Element is not attached to the DOM");return r}function vt(r){}function nq(r){return{x:(r.x*100|0)/100,y:(r.y*100|0)/100}}function sq(r){let e=r.x-Math.floor(r.x);e>.49&&e<.51&&(r.x-=.02);let t=r.y-Math.floor(r.y);t>.49&&t<.51&&(r.y-=.02)}function Lb(r,e,t,i){return n=>n.evaluateHandle((s,{parsed:o,strict:l,state:u,omitReturnValue:d,root:h})=>{let p;return s.pollRaf((f,m)=>{let _=s.querySelectorAll(o,h||document),g=_[0],w=g?s.isVisible(g):!1;if(p!==g)if(p=g,!g)f.log("  selector did not resolve to any element");else{if(_.length>1){if(l)throw s.strictModeViolationError(o,_);f.log(`  selector resolved to ${_.length} elements. Proceeding with the first one.`)}f.log(`  selector resolved to ${w?"visible":"hidden"} ${s.previewNode(g)}`)}let b=!!g;switch(d&&(g=void 0),u){case"attached":return b?g:m;case"detached":return b?m:void 0;case"visible":return w?g:m;case"hidden":return w?m:void 0}})},{parsed:r.parsed,strict:r.strict,state:e,omitReturnValue:t,root:i})}var oq="Unable to adopt element handle from a different document";Xt.kUnableToAdoptErrorMessage=oq});var Vf=v(qb=>{"use strict";Object.defineProperty(qb,"__esModule",{value:!0})});var Bb=v(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});Object.defineProperty(dt,"Size",{enumerable:!0,get:function(){return Ms.Size}});Object.defineProperty(dt,"Point",{enumerable:!0,get:function(){return Ms.Point}});Object.defineProperty(dt,"Rect",{enumerable:!0,get:function(){return Ms.Rect}});Object.defineProperty(dt,"Quad",{enumerable:!0,get:function(){return Ms.Quad}});Object.defineProperty(dt,"URLMatch",{enumerable:!0,get:function(){return Ms.URLMatch}});Object.defineProperty(dt,"TimeoutOptions",{enumerable:!0,get:function(){return Ms.TimeoutOptions}});dt.forcedColors=dt.reducedMotions=dt.colorSchemes=dt.mediaTypes=dt.kLifecycleEvents=void 0;var Ms=Vf(),aq=new Set(["load","domcontentloaded","networkidle"]);dt.kLifecycleEvents=aq;var cq=new Set(["screen","print"]);dt.mediaTypes=cq;var lq=new Set(["dark","light","no-preference"]);dt.colorSchemes=lq;var uq=new Set(["no-preference","reduce"]);dt.reducedMotions=uq;var dq=new Set(["active","none"]);dt.forcedColors=dq});var Aa=v(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.Frame=Ns.FrameManager=void 0;var kt=Hl(Is()),Ei=Mt(),Hb=_t(),Ta=Hl(xi()),hq=Hl(jt()),Fs=Ot(),pq=Hl(Bb()),ql=gt(),Ye=Ar(),Rs=G(),Gf=Vt(),Bl=Xe(),jb=nt(),Wb=Xr();function Ub(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(Ub=function(i){return i?t:e})(r)}function Hl(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=Ub(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var $b=class{constructor(e){this._page=void 0,this._frames=new Map,this._mainFrame=void 0,this._consoleMessageTags=new Map,this._signalBarriers=new Set,this._webSockets=new Map,this._dialogCounter=0,this._page=e,this._mainFrame=void 0}dispose(){for(let e of this._frames.values())e._stopNetworkIdleTimer()}mainFrame(){return this._mainFrame}frames(){let e=[];return t(this._mainFrame),e;function t(i){e.push(i);for(let n of i.childFrames())t(n)}}frame(e){return this._frames.get(e)||null}frameAttached(e,t){let i=t?this._frames.get(t):null;if(i){(0,Rs.assert)(!this._frames.has(e));let n=new ht(this._page,e,i);return this._frames.set(e,n),this._page.emit(Fs.Page.Events.FrameAttached,n),n}else return this._mainFrame?(this._frames.delete(this._mainFrame._id),this._mainFrame._id=e):((0,Rs.assert)(!this._frames.has(e)),this._mainFrame=new ht(this._page,e,i)),this._frames.set(e,this._mainFrame),this._mainFrame}waitForSignalsCreatedBy(e,t,i,n){return c(this,null,function*(){if(t)return i();let s=new zb(e);this._signalBarriers.add(s),e&&e.cleanupWhenAborted(()=>this._signalBarriers.delete(s));let o=yield i();return n==="input"&&(yield this._page._delegate.inputActionEpilogue()),yield s.waitFor(),this._signalBarriers.delete(s),yield new Promise((0,Rs.makeWaitForNextTask)()),o})}frameWillPotentiallyRequestNavigation(){for(let e of this._signalBarriers)e.retain()}frameDidPotentiallyRequestNavigation(){for(let e of this._signalBarriers)e.release()}frameRequestedNavigation(e,t){let i=this._frames.get(e);if(!!i){for(let n of this._signalBarriers)n.addFrameNavigation(i);i.pendingDocument()&&i.pendingDocument().documentId===t||i.setPendingDocument({documentId:t,request:void 0})}}frameCommittedNewDocumentNavigation(e,t,i,n,s){let o=this._frames.get(e);this.removeChildFramesRecursively(o),this.clearWebSockets(o),o._url=t,o._name=i;let l,u=o.pendingDocument();u?(u.documentId===void 0&&(u.documentId=n),u.documentId===n?o._currentDocument=u:(l=u,o._currentDocument={documentId:n,request:void 0}),o.setPendingDocument(void 0)):o._currentDocument={documentId:n,request:void 0},o._onClearLifecycle();let d={url:t,name:i,newDocument:o._currentDocument};o.emit(ht.Events.Navigation,d),s||(Bl.debugLogger.log("api",`  navigated to "${t}"`),this._page.frameNavigatedToNewDocument(o)),o.setPendingDocument(l)}frameCommittedSameDocumentNavigation(e,t){let i=this._frames.get(e);if(!i)return;i._url=t;let n={url:t,name:i._name};i.emit(ht.Events.Navigation,n),Bl.debugLogger.log("api",`  navigated to "${t}"`)}frameAbortedNavigation(e,t,i){let n=this._frames.get(e);if(!n||!n.pendingDocument()||i!==void 0&&n.pendingDocument().documentId!==i)return;let s={url:n._url,name:n._name,newDocument:n.pendingDocument(),error:new Error(t)};n.setPendingDocument(void 0),n.emit(ht.Events.Navigation,s)}frameDetached(e){let t=this._frames.get(e);t&&this._removeFramesRecursively(t)}frameStoppedLoading(e){this.frameLifecycleEvent(e,"domcontentloaded"),this.frameLifecycleEvent(e,"load")}frameLifecycleEvent(e,t){let i=this._frames.get(e);i&&i._onLifecycleEvent(t)}requestStarted(e,t){let i=e.frame();if(this._inflightRequestStarted(e),e._documentId&&i.setPendingDocument({documentId:e._documentId,request:e}),e._isFavicon){t&&t.continue(e,{});return}this._page._browserContext.emit(ql.BrowserContext.Events.Request,e),t&&this._page._requestStarted(e,t)}requestReceivedResponse(e){e.request()._isFavicon||this._page._browserContext.emit(ql.BrowserContext.Events.Response,e)}reportRequestFinished(e,t){this._inflightRequestFinished(e),!e._isFavicon&&this._page._browserContext.emit(ql.BrowserContext.Events.RequestFinished,{request:e,response:t})}requestFailed(e,t){let i=e.frame();if(this._inflightRequestFinished(e),i.pendingDocument()&&i.pendingDocument().request===e){let n=e.failure().errorText;t&&(n+="; maybe frame was detached?"),this.frameAbortedNavigation(i._id,n,i.pendingDocument().documentId)}e._isFavicon||this._page._browserContext.emit(ql.BrowserContext.Events.RequestFailed,e)}dialogDidOpen(){for(let e of this._frames.values())e._invalidateNonStallingEvaluations("JavaScript dialog interrupted evaluation");this._dialogCounter++}dialogWillClose(){this._dialogCounter--}removeChildFramesRecursively(e){for(let t of e.childFrames())this._removeFramesRecursively(t)}_removeFramesRecursively(e){this.removeChildFramesRecursively(e),e._onDetached(),this._frames.delete(e._id),this._page.isClosed()||this._page.emit(Fs.Page.Events.FrameDetached,e)}_inflightRequestFinished(e){let t=e.frame();e._isFavicon||!t._inflightRequests.has(e)||(t._inflightRequests.delete(e),t._inflightRequests.size===0&&t._startNetworkIdleTimer())}_inflightRequestStarted(e){let t=e.frame();e._isFavicon||(t._inflightRequests.add(e),t._inflightRequests.size===1&&t._stopNetworkIdleTimer())}interceptConsoleMessage(e){if(e.type()!=="debug")return!1;let t=e.text(),i=this._consoleMessageTags.get(t);return i?(this._consoleMessageTags.delete(t),i(),!0):!1}clearWebSockets(e){e.parentFrame()||this._webSockets.clear()}onWebSocketCreated(e,t){let i=new hq.WebSocket(this._page,t);this._webSockets.set(e,i)}onWebSocketRequest(e){let t=this._webSockets.get(e);t&&this._page.emit(Fs.Page.Events.WebSocket,t)}onWebSocketResponse(e,t,i){let n=this._webSockets.get(e);t<400||n&&n.error(`${i}: ${t}`)}onWebSocketFrameSent(e,t,i){let n=this._webSockets.get(e);n&&n.frameSent(t,i)}webSocketFrameReceived(e,t,i){let n=this._webSockets.get(e);n&&n.frameReceived(t,i)}webSocketClosed(e){let t=this._webSockets.get(e);t&&t.closed(),this._webSockets.delete(e)}webSocketError(e,t){let i=this._webSockets.get(e);i&&i.error(t)}};Ns.FrameManager=$b;var ht=class extends jb.SdkObject{constructor(e,t,i){super(e,"frame");this._id=void 0,this._firedLifecycleEvents=new Set,this._subtreeLifecycleEvents=new Set,this._currentDocument=void 0,this._pendingDocument=void 0,this._page=void 0,this._parentFrame=void 0,this._url="",this._detached=!1,this._contextData=new Map,this._childFrames=new Set,this._name="",this._inflightRequests=new Set,this._networkIdleTimer=void 0,this._setContentCounter=0,this._detachedPromise=void 0,this._detachedCallback=()=>{},this._nonStallingEvaluations=new Set,this.attribution.frame=this,this._id=t,this._page=e,this._parentFrame=i,this._currentDocument={documentId:void 0,request:void 0},this._detachedPromise=new Promise(n=>this._detachedCallback=n),this._contextData.set("main",{contextPromise:new Promise(()=>{}),contextResolveCallback:()=>{},context:null,rerunnableTasks:new Set}),this._contextData.set("utility",{contextPromise:new Promise(()=>{}),contextResolveCallback:()=>{},context:null,rerunnableTasks:new Set}),this._setContext("main",null),this._setContext("utility",null),this._parentFrame&&this._parentFrame._childFrames.add(this)}_onLifecycleEvent(e){this._firedLifecycleEvents.has(e)||(this._firedLifecycleEvents.add(e),this._page.mainFrame()._recalculateLifecycle())}_onClearLifecycle(){this._firedLifecycleEvents.clear(),this._page.mainFrame()._recalculateLifecycle(),this._inflightRequests=new Set(Array.from(this._inflightRequests).filter(e=>e===this._currentDocument.request)),this._stopNetworkIdleTimer(),this._inflightRequests.size===0&&this._startNetworkIdleTimer()}setPendingDocument(e){this._pendingDocument=e,e&&this._invalidateNonStallingEvaluations("Navigation interrupted the evaluation")}pendingDocument(){return this._pendingDocument}_invalidateNonStallingEvaluations(e){if(!this._nonStallingEvaluations)return;let t=new Error(e);for(let i of this._nonStallingEvaluations)i(t)}nonStallingRawEvaluateInExistingMainContext(e){return c(this,null,function*(){if(this._pendingDocument)throw new Error("Frame is currently attempting a navigation");if(this._page._frameManager._dialogCounter)throw new Error("Open JavaScript dialog prevents evaluation");let t=this._existingMainContext();if(!t)throw new Error("Frame does not yet have a main execution context");let i=()=>{},n=new Promise((s,o)=>i=o);this._nonStallingEvaluations.add(i);try{return yield Promise.race([t.rawEvaluateJSON(e),n])}finally{this._nonStallingEvaluations.delete(i)}})}nonStallingEvaluateInExistingContext(e,t,i){return c(this,null,function*(){var n;if(this._pendingDocument)throw new Error("Frame is currently attempting a navigation");let s=(n=this._contextData.get(i))===null||n===void 0?void 0:n.context;if(!s)throw new Error("Frame does not yet have the execution context");let o=()=>{},l=new Promise((u,d)=>o=d);this._nonStallingEvaluations.add(o);try{return yield Promise.race([s.evaluateExpression(e,t),l])}finally{this._nonStallingEvaluations.delete(o)}})}_recalculateLifecycle(){let e=new Set(this._firedLifecycleEvents);for(let i of this._childFrames){i._recalculateLifecycle();for(let n of e)i._subtreeLifecycleEvents.has(n)||e.delete(n)}let t=this._page.mainFrame();for(let i of e)this._subtreeLifecycleEvents.has(i)||(this.emit(ht.Events.AddLifecycle,i),this===t&&this._url!=="about:blank"&&Bl.debugLogger.log("api",`  "${i}" event fired`),this===t&&i==="load"&&this._page.emit(Fs.Page.Events.Load),this===t&&i==="domcontentloaded"&&this._page.emit(Fs.Page.Events.DOMContentLoaded));for(let i of this._subtreeLifecycleEvents)e.has(i)||this.emit(ht.Events.RemoveLifecycle,i);this._subtreeLifecycleEvents=e}raceNavigationAction(e){return c(this,null,function*(){return Promise.race([this._page._disconnectedPromise.then(()=>{throw new Error("Navigation failed because page was closed!")}),this._page._crashedPromise.then(()=>{throw new Error("Navigation failed because page crashed!")}),this._detachedPromise.then(()=>{throw new Error("Navigating frame was detached!")}),e()])})}goto(n,s){return c(this,arguments,function*(e,t,i={}){let o=(0,Rs.constructURLBasedOnBaseURL)(this._page._browserContext._options.baseURL,t);return new Ye.ProgressController(e,this).run(u=>this._goto(u,o,i),this._page._timeoutSettings.navigationTimeout(i))})}_goto(e,t,i){return c(this,null,function*(){return this.raceNavigationAction(()=>c(this,null,function*(){let n=Jf("waitUntil",i.waitUntil===void 0?"load":i.waitUntil);e.log(`navigating to "${t}", waiting until "${n}"`);let o=(this._page._state.extraHTTPHeaders||[]).find(m=>m.name.toLowerCase()==="referer"),l=o?o.value:void 0;if(i.referer!==void 0){if(l!==void 0&&l!==i.referer)throw new Error('"referer" is already specified as extra HTTP header');l=i.referer}t=Ei.helper.completeUserURL(t);let u=Ei.helper.waitForEvent(e,this,ht.Events.Navigation,m=>!m.newDocument),d=yield this._page._delegate.navigateFrame(this,t,l),h;if(d.newDocumentId){if(u.dispose(),h=yield Ei.helper.waitForEvent(e,this,ht.Events.Navigation,m=>m.newDocument&&(m.newDocument.documentId===d.newDocumentId||!m.error)).promise,h.newDocument.documentId!==d.newDocumentId)throw new Error("Navigation interrupted by another one");if(h.error)throw h.error}else h=yield u.promise;this._subtreeLifecycleEvents.has(n)||(yield Ei.helper.waitForEvent(e,this,ht.Events.AddLifecycle,m=>m===n).promise);let p=h.newDocument?h.newDocument.request:void 0,f=p?p._finalRequest().response():null;return yield this._page._doSlowMo(),f}))})}_waitForNavigation(e,t){return c(this,null,function*(){let i=Jf("waitUntil",t.waitUntil===void 0?"load":t.waitUntil);e.log(`waiting for navigation until "${i}"`);let n=yield Ei.helper.waitForEvent(e,this,ht.Events.Navigation,o=>(o.error||e.log(`  navigated to "${this._url}"`),!0)).promise;if(n.error)throw n.error;this._subtreeLifecycleEvents.has(i)||(yield Ei.helper.waitForEvent(e,this,ht.Events.AddLifecycle,o=>o===i).promise);let s=n.newDocument?n.newDocument.request:void 0;return s?s._finalRequest().response():null})}_waitForLoadState(e,t){return c(this,null,function*(){let i=Jf("state",t);this._subtreeLifecycleEvents.has(i)||(yield Ei.helper.waitForEvent(e,this,ht.Events.AddLifecycle,n=>n===i).promise)})}frameElement(){return c(this,null,function*(){return this._page._delegate.getFrameElement(this)})}_context(e){if(this._detached)throw new Error(`Execution Context is not available in detached frame "${this.url()}" (are you trying to evaluate?)`);return this._contextData.get(e).contextPromise}_mainContext(){return this._context("main")}_existingMainContext(){var e;return((e=this._contextData.get("main"))===null||e===void 0?void 0:e.context)||null}_utilityContext(){return this._context("utility")}evaluateExpressionHandleAndWaitForSignals(e,t,i,n="main"){return c(this,null,function*(){let o=yield(yield this._context(n)).evaluateExpressionHandleAndWaitForSignals(e,t,i);return n==="main"&&(yield this._page._doSlowMo()),o})}evaluateExpression(e,t,i,n="main"){return c(this,null,function*(){let o=yield(yield this._context(n)).evaluateExpression(e,t,i);return n==="main"&&(yield this._page._doSlowMo()),o})}evaluateExpressionAndWaitForSignals(e,t,i,n="main"){return c(this,null,function*(){let o=yield(yield this._context(n)).evaluateExpressionAndWaitForSignals(e,t,i);return n==="main"&&(yield this._page._doSlowMo()),o})}querySelector(e,t){return c(this,null,function*(){return Bl.debugLogger.log("api",`    finding element using the selector "${e}"`),this._page.selectors.query(this,e,t)})}waitForSelector(n,s){return c(this,arguments,function*(e,t,i={}){let o=new Ye.ProgressController(e,this);if(i.visibility)throw new Error("options.visibility is not supported, did you mean options.state?");if(i.waitFor&&i.waitFor!=="visible")throw new Error("options.waitFor is not supported, did you mean options.state?");let{state:l="visible"}=i;if(!["attached","detached","visible","hidden"].includes(l))throw new Error("state: expected one of (attached|detached|visible|hidden)");let u=this._page.parseSelector(t,i),d=kt.waitForSelectorTask(u,l,i.omitReturnValue);return o.run(h=>c(this,null,function*(){for(h.log(`waiting for selector "${t}"${l==="attached"?"":" to be "+l}`);h.isRunning();){let p=yield this._scheduleRerunnableHandleTask(h,u.world,d);if(!p.asElement())return p.dispose(),null;i.__testHookBeforeAdoptNode&&(yield i.__testHookBeforeAdoptNode());try{return yield p.asElement()._adoptTo(yield this._mainContext())}catch(f){if(Ta.isJavaScriptErrorInEvaluate(f))throw f;p.dispose()}}return null}),this._page._timeoutSettings.timeout(i))})}dispatchEvent(o,l,u){return c(this,arguments,function*(e,t,i,n={},s={}){yield this._scheduleRerunnableTask(e,t,(d,h,p)=>{d.injectedScript.dispatchEvent(h,p.type,p.eventInit)},{type:i,eventInit:n},y({mainWorld:!0},s)),yield this._page._doSlowMo()})}evalOnSelectorAndWaitForSignals(e,t,i,n,s){return c(this,null,function*(){let o=yield this.querySelector(e,{strict:t});if(!o)throw new Error(`Error: failed to find element matching selector "${e}"`);let l=yield o.evaluateExpressionAndWaitForSignals(i,n,!0,s);return o.dispose(),l})}evalOnSelectorAllAndWaitForSignals(e,t,i,n){return c(this,null,function*(){let s=yield this._page.selectors._queryArray(this,e),o=yield s.evaluateExpressionAndWaitForSignals(t,i,!0,n);return s.dispose(),o})}querySelectorAll(e){return c(this,null,function*(){return this._page.selectors._queryAll(this,e,void 0,!0)})}content(){return c(this,null,function*(){try{return yield(yield this._utilityContext()).evaluate(()=>{let t="";return document.doctype&&(t=new XMLSerializer().serializeToString(document.doctype)),document.documentElement&&(t+=document.documentElement.outerHTML),t})}catch(e){throw Ta.isJavaScriptErrorInEvaluate(e)||(0,Wb.isSessionClosedError)(e)?e:new Error("Unable to retrieve content because the page is navigating and changing the content.")}})}setContent(n,s){return c(this,arguments,function*(e,t,i={}){return new Ye.ProgressController(e,this).run(l=>this.raceNavigationAction(()=>c(this,null,function*(){let u=i.waitUntil===void 0?"load":i.waitUntil;l.log(`setting frame content, waiting until "${u}"`);let d=`--playwright--set--content--${this._id}--${++this._setContentCounter}--`,h=yield this._utilityContext(),p=new Promise((m,_)=>{this._page._frameManager._consoleMessageTags.set(d,()=>{this._onClearLifecycle(),this._waitForLoadState(l,u).then(m).catch(_)})}),f=h.evaluate(({html:m,tag:_})=>{window.stop(),document.open(),console.debug(_),document.write(m),document.close()},{html:t,tag:d});yield Promise.all([f,p]),yield this._page._doSlowMo()})),this._page._timeoutSettings.navigationTimeout(i))})}name(){return this._name||""}url(){return this._url}parentFrame(){return this._parentFrame}childFrames(){return Array.from(this._childFrames)}addScriptTag(e){return c(this,null,function*(){let{url:t=null,content:i=null,type:n=""}=e;if(!t&&!i)throw new Error("Provide an object with a `url`, `path` or `content` property");let s=yield this._mainContext();return this._raceWithCSPError(()=>c(this,null,function*(){if(t!==null)return(yield s.evaluateHandle(o,{url:t,type:n})).asElement();let u=(yield s.evaluateHandle(l,{content:i,type:n})).asElement();return this._page._delegate.cspErrorsAsynchronousForInlineScipts&&(yield s.evaluate(()=>!0)),u}));function o(u){return c(this,null,function*(){let d=document.createElement("script");d.src=u.url,u.type&&(d.type=u.type);let h=new Promise((p,f)=>{d.onload=p,d.onerror=m=>f(typeof m=="string"?new Error(m):new Error(`Failed to load script at ${d.src}`))});return document.head.appendChild(d),yield h,d})}function l(u){let d=document.createElement("script");d.type=u.type||"text/javascript",d.text=u.content;let h=null;if(d.onerror=p=>h=p,document.head.appendChild(d),h)throw h;return d}})}addStyleTag(e){return c(this,null,function*(){let{url:t=null,content:i=null}=e;if(!t&&!i)throw new Error("Provide an object with a `url`, `path` or `content` property");let n=yield this._mainContext();return this._raceWithCSPError(()=>c(this,null,function*(){return t!==null?(yield n.evaluateHandle(s,t)).asElement():(yield n.evaluateHandle(o,i)).asElement()}));function s(l){return c(this,null,function*(){let u=document.createElement("link");u.rel="stylesheet",u.href=l;let d=new Promise((h,p)=>{u.onload=h,u.onerror=p});return document.head.appendChild(u),yield d,u})}function o(l){return c(this,null,function*(){let u=document.createElement("style");u.type="text/css",u.appendChild(document.createTextNode(l));let d=new Promise((h,p)=>{u.onload=h,u.onerror=p});return document.head.appendChild(u),yield d,u})}})}_raceWithCSPError(e){return c(this,null,function*(){let t=[],i,n,s,o=e().then(u=>i=u).catch(u=>n=u),l=new Promise(u=>{t.push(Hb.eventsHelper.addEventListener(this._page,Fs.Page.Events.Console,d=>{d.type()==="error"&&d.text().includes("Content Security Policy")&&(s=d,u())}))});if(yield Promise.race([o,l]),Hb.eventsHelper.removeEventListeners(t),s)throw new Error(s.text());if(n)throw n;return i})}_retryWithProgressIfNotConnected(e,t,i,n){return c(this,null,function*(){let s=this._page.parseSelector(t,{strict:i});for(;e.isRunning();){e.log(`waiting for selector "${t}"`);let o=kt.waitForSelectorTask(s,"attached"),u=(yield this._scheduleRerunnableHandleTask(e,s.world,o)).asElement();e.cleanupWhenAborted(()=>{u.dispose()});let d=yield n(u);if(u.dispose(),d==="error:notconnected"){e.log("element was detached from the DOM, retrying");continue}return d}})}_retryWithSelectorIfNotConnected(e,t,i,n){return c(this,null,function*(){return e.run(s=>c(this,null,function*(){return this._retryWithProgressIfNotConnected(s,t,i.strict,o=>n(s,o))}),this._page._timeoutSettings.timeout(i))})}click(e,t,i){return c(this,null,function*(){return new Ye.ProgressController(e,this).run(s=>c(this,null,function*(){return kt.assertDone(yield this._retryWithProgressIfNotConnected(s,t,i.strict,o=>o._click(s,i)))}),this._page._timeoutSettings.timeout(i))})}dblclick(n,s){return c(this,arguments,function*(e,t,i={}){return new Ye.ProgressController(e,this).run(l=>c(this,null,function*(){return kt.assertDone(yield this._retryWithProgressIfNotConnected(l,t,i.strict,u=>u._dblclick(l,i)))}),this._page._timeoutSettings.timeout(i))})}dragAndDrop(s,o,l){return c(this,arguments,function*(e,t,i,n={}){yield new Ye.ProgressController(e,this).run(d=>c(this,null,function*(){yield kt.assertDone(yield this._retryWithProgressIfNotConnected(d,t,n.strict,h=>c(this,null,function*(){return h._retryPointerAction(d,"move and down",!1,p=>c(this,null,function*(){yield this._page.mouse.move(p.x,p.y),yield this._page.mouse.down()}),R(y({},n),{position:n.sourcePosition,timeout:d.timeUntilDeadline()}))}))),yield kt.assertDone(yield this._retryWithProgressIfNotConnected(d,i,n.strict,h=>c(this,null,function*(){return h._retryPointerAction(d,"move and up",!1,p=>c(this,null,function*(){yield this._page.mouse.move(p.x,p.y),yield this._page.mouse.up()}),R(y({},n),{position:n.targetPosition,timeout:d.timeUntilDeadline()}))})))}),this._page._timeoutSettings.timeout(n))})}tap(e,t,i){return c(this,null,function*(){return new Ye.ProgressController(e,this).run(s=>c(this,null,function*(){return kt.assertDone(yield this._retryWithProgressIfNotConnected(s,t,i.strict,o=>o._tap(s,i)))}),this._page._timeoutSettings.timeout(i))})}fill(e,t,i,n){return c(this,null,function*(){return new Ye.ProgressController(e,this).run(o=>c(this,null,function*(){return kt.assertDone(yield this._retryWithProgressIfNotConnected(o,t,n.strict,l=>l._fill(o,i,n)))}),this._page._timeoutSettings.timeout(n))})}focus(n,s){return c(this,arguments,function*(e,t,i={}){let o=new Ye.ProgressController(e,this);yield this._retryWithSelectorIfNotConnected(o,t,i,(l,u)=>u._focus(l)),yield this._page._doSlowMo()})}textContent(n,s){return c(this,arguments,function*(e,t,i={}){return this._scheduleRerunnableTask(e,t,(o,l)=>l.textContent,void 0,i)})}innerText(n,s){return c(this,arguments,function*(e,t,i={}){return this._scheduleRerunnableTask(e,t,(o,l)=>{if(l.namespaceURI!=="http://www.w3.org/1999/xhtml")throw o.injectedScript.createStacklessError("Node is not an HTMLElement");return l.innerText},void 0,i)})}innerHTML(n,s){return c(this,arguments,function*(e,t,i={}){return this._scheduleRerunnableTask(e,t,(o,l)=>l.innerHTML,void 0,i)})}getAttribute(s,o,l){return c(this,arguments,function*(e,t,i,n={}){return this._scheduleRerunnableTask(e,t,(u,d,h)=>d.getAttribute(h.name),{name:i},n)})}inputValue(n,s){return c(this,arguments,function*(e,t,i={}){return this._scheduleRerunnableTask(e,t,(o,l)=>{if(l.nodeName!=="INPUT"&&l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT")throw o.injectedScript.createStacklessError("Node is not an <input>, <textarea> or <select> element");return l.value},void 0,i)})}_elementState(s,o,l){return c(this,arguments,function*(e,t,i,n={}){let u=yield this._scheduleRerunnableTask(e,t,(d,h,p)=>d.injectedScript.elementState(h,p.state),{state:i},n);return kt.throwRetargetableDOMError(u)})}isVisible(n,s){return c(this,arguments,function*(e,t,i={}){return new Ye.ProgressController(e,this).run(l=>c(this,null,function*(){l.log(`  checking visibility of "${t}"`);let u=yield this.querySelector(t,i);return u?yield u.isVisible():!1}),this._page._timeoutSettings.timeout({}))})}isHidden(n,s){return c(this,arguments,function*(e,t,i={}){return!(yield this.isVisible(e,t,i))})}isDisabled(n,s){return c(this,arguments,function*(e,t,i={}){return this._elementState(e,t,"disabled",i)})}isEnabled(n,s){return c(this,arguments,function*(e,t,i={}){return this._elementState(e,t,"enabled",i)})}isEditable(n,s){return c(this,arguments,function*(e,t,i={}){return this._elementState(e,t,"editable",i)})}isChecked(n,s){return c(this,arguments,function*(e,t,i={}){return this._elementState(e,t,"checked",i)})}hover(n,s){return c(this,arguments,function*(e,t,i={}){return new Ye.ProgressController(e,this).run(l=>c(this,null,function*(){return kt.assertDone(yield this._retryWithProgressIfNotConnected(l,t,i.strict,u=>u._hover(l,i)))}),this._page._timeoutSettings.timeout(i))})}selectOption(o,l,u,d){return c(this,arguments,function*(e,t,i,n,s={}){return new Ye.ProgressController(e,this).run(p=>c(this,null,function*(){return yield this._retryWithProgressIfNotConnected(p,t,s.strict,f=>f._selectOption(p,i,n,s))}),this._page._timeoutSettings.timeout(s))})}setInputFiles(s,o,l){return c(this,arguments,function*(e,t,i,n={}){return new Ye.ProgressController(e,this).run(d=>c(this,null,function*(){return kt.assertDone(yield this._retryWithProgressIfNotConnected(d,t,n.strict,h=>h._setInputFiles(d,i,n)))}),this._page._timeoutSettings.timeout(n))})}type(s,o,l){return c(this,arguments,function*(e,t,i,n={}){return new Ye.ProgressController(e,this).run(d=>c(this,null,function*(){return kt.assertDone(yield this._retryWithProgressIfNotConnected(d,t,n.strict,h=>h._type(d,i,n)))}),this._page._timeoutSettings.timeout(n))})}press(s,o,l){return c(this,arguments,function*(e,t,i,n={}){return new Ye.ProgressController(e,this).run(d=>c(this,null,function*(){return kt.assertDone(yield this._retryWithProgressIfNotConnected(d,t,n.strict,h=>h._press(d,i,n)))}),this._page._timeoutSettings.timeout(n))})}check(n,s){return c(this,arguments,function*(e,t,i={}){return new Ye.ProgressController(e,this).run(l=>c(this,null,function*(){return kt.assertDone(yield this._retryWithProgressIfNotConnected(l,t,i.strict,u=>u._setChecked(l,!0,i)))}),this._page._timeoutSettings.timeout(i))})}uncheck(n,s){return c(this,arguments,function*(e,t,i={}){return new Ye.ProgressController(e,this).run(l=>c(this,null,function*(){return kt.assertDone(yield this._retryWithProgressIfNotConnected(l,t,i.strict,u=>u._setChecked(l,!1,i)))}),this._page._timeoutSettings.timeout(i))})}waitForTimeout(e,t){return c(this,null,function*(){return new Ye.ProgressController(e,this).run(()=>c(this,null,function*(){yield new Promise(n=>setTimeout(n,t))}))})}expect(e,t,i){return c(this,null,function*(){let n=new Ye.ProgressController(e,this),s=i.expression==="to.have.count"||i.expression.endsWith(".array"),o=i.expression==="to.have.property";return yield this._scheduleRerunnableTaskWithController(n,t,(l,u,d,h,p)=>{if(!u){var f;if(!d.isNot&&d.expression==="to.be.hidden")return{matches:!0};if(d.isNot&&d.expression==="to.be.visible")return{matches:!1};let g=((f=d.expectedText)===null||f===void 0?void 0:f.length)===0;if(d.expression.endsWith(".array")&&g!==d.isNot)return{matches:g};let w=d.expectedNumber===0;return d.expression==="to.have.count"&&w!==d.isNot?{matches:w,received:0}:p}let{matches:m,received:_}=l.injectedScript.expect(l,u,d,h);return m===d.isNot?(l.setIntermediateResult(_),Array.isArray(_)||l.log(`  unexpected value "${_}"`),p):{matches:m,received:_}},i,y({strict:!0,querySelectorAll:s,mainWorld:o,omitAttached:!0,logScale:!0},i)).catch(l=>{if(Ta.isJavaScriptErrorInEvaluate(l))throw l;return{received:n.lastIntermediateResult(),matches:i.isNot,log:e.log}})})}_waitForFunctionExpression(e,t,i,n,s,o="main"){return c(this,null,function*(){let l=new Ye.ProgressController(e,this);typeof s.pollingInterval=="number"&&(0,Rs.assert)(s.pollingInterval>0,"Cannot poll with non-positive interval: "+s.pollingInterval),t=Ta.normalizeEvaluationExpression(t,i);let u=d=>d.evaluateHandle((h,{expression:p,isFunction:f,polling:m,arg:_})=>{let g=w=>{let b=self.eval(p);return f===!0?b=b(w):f===!1?b=b:typeof b=="function"&&(b=b(w)),b};return typeof m!="number"?h.pollRaf((w,b)=>g(_)||b):h.pollInterval(m,(w,b)=>g(_)||b)},{expression:t,isFunction:i,polling:s.pollingInterval,arg:n});return l.run(d=>this._scheduleRerunnableHandleTask(d,o,u),this._page._timeoutSettings.timeout(s))})}waitForFunctionValueInUtility(e,t){return c(this,null,function*(){let i=`() => {
      const result = (${t})();
      if (!result)
        return result;
      return JSON.stringify(result);
    }`,n=yield this._waitForFunctionExpression((0,jb.internalCallMetadata)(),i,!0,void 0,{timeout:e.timeUntilDeadline()},"utility");return JSON.parse(n.rawValue())})}title(){return c(this,null,function*(){return(yield this._utilityContext()).evaluate(()=>document.title)})}_onDetached(){this._stopNetworkIdleTimer(),this._detached=!0,this._detachedCallback();for(let e of this._contextData.values())for(let t of e.rerunnableTasks)t.terminate(new Error("waitForFunction failed: frame got detached."));this._parentFrame&&this._parentFrame._childFrames.delete(this),this._parentFrame=null}_scheduleRerunnableTask(o,l,u,d){return c(this,arguments,function*(e,t,i,n,s={}){let h=new Ye.ProgressController(e,this);return this._scheduleRerunnableTaskWithController(h,t,i,n,s)})}_scheduleRerunnableTaskWithController(o,l,u,d){return c(this,arguments,function*(e,t,i,n,s={}){let h=this._page.parseSelector(t,s),p=i.toString(),f=this._contextData.get(s.mainWorld?"main":h.world);return e.run(m=>c(this,null,function*(){m.log(`waiting for selector "${t}"`);let _=new Kf(f,m,g=>g.evaluateHandle((w,{info:b,taskData:C,callbackText:E,querySelectorAll:N,logScale:P,omitAttached:L,snapshotName:S})=>{let T=w.eval(E),F=P?w.pollLogScale.bind(w):w.pollRaf.bind(w),q=new Set;return F((z,Y)=>{let I,Z=[];if(N?(Z=w.querySelectorAll(b.parsed,document),I=Z[0],z.logRepeating(`  selector resolved to ${Z.length} element${Z.length===1?"":"s"}`)):(I=w.querySelector(b.parsed,document,b.strict),Z=I?[I]:[],I&&z.logRepeating(`  selector resolved to ${w.previewNode(I)}`)),!I&&!L)return Y;if(S){let j=q;q=new Set(Z);for(let H of j)q.has(H)||H.removeAttribute("__playwright_target__");for(let H of q)j.has(H)||H.setAttribute("__playwright_target__",S)}return T(z,I,C,Z,Y)})},{info:h,taskData:n,callbackText:p,querySelectorAll:s.querySelectorAll,logScale:s.logScale,omitAttached:s.omitAttached,snapshotName:m.metadata.afterSnapshot}),!0);return this._detached&&_.terminate(new Error("Frame got detached.")),f.context&&_.rerun(f.context),yield _.promise}),this._page._timeoutSettings.timeout(s))})}_scheduleRerunnableHandleTask(e,t,i){let n=this._contextData.get(t),s=new Kf(n,e,i,!1);return this._detached&&s.terminate(new Error("waitForFunction failed: frame got detached.")),n.context&&s.rerun(n.context),s.handlePromise}_setContext(e,t){let i=this._contextData.get(e);if(i.context=t,t){i.contextResolveCallback.call(null,t);for(let n of i.rerunnableTasks)n.rerun(t)}else i.contextPromise=new Promise(n=>{i.contextResolveCallback=n})}_contextCreated(e,t){this._contextData.get(e).context&&this._setContext(e,null),this._setContext(e,t)}_contextDestroyed(e){for(let[t,i]of this._contextData)i.context===e&&this._setContext(t,null)}_startNetworkIdleTimer(){(0,Rs.assert)(!this._networkIdleTimer),!(this._firedLifecycleEvents.has("networkidle")||this._detached)&&(this._networkIdleTimer=setTimeout(()=>this._onLifecycleEvent("networkidle"),500))}_stopNetworkIdleTimer(){this._networkIdleTimer&&clearTimeout(this._networkIdleTimer),this._networkIdleTimer=void 0}extendInjectedScript(e,t){return c(this,null,function*(){return(yield(yield this._context("main")).injectedScript()).evaluateHandle((s,{source:o,arg:l})=>s.extend(o,l),{source:e,arg:t})})}};Ns.Frame=ht;ht.Events={Navigation:"navigation",AddLifecycle:"addlifecycle",RemoveLifecycle:"removelifecycle"};var Kf=class{constructor(e,t,i,n){this.promise=void 0,this.handlePromise=void 0,this._task=void 0,this._progress=void 0,this._returnByValue=void 0,this._contextData=void 0,this._task=i,this._progress=t,this._returnByValue=n,n?this.promise=new Gf.ManualPromise:this.handlePromise=new Gf.ManualPromise,this._contextData=e,this._contextData.rerunnableTasks.add(this)}terminate(e){this._reject(e)}_resolve(e){this.promise&&this.promise.resolve(e),this.handlePromise&&this.handlePromise.resolve(e)}_reject(e){this.promise&&this.promise.reject(e),this.handlePromise&&this.handlePromise.reject(e)}rerun(e){return c(this,null,function*(){try{let t=yield e.injectedScript(),i=new kt.InjectedScriptPollHandler(this._progress,yield this._task(t)),n=this._returnByValue?yield i.finish():yield i.finishHandle();this._contextData.rerunnableTasks.delete(this),this._resolve(n)}catch(t){(Ta.isJavaScriptErrorInEvaluate(t)||(0,Wb.isSessionClosedError)(t))&&(this._contextData.rerunnableTasks.delete(this),this._reject(t))}})}},zb=class{constructor(e){this._progress=void 0,this._protectCount=0,this._promise=new Gf.ManualPromise,this._progress=e,this.retain()}waitFor(){return this.release(),this._promise}addFrameNavigation(e){return c(this,null,function*(){if(e.parentFrame())return;this.retain();let t=Ei.helper.waitForEvent(null,e,ht.Events.Navigation,i=>(!i.error&&this._progress&&this._progress.log(`  navigated to "${e._url}"`),!0));yield Promise.race([e._page._disconnectedPromise,e._page._crashedPromise,e._detachedPromise,t.promise]).catch(i=>{}),t.dispose(),this.release()})}retain(){++this._protectCount}release(){--this._protectCount,this._protectCount||this._promise.resolve()}};function Jf(r,e){if(e==="networkidle0"&&(e="networkidle"),!pq.kLifecycleEvents.has(e))throw new Error(`${r}: expected one of (load|domcontentloaded|networkidle)`);return e}});var Vb=v(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.USKeyboardLayout=Ds.keypadLocation=void 0;var fq=3;Ds.keypadLocation=fq;var mq={Escape:{keyCode:27,key:"Escape"},F1:{keyCode:112,key:"F1"},F2:{keyCode:113,key:"F2"},F3:{keyCode:114,key:"F3"},F4:{keyCode:115,key:"F4"},F5:{keyCode:116,key:"F5"},F6:{keyCode:117,key:"F6"},F7:{keyCode:118,key:"F7"},F8:{keyCode:119,key:"F8"},F9:{keyCode:120,key:"F9"},F10:{keyCode:121,key:"F10"},F11:{keyCode:122,key:"F11"},F12:{keyCode:123,key:"F12"},Backquote:{keyCode:192,shiftKey:"~",key:"`"},Digit1:{keyCode:49,shiftKey:"!",key:"1"},Digit2:{keyCode:50,shiftKey:"@",key:"2"},Digit3:{keyCode:51,shiftKey:"#",key:"3"},Digit4:{keyCode:52,shiftKey:"$",key:"4"},Digit5:{keyCode:53,shiftKey:"%",key:"5"},Digit6:{keyCode:54,shiftKey:"^",key:"6"},Digit7:{keyCode:55,shiftKey:"&",key:"7"},Digit8:{keyCode:56,shiftKey:"*",key:"8"},Digit9:{keyCode:57,shiftKey:"(",key:"9"},Digit0:{keyCode:48,shiftKey:")",key:"0"},Minus:{keyCode:189,shiftKey:"_",key:"-"},Equal:{keyCode:187,shiftKey:"+",key:"="},Backslash:{keyCode:220,shiftKey:"|",key:"\\"},Backspace:{keyCode:8,key:"Backspace"},Tab:{keyCode:9,key:"Tab"},KeyQ:{keyCode:81,shiftKey:"Q",key:"q"},KeyW:{keyCode:87,shiftKey:"W",key:"w"},KeyE:{keyCode:69,shiftKey:"E",key:"e"},KeyR:{keyCode:82,shiftKey:"R",key:"r"},KeyT:{keyCode:84,shiftKey:"T",key:"t"},KeyY:{keyCode:89,shiftKey:"Y",key:"y"},KeyU:{keyCode:85,shiftKey:"U",key:"u"},KeyI:{keyCode:73,shiftKey:"I",key:"i"},KeyO:{keyCode:79,shiftKey:"O",key:"o"},KeyP:{keyCode:80,shiftKey:"P",key:"p"},BracketLeft:{keyCode:219,shiftKey:"{",key:"["},BracketRight:{keyCode:221,shiftKey:"}",key:"]"},CapsLock:{keyCode:20,key:"CapsLock"},KeyA:{keyCode:65,shiftKey:"A",key:"a"},KeyS:{keyCode:83,shiftKey:"S",key:"s"},KeyD:{keyCode:68,shiftKey:"D",key:"d"},KeyF:{keyCode:70,shiftKey:"F",key:"f"},KeyG:{keyCode:71,shiftKey:"G",key:"g"},KeyH:{keyCode:72,shiftKey:"H",key:"h"},KeyJ:{keyCode:74,shiftKey:"J",key:"j"},KeyK:{keyCode:75,shiftKey:"K",key:"k"},KeyL:{keyCode:76,shiftKey:"L",key:"l"},Semicolon:{keyCode:186,shiftKey:":",key:";"},Quote:{keyCode:222,shiftKey:'"',key:"'"},Enter:{keyCode:13,key:"Enter",text:"\r"},ShiftLeft:{keyCode:160,keyCodeWithoutLocation:16,key:"Shift",location:1},KeyZ:{keyCode:90,shiftKey:"Z",key:"z"},KeyX:{keyCode:88,shiftKey:"X",key:"x"},KeyC:{keyCode:67,shiftKey:"C",key:"c"},KeyV:{keyCode:86,shiftKey:"V",key:"v"},KeyB:{keyCode:66,shiftKey:"B",key:"b"},KeyN:{keyCode:78,shiftKey:"N",key:"n"},KeyM:{keyCode:77,shiftKey:"M",key:"m"},Comma:{keyCode:188,shiftKey:"<",key:","},Period:{keyCode:190,shiftKey:">",key:"."},Slash:{keyCode:191,shiftKey:"?",key:"/"},ShiftRight:{keyCode:161,keyCodeWithoutLocation:16,key:"Shift",location:2},ControlLeft:{keyCode:162,keyCodeWithoutLocation:17,key:"Control",location:1},MetaLeft:{keyCode:91,key:"Meta",location:1},AltLeft:{keyCode:164,keyCodeWithoutLocation:18,key:"Alt",location:1},Space:{keyCode:32,key:" "},AltRight:{keyCode:165,keyCodeWithoutLocation:18,key:"Alt",location:2},AltGraph:{keyCode:225,key:"AltGraph"},MetaRight:{keyCode:92,key:"Meta",location:2},ContextMenu:{keyCode:93,key:"ContextMenu"},ControlRight:{keyCode:163,keyCodeWithoutLocation:17,key:"Control",location:2},PrintScreen:{keyCode:44,key:"PrintScreen"},ScrollLock:{keyCode:145,key:"ScrollLock"},Pause:{keyCode:19,key:"Pause"},PageUp:{keyCode:33,key:"PageUp"},PageDown:{keyCode:34,key:"PageDown"},Insert:{keyCode:45,key:"Insert"},Delete:{keyCode:46,key:"Delete"},Home:{keyCode:36,key:"Home"},End:{keyCode:35,key:"End"},ArrowLeft:{keyCode:37,key:"ArrowLeft"},ArrowUp:{keyCode:38,key:"ArrowUp"},ArrowRight:{keyCode:39,key:"ArrowRight"},ArrowDown:{keyCode:40,key:"ArrowDown"},NumLock:{keyCode:144,key:"NumLock"},NumpadDivide:{keyCode:111,key:"/",location:3},NumpadMultiply:{keyCode:106,key:"*",location:3},NumpadSubtract:{keyCode:109,key:"-",location:3},Numpad7:{keyCode:36,shiftKeyCode:103,key:"Home",shiftKey:"7",location:3},Numpad8:{keyCode:38,shiftKeyCode:104,key:"ArrowUp",shiftKey:"8",location:3},Numpad9:{keyCode:33,shiftKeyCode:105,key:"PageUp",shiftKey:"9",location:3},Numpad4:{keyCode:37,shiftKeyCode:100,key:"ArrowLeft",shiftKey:"4",location:3},Numpad5:{keyCode:12,shiftKeyCode:101,key:"Clear",shiftKey:"5",location:3},Numpad6:{keyCode:39,shiftKeyCode:102,key:"ArrowRight",shiftKey:"6",location:3},NumpadAdd:{keyCode:107,key:"+",location:3},Numpad1:{keyCode:35,shiftKeyCode:97,key:"End",shiftKey:"1",location:3},Numpad2:{keyCode:40,shiftKeyCode:98,key:"ArrowDown",shiftKey:"2",location:3},Numpad3:{keyCode:34,shiftKeyCode:99,key:"PageDown",shiftKey:"3",location:3},Numpad0:{keyCode:45,shiftKeyCode:96,key:"Insert",shiftKey:"0",location:3},NumpadDecimal:{keyCode:46,shiftKeyCode:110,key:"\0",shiftKey:".",location:3},NumpadEnter:{keyCode:13,key:"Enter",text:"\r",location:3}};Ds.USKeyboardLayout=mq});var Wl=v(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.Touchscreen=Mr.Mouse=Mr.Keyboard=Mr.keypadLocation=void 0;var Gb=G(),Kb=_q(Vb());function Jb(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(Jb=function(i){return i?t:e})(r)}function _q(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=Jb(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var gq=Kb.keypadLocation;Mr.keypadLocation=gq;var jl=["Alt","Control","Meta","Shift"],Xb=class{constructor(e,t){this._pressedModifiers=new Set,this._pressedKeys=new Set,this._raw=void 0,this._page=void 0,this._raw=e,this._page=t}down(e){return c(this,null,function*(){let t=this._keyDescriptionForString(e),i=this._pressedKeys.has(t.code);this._pressedKeys.add(t.code),jl.includes(t.key)&&this._pressedModifiers.add(t.key);let n=t.text;yield this._raw.keydown(this._pressedModifiers,t.code,t.keyCode,t.keyCodeWithoutLocation,t.key,t.location,i,n),yield this._page._doSlowMo()})}_keyDescriptionForString(e){let t=Qb.get(e);return(0,Gb.assert)(t,`Unknown key: "${e}"`),t=this._pressedModifiers.has("Shift")&&t.shifted?t.shifted:t,this._pressedModifiers.size>1||!this._pressedModifiers.has("Shift")&&this._pressedModifiers.size===1?R(y({},t),{text:""}):t}up(e){return c(this,null,function*(){let t=this._keyDescriptionForString(e);jl.includes(t.key)&&this._pressedModifiers.delete(t.key),this._pressedKeys.delete(t.code),yield this._raw.keyup(this._pressedModifiers,t.code,t.keyCode,t.keyCodeWithoutLocation,t.key,t.location),yield this._page._doSlowMo()})}insertText(e){return c(this,null,function*(){yield this._raw.sendText(e),yield this._page._doSlowMo()})}type(e,t){return c(this,null,function*(){let i=t&&t.delay||void 0;for(let n of e)Qb.has(n)?yield this.press(n,{delay:i}):(i&&(yield new Promise(s=>setTimeout(s,i))),yield this.insertText(n))})}press(i){return c(this,arguments,function*(e,t={}){function n(l){let u=[],d="";for(let h of l)h==="+"&&d?(u.push(d),d=""):d+=h;return u.push(d),u}let s=n(e),o=[];e=s[s.length-1];for(let l=0;l<s.length-1;++l)o.push(this.down(s[l]));o.push(this.down(e)),t.delay&&(yield Promise.all(o),yield new Promise(l=>setTimeout(l,t.delay))),o.push(this.up(e));for(let l=s.length-2;l>=0;--l)o.push(this.up(s[l]));yield Promise.all(o)})}_ensureModifiers(e){return c(this,null,function*(){for(let n of e)if(!jl.includes(n))throw new Error("Unknown modifier "+n);let t=Array.from(this._pressedModifiers),i=[];for(let n of jl){let s=e.includes(n),o=this._pressedModifiers.has(n);s&&!o?i.push(this.down(n)):!s&&o&&i.push(this.up(n))}return yield Promise.all(i),t})}_modifiers(){return this._pressedModifiers}};Mr.Keyboard=Xb;var Yb=class{constructor(e,t){this._keyboard=void 0,this._x=0,this._y=0,this._lastButton="none",this._buttons=new Set,this._raw=void 0,this._page=void 0,this._raw=e,this._page=t,this._keyboard=this._page.keyboard}move(n,s){return c(this,arguments,function*(e,t,i={}){let{steps:o=1}=i,l=this._x,u=this._y;this._x=e,this._y=t;for(let d=1;d<=o;d++){let h=l+(e-l)*(d/o),p=u+(t-u)*(d/o);yield this._raw.move(h,p,this._lastButton,this._buttons,this._keyboard._modifiers()),yield this._page._doSlowMo()}})}down(){return c(this,arguments,function*(e={}){let{button:t="left",clickCount:i=1}=e;this._lastButton=t,this._buttons.add(t),yield this._raw.down(this._x,this._y,this._lastButton,this._buttons,this._keyboard._modifiers(),i),yield this._page._doSlowMo()})}up(){return c(this,arguments,function*(e={}){let{button:t="left",clickCount:i=1}=e;this._lastButton="none",this._buttons.delete(t),yield this._raw.up(this._x,this._y,t,this._buttons,this._keyboard._modifiers(),i),yield this._page._doSlowMo()})}click(n,s){return c(this,arguments,function*(e,t,i={}){let{delay:o=null,clickCount:l=1}=i;if(o){this.move(e,t);for(let u=1;u<=l;++u)yield this.down(R(y({},i),{clickCount:u})),yield new Promise(d=>setTimeout(d,o)),yield this.up(R(y({},i),{clickCount:u})),u<l&&(yield new Promise(d=>setTimeout(d,o)))}else{let u=[];u.push(this.move(e,t));for(let d=1;d<=l;++d)u.push(this.down(R(y({},i),{clickCount:d}))),u.push(this.up(R(y({},i),{clickCount:d})));yield Promise.all(u)}})}dblclick(n,s){return c(this,arguments,function*(e,t,i={}){yield this.click(e,t,R(y({},i),{clickCount:2}))})}wheel(e,t){return c(this,null,function*(){yield this._raw.wheel(this._x,this._y,this._buttons,this._keyboard._modifiers(),e,t),yield this._page._doSlowMo()})}};Mr.Mouse=Yb;var Zb=new Map([["ShiftLeft",["Shift"]],["ControlLeft",["Control"]],["AltLeft",["Alt"]],["MetaLeft",["Meta"]],["Enter",[`
`,"\r"]]]),Qb=wq(Kb.USKeyboardLayout);function wq(r){let e=new Map;for(let t in r){let i=r[t],n={key:i.key||"",keyCode:i.keyCode||0,keyCodeWithoutLocation:i.keyCodeWithoutLocation||i.keyCode||0,code:t,text:i.text||"",location:i.location||0};i.key.length===1&&(n.text=n.key);let s;if(i.shiftKey&&((0,Gb.assert)(i.shiftKey.length===1),s=y({},n),s.key=i.shiftKey,s.text=i.shiftKey,i.shiftKeyCode&&(s.keyCode=i.shiftKeyCode)),e.set(t,R(y({},n),{shifted:s})),Zb.has(t))for(let o of Zb.get(t))e.set(o,n);i.location||(n.key.length===1&&e.set(n.key,n),s&&e.set(s.key,R(y({},s),{shifted:void 0})))}return e}var ex=class{constructor(e,t){this._raw=void 0,this._page=void 0,this._raw=e,this._page=t}tap(e,t){return c(this,null,function*(){if(!this._page._browserContext._options.hasTouch)throw new Error("hasTouch must be enabled on the browser context before using the touchscreen.");yield this._raw.tap(e,t,this._page.keyboard._modifiers()),yield this._page._doSlowMo()})}};Mr.Touchscreen=ex});var sx=v(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});Ul.Screenshotter=void 0;var tx=Mt(),ot=G(),rx=class{constructor(e){this._queue=new Xf,this._page=void 0,this._page=e,this._queue=new Xf}_originalViewportSize(e){return c(this,null,function*(){let t=this._page.viewportSize(),i=t;return i||(i=yield this._page.mainFrame().waitForFunctionValueInUtility(e,()=>({width:window.innerWidth,height:window.innerHeight}))),{viewportSize:i,originalViewportSize:t}})}_fullPageSize(e){return c(this,null,function*(){return yield this._page.mainFrame().waitForFunctionValueInUtility(e,()=>!document.body||!document.documentElement?null:{width:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth),height:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)})})}screenshotPage(e,t){return c(this,null,function*(){let i=nx(t);return this._queue.postTask(()=>c(this,null,function*(){let{viewportSize:n,originalViewportSize:s}=yield this._originalViewportSize(e);if(t.fullPage){let l=yield this._fullPageSize(e),u={x:0,y:0,width:l.width,height:l.height},d=null,h=l.width<=n.width&&l.height<=n.height;!this._page._delegate.canScreenshotOutsideViewport()&&!h&&(d=l,e.throwIfAborted(),yield this._page.setViewportSize(d),e.cleanupWhenAborted(()=>this._restoreViewport(s))),t.clip&&(u=ix(t.clip,u));let p=yield this._screenshot(e,i,u,void 0,t);return e.throwIfAborted(),d&&(yield this._restoreViewport(s)),p}let o=t.clip?ix(t.clip,n):y({x:0,y:0},n);return yield this._screenshot(e,i,void 0,o,t)}))})}screenshotElement(n,s){return c(this,arguments,function*(e,t,i={}){let o=nx(i);return this._queue.postTask(()=>c(this,null,function*(){let{viewportSize:l,originalViewportSize:u}=yield this._originalViewportSize(e);yield t._waitAndScrollIntoViewIfNeeded(e),e.throwIfAborted();let d=yield t.boundingBox();(0,ot.assert)(d,"Node is either not visible or not an HTMLElement"),(0,ot.assert)(d.width!==0,"Node has 0 width."),(0,ot.assert)(d.height!==0,"Node has 0 height.");let h=null,p=d.width<=l.width&&d.height<=l.height;!this._page._delegate.canScreenshotOutsideViewport()&&!p&&(h=tx.helper.enclosingIntSize({width:Math.max(l.width,d.width),height:Math.max(l.height,d.height)}),e.throwIfAborted(),yield this._page.setViewportSize(h),e.cleanupWhenAborted(()=>this._restoreViewport(u)),e.throwIfAborted(),yield t._waitAndScrollIntoViewIfNeeded(e),d=yield t.boundingBox(),(0,ot.assert)(d,"Node is either not visible or not an HTMLElement"),(0,ot.assert)(d.width!==0,"Node has 0 width."),(0,ot.assert)(d.height!==0,"Node has 0 height.")),e.throwIfAborted();let f=yield this._page.mainFrame().waitForFunctionValueInUtility(e,()=>({x:window.scrollX,y:window.scrollY})),m=y({},d);m.x+=f.x,m.y+=f.y;let _=yield this._screenshot(e,o,tx.helper.enclosingIntRect(m),void 0,i);return e.throwIfAborted(),h&&(yield this._restoreViewport(u)),_}))})}_screenshot(e,t,i,n,s){return c(this,null,function*(){s.__testHookBeforeScreenshot&&(yield s.__testHookBeforeScreenshot()),e.throwIfAborted();let o=s.omitBackground&&t==="png";o&&(yield this._page._delegate.setBackgroundColor({r:0,g:0,b:0,a:0}),e.cleanupWhenAborted(()=>this._page._delegate.setBackgroundColor())),e.throwIfAborted();let l=yield this._page._delegate.takeScreenshot(e,t,i,n,s.quality);return e.throwIfAborted(),o&&(yield this._page._delegate.setBackgroundColor()),e.throwIfAborted(),s.__testHookAfterScreenshot&&(yield s.__testHookAfterScreenshot()),l})}_restoreViewport(e){return c(this,null,function*(){(0,ot.assert)(!this._page._delegate.canScreenshotOutsideViewport()),e?yield this._page.setViewportSize(e):yield this._page._delegate.resetViewport()})}};Ul.Screenshotter=rx;var Xf=class{constructor(){this._chain=void 0,this._chain=Promise.resolve()}postTask(e){let t=this._chain.then(e);return this._chain=t.catch(()=>{}),t}};function ix(r,e){let t={x:Math.max(0,Math.min(r.x,e.width)),y:Math.max(0,Math.min(r.y,e.height))},i={x:Math.max(0,Math.min(r.x+r.width,e.width)),y:Math.max(0,Math.min(r.y+r.height,e.height))},n={x:t.x,y:t.y,width:i.x-t.x,height:i.y-t.y};return(0,ot.assert)(n.width&&n.height,"Clipped area is either empty or outside the resulting image"),n}function nx(r){let e=null;return r.type&&((0,ot.assert)(r.type==="png"||r.type==="jpeg","Unknown options.type value: "+r.type),e=r.type),e||(e="png"),r.quality!==void 0&&((0,ot.assert)(e==="jpeg","options.quality is unsupported for the "+e+" screenshots"),(0,ot.assert)(typeof r.quality=="number","Expected options.quality to be a number but found "+typeof r.quality),(0,ot.assert)(Number.isInteger(r.quality),"Expected options.quality to be an integer"),(0,ot.assert)(r.quality>=0&&r.quality<=100,"Expected options.quality to be between 0 and 100 (inclusive), got "+r.quality)),r.clip&&((0,ot.assert)(typeof r.clip.x=="number","Expected options.clip.x to be a number but found "+typeof r.clip.x),(0,ot.assert)(typeof r.clip.y=="number","Expected options.clip.y to be a number but found "+typeof r.clip.y),(0,ot.assert)(typeof r.clip.width=="number","Expected options.clip.width to be a number but found "+typeof r.clip.width),(0,ot.assert)(typeof r.clip.height=="number","Expected options.clip.height to be a number but found "+typeof r.clip.height),(0,ot.assert)(r.clip.width!==0,"Expected options.clip.width not to be 0."),(0,ot.assert)(r.clip.height!==0,"Expected options.clip.height not to be 0.")),e}});var ax=v($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});$l.ConsoleMessage=void 0;var vq=nt(),ox=class extends vq.SdkObject{constructor(e,t,i,n,s){super(e,"console-message");this._type=void 0,this._text=void 0,this._args=void 0,this._location=void 0,this._type=t,this._text=i,this._args=n,this._location=s||{url:"",lineNumber:0,columnNumber:0}}type(){return this._type}text(){return this._text===void 0&&(this._text=this._args.map(e=>e.preview()).join(" ")),this._text}args(){return this._args}location(){return this._location}};$l.ConsoleMessage=ox});var ux=v(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});Vl.Accessibility=void 0;var cx=class{constructor(e){this._getAXTree=void 0,this._getAXTree=e}snapshot(){return c(this,arguments,function*(e={}){let{interestingOnly:t=!0,root:i=null}=e,{tree:n,needle:s}=yield this._getAXTree(i||void 0);if(!t)return i?s&&zl(s)[0]:zl(n)[0];let o=new Set;return lx(o,n,!1),i&&(!s||!o.has(s))?null:zl(s||n,o)[0]})}};Vl.Accessibility=cx;function lx(r,e,t){if(e.isInteresting(t)&&r.add(e),!e.isLeafNode()){t=t||e.isControl();for(let i of e.children())lx(r,i,t)}}function zl(r,e){let t=[];for(let n of r.children())t.push(...zl(n,e));if(e&&!e.has(r))return t;let i=r.serialize();return t.length&&(i.children=t),[i]}});var hx=v(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});Gl.FileChooser=void 0;var dx=class{constructor(e,t,i){this._page=void 0,this._elementHandle=void 0,this._isMultiple=void 0,this._page=e,this._elementHandle=t,this._isMultiple=i}element(){return this._elementHandle}isMultiple(){return this._isMultiple}page(){return this._page}};Gl.FileChooser=dx});var Ot=v(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});Ci.PageBinding=Ci.Worker=Ci.Page=void 0;var yq=Fa(Aa()),Yf=Fa(Wl()),Zf=Fa(xi()),px=Fa(jt()),bq=sx(),xq=er(),Sq=gt(),Eq=ax(),Cq=Fa(ux()),kq=hx(),Kl=Ar(),Ia=G(),Qf=Vt(),Ma=Xe(),fx=nt();function mx(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(mx=function(i){return i?t:e})(r)}function Fa(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=mx(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var Rt=class extends fx.SdkObject{constructor(e,t){super(t,"page");this._closedState="open",this._closedPromise=new Qf.ManualPromise,this._disconnected=!1,this._initialized=!1,this._disconnectedPromise=new Qf.ManualPromise,this._crashedPromise=new Qf.ManualPromise,this._browserContext=void 0,this.keyboard=void 0,this.mouse=void 0,this.touchscreen=void 0,this._timeoutSettings=void 0,this._delegate=void 0,this._state=void 0,this._pageBindings=new Map,this._evaluateOnNewDocumentSources=[],this._screenshotter=void 0,this._frameManager=void 0,this.accessibility=void 0,this._workers=new Map,this.pdf=void 0,this.coverage=void 0,this._clientRequestInterceptor=void 0,this._serverRequestInterceptor=void 0,this._ownedContext=void 0,this.selectors=void 0,this._pageIsError=void 0,this._video=null,this._opener=void 0,this.attribution.page=this,this._delegate=e,this._browserContext=t,this._state={emulatedSize:t._options.viewport?{viewport:t._options.viewport,screen:t._options.screen||t._options.viewport}:null,mediaType:null,colorScheme:t._options.colorScheme!==void 0?t._options.colorScheme:"light",reducedMotion:t._options.reducedMotion!==void 0?t._options.reducedMotion:"no-preference",forcedColors:t._options.forcedColors!==void 0?t._options.forcedColors:"none",extraHTTPHeaders:null},this.accessibility=new Cq.Accessibility(e.getAccessibilityTree.bind(e)),this.keyboard=new Yf.Keyboard(e.rawKeyboard,this),this.mouse=new Yf.Mouse(e.rawMouse,this),this.touchscreen=new Yf.Touchscreen(e.rawTouchscreen,this),this._timeoutSettings=new xq.TimeoutSettings(t._timeoutSettings),this._screenshotter=new bq.Screenshotter(this),this._frameManager=new yq.FrameManager(this),e.pdf&&(this.pdf=e.pdf.bind(e)),this.coverage=e.coverage?e.coverage():null,this.selectors=t.selectors()}initOpener(e){return c(this,null,function*(){if(!e)return;let t=yield e.pageOrError();t instanceof Rt&&!t.isClosed()&&(this._opener=t)})}reportAsNew(e){if(e){if(this._browserContext.isClosingOrClosed())return;this._setIsError(e)}this._initialized=!0,this._browserContext.emit(Sq.BrowserContext.Events.Page,this),this.isClosed()&&this.emit(Rt.Events.Close)}initializedOrUndefined(){return this._initialized?this:void 0}_doSlowMo(){return c(this,null,function*(){let e=this._browserContext._browser.options.slowMo;!e||(yield new Promise(t=>setTimeout(t,e)))})}_didClose(){this._frameManager.dispose(),(0,Ia.assert)(this._closedState!=="closed","Page closed twice"),this._closedState="closed",this.emit(Rt.Events.Close),this._closedPromise.resolve()}_didCrash(){this._frameManager.dispose(),this.emit(Rt.Events.Crash),this._crashedPromise.resolve(new Error("Page crashed"))}_didDisconnect(){this._frameManager.dispose(),(0,Ia.assert)(!this._disconnected,"Page disconnected twice"),this._disconnected=!0,this._disconnectedPromise.resolve(new Error("Page closed"))}_onFileChooserOpened(e){return c(this,null,function*(){let t;try{t=yield e.evaluate(n=>!!n.multiple)}catch(n){return}if(!this.listenerCount(Rt.Events.FileChooser)){e.dispose();return}let i=new kq.FileChooser(this,e,t);this.emit(Rt.Events.FileChooser,i)})}context(){return this._browserContext}opener(){return this._opener}mainFrame(){return this._frameManager.mainFrame()}frames(){return this._frameManager.frames()}setDefaultNavigationTimeout(e){this._timeoutSettings.setDefaultNavigationTimeout(e)}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e)}exposeBinding(e,t,i){return c(this,null,function*(){if(this._pageBindings.has(e))throw new Error(`Function "${e}" has been already registered`);if(this._browserContext._pageBindings.has(e))throw new Error(`Function "${e}" has been already registered in the browser context`);let n=new Jl(e,i,t);this._pageBindings.set(e,n),yield this._delegate.exposeBinding(n)})}setExtraHTTPHeaders(e){return this._state.extraHTTPHeaders=e,this._delegate.updateExtraHTTPHeaders()}_onBindingCalled(e,t){return c(this,null,function*(){this._disconnected||this._closedState==="closed"||(yield Jl.dispatch(this,e,t))})}_addConsoleMessage(e,t,i,n){let s=new Eq.ConsoleMessage(this,e,n,t,i);this._frameManager.interceptConsoleMessage(s)||!this.listenerCount(Rt.Events.Console)?t.forEach(l=>l.dispose()):this.emit(Rt.Events.Console,s)}reload(e,t){return c(this,null,function*(){return new Kl.ProgressController(e,this).run(n=>this.mainFrame().raceNavigationAction(()=>c(this,null,function*(){let[s]=yield Promise.all([this.mainFrame()._waitForNavigation(n,t),this._delegate.reload()]);return yield this._doSlowMo(),s})),this._timeoutSettings.navigationTimeout(t))})}goBack(e,t){return c(this,null,function*(){return new Kl.ProgressController(e,this).run(n=>this.mainFrame().raceNavigationAction(()=>c(this,null,function*(){let s,o=this.mainFrame()._waitForNavigation(n,t).catch(d=>(s=d,null));if(!(yield this._delegate.goBack()))return null;let u=yield o;if(s)throw s;return yield this._doSlowMo(),u})),this._timeoutSettings.navigationTimeout(t))})}goForward(e,t){return c(this,null,function*(){return new Kl.ProgressController(e,this).run(n=>this.mainFrame().raceNavigationAction(()=>c(this,null,function*(){let s,o=this.mainFrame()._waitForNavigation(n,t).catch(d=>(s=d,null));if(!(yield this._delegate.goForward()))return null;let u=yield o;if(s)throw s;return yield this._doSlowMo(),u})),this._timeoutSettings.navigationTimeout(t))})}emulateMedia(e){return c(this,null,function*(){e.media!==void 0&&(this._state.mediaType=e.media),e.colorScheme!==void 0&&(this._state.colorScheme=e.colorScheme),e.reducedMotion!==void 0&&(this._state.reducedMotion=e.reducedMotion),e.forcedColors!==void 0&&(this._state.forcedColors=e.forcedColors),yield this._delegate.updateEmulateMedia(),yield this._doSlowMo()})}setViewportSize(e){return c(this,null,function*(){this._state.emulatedSize={viewport:y({},e),screen:y({},e)},yield this._delegate.setEmulatedSize(this._state.emulatedSize),yield this._doSlowMo()})}viewportSize(){var e;return((e=this._state.emulatedSize)===null||e===void 0?void 0:e.viewport)||null}bringToFront(){return c(this,null,function*(){yield this._delegate.bringToFront()})}_addInitScriptExpression(e){return c(this,null,function*(){this._evaluateOnNewDocumentSources.push(e),yield this._delegate.evaluateOnNewDocument(e)})}_needsRequestInterception(){return!!this._clientRequestInterceptor||!!this._serverRequestInterceptor||!!this._browserContext._requestInterceptor}_setClientRequestInterceptor(e){return c(this,null,function*(){this._clientRequestInterceptor=e,yield this._delegate.updateRequestInterception()})}_setServerRequestInterceptor(e){return c(this,null,function*(){this._serverRequestInterceptor=e,yield this._delegate.updateRequestInterception()})}_requestStarted(e,t){let i=new px.Route(e,t);if(this._serverRequestInterceptor){this._serverRequestInterceptor(i,e);return}if(this._clientRequestInterceptor){this._clientRequestInterceptor(i,e);return}if(this._browserContext._requestInterceptor){this._browserContext._requestInterceptor(i,e);return}i.continue()}screenshot(i){return c(this,arguments,function*(e,t={}){return new Kl.ProgressController(e,this).run(s=>this._screenshotter.screenshotPage(s,t),this._timeoutSettings.timeout(t))})}close(e,t){return c(this,null,function*(){if(this._closedState==="closed")return;let i=!!t&&!!t.runBeforeUnload;this._closedState!=="closing"&&(this._closedState="closing",(0,Ia.assert)(!this._disconnected,"Target closed"),yield this._delegate.closePage(i).catch(n=>Ma.debugLogger.log("error",n))),i||(yield this._closedPromise),this._ownedContext&&(yield this._ownedContext.close(e))})}_setIsError(e){this._pageIsError=e,this._frameManager.mainFrame()||this._frameManager.frameAttached("<dummy>",null)}isClosed(){return this._closedState==="closed"}_addWorker(e,t){this._workers.set(e,t),this.emit(Rt.Events.Worker,t)}_removeWorker(e){let t=this._workers.get(e);!t||(t.emit(Ra.Events.Close,t),this._workers.delete(e))}_clearWorkers(){for(let[e,t]of this._workers)t.emit(Ra.Events.Close,t),this._workers.delete(e)}_setFileChooserIntercepted(e){return c(this,null,function*(){yield this._delegate.setFileChooserIntercepted(e)})}frameNavigatedToNewDocument(e){this.emit(Rt.Events.InternalFrameNavigatedToNewDocument,e);let t=e.url();if(!t.startsWith("http"))return;let i=px.parsedURL(t);i&&this._browserContext.addVisitedOrigin(i.origin)}allBindings(){return[...this._browserContext._pageBindings.values(),...this._pageBindings.values()]}getBinding(e){return this._pageBindings.get(e)||this._browserContext._pageBindings.get(e)}setScreencastOptions(e){this._delegate.setScreencastOptions(e).catch(t=>Ma.debugLogger.log("error",t))}firePageError(e){this.emit(Rt.Events.PageError,e)}parseSelector(e,t){let i=typeof(t==null?void 0:t.strict)=="boolean"?t.strict:!!this.context()._options.strictSelectors;return this.selectors.parseSelector(e,i)}};Ci.Page=Rt;Rt.Events={Close:"close",Crash:"crash",Console:"console",Dialog:"dialog",Download:"download",FileChooser:"filechooser",DOMContentLoaded:"domcontentloaded",PageError:"pageerror",FrameAttached:"frameattached",FrameDetached:"framedetached",InternalFrameNavigatedToNewDocument:"internalframenavigatedtonewdocument",Load:"load",ScreencastFrame:"screencastframe",Video:"video",WebSocket:"websocket",Worker:"worker"};var Ra=class extends fx.SdkObject{constructor(e,t){super(e,"worker");this._url=void 0,this._executionContextPromise=void 0,this._executionContextCallback=void 0,this._existingExecutionContext=null,this._url=t,this._executionContextCallback=()=>{},this._executionContextPromise=new Promise(i=>this._executionContextCallback=i)}_createExecutionContext(e){this._existingExecutionContext=new Zf.ExecutionContext(this,e),this._executionContextCallback(this._existingExecutionContext)}url(){return this._url}evaluateExpression(e,t,i){return c(this,null,function*(){return Zf.evaluateExpression(yield this._executionContextPromise,!0,e,t,i)})}evaluateExpressionHandle(e,t,i){return c(this,null,function*(){return Zf.evaluateExpression(yield this._executionContextPromise,!1,e,t,i)})}};Ci.Worker=Ra;Ra.Events={Close:"close"};var Jl=class{constructor(e,t,i){this.name=void 0,this.playwrightFunction=void 0,this.source=void 0,this.needsHandle=void 0,this.name=e,this.playwrightFunction=t,this.source=`(${Oq.toString()})(${JSON.stringify(e)}, ${i})`,this.needsHandle=i}static dispatch(e,t,i){return c(this,null,function*(){let{name:n,seq:s,args:o}=JSON.parse(t);try{(0,Ia.assert)(i.world);let p=e.getBinding(n),f;if(p.needsHandle){let m=yield i.evaluateHandle(l,{name:n,seq:s}).catch(_=>null);f=yield p.playwrightFunction({frame:i.frame,page:e,context:e._browserContext},m)}else f=yield p.playwrightFunction({frame:i.frame,page:e,context:e._browserContext},...o);i.evaluate(u,{name:n,seq:s,result:f}).catch(m=>Ma.debugLogger.log("error",m))}catch(p){(0,Ia.isError)(p)?i.evaluate(d,{name:n,seq:s,message:p.message,stack:p.stack}).catch(f=>Ma.debugLogger.log("error",f)):i.evaluate(h,{name:n,seq:s,error:p}).catch(f=>Ma.debugLogger.log("error",f))}function l(p){let f=globalThis[p.name].handles.get(p.seq);return globalThis[p.name].handles.delete(p.seq),f}function u(p){globalThis[p.name].callbacks.get(p.seq).resolve(p.result),globalThis[p.name].callbacks.delete(p.seq)}function d(p){let f=new Error(p.message);f.stack=p.stack,globalThis[p.name].callbacks.get(p.seq).reject(f),globalThis[p.name].callbacks.delete(p.seq)}function h(p){globalThis[p.name].callbacks.get(p.seq).reject(p.error),globalThis[p.name].callbacks.delete(p.seq)}})}};Ci.PageBinding=Jl;function Oq(r,e){let t=globalThis[r];t.__installed||(globalThis[r]=(...i)=>{let n=globalThis[r];if(e&&i.slice(1).some(d=>d!==void 0))throw new Error(`exposeBindingHandle supports a single argument, ${i.length} received`);let s=n.callbacks;s||(s=new Map,n.callbacks=s);let o=(n.lastSeq||0)+1;n.lastSeq=o;let l=n.handles;l||(l=new Map,n.handles=l);let u=new Promise((d,h)=>s.set(o,{resolve:d,reject:h}));return e?(l.set(o,i[0]),t(JSON.stringify({name:r,seq:o}))):t(JSON.stringify({name:r,seq:o,args:i})),u},globalThis[r].__installed=!0)}});var em=v(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});Ls.pausesBeforeInputActions=Ls.commandsWithTracingSnapshots=void 0;var Pq=new Set(["EventTarget.waitForEventInfo","BrowserContext.waitForEventInfo","Page.waitForEventInfo","WebSocket.waitForEventInfo","ElectronApplication.waitForEventInfo","AndroidDevice.waitForEventInfo","Page.goBack","Page.goForward","Page.reload","Page.setViewportSize","Page.keyboardDown","Page.keyboardUp","Page.keyboardInsertText","Page.keyboardType","Page.keyboardPress","Page.mouseMove","Page.mouseDown","Page.mouseUp","Page.mouseClick","Page.mouseWheel","Page.touchscreenTap","Frame.evalOnSelector","Frame.evalOnSelectorAll","Frame.addScriptTag","Frame.addStyleTag","Frame.check","Frame.click","Frame.dragAndDrop","Frame.dblclick","Frame.dispatchEvent","Frame.evaluateExpression","Frame.evaluateExpressionHandle","Frame.fill","Frame.focus","Frame.getAttribute","Frame.goto","Frame.hover","Frame.innerHTML","Frame.innerText","Frame.inputValue","Frame.isChecked","Frame.isDisabled","Frame.isEnabled","Frame.isHidden","Frame.isVisible","Frame.isEditable","Frame.press","Frame.selectOption","Frame.setContent","Frame.setInputFiles","Frame.tap","Frame.textContent","Frame.type","Frame.uncheck","Frame.waitForTimeout","Frame.waitForFunction","Frame.waitForSelector","Frame.expect","JSHandle.evaluateExpression","ElementHandle.evaluateExpression","JSHandle.evaluateExpressionHandle","ElementHandle.evaluateExpressionHandle","ElementHandle.evalOnSelector","ElementHandle.evalOnSelectorAll","ElementHandle.check","ElementHandle.click","ElementHandle.dblclick","ElementHandle.dispatchEvent","ElementHandle.fill","ElementHandle.hover","ElementHandle.innerHTML","ElementHandle.innerText","ElementHandle.inputValue","ElementHandle.isChecked","ElementHandle.isDisabled","ElementHandle.isEditable","ElementHandle.isEnabled","ElementHandle.isHidden","ElementHandle.isVisible","ElementHandle.press","ElementHandle.scrollIntoViewIfNeeded","ElementHandle.selectOption","ElementHandle.selectText","ElementHandle.setInputFiles","ElementHandle.tap","ElementHandle.textContent","ElementHandle.type","ElementHandle.uncheck","ElementHandle.waitForElementState","ElementHandle.waitForSelector"]);Ls.commandsWithTracingSnapshots=Pq;var Tq=new Set(["Frame.check","Frame.click","Frame.dragAndDrop","Frame.dblclick","Frame.fill","Frame.hover","Frame.press","Frame.selectOption","Frame.setInputFiles","Frame.tap","Frame.type","Frame.uncheck","ElementHandle.check","ElementHandle.click","ElementHandle.dblclick","ElementHandle.fill","ElementHandle.hover","ElementHandle.press","ElementHandle.selectOption","ElementHandle.setInputFiles","ElementHandle.tap","ElementHandle.type","ElementHandle.uncheck"]);Ls.pausesBeforeInputActions=Tq});var tm=v(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.Debugger=void 0;var Aq=x("events"),Xl=G(),Iq=Xe(),_x=em(),gx=Symbol("Debugger"),qs=class extends Aq.EventEmitter{constructor(e){super();this._pauseOnNextStatement=!1,this._pausedCallsMetadata=new Map,this._enabled=void 0,this._context=void 0,this._muted=!1,this._context=e,this._context[gx]=this,this._enabled=(0,Xl.debugMode)()==="inspector",this._enabled&&this.pauseOnNextStatement()}static lookup(e){if(!!e)return e[gx]}setMuted(e){return c(this,null,function*(){this._muted=e})}onBeforeCall(e,t){return c(this,null,function*(){this._muted||(Mq(e,t)||this._pauseOnNextStatement&&Fq(t))&&(yield this.pause(e,t))})}onBeforeInputAction(e,t){return c(this,null,function*(){this._muted||this._enabled&&this._pauseOnNextStatement&&(yield this.pause(e,t))})}onCallLog(e,t,i,n){return c(this,null,function*(){Iq.debugLogger.log(e,t)})}pause(e,t){return c(this,null,function*(){if(this._muted)return;this._enabled=!0,t.pauseStartTime=(0,Xl.monotonicTime)();let i=new Promise(n=>{this._pausedCallsMetadata.set(t,{resolve:n,sdkObject:e})});return this.emit(qs.Events.PausedStateChanged),i})}resume(e){this._pauseOnNextStatement=e;let t=(0,Xl.monotonicTime)();for(let[i,{resolve:n}]of this._pausedCallsMetadata)i.pauseEndTime=t,n();this._pausedCallsMetadata.clear(),this.emit(qs.Events.PausedStateChanged)}pauseOnNextStatement(){this._pauseOnNextStatement=!0}isPaused(e){return e?this._pausedCallsMetadata.has(e):!!this._pausedCallsMetadata.size}pausedDetails(){let e=[];for(let[t,{sdkObject:i}]of this._pausedCallsMetadata)e.push({metadata:t,sdkObject:i});return e}};Yl.Debugger=qs;qs.Events={PausedStateChanged:"pausedstatechanged"};function Mq(r,e){var t;return!((t=r.attribution.browser)!==null&&t!==void 0&&t.options.headful)&&!(0,Xl.isUnderTest)()?!1:e.method==="pause"}function Fq(r){if(r.method==="close")return!0;if(r.method==="waitForSelector"||r.method==="waitForEventInfo")return!1;let e=r.type+"."+r.method;return _x.commandsWithTracingSnapshots.has(e)&&!_x.pausesBeforeInputActions.has(r.type+"."+r.method)}});var sm=v((u7,vx)=>{var ki=x("buffer").Buffer,rm=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array!="undefined"&&(rm=new Int32Array(rm));function wx(r){if(ki.isBuffer(r))return r;var e=typeof ki.alloc=="function"&&typeof ki.from=="function";if(typeof r=="number")return e?ki.alloc(r):new ki(r);if(typeof r=="string")return e?ki.from(r):new ki(r);throw new Error("input must be buffer, number, or string, received "+typeof r)}function Rq(r){var e=wx(4);return e.writeInt32BE(r,0),e}function im(r,e){r=wx(r),ki.isBuffer(e)&&(e=e.readUInt32BE(0));for(var t=~~e^-1,i=0;i<r.length;i++)t=rm[(t^r[i])&255]^t>>>8;return t^-1}function nm(){return Rq(im.apply(null,arguments))}nm.signed=function(){return im.apply(null,arguments)};nm.unsigned=function(){return im.apply(null,arguments)>>>0};vx.exports=nm});var Nx=v(dm=>{var yx=x("fs"),Zl=x("stream").Transform,bx=x("stream").PassThrough,xx=x("zlib"),om=x("util"),Nq=x("events").EventEmitter,Sx=sm();dm.ZipFile=On;dm.dateToDosDateTime=Rx;om.inherits(On,Nq);function On(){this.outputStream=new bx,this.entries=[],this.outputStreamCursor=0,this.ended=!1,this.allDone=!1,this.forceZip64Eocd=!1}On.prototype.addFile=function(r,e,t){var i=this;e=tu(e,!1),t==null&&(t={});var n=new He(e,!1,t);i.entries.push(n),yx.stat(r,function(s,o){if(s)return i.emit("error",s);if(!o.isFile())return i.emit("error",new Error("not a file: "+r));n.uncompressedSize=o.size,t.mtime==null&&n.setLastModDate(o.mtime),t.mode==null&&n.setFileAttributesMode(o.mode),n.setFileDataPumpFunction(function(){var l=yx.createReadStream(r);n.state=He.FILE_DATA_IN_PROGRESS,l.on("error",function(u){i.emit("error",u)}),Ex(i,n,l)}),Oi(i)})};On.prototype.addReadStream=function(r,e,t){var i=this;e=tu(e,!1),t==null&&(t={});var n=new He(e,!1,t);i.entries.push(n),n.setFileDataPumpFunction(function(){n.state=He.FILE_DATA_IN_PROGRESS,Ex(i,n,r)}),Oi(i)};On.prototype.addBuffer=function(r,e,t){var i=this;if(e=tu(e,!1),r.length>1073741823)throw new Error("buffer too large: "+r.length+" > "+1073741823);if(t==null&&(t={}),t.size!=null)throw new Error("options.size not allowed");var n=new He(e,!1,t);n.uncompressedSize=r.length,n.crc32=Sx.unsigned(r),n.crcAndFileSizeKnown=!0,i.entries.push(n),n.compress?xx.deflateRaw(r,function(o,l){s(l)}):s(r);function s(o){n.compressedSize=o.length,n.setFileDataPumpFunction(function(){Pn(i,o),Pn(i,n.getDataDescriptor()),n.state=He.FILE_DATA_DONE,setImmediate(function(){Oi(i)})}),Oi(i)}};On.prototype.addEmptyDirectory=function(r,e){var t=this;if(r=tu(r,!0),e==null&&(e={}),e.size!=null)throw new Error("options.size not allowed");if(e.compress!=null)throw new Error("options.compress not allowed");var i=new He(r,!0,e);t.entries.push(i),i.setFileDataPumpFunction(function(){Pn(t,i.getDataDescriptor()),i.state=He.FILE_DATA_DONE,Oi(t)}),Oi(t)};var Dq=Pi([80,75,5,6]);On.prototype.end=function(r,e){if(typeof r=="function"&&(e=r,r=null),r==null&&(r={}),!this.ended){if(this.ended=!0,this.finalSizeCallback=e,this.forceZip64Eocd=!!r.forceZip64Format,r.comment){if(typeof r.comment=="string"?this.comment=Bq(r.comment):this.comment=r.comment,this.comment.length>65535)throw new Error("comment is too large");if(Na(this.comment,Dq))throw new Error("comment contains end of central directory record signature")}else this.comment=ru;Oi(this)}};function Pn(r,e){r.outputStream.write(e),r.outputStreamCursor+=e.length}function Ex(r,e,t){var i=new lm,n=new iu,s=e.compress?new xx.DeflateRaw:new bx,o=new iu;t.pipe(i).pipe(n).pipe(s).pipe(o).pipe(r.outputStream,{end:!1}),o.on("end",function(){if(e.crc32=i.crc32,e.uncompressedSize==null)e.uncompressedSize=n.byteCount;else if(e.uncompressedSize!==n.byteCount)return r.emit("error",new Error("file data stream has unexpected number of bytes"));e.compressedSize=o.byteCount,r.outputStreamCursor+=e.compressedSize,Pn(r,e.getDataDescriptor()),e.state=He.FILE_DATA_DONE,Oi(r)})}function Oi(r){if(r.allDone)return;if(r.ended&&r.finalSizeCallback!=null){var e=Lq(r);e!=null&&(r.finalSizeCallback(e),r.finalSizeCallback=null)}var t=i();function i(){for(var s=0;s<r.entries.length;s++){var o=r.entries[s];if(o.state<He.FILE_DATA_DONE)return o}return null}if(t!=null){if(t.state<He.READY_TO_PUMP_FILE_DATA||t.state===He.FILE_DATA_IN_PROGRESS)return;t.relativeOffsetOfLocalHeader=r.outputStreamCursor;var n=t.getLocalFileHeader();Pn(r,n),t.doFileDataPump()}else r.ended&&(r.offsetOfStartOfCentralDirectory=r.outputStreamCursor,r.entries.forEach(function(s){var o=s.getCentralDirectoryRecord();Pn(r,o)}),Pn(r,qq(r)),r.outputStream.end(),r.allDone=!0)}function Lq(r){for(var e=0,t=0,i=0;i<r.entries.length;i++){var n=r.entries[i];if(n.compress)return-1;if(n.state>=He.READY_TO_PUMP_FILE_DATA){if(n.uncompressedSize==null)return-1}else if(n.uncompressedSize==null)return null;n.relativeOffsetOfLocalHeader=e;var s=n.useZip64Format();e+=Cx+n.utf8FileName.length,e+=n.uncompressedSize,n.crcAndFileSizeKnown||(s?e+=Mx:e+=Ix),t+=Fx+n.utf8FileName.length+n.fileComment.length,s&&(t+=cm)}var o=0;return(r.forceZip64Eocd||r.entries.length>=65535||t>=65535||e>=4294967295)&&(o+=Ql+am),o+=eu+r.comment.length,e+t+o}var Ql=56,am=20,eu=22;function qq(r,e){var t=!1,i=r.entries.length;(r.forceZip64Eocd||r.entries.length>=65535)&&(i=65535,t=!0);var n=r.outputStreamCursor-r.offsetOfStartOfCentralDirectory,s=n;(r.forceZip64Eocd||n>=4294967295)&&(s=4294967295,t=!0);var o=r.offsetOfStartOfCentralDirectory;if((r.forceZip64Eocd||r.offsetOfStartOfCentralDirectory>=4294967295)&&(o=4294967295,t=!0),e)return t?Ql+am+eu:eu;var l=Ut(eu+r.comment.length);if(l.writeUInt32LE(101010256,0),l.writeUInt16LE(0,4),l.writeUInt16LE(0,6),l.writeUInt16LE(i,8),l.writeUInt16LE(i,10),l.writeUInt32LE(s,12),l.writeUInt32LE(o,16),l.writeUInt16LE(r.comment.length,20),r.comment.copy(l,22),!t)return l;var u=Ut(Ql);u.writeUInt32LE(101075792,0),dr(u,Ql-12,4),u.writeUInt16LE(Px,12),u.writeUInt16LE(Ox,14),u.writeUInt32LE(0,16),u.writeUInt32LE(0,20),dr(u,r.entries.length,24),dr(u,r.entries.length,32),dr(u,n,40),dr(u,r.offsetOfStartOfCentralDirectory,48);var d=Ut(am);return d.writeUInt32LE(117853008,0),d.writeUInt32LE(0,4),dr(d,r.outputStreamCursor,8),d.writeUInt32LE(1,16),Buffer.concat([u,d,l])}function tu(r,e){if(r==="")throw new Error("empty metadataPath");if(r=r.replace(/\\/g,"/"),/^[a-zA-Z]:/.test(r)||/^\//.test(r))throw new Error("absolute path: "+r);if(r.split("/").indexOf("..")!==-1)throw new Error("invalid relative path: "+r);var t=/\/$/.test(r);if(e)t||(r+="/");else if(t)throw new Error("file path cannot end with '/': "+r);return r}var ru=Ut(0);function He(r,e,t){if(this.utf8FileName=Pi(r),this.utf8FileName.length>65535)throw new Error("utf8 file name too long. "+utf8FileName.length+" > "+65535);if(this.isDirectory=e,this.state=He.WAITING_FOR_METADATA,this.setLastModDate(t.mtime!=null?t.mtime:new Date),t.mode!=null?this.setFileAttributesMode(t.mode):this.setFileAttributesMode(e?16893:33204),e?(this.crcAndFileSizeKnown=!0,this.crc32=0,this.uncompressedSize=0,this.compressedSize=0):(this.crcAndFileSizeKnown=!1,this.crc32=null,this.uncompressedSize=null,this.compressedSize=null,t.size!=null&&(this.uncompressedSize=t.size)),e?this.compress=!1:(this.compress=!0,t.compress!=null&&(this.compress=!!t.compress)),this.forceZip64Format=!!t.forceZip64Format,t.fileComment){if(typeof t.fileComment=="string"?this.fileComment=Pi(t.fileComment,"utf-8"):this.fileComment=t.fileComment,this.fileComment.length>65535)throw new Error("fileComment is too large")}else this.fileComment=ru}He.WAITING_FOR_METADATA=0;He.READY_TO_PUMP_FILE_DATA=1;He.FILE_DATA_IN_PROGRESS=2;He.FILE_DATA_DONE=3;He.prototype.setLastModDate=function(r){var e=Rx(r);this.lastModFileTime=e.time,this.lastModFileDate=e.date};He.prototype.setFileAttributesMode=function(r){if((r&65535)!==r)throw new Error("invalid mode. expected: 0 <= "+r+" <= "+65535);this.externalFileAttributes=r<<16>>>0};He.prototype.setFileDataPumpFunction=function(r){this.doFileDataPump=r,this.state=He.READY_TO_PUMP_FILE_DATA};He.prototype.useZip64Format=function(){return this.forceZip64Format||this.uncompressedSize!=null&&this.uncompressedSize>4294967294||this.compressedSize!=null&&this.compressedSize>4294967294||this.relativeOffsetOfLocalHeader!=null&&this.relativeOffsetOfLocalHeader>4294967294};var Cx=30,kx=20,Ox=45,Px=3<<8|63,Tx=1<<11,Ax=1<<3;He.prototype.getLocalFileHeader=function(){var r=0,e=0,t=0;this.crcAndFileSizeKnown&&(r=this.crc32,e=this.compressedSize,t=this.uncompressedSize);var i=Ut(Cx),n=Tx;return this.crcAndFileSizeKnown||(n|=Ax),i.writeUInt32LE(67324752,0),i.writeUInt16LE(kx,4),i.writeUInt16LE(n,6),i.writeUInt16LE(this.getCompressionMethod(),8),i.writeUInt16LE(this.lastModFileTime,10),i.writeUInt16LE(this.lastModFileDate,12),i.writeUInt32LE(r,14),i.writeUInt32LE(e,18),i.writeUInt32LE(t,22),i.writeUInt16LE(this.utf8FileName.length,26),i.writeUInt16LE(0,28),Buffer.concat([i,this.utf8FileName])};var Ix=16,Mx=24;He.prototype.getDataDescriptor=function(){if(this.crcAndFileSizeKnown)return ru;if(this.useZip64Format()){var r=Ut(Mx);return r.writeUInt32LE(134695760,0),r.writeUInt32LE(this.crc32,4),dr(r,this.compressedSize,8),dr(r,this.uncompressedSize,16),r}else{var r=Ut(Ix);return r.writeUInt32LE(134695760,0),r.writeUInt32LE(this.crc32,4),r.writeUInt32LE(this.compressedSize,8),r.writeUInt32LE(this.uncompressedSize,12),r}};var Fx=46,cm=28;He.prototype.getCentralDirectoryRecord=function(){var r=Ut(Fx),e=Tx;this.crcAndFileSizeKnown||(e|=Ax);var t=this.compressedSize,i=this.uncompressedSize,n=this.relativeOffsetOfLocalHeader,s,o;return this.useZip64Format()?(t=4294967295,i=4294967295,n=4294967295,s=Ox,o=Ut(cm),o.writeUInt16LE(1,0),o.writeUInt16LE(cm-4,2),dr(o,this.uncompressedSize,4),dr(o,this.compressedSize,12),dr(o,this.relativeOffsetOfLocalHeader,20)):(s=kx,o=ru),r.writeUInt32LE(33639248,0),r.writeUInt16LE(Px,4),r.writeUInt16LE(s,6),r.writeUInt16LE(e,8),r.writeUInt16LE(this.getCompressionMethod(),10),r.writeUInt16LE(this.lastModFileTime,12),r.writeUInt16LE(this.lastModFileDate,14),r.writeUInt32LE(this.crc32,16),r.writeUInt32LE(t,20),r.writeUInt32LE(i,24),r.writeUInt16LE(this.utf8FileName.length,28),r.writeUInt16LE(o.length,30),r.writeUInt16LE(this.fileComment.length,32),r.writeUInt16LE(0,34),r.writeUInt16LE(0,36),r.writeUInt32LE(this.externalFileAttributes,38),r.writeUInt32LE(n,42),Buffer.concat([r,this.utf8FileName,o,this.fileComment])};He.prototype.getCompressionMethod=function(){var r=0,e=8;return this.compress?e:r};function Rx(r){var e=0;e|=r.getDate()&31,e|=(r.getMonth()+1&15)<<5,e|=(r.getFullYear()-1980&127)<<9;var t=0;return t|=Math.floor(r.getSeconds()/2),t|=(r.getMinutes()&63)<<5,t|=(r.getHours()&31)<<11,{date:e,time:t}}function dr(r,e,t){var i=Math.floor(e/4294967296),n=e%4294967296;r.writeUInt32LE(n,t),r.writeUInt32LE(i,t+4)}om.inherits(iu,Zl);function iu(r){Zl.call(this,r),this.byteCount=0}iu.prototype._transform=function(r,e,t){this.byteCount+=r.length,t(null,r)};om.inherits(lm,Zl);function lm(r){Zl.call(this,r),this.crc32=0}lm.prototype._transform=function(r,e,t){this.crc32=Sx.unsigned(r,this.crc32),t(null,r)};var um="\0\u263A\u263B\u2665\u2666\u2663\u2660\u2022\u25D8\u25CB\u25D9\u2642\u2640\u266A\u266B\u263C\u25BA\u25C4\u2195\u203C\xB6\xA7\u25AC\u21A8\u2191\u2193\u2192\u2190\u221F\u2194\u25B2\u25BC !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2302\xC7\xFC\xE9\xE2\xE4\xE0\xE5\xE7\xEA\xEB\xE8\xEF\xEE\xEC\xC4\xC5\xC9\xE6\xC6\xF4\xF6\xF2\xFB\xF9\xFF\xD6\xDC\xA2\xA3\xA5\u20A7\u0192\xE1\xED\xF3\xFA\xF1\xD1\xAA\xBA\xBF\u2310\xAC\xBD\xBC\xA1\xAB\xBB\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255D\u255C\u255B\u2510\u2514\u2534\u252C\u251C\u2500\u253C\u255E\u255F\u255A\u2554\u2569\u2566\u2560\u2550\u256C\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256B\u256A\u2518\u250C\u2588\u2584\u258C\u2590\u2580\u03B1\xDF\u0393\u03C0\u03A3\u03C3\xB5\u03C4\u03A6\u0398\u03A9\u03B4\u221E\u03C6\u03B5\u2229\u2261\xB1\u2265\u2264\u2320\u2321\xF7\u2248\xB0\u2219\xB7\u221A\u207F\xB2\u25A0\xA0";if(um.length!==256)throw new Error("assertion failure");var nu=null;function Bq(r){if(/^[\x20-\x7e]*$/.test(r))return Pi(r,"utf-8");if(nu==null){nu={};for(var e=0;e<um.length;e++)nu[um[e]]=e}for(var t=Ut(r.length),e=0;e<r.length;e++){var i=nu[r[e]];if(i==null)throw new Error("character not encodable in CP437: "+JSON.stringify(r[e]));t[e]=i}return t}function Ut(r){Ut=e;try{return Ut(r)}catch(i){return Ut=t,Ut(r)}function e(i){return Buffer.allocUnsafe(i)}function t(i){return new Buffer(i)}}function Pi(r,e){Pi=t;try{return Pi(r,e)}catch(n){return Pi=i,Pi(r,e)}function t(n,s){return Buffer.from(n,s)}function i(n,s){return new Buffer(n,s)}}function Na(r,e){Na=t;try{return Na(r,e)}catch(n){return Na=i,Na(r,e)}function t(n,s){return n.includes(s)}function i(n,s){for(var o=0;o<=n.length-s.length;o++)for(var l=0;;l++){if(l===s.length)return!0;if(n[o+l]!==s[l])break}return!1}}});var Da=v(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.Artifact=void 0;var Dx=Uq(x("fs")),Hq=G(),jq=Vt(),Wq=nt();function Uq(r){return r&&r.__esModule?r:{default:r}}var Lx=class extends Wq.SdkObject{constructor(e,t,i,n){super(e,"artifact");this._localPath=void 0,this._unaccessibleErrorMessage=void 0,this._cancelCallback=void 0,this._finishedPromise=new jq.ManualPromise,this._saveCallbacks=[],this._finished=!1,this._deleted=!1,this._failureError=null,this._localPath=t,this._unaccessibleErrorMessage=i,this._cancelCallback=n}finishedPromise(){return this._finishedPromise}localPath(){return this._localPath}localPathAfterFinished(){return c(this,null,function*(){if(this._unaccessibleErrorMessage)throw new Error(this._unaccessibleErrorMessage);return yield this._finishedPromise,this._failureError?null:this._localPath})}saveAs(e){if(this._unaccessibleErrorMessage)throw new Error(this._unaccessibleErrorMessage);if(this._deleted)throw new Error("File already deleted. Save before deleting.");if(this._failureError)throw new Error("File not found on disk. Check download.failure() for details.");if(this._finished){e(this._localPath).catch(t=>{});return}this._saveCallbacks.push(e)}failureError(){return c(this,null,function*(){return this._unaccessibleErrorMessage?this._unaccessibleErrorMessage:(yield this._finishedPromise,this._failureError)})}cancel(){return c(this,null,function*(){return(0,Hq.assert)(this._cancelCallback!==void 0),this._cancelCallback()})}delete(){return c(this,null,function*(){if(this._unaccessibleErrorMessage)return;let e=yield this.localPathAfterFinished();this._deleted||(this._deleted=!0,e&&(yield Dx.default.promises.unlink(e).catch(t=>{})))})}deleteOnContextClose(){return c(this,null,function*(){this._deleted||(this._deleted=!0,this._unaccessibleErrorMessage||(yield Dx.default.promises.unlink(this._localPath).catch(e=>{})),yield this.reportFinished("File deleted upon browser context closure."))})}reportFinished(e){return c(this,null,function*(){if(!this._finished){if(this._finished=!0,this._failureError=e||null,e)for(let t of this._saveCallbacks)yield t("",e);else for(let t of this._saveCallbacks)yield t(this._localPath);this._saveCallbacks=[],this._finishedPromise.resolve()}})}};su.Artifact=Lx});var qx=v(hm=>{"use strict";Object.defineProperty(hm,"__esModule",{value:!0});hm.frameSnapshotStreamer=$q;function $q(r){if(window[r])return;let e="__playwright_shadow_root_",t="__playwright_scroll_top_",i="__playwright_scroll_left_",n="__playwright_style_sheet_",s="http://playwright.bloburl/#",o=Symbol("__playwright_snapshot_frameid_"),l=Symbol("__playwright_snapshot_cache_"),u=Symbol("__playwright_end_of_list_");function d(m){delete m[l]}function h(m){return m[l]||(m[l]={}),m[l]}function p(m){try{let _=new URL(m);return _.hash="",_.toString()}catch(_){return m}}class f{constructor(){this._removeNoScript=!0,this._lastSnapshotNumber=0,this._staleStyleSheets=new Set,this._readingStyleSheet=!1,this._fakeBase=void 0,this._observer=void 0,this._interceptNativeMethod(window.CSSStyleSheet.prototype,"insertRule",g=>this._invalidateStyleSheet(g)),this._interceptNativeMethod(window.CSSStyleSheet.prototype,"deleteRule",g=>this._invalidateStyleSheet(g)),this._interceptNativeMethod(window.CSSStyleSheet.prototype,"addRule",g=>this._invalidateStyleSheet(g)),this._interceptNativeMethod(window.CSSStyleSheet.prototype,"removeRule",g=>this._invalidateStyleSheet(g)),this._interceptNativeGetter(window.CSSStyleSheet.prototype,"rules",g=>this._invalidateStyleSheet(g)),this._interceptNativeGetter(window.CSSStyleSheet.prototype,"cssRules",g=>this._invalidateStyleSheet(g)),this._interceptNativeMethod(window.CSSStyleSheet.prototype,"replaceSync",g=>this._invalidateStyleSheet(g)),this._interceptNativeAsyncMethod(window.CSSStyleSheet.prototype,"replace",g=>this._invalidateStyleSheet(g)),this._fakeBase=document.createElement("base"),this._observer=new MutationObserver(g=>this._handleMutations(g));let _={attributes:!0,subtree:!0};this._observer.observe(document,_)}_interceptNativeMethod(_,g,w){let b=_[g];!b||(_[g]=function(...C){let E=b.call(this,...C);return w(this,E),E})}_interceptNativeAsyncMethod(_,g,w){let b=_[g];!b||(_[g]=function(...C){return c(this,null,function*(){let E=yield b.call(this,...C);return w(this,E),E})})}_interceptNativeGetter(_,g,w){let b=Object.getOwnPropertyDescriptor(_,g);Object.defineProperty(_,g,R(y({},b),{get:function(){let C=b.get.call(this);return w(this,C),C}}))}_handleMutations(_){for(let g of _)h(g.target).attributesCached=void 0}_invalidateStyleSheet(_){this._readingStyleSheet||this._staleStyleSheets.add(_)}_updateStyleElementStyleSheetTextIfNeeded(_,g){let w=h(_);if(this._staleStyleSheets.has(_)||g&&w.cssText===void 0){this._staleStyleSheets.delete(_);try{w.cssText=this._getSheetText(_)}catch(b){w.cssText=""}}return w.cssText}_updateLinkStyleSheetTextIfNeeded(_,g){let w=h(_);if(this._staleStyleSheets.has(_)){this._staleStyleSheets.delete(_);try{return w.cssText=this._getSheetText(_),w.cssRef=g,w.cssText}catch(b){}}return w.cssRef===void 0?void 0:g-w.cssRef}markIframe(_,g){_[o]=g}reset(){this._staleStyleSheets.clear();let _=g=>{if(d(g),g.nodeType===Node.ELEMENT_NODE){let w=g;w.shadowRoot&&_(w.shadowRoot)}for(let w=g.firstChild;w;w=w.nextSibling)_(w)};_(document.documentElement),_(this._fakeBase)}_sanitizeUrl(_){return _.startsWith("javascript:")?"":_.startsWith("blob:")?s+_:_}_sanitizeSrcSet(_){return _.split(",").map(g=>{g=g.trim();let w=g.lastIndexOf(" ");return w===-1?this._sanitizeUrl(g):this._sanitizeUrl(g.substring(0,w).trim())+g.substring(w)}).join(", ")}_resolveUrl(_,g){if(g==="")return"";try{return new URL(g,_).href}catch(w){return g}}_getSheetBase(_){let g=_;for(;g.parentStyleSheet;)g=g.parentStyleSheet;return g.ownerNode?g.ownerNode.baseURI:document.baseURI}_getSheetText(_){this._readingStyleSheet=!0;try{let g=[];for(let w of _.cssRules)g.push(w.cssText);return g.join(`
`)}finally{this._readingStyleSheet=!1}}captureSnapshot(){let _=performance.now(),g=++this._lastSnapshotNumber,w=0,b=0;this._handleMutations(this._observer.takeRecords());let C=L=>{let S=L.nodeType,T=S===Node.DOCUMENT_FRAGMENT_NODE?"template":L.nodeName;if(S!==Node.ELEMENT_NODE&&S!==Node.DOCUMENT_FRAGMENT_NODE&&S!==Node.TEXT_NODE||T==="SCRIPT"||this._removeNoScript&&T==="NOSCRIPT"||T==="META"&&L.httpEquiv.toLowerCase()==="content-security-policy")return;let F=h(L),q=[],z=!!F.cached,Y=0,I=W=>{z=z&&F.cached[q.length]===W,q.push(W)},Z=W=>(F.attributesCached=!0,z?{equals:!0,n:[[g-F.ref[0],F.ref[1]]]}:(w+=Y,F.ref=[g,w++],F.cached=q,{equals:!1,n:W}));if(S===Node.TEXT_NODE){let W=L.nodeValue||"";return I(W),Z(W)}if(T==="STYLE"){let W=L.sheet,ee;return W&&(ee=this._updateStyleElementStyleSheetTextIfNeeded(W)),ee=ee||L.textContent||"",I(ee),Y++,Z(["style",{},ee])}let j={},H=[T,j],pe=W=>{let ee=C(W);ee&&(H.push(ee.n),I(W),z=z&&ee.equals)},ie=W=>{let ee=E(W);ee&&(H.push(ee.n),I(W),z=z&&ee.equals)};if(S===Node.DOCUMENT_FRAGMENT_NODE&&(j[e]="open"),S===Node.ELEMENT_NODE){let W=L;if(T==="INPUT"){let ee=W.value;I("value"),I(ee),j.value=ee,W.checked&&(I("checked"),j.checked="")}W.scrollTop&&(I(t),I(W.scrollTop),j[t]=""+W.scrollTop),W.scrollLeft&&(I(i),I(W.scrollLeft),j[i]=""+W.scrollLeft),W.shadowRoot&&(++b,pe(W.shadowRoot),--b)}if(T==="TEXTAREA"){let W=L.value;I(W),Y++,H.push(W)}else{T==="HEAD"&&(this._fakeBase.setAttribute("href",document.baseURI),pe(this._fakeBase));for(let ee=L.firstChild;ee;ee=ee.nextSibling)pe(ee);I(u);let W=null;if(L.ownerDocument.documentElement===L?W=L.ownerDocument:L.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(W=L),W){for(let ee of W.adoptedStyleSheets||[])ie(ee);I(u)}}if(T==="IFRAME"||T==="FRAME"){let ee=L[o],ae="src",re=ee?`/snapshot/${ee}`:"";I(ae),I(re),j[ae]=re}if(z&&F.attributesCached&&!b)return Z(H);if(S===Node.ELEMENT_NODE){let W=L;for(let ee=0;ee<W.attributes.length;ee++){let ae=W.attributes[ee].name;if(ae==="value"&&(T==="INPUT"||T==="TEXTAREA")||T==="LINK"&&ae==="integrity"||T==="IFRAME"&&ae==="src")continue;let re=W.attributes[ee].value;ae==="src"&&T==="IMG"?re=this._sanitizeUrl(re):ae==="srcset"&&T==="IMG"?re=this._sanitizeSrcSet(re):ae==="srcset"&&T==="SOURCE"?re=this._sanitizeSrcSet(re):ae==="href"&&T==="LINK"?re=this._sanitizeUrl(re):ae.startsWith("on")&&(re=""),I(ae),I(re),j[ae]=re}I(u)}return H.length===2&&!Object.keys(j).length&&H.pop(),Z(H)},E=L=>{let S=h(L),T=S.cssText,F=this._updateStyleElementStyleSheetTextIfNeeded(L,!0);return F===T?{equals:!0,n:[[g-S.ref[0],S.ref[1]]]}:(S.ref=[g,w++],{equals:!1,n:["template",{[n]:F}]})},N;if(document.documentElement){let{n:L}=C(document.documentElement);N=L}else N=["html"];let P={html:N,doctype:document.doctype?document.doctype.name:void 0,resourceOverrides:[],viewport:{width:window.innerWidth,height:window.innerHeight},url:location.href,timestamp:_,collectionTime:0};for(let L of this._staleStyleSheets){if(L.href===null)continue;let S=this._updateLinkStyleSheetTextIfNeeded(L,g);if(S===void 0)continue;let T=this._getSheetBase(L),F=p(this._resolveUrl(T,L.href));P.resourceOverrides.push({url:F,content:S,contentType:"text/css"})}return P.collectionTime=performance.now()-P.timestamp,P}}window[r]=new f}});var Wx=v(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.Snapshotter=void 0;var zq=gt(),Vq=Ot(),pm=_t(),Bx=Xe(),Gq=qx(),fm=G(),Kq=Jq(bi());function Hx(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(Hx=function(i){return i?t:e})(r)}function Jq(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=Hx(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var jx=class{constructor(e,t){this._context=void 0,this._delegate=void 0,this._eventListeners=[],this._snapshotStreamer=void 0,this._initialized=!1,this._started=!1,this._context=e,this._delegate=t;let i=(0,fm.createGuid)();this._snapshotStreamer="__playwright_snapshot_streamer_"+i}started(){return this._started}start(){return c(this,null,function*(){this._started=!0,this._initialized||(this._initialized=!0,yield this._initialize()),yield this.reset()})}reset(){return c(this,null,function*(){this._started&&(yield this._runInAllFrames(`window["${this._snapshotStreamer}"].reset()`))})}stop(){return c(this,null,function*(){this._started=!1})}_initialize(){return c(this,null,function*(){for(let t of this._context.pages())this._onPage(t);this._eventListeners=[pm.eventsHelper.addEventListener(this._context,zq.BrowserContext.Events.Page,this._onPage.bind(this))];let e=`(${Gq.frameSnapshotStreamer})("${this._snapshotStreamer}")`;yield this._context._doAddInitScript(e),yield this._runInAllFrames(e)})}_runInAllFrames(e){return c(this,null,function*(){let t=[];for(let i of this._context.pages())t.push(...i.frames());yield Promise.all(t.map(i=>i.nonStallingRawEvaluateInExistingMainContext(e).catch(n=>Bx.debugLogger.log("error",n))))})}dispose(){pm.eventsHelper.removeEventListeners(this._eventListeners)}captureSnapshot(e,t,i){return c(this,null,function*(){let n=`window["${this._snapshotStreamer}"].captureSnapshot(${JSON.stringify(t)})`;i==null||i.callFunctionNoReply((o,l)=>{o.setAttribute("__playwright_target__",l)},t);let s=e.frames().map(o=>c(this,null,function*(){let l=yield o.nonStallingRawEvaluateInExistingMainContext(n).catch(d=>Bx.debugLogger.log("error",d));if(!l||!this._started)return;let u={snapshotName:t,pageId:e.guid,frameId:o.guid,frameUrl:l.url,doctype:l.doctype,html:l.html,viewport:l.viewport,timestamp:(0,fm.monotonicTime)(),collectionTime:l.collectionTime,resourceOverrides:[],isMainFrame:e.mainFrame()===o};for(let{url:d,content:h,contentType:p}of l.resourceOverrides)if(typeof h=="string"){let f=Buffer.from(h),m=(0,fm.calculateSha1)(f)+"."+(Kq.getExtension(p)||"dat");this._delegate.onSnapshotterBlob({sha1:m,buffer:f}),u.resourceOverrides.push({url:d,sha1:m})}else u.resourceOverrides.push({url:d,ref:h});this._delegate.onFrameSnapshot(u)}));yield Promise.all(s)})}_onPage(e){for(let t of e.frames())this._annotateFrameHierarchy(t);this._eventListeners.push(pm.eventsHelper.addEventListener(e,Vq.Page.Events.FrameAttached,t=>this._annotateFrameHierarchy(t)))}_annotateFrameHierarchy(e){return c(this,null,function*(){try{let t=yield e.frameElement(),i=e.parentFrame();if(!i)return;let n=yield i._mainContext();yield n==null?void 0:n.evaluate(({snapshotStreamer:s,frameElement:o,frameId:l})=>{window[s].markIframe(o,l)},{snapshotStreamer:this._snapshotStreamer,frameElement:t,frameId:e.guid}),t.dispose()}catch(t){}})}};ou.Snapshotter=jx});var _m=v(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.HarTracer=void 0;var au=gt(),La=Mt(),Xq=Vx(jt()),Ux=Ot(),mm=G(),qa=_t(),$x=Vx(bi()),Yq=Vt();function zx(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(zx=function(i){return i?t:e})(r)}function Vx(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=zx(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var Gx="HTTP/1.1",Kx=class{constructor(e,t,i){this._context=void 0,this._barrierPromises=new Set,this._delegate=void 0,this._options=void 0,this._pageEntries=new Map,this._eventListeners=[],this._started=!1,this._entrySymbol=void 0,this._context=e,this._delegate=t,this._options=i,this._entrySymbol=Symbol("requestHarEntry")}start(){this._started||(this._started=!0,this._eventListeners=[qa.eventsHelper.addEventListener(this._context,au.BrowserContext.Events.Page,e=>this._ensurePageEntry(e)),qa.eventsHelper.addEventListener(this._context,au.BrowserContext.Events.Request,e=>this._onRequest(e)),qa.eventsHelper.addEventListener(this._context,au.BrowserContext.Events.RequestFinished,({request:e,response:t})=>this._onRequestFinished(e,t).catch(()=>{})),qa.eventsHelper.addEventListener(this._context,au.BrowserContext.Events.Response,e=>this._onResponse(e))])}_entryForRequest(e){return e[this._entrySymbol]}_ensurePageEntry(e){let t=this._pageEntries.get(e);return t||(e.on(Ux.Page.Events.DOMContentLoaded,()=>this._onDOMContentLoaded(e)),e.on(Ux.Page.Events.Load,()=>this._onLoad(e)),t={startedDateTime:new Date,id:e.guid,title:"",pageTimings:{onContentLoad:-1,onLoad:-1}},this._pageEntries.set(e,t)),t}_onDOMContentLoaded(e){let t=this._ensurePageEntry(e),i=e.mainFrame().evaluateExpression(String(()=>({title:document.title,domContentLoaded:performance.timing.domContentLoadedEventStart})),!0,void 0,"utility").then(n=>{t.title=n.title,t.pageTimings.onContentLoad=n.domContentLoaded}).catch(()=>{});this._addBarrier(e,i)}_onLoad(e){let t=this._ensurePageEntry(e),i=e.mainFrame().evaluateExpression(String(()=>({title:document.title,loaded:performance.timing.loadEventStart})),!0,void 0,"utility").then(n=>{t.title=n.title,t.pageTimings.onLoad=n.loaded}).catch(()=>{});this._addBarrier(e,i)}_addBarrier(e,t){if(!this._options.waitForContentOnStop)return;let i=Promise.race([new Promise(n=>e.on("close",()=>{this._barrierPromises.delete(i),n()})),t]);this._barrierPromises.add(i)}_onRequest(e){let t=e.frame()._page,i=Xq.parsedURL(e.url());if(!i)return;let s={pageref:this._ensurePageEntry(t).id,_requestref:e.guid,_frameref:e.frame().guid,_monotonicTime:(0,mm.monotonicTime)(),startedDateTime:new Date,time:-1,request:{method:e.method(),url:e.url(),httpVersion:Gx,cookies:[],headers:[],queryString:[...i.searchParams].map(o=>({name:o[0],value:o[1]})),postData:Jx(e,this._options.content),headersSize:-1,bodySize:e.bodySize()},response:{status:-1,statusText:"",httpVersion:Gx,cookies:[],headers:[],content:{size:-1,mimeType:e.headerValue("content-type")||"x-unknown"},headersSize:-1,bodySize:-1,redirectURL:"",_transferSize:-1},cache:{beforeRequest:null,afterRequest:null},timings:{send:-1,wait:-1,receive:-1}};if(e.redirectedFrom()){let o=this._entryForRequest(e.redirectedFrom());o&&(o.response.redirectURL=e.url())}e[this._entrySymbol]=s,this._started&&this._delegate.onEntryStarted(s)}_onRequestFinished(e,t){return c(this,null,function*(){if(!t)return;let i=e.frame()._page,n=this._entryForRequest(e);if(!n)return;let s=t.httpVersion();n.request.httpVersion=s,n.response.httpVersion=s;let o={_encodedBodySize:-1,_decodedBodySize:-1,barrier:new Yq.ManualPromise,_check:function(){this._encodedBodySize!==-1&&this._decodedBodySize!==-1&&(n.response.content.compression=Math.max(0,this._decodedBodySize-this._encodedBodySize),this.barrier.resolve())},setEncodedBodySize:function(u){this._encodedBodySize=u,this._check()},setDecodedBodySize:function(u){this._decodedBodySize=u,this._check()}};this._addBarrier(i,o.barrier);let l=t.body().then(u=>{if(this._options.skipScripts&&e.resourceType()==="script"){o.setDecodedBodySize(0);return}let d=n.response.content;d.size=u.length,o.setDecodedBodySize(u.length),u&&u.length>0&&(this._options.content==="embedded"?(d.text=u.toString("base64"),d.encoding="base64"):this._options.content==="sha1"&&(d._sha1=(0,mm.calculateSha1)(u)+"."+($x.getExtension(d.mimeType)||"dat"),this._started&&this._delegate.onContentBlob(d._sha1,u)))}).catch(()=>{o.setDecodedBodySize(0)}).then(()=>{let u=t.request().postDataBuffer();u&&n.request.postData&&this._options.content==="sha1"&&(n.request.postData._sha1=(0,mm.calculateSha1)(u)+"."+($x.getExtension(n.request.postData.mimeType)||"dat"),this._started&&this._delegate.onContentBlob(n.request.postData._sha1,u)),this._started&&this._delegate.onEntryFinished(n)});this._addBarrier(i,l),this._addBarrier(i,t.sizes().then(u=>{n.response.bodySize=u.responseBodySize,n.response.headersSize=u.responseHeadersSize,n.response._transferSize=t.request().responseSize.transferSize||u.responseHeadersSize+u.responseBodySize,n.request.headersSize=u.requestHeadersSize,o.setEncodedBodySize(u.responseBodySize)}))})}_onResponse(e){let t=e.frame()._page,i=this._ensurePageEntry(t),n=this._entryForRequest(e.request());if(!n)return;let s=e.request();n.request.postData=Jx(s,this._options.content),n.response={status:e.status(),statusText:e.statusText(),httpVersion:e.httpVersion(),cookies:[],headers:[],content:{size:-1,mimeType:"x-unknown"},headersSize:-1,bodySize:-1,redirectURL:"",_transferSize:-1};let o=e.timing();i.startedDateTime.valueOf()>o.startTime&&(i.startedDateTime=new Date(o.startTime));let l=o.domainLookupEnd!==-1?La.helper.millisToRoundishMillis(o.domainLookupEnd-o.domainLookupStart):-1,u=o.connectEnd!==-1?La.helper.millisToRoundishMillis(o.connectEnd-o.connectStart):-1,d=o.connectEnd!==-1?La.helper.millisToRoundishMillis(o.connectEnd-o.secureConnectionStart):-1,h=o.responseStart!==-1?La.helper.millisToRoundishMillis(o.responseStart-o.requestStart):-1,p=e.request()._responseEndTiming!==-1?La.helper.millisToRoundishMillis(e.request()._responseEndTiming-o.responseStart):-1;n.timings={dns:l,connect:u,ssl:d,send:0,wait:h,receive:p},n.time=[l,u,d,h,p].reduce((f,m)=>m>0?m+f:f,0),this._addBarrier(t,e.serverAddr().then(f=>{f!=null&&f.ipAddress&&(n.serverIPAddress=f.ipAddress),f!=null&&f.port&&(n._serverPort=f.port)})),this._addBarrier(t,e.securityDetails().then(f=>{f&&(n._securityDetails=f)})),this._addBarrier(t,s.rawRequestHeaders().then(f=>{for(let m of f.filter(_=>_.name.toLowerCase()==="cookie"))n.request.cookies.push(...m.value.split(";").map(Xx));n.request.headers=f})),this._addBarrier(t,e.rawResponseHeaders().then(f=>{for(let _ of f.filter(g=>g.name.toLowerCase()==="set-cookie"))n.response.cookies.push(Xx(_.value));n.response.headers=f;let m=f.find(_=>_.name.toLowerCase()==="content-type");m&&(n.response.content.mimeType=m.value)}))}flush(){return c(this,null,function*(){yield Promise.all(this._barrierPromises)})}stop(){this._started=!1,qa.eventsHelper.removeEventListeners(this._eventListeners),this._barrierPromises.clear();let e={version:"1.2",creator:{name:"Playwright",version:Kp().version},browser:{name:this._context._browser.options.name,version:this._context._browser.version()},pages:Array.from(this._pageEntries.values()),entries:[]};for(let t of e.pages)t.pageTimings.onContentLoad>=0?t.pageTimings.onContentLoad-=t.startedDateTime.valueOf():t.pageTimings.onContentLoad=-1,t.pageTimings.onLoad>=0?t.pageTimings.onLoad-=t.startedDateTime.valueOf():t.pageTimings.onLoad=-1;return this._pageEntries.clear(),e}};cu.HarTracer=Kx;function Jx(r,e){let t=r.postDataBuffer();if(!t)return;let i=r.headerValue("content-type")||"application/octet-stream",n={mimeType:i,text:"",params:[]};if(e==="embedded"&&i!=="application/octet-stream"&&(n.text=t.toString()),i==="application/x-www-form-urlencoded"){let s=new URLSearchParams(t.toString());for(let[o,l]of s.entries())n.params.push({name:o,value:l})}return n}function Xx(r){let e={name:"",value:""},t=!0;for(let i of r.split(/; */)){let n=i.indexOf("="),s=n!==-1?i.substr(0,n).trim():i.trim(),o=n!==-1?i.substr(n+1,i.length).trim():"";if(t){t=!1,e.name=s,e.value=o;continue}s==="Domain"&&(e.domain=o),s==="Expires"&&(e.expires=new Date(o)),s==="HttpOnly"&&(e.httpOnly=!0),s==="Max-Age"&&(e.expires=new Date(Date.now()+ +o*1e3)),s==="Path"&&(e.path=o),s==="SameSite"&&(e.sameSite=o),s==="Secure"&&(e.secure=!0)}return e}});var Yx=v(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.VERSION=void 0;var Zq=3;lu.VERSION=Zq});var eS=v(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.shouldCaptureSnapshot=Qx;Ba.Tracing=void 0;var Ti=vm(x("fs")),Tn=vm(x("path")),Qq=vm(Nx()),gm=G(),eB=Da(),tB=gt(),rB=Is(),wm=_t(),iB=Ot(),nB=em(),sB=Wx(),oB=_m(),aB=Yx();function vm(r){return r&&r.__esModule?r:{default:r}}var cB={width:800,height:600,quality:90},Zx=class{constructor(e){this._writeChain=Promise.resolve(),this._snapshotter=void 0,this._harTracer=void 0,this._screencastListeners=[],this._pendingCalls=new Map,this._context=void 0,this._resourcesDir=void 0,this._state=void 0,this._isStopping=!1,this._tracesDir=void 0,this._allResources=new Set,this._contextCreatedEvent=void 0,this._context=e,this._tracesDir=e._browser.options.tracesDir,this._resourcesDir=Tn.default.join(this._tracesDir,"resources"),this._snapshotter=new sB.Snapshotter(e,this),this._harTracer=new oB.HarTracer(e,this,{content:"sha1",waitForContentOnStop:!1,skipScripts:!0}),this._contextCreatedEvent={version:aB.VERSION,type:"context-options",browserName:this._context._browser.options.name,options:this._context._options}}start(e){if(this._isStopping)throw new Error("Cannot start tracing while stopping");if(this._state){let s=this._state.options;if(s.name!==e.name||!s.screenshots!=!e.screenshots||!s.snapshots!=!e.snapshots)throw new Error("Tracing has been already started with different options");return}let t=e.name||(0,gm.createGuid)(),i=Tn.default.join(this._tracesDir,t+".trace"),n=Tn.default.join(this._tracesDir,t+".network");this._state={options:e,traceName:t,traceFile:i,networkFile:n,filesCount:0,sha1s:new Set,recording:!1},this._writeChain=Ti.default.promises.mkdir(this._resourcesDir,{recursive:!0}).then(()=>Ti.default.promises.writeFile(n,"")),e.snapshots&&this._harTracer.start()}startChunk(){return c(this,null,function*(){if(this._state&&this._state.recording&&(yield this.stopChunk(!1)),!this._state)throw new Error("Must start tracing before starting a new chunk");if(this._isStopping)throw new Error("Cannot start a trace chunk while stopping");let e=this._state,t=e.filesCount?`-${e.filesCount}`:"";e.filesCount++,e.traceFile=Tn.default.join(this._tracesDir,`${e.traceName}${t}.trace`),e.recording=!0,this._appendTraceOperation(()=>c(this,null,function*(){yield(0,gm.mkdirIfNeeded)(e.traceFile),yield Ti.default.promises.appendFile(e.traceFile,JSON.stringify(this._contextCreatedEvent)+`
`)})),this._context.instrumentation.addListener(this),e.options.screenshots&&this._startScreencast(),e.options.snapshots&&(yield this._snapshotter.start())})}_startScreencast(){for(let e of this._context.pages())this._startScreencastInPage(e);this._screencastListeners.push(wm.eventsHelper.addEventListener(this._context,tB.BrowserContext.Events.Page,this._startScreencastInPage.bind(this)))}_stopScreencast(){wm.eventsHelper.removeEventListeners(this._screencastListeners);for(let e of this._context.pages())e.setScreencastOptions(null)}stop(){return c(this,null,function*(){if(!!this._state){if(this._isStopping)throw new Error("Tracing is already stopping");if(this._state.recording)throw new Error("Must stop trace file before stopping tracing");this._harTracer.stop(),yield this._writeChain,this._state=void 0}})}dispose(){return c(this,null,function*(){this._snapshotter.dispose(),yield this._writeChain})}stopChunk(e){return c(this,null,function*(){if(this._isStopping)throw new Error("Tracing is already stopping");this._isStopping=!0;for(let{sdkObject:i,metadata:n,beforeSnapshot:s,actionSnapshot:o,afterSnapshot:l}of this._pendingCalls.values()){yield Promise.all([s,o,l]);let u=n;l||(u=R(y({},n),{error:{error:{name:"Error",message:"Action was interrupted"}}})),yield this.onAfterCall(i,u)}if(!this._state||!this._state.recording){if(this._isStopping=!1,e)throw new Error("Must start tracing before stopping");return null}let t=this._state;return this._context.instrumentation.removeListener(this),t.options.screenshots&&this._stopScreencast(),t.options.snapshots&&(yield this._snapshotter.stop()),yield this._appendTraceOperation(()=>c(this,null,function*(){return(e?this._export(t):Promise.resolve(null)).finally(()=>c(this,null,function*(){this._isStopping=!1,t.recording=!1}))}))})}_export(e){return c(this,null,function*(){let t=new Qq.default.ZipFile,i=new Promise((s,o)=>t.on("error",o)),n=new Promise(s=>{t.addFile(e.traceFile,"trace.trace"),t.addFile(e.networkFile,"trace.network");let o=e.traceFile+".zip";for(let l of e.sha1s)t.addFile(Tn.default.join(this._resourcesDir,l),Tn.default.join("resources",l));t.end(),t.outputStream.pipe(Ti.default.createWriteStream(o)).on("close",()=>{let l=new eB.Artifact(this._context,o);l.reportFinished(),s(l)})});return Promise.race([i,n])})}_captureSnapshot(e,t,i,n){return c(this,null,function*(){if(!t.attribution.page||!this._snapshotter.started()||!Qx(i))return;let s=`${e}@${i.id}`;i.snapshots.push({title:e,snapshotName:s}),!n&&t instanceof rB.ElementHandle&&(n=t),yield this._snapshotter.captureSnapshot(t.attribution.page,s,n).catch(()=>{})})}onBeforeCall(e,t){return c(this,null,function*(){t.afterSnapshot=`after@${t.id}`;let i=this._captureSnapshot("before",e,t);this._pendingCalls.set(t.id,{sdkObject:e,metadata:t,beforeSnapshot:i}),yield i})}onBeforeInputAction(e,t,i){return c(this,null,function*(){let n=this._captureSnapshot("action",e,t,i);this._pendingCalls.get(t.id).actionSnapshot=n,yield n})}onAfterCall(e,t){return c(this,null,function*(){let i=this._pendingCalls.get(t.id);if(!i||i.afterSnapshot)return;if(!e.attribution.context){this._pendingCalls.delete(t.id);return}i.afterSnapshot=this._captureSnapshot("after",e,t),yield i.afterSnapshot;let n={type:"action",metadata:t};this._appendTraceEvent(n),this._pendingCalls.delete(t.id)})}onEvent(e,t){if(!e.attribution.context)return;let i={type:"event",metadata:t};this._appendTraceEvent(i)}onEntryStarted(e){}onEntryFinished(e){let t={type:"resource-snapshot",snapshot:e};this._appendTraceOperation(()=>c(this,null,function*(){uu(t,this._state.sha1s),yield Ti.default.promises.appendFile(this._state.networkFile,JSON.stringify(t)+`
`)}))}onContentBlob(e,t){this._appendResource(e,t)}onSnapshotterBlob(e){this._appendResource(e.sha1,e.buffer)}onFrameSnapshot(e){this._appendTraceEvent({type:"frame-snapshot",snapshot:e})}_startScreencastInPage(e){e.setScreencastOptions(cB);let t=e.guid,i=0;this._screencastListeners.push(wm.eventsHelper.addEventListener(e,iB.Page.Events.ScreencastFrame,n=>{let s=String(++i).padStart(10,"0"),o=`${t}-${s}.jpeg`,l={type:"screencast-frame",pageId:e.guid,sha1:o,width:n.width,height:n.height,timestamp:(0,gm.monotonicTime)()};this._appendResource(o,n.buffer),this._appendTraceEvent(l)}))}_appendTraceEvent(e){this._appendTraceOperation(()=>c(this,null,function*(){uu(e,this._state.sha1s),yield Ti.default.promises.appendFile(this._state.traceFile,JSON.stringify(e)+`
`)}))}_appendResource(e,t){this._allResources.has(e)||(this._allResources.add(e),this._appendTraceOperation(()=>c(this,null,function*(){let i=Tn.default.join(this._resourcesDir,e);try{yield Ti.default.promises.access(i)}catch(n){yield Ti.default.promises.writeFile(i,t).catch(()=>{})}})))}_appendTraceOperation(e){return c(this,null,function*(){let t,i;if(this._writeChain=this._writeChain.then(()=>c(this,null,function*(){try{i=yield e()}catch(n){t=n}})),yield this._writeChain,t)throw t;return i})}};Ba.Tracing=Zx;function uu(r,e){if(Array.isArray(r)){r.forEach(t=>uu(t,e));return}if(typeof r=="object"){for(let t in r){if(t==="sha1"||t==="_sha1"||t.endsWith("Sha1")){let i=r[t];i&&e.add(i)}uu(r[t],e)}return}}function Qx(r){return nB.commandsWithTracingSnapshots.has(r.type+"."+r.method)}});var rS=v(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.HarRecorder=void 0;var lB=hB(x("fs")),uB=Da(),dB=_m();function hB(r){return r&&r.__esModule?r:{default:r}}var tS=class{constructor(e,t){this._artifact=void 0,this._isFlushed=!1,this._options=void 0,this._tracer=void 0,this._entries=[],this._artifact=new uB.Artifact(e,t.path),this._options=t,this._tracer=new dB.HarTracer(e,this,{content:t.omitContent?"omit":"embedded",waitForContentOnStop:!0,skipScripts:!1}),this._tracer.start()}onEntryStarted(e){this._entries.push(e)}onEntryFinished(e){}onContentBlob(e,t){}flush(){return c(this,null,function*(){if(this._isFlushed)return;this._isFlushed=!0,yield this._tracer.flush();let e=this._tracer.stop();e.entries=this._entries,yield lB.default.promises.writeFile(this._options.path,JSON.stringify({log:e},void 0,2))})}export(){return c(this,null,function*(){return yield this.flush(),this._artifact.reportFinished(),this._artifact})}};du.HarRecorder=tS});var An=v(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});Bs.toClickOptions=pB;Bs.toModifiers=iS;Bs.describeFrame=fB;Bs.escapeWithQuotes=mB;function pB(r){let e="click";r.clickCount===2&&(e="dblclick");let t=iS(r.modifiers),i={};return r.button!=="left"&&(i.button=r.button),t.length&&(i.modifiers=t),r.clickCount>2&&(i.clickCount=r.clickCount),r.position&&(i.position=r.position),{method:e,options:i}}function iS(r){let e=[];return r&1&&e.push("Alt"),r&2&&e.push("Control"),r&4&&e.push("Meta"),r&8&&e.push("Shift"),e}function fB(r){let e=r._page;if(e.mainFrame()===r)return{isMainFrame:!0,frameUrl:r.url()};let t=e.frames().filter(i=>i.name()===r.name());return t.length===1&&t[0]===r?{isMainFrame:!1,frameUrl:r.url(),frameName:r.name()}:{isMainFrame:!1,frameUrl:r.url()}}function mB(r,e="'"){let t=JSON.stringify(r),i=t.substring(1,t.length-1).replace(/\\"/g,'"');if(e==="'")return e+i.replace(/[']/g,"\\'")+e;if(e==='"')return e+i.replace(/["]/g,'\\"')+e;if(e==="`")return e+i.replace(/[`]/g,"`")+e;throw new Error("Invalid escape char")}});var sS=v(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});hu.CodeGenerator=void 0;var _B=x("events"),gB=An(),nS=class extends _B.EventEmitter{constructor(e,t,i,n,s,o){super();this._currentAction=null,this._lastAction=null,this._actions=[],this._enabled=void 0,this._options=void 0,i=y({headless:!1},i),n=y({},n),this._enabled=t,this._options={browserName:e,generateHeaders:t,launchOptions:i,contextOptions:n,deviceName:s,saveStorage:o},this.restart()}restart(){this._currentAction=null,this._lastAction=null,this._actions=[],this.emit("change")}setEnabled(e){this._enabled=e}addAction(e){!this._enabled||(this.willPerformAction(e),this.didPerformAction(e))}willPerformAction(e){!this._enabled||(this._currentAction=e)}performedActionFailed(e){!this._enabled||this._currentAction===e&&(this._currentAction=null)}didPerformAction(e){if(!this._enabled)return;let{action:t,pageAlias:i}=e,n=!1;if(this._lastAction&&this._lastAction.pageAlias===i){let{action:s}=this._lastAction;if(this._lastAction&&t.name==="fill"&&s.name==="fill"&&t.selector===s.selector&&(n=!0),s&&t.name==="click"&&s.name==="click"&&t.selector===s.selector&&t.clickCount>s.clickCount&&(n=!0),s&&t.name==="navigate"&&s.name==="navigate"&&t.url===s.url){this._currentAction=null;return}s&&(t.name==="check"||t.name==="uncheck")&&s.name==="click"&&t.selector===s.selector&&(n=!0)}this._lastAction=e,this._currentAction=null,n&&this._actions.pop(),this._actions.push(e),this.emit("change")}commitLastAction(){if(!this._enabled)return;let e=this._lastAction;e&&(e.committed=!0)}signal(e,t,i){if(!!this._enabled){if(i.name==="download"&&(this._options.contextOptions.acceptDownloads=!0),this._currentAction){this._currentAction.action.signals.push(i);return}if(this._lastAction&&!this._lastAction.committed){let n=this._lastAction.action.signals;if(i.name==="navigation"&&n.length&&n[n.length-1].name==="download")return;i.name==="download"&&n.length&&n[n.length-1].name==="navigation"&&(n.length=n.length-1),i.isAsync=!0,this._lastAction.action.signals.push(i),this.emit("change");return}i.name==="navigation"&&this.addAction(R(y({pageAlias:e},(0,gB.describeFrame)(t)),{committed:!0,action:{name:"navigate",url:t.url(),signals:[]}}))}}generateText(e){let t=[];this._options.generateHeaders&&t.push(e.generateHeader(this._options));for(let i of this._actions){let n=e.generateAction(i);n&&t.push(n)}return this._options.generateHeaders&&t.push(e.generateFooter(this._options.saveStorage)),t.join(`
`)}};hu.CodeGenerator=nS});var Ha=v(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});pu.sanitizeDeviceOptions=wB;pu.toSignalMap=vB;function wB(r,e){let t={};for(let i in e)JSON.stringify(r[i])!==JSON.stringify(e[i])&&(t[i]=e[i]);return t}function vB(r){let e,t,i,n,s;for(let o of r.signals)o.name==="navigation"&&o.isAsync?e=o:o.name==="navigation"&&!o.isAsync?t=o:o.name==="popup"?i=o:o.name==="download"?n=o:o.name==="dialog"&&(s=o);return{waitForNavigation:e,assertNavigation:t,popup:i,download:n,dialog:s}}});var ja=v(ym=>{"use strict";Object.defineProperty(ym,"__esModule",{value:!0});ym.actionTitle=yB;function yB(r){switch(r.name){case"openPage":return"Open new page";case"closePage":return"Close page";case"check":return`Check ${r.selector}`;case"uncheck":return`Uncheck ${r.selector}`;case"click":return r.clickCount===1?`Click ${r.selector}`:r.clickCount===2?`Double click ${r.selector}`:r.clickCount===3?`Triple click ${r.selector}`:`${r.clickCount}\xD7 click`;case"fill":return`Fill ${r.selector}`;case"setInputFiles":return r.files.length===0?"Clear selected files":`Upload ${r.files.join(", ")}`;case"navigate":return`Go to ${r.url}`;case"press":return`Press ${r.key}`+(r.modifiers?" with modifiers":"");case"select":return`Select ${r.options.join(", ")}`}}});var oS=v((S7,bB)=>{bB.exports={"Blackberry PlayBook":{userAgent:"Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.1.0; en-US) AppleWebKit/536.2+ (KHTML like Gecko) Version/15.4 Safari/536.2+",viewport:{width:600,height:1024},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Blackberry PlayBook landscape":{userAgent:"Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.1.0; en-US) AppleWebKit/536.2+ (KHTML like Gecko) Version/15.4 Safari/536.2+",viewport:{width:1024,height:600},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"BlackBerry Z30":{userAgent:"Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/15.4 Mobile Safari/537.10+",viewport:{width:360,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"BlackBerry Z30 landscape":{userAgent:"Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/15.4 Mobile Safari/537.10+",viewport:{width:640,height:360},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy Note 3":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.3; en-us; SM-N900T Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/15.4 Mobile Safari/534.30",viewport:{width:360,height:640},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy Note 3 landscape":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.3; en-us; SM-N900T Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/15.4 Mobile Safari/534.30",viewport:{width:640,height:360},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy Note II":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.1; en-us; GT-N7100 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/15.4 Mobile Safari/534.30",viewport:{width:360,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy Note II landscape":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.1; en-us; GT-N7100 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/15.4 Mobile Safari/534.30",viewport:{width:640,height:360},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy S III":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.0; en-us; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/15.4 Mobile Safari/534.30",viewport:{width:360,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy S III landscape":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.0; en-us; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/15.4 Mobile Safari/534.30",viewport:{width:640,height:360},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy S5":{userAgent:"Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:360,height:640},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy S5 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:640,height:360},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy S8":{userAgent:"Mozilla/5.0 (Linux; Android 7.0; SM-G950U Build/NRD90M) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:360,height:740},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy S8 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 7.0; SM-G950U Build/NRD90M) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:740,height:360},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy S9+":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; SM-G965U Build/R16NW) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:320,height:658},deviceScaleFactor:4.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy S9+ landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; SM-G965U Build/R16NW) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:658,height:320},deviceScaleFactor:4.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy Tab S4":{userAgent:"Mozilla/5.0 (Linux; Android 8.1.0; SM-T837A) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Safari/537.36",viewport:{width:712,height:1138},deviceScaleFactor:2.25,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy Tab S4 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.1.0; SM-T837A) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Safari/537.36",viewport:{width:1138,height:712},deviceScaleFactor:2.25,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"iPad (gen 6)":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:768,height:1024},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad (gen 6) landscape":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:1024,height:768},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad (gen 7)":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:810,height:1080},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad (gen 7) landscape":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:1080,height:810},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad Mini":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:768,height:1024},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad Mini landscape":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:1024,height:768},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad Pro 11":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:834,height:1194},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad Pro 11 landscape":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:1194,height:834},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 6":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.4 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 6 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.4 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 6 Plus":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.4 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 6 Plus landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.4 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 7":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.4 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 7 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.4 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 7 Plus":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.4 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 7 Plus landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.4 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 8":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.4 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 8 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.4 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 8 Plus":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.4 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 8 Plus landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.4 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone SE":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/15.4 Mobile/14E304 Safari/602.1",viewport:{width:320,height:568},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone SE landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/15.4 Mobile/14E304 Safari/602.1",viewport:{width:568,height:320},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone X":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.4 Mobile/15A372 Safari/604.1",viewport:{width:375,height:812},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone X landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.4 Mobile/15A372 Safari/604.1",viewport:{width:812,height:375},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone XR":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:414,height:896},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone XR landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:896,height:414},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",screen:{width:414,height:896},viewport:{width:414,height:715},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",screen:{width:414,height:896},viewport:{width:800,height:364},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 Pro":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",screen:{width:375,height:812},viewport:{width:375,height:635},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 Pro landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",screen:{width:375,height:812},viewport:{width:724,height:325},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 Pro Max":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",screen:{width:414,height:896},viewport:{width:414,height:715},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 Pro Max landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",screen:{width:414,height:896},viewport:{width:808,height:364},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 12":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",screen:{width:390,height:844},viewport:{width:390,height:664},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 12 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",screen:{width:390,height:844},viewport:{width:750,height:340},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 12 Pro":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",screen:{width:390,height:844},viewport:{width:390,height:664},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 12 Pro landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",screen:{width:390,height:844},viewport:{width:750,height:340},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 12 Pro Max":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",screen:{width:428,height:926},viewport:{width:428,height:746},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 12 Pro Max landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",screen:{width:428,height:926},viewport:{width:832,height:378},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 13":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",screen:{width:390,height:844},viewport:{width:390,height:664},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 13 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",screen:{width:390,height:844},viewport:{width:750,height:342},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 13 Pro":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",screen:{width:390,height:844},viewport:{width:390,height:664},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 13 Pro landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",screen:{width:390,height:844},viewport:{width:750,height:342},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 13 Pro Max":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",screen:{width:428,height:926},viewport:{width:428,height:746},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 13 Pro Max landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",screen:{width:428,height:926},viewport:{width:832,height:380},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 13 Mini":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",screen:{width:375,height:812},viewport:{width:375,height:629},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 13 Mini landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",screen:{width:375,height:812},viewport:{width:712,height:327},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"JioPhone 2":{userAgent:"Mozilla/5.0 (Mobile; LYF/F300B/LYF-F300B-001-01-15-130718-i;Android; rv:89.0 Gecko/48.0 Firefox/93.0 KAIOS/2.5",viewport:{width:240,height:320},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"firefox"},"JioPhone 2 landscape":{userAgent:"Mozilla/5.0 (Mobile; LYF/F300B/LYF-F300B-001-01-15-130718-i;Android; rv:89.0 Gecko/48.0 Firefox/93.0 KAIOS/2.5",viewport:{width:320,height:240},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"firefox"},"Kindle Fire HDX":{userAgent:"Mozilla/5.0 (Linux; U; en-us; KFAPWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true",viewport:{width:800,height:1280},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Kindle Fire HDX landscape":{userAgent:"Mozilla/5.0 (Linux; U; en-us; KFAPWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true",viewport:{width:1280,height:800},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"LG Optimus L70":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.4.2; en-us; LGMS323 Build/KOT49I.MS32310c) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:384,height:640},deviceScaleFactor:1.25,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"LG Optimus L70 landscape":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.4.2; en-us; LGMS323 Build/KOT49I.MS32310c) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:640,height:384},deviceScaleFactor:1.25,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Microsoft Lumia 550":{userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 550) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:640,height:360},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Microsoft Lumia 550 landscape":{userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 550) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:360,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Microsoft Lumia 950":{userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 950) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:360,height:640},deviceScaleFactor:4,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Microsoft Lumia 950 landscape":{userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 950) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:640,height:360},deviceScaleFactor:4,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 10":{userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 10 Build/MOB31T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Safari/537.36",viewport:{width:800,height:1280},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 10 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 10 Build/MOB31T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Safari/537.36",viewport:{width:1280,height:800},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 4":{userAgent:"Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:384,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 4 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:640,height:384},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 5":{userAgent:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:360,height:640},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 5 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:640,height:360},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 5X":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 5X Build/OPR4.170623.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:412,height:732},deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 5X landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 5X Build/OPR4.170623.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:732,height:412},deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 6":{userAgent:"Mozilla/5.0 (Linux; Android 7.1.1; Nexus 6 Build/N6F26U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:412,height:732},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 6 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 7.1.1; Nexus 6 Build/N6F26U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:732,height:412},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 6P":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:412,height:732},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 6P landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:732,height:412},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 7":{userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 7 Build/MOB30X) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Safari/537.36",viewport:{width:600,height:960},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 7 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 7 Build/MOB30X) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Safari/537.36",viewport:{width:960,height:600},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nokia Lumia 520":{userAgent:"Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 520)",viewport:{width:320,height:533},deviceScaleFactor:1.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nokia Lumia 520 landscape":{userAgent:"Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 520)",viewport:{width:533,height:320},deviceScaleFactor:1.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nokia N9":{userAgent:"Mozilla/5.0 (MeeGo; NokiaN9) AppleWebKit/534.13 (KHTML, like Gecko) NokiaBrowser/8.5.0 Mobile Safari/534.13",viewport:{width:480,height:854},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Nokia N9 landscape":{userAgent:"Mozilla/5.0 (MeeGo; NokiaN9) AppleWebKit/534.13 (KHTML, like Gecko) NokiaBrowser/8.5.0 Mobile Safari/534.13",viewport:{width:854,height:480},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Pixel 2":{userAgent:"Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:411,height:731},deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 2 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:731,height:411},deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 2 XL":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:411,height:823},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 2 XL landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:823,height:411},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 3":{userAgent:"Mozilla/5.0 (Linux; Android 9; Pixel 3 Build/PQ1A.181105.017.A1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:393,height:786},deviceScaleFactor:2.75,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 3 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 9; Pixel 3 Build/PQ1A.181105.017.A1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:786,height:393},deviceScaleFactor:2.75,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 4":{userAgent:"Mozilla/5.0 (Linux; Android 10; Pixel 4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:353,height:745},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 4 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 10; Pixel 4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:745,height:353},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 4a (5G)":{userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 4a (5G)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",screen:{width:412,height:892},viewport:{width:412,height:765},deviceScaleFactor:2.63,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 4a (5G) landscape":{userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 4a (5G)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",screen:{height:892,width:412},viewport:{width:840,height:312},deviceScaleFactor:2.63,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 5":{userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",screen:{width:393,height:851},viewport:{width:393,height:727},deviceScaleFactor:2.75,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 5 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",screen:{width:851,height:393},viewport:{width:802,height:293},deviceScaleFactor:2.75,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Moto G4":{userAgent:"Mozilla/5.0 (Linux; Android 7.0; Moto G (4)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:360,height:640},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Moto G4 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 7.0; Moto G (4)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Mobile Safari/537.36",viewport:{width:640,height:360},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Desktop Chrome HiDPI":{userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Safari/537.36",screen:{width:1792,height:1120},viewport:{width:1280,height:720},deviceScaleFactor:2,isMobile:!1,hasTouch:!1,defaultBrowserType:"chromium"},"Desktop Edge HiDPI":{userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Safari/537.36 Edg/97.0.4666.0",screen:{width:1792,height:1120},viewport:{width:1280,height:720},deviceScaleFactor:2,isMobile:!1,hasTouch:!1,defaultBrowserType:"chromium"},"Desktop Firefox HiDPI":{userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:90.0 Gecko/20100101 Firefox/93.0",screen:{width:1792,height:1120},viewport:{width:1280,height:720},deviceScaleFactor:2,isMobile:!1,hasTouch:!1,defaultBrowserType:"firefox"},"Desktop Safari":{userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Safari/605.1.15",screen:{width:1792,height:1120},viewport:{width:1280,height:720},deviceScaleFactor:2,isMobile:!1,hasTouch:!1,defaultBrowserType:"webkit"},"Desktop Chrome":{userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Safari/537.36",screen:{width:1920,height:1080},viewport:{width:1280,height:720},deviceScaleFactor:1,isMobile:!1,hasTouch:!1,defaultBrowserType:"chromium"},"Desktop Edge":{userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4666.0 Safari/537.36 Edg/97.0.4666.0",screen:{width:1920,height:1080},viewport:{width:1280,height:720},deviceScaleFactor:1,isMobile:!1,hasTouch:!1,defaultBrowserType:"chromium"},"Desktop Firefox":{userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:90.0 Gecko/20100101 Firefox/93.0",screen:{width:1920,height:1080},viewport:{width:1280,height:720},deviceScaleFactor:1,isMobile:!1,hasTouch:!1,defaultBrowserType:"firefox"}}});var Hs=v((E7,aS)=>{aS.exports=oS()});var Sm=v(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});js.JavaScriptFormatter=js.JavaScriptLanguageGenerator=void 0;var cS=Ha(),xB=ja(),bm=An(),SB=EB(Hs());function EB(r){return r&&r.__esModule?r:{default:r}}var lS=class{constructor(e){this.id=void 0,this.fileName=void 0,this.highlighter="javascript",this._isTest=void 0,this.id=e?"test":"javascript",this.fileName=e?"Playwright Test":"JavaScript",this._isTest=e}generateAction(e){let{action:t,pageAlias:i}=e,n=new Wa(2);if(n.newLine(),n.add("// "+(0,xB.actionTitle)(t)),t.name==="openPage")return this._isTest?"":(n.add(`const ${i} = await context.newPage();`),t.url&&t.url!=="about:blank"&&t.url!=="chrome://newtab/"&&n.add(`await ${i}.goto(${yt(t.url)});`),n.format());let s=e.isMainFrame?i:e.frameName?`${i}.frame(${Ai({name:e.frameName})})`:`${i}.frame(${Ai({url:e.frameUrl})})`,o=(0,cS.toSignalMap)(t);o.dialog&&n.add(`  ${i}.once('dialog', dialog => {
    console.log(\`Dialog message: \${dialog.message()}\`);
    dialog.dismiss().catch(() => {});
  });`);let l=o.waitForNavigation||o.popup||o.download;if(l){let p="";o.popup?p=`const [${o.popup.popupAlias}] = `:o.download&&(p="const [download] = "),n.add(`${p}await Promise.all([`)}o.popup&&n.add(`${i}.waitForEvent('popup'),`),o.waitForNavigation&&n.add(`${i}.waitForNavigation(/*{ url: ${yt(o.waitForNavigation.url)} }*/),`),o.download&&n.add(`${i}.waitForEvent('download'),`);let u=o.popup||o.waitForNavigation||o.download?"":"await ",d=this._generateActionCall(t),h=o.waitForNavigation||l?"":";";return n.add(`${u}${s}.${d}${h}`),l?n.add("]);"):o.assertNavigation&&(this._isTest?n.add(`  await expect(${i}).toHaveURL(${yt(o.assertNavigation.url)});`):n.add(`  // assert.equal(${i}.url(), ${yt(o.assertNavigation.url)});`)),n.format()}_generateActionCall(e){switch(e.name){case"openPage":throw Error("Not reached");case"closePage":return"close()";case"click":{let t="click";e.clickCount===2&&(t="dblclick");let i=(0,bm.toModifiers)(e.modifiers),n={};e.button!=="left"&&(n.button=e.button),i.length&&(n.modifiers=i),e.clickCount>2&&(n.clickCount=e.clickCount),e.position&&(n.position=e.position);let s=CB(n);return`${t}(${yt(e.selector)}${s})`}case"check":return`check(${yt(e.selector)})`;case"uncheck":return`uncheck(${yt(e.selector)})`;case"fill":return`fill(${yt(e.selector)}, ${yt(e.text)})`;case"setInputFiles":return`setInputFiles(${yt(e.selector)}, ${Ai(e.files.length===1?e.files[0]:e.files)})`;case"press":{let i=[...(0,bm.toModifiers)(e.modifiers),e.key].join("+");return`press(${yt(e.selector)}, ${yt(i)})`}case"navigate":return`goto(${yt(e.url)})`;case"select":return`selectOption(${yt(e.selector)}, ${Ai(e.options.length>1?e.options:e.options[0])})`}}generateHeader(e){return this._isTest?this.generateTestHeader(e):this.generateStandaloneHeader(e)}generateFooter(e){return this._isTest?this.generateTestFooter(e):this.generateStandaloneFooter(e)}generateTestHeader(e){let t=new Wa,i=uS(e.contextOptions,e.deviceName);return t.add(`
      const { test, expect${e.deviceName?", devices":""} } = require('@playwright/test');
${i?`
test.use(`+i+`);
`:""}
      test('test', async ({ page }) => {`),t.format()}generateTestFooter(e){return`
});`}generateStandaloneHeader(e){let t=new Wa;return t.add(`
      const { ${e.browserName}${e.deviceName?", devices":""} } = require('playwright');

      (async () => {
        const browser = await ${e.browserName}.launch(${xm(e.launchOptions)});
        const context = await browser.newContext(${uS(e.contextOptions,e.deviceName)});`),t.format()}generateStandaloneFooter(e){return`
  // ---------------------${e?`
  await context.storageState({ path: ${yt(e)} });`:""}
  await context.close();
  await browser.close();
})();`}};js.JavaScriptLanguageGenerator=lS;function CB(r){return Object.keys(r).length?", "+Ai(r):""}function Ai(r,e="  "){if(typeof r=="string")return yt(r);if(Array.isArray(r))return`[${r.map(t=>Ai(t)).join(", ")}]`;if(typeof r=="object"){let t=Object.keys(r);if(!t.length)return"{}";let i=[];for(let n of t)i.push(`${n}: ${Ai(r[n])}`);return`{
${e}${i.join(`,
${e}`)}
}`}return String(r)}function xm(r,e="  "){let t=Ai(r,e);return t==="{}"?"":t}function uS(r,e){let t=e&&SB.default[e];if(!t)return xm(r);let i=xm((0,cS.sanitizeDeviceOptions)(t,r));i||(i=`{
}`);let n=i.split(`
`);return n.splice(1,0,`...devices[${yt(e)}],`),n.join(`
`)}var Wa=class{constructor(e=0){this._baseIndent=void 0,this._baseOffset=void 0,this._lines=[],this._baseIndent=" ".repeat(2),this._baseOffset=" ".repeat(e)}prepend(e){this._lines=e.trim().split(`
`).map(t=>t.trim()).concat(this._lines)}add(e){this._lines.push(...e.trim().split(`
`).map(t=>t.trim()))}newLine(){this._lines.push("")}format(){let e="",t="";return this._lines.map(i=>{if(i==="")return i;(i.startsWith("}")||i.startsWith("]"))&&(e=e.substring(this._baseIndent.length));let n=/^(for|while|if|try).*\(.*\)$/.test(t)?this._baseIndent:"";t=i;let s=i.startsWith(".set");return i=e+n+(s?this._baseIndent:"")+i,(i.endsWith("{")||i.endsWith("["))&&(e+=this._baseIndent),this._baseOffset+i}).join(`
`)}};js.JavaScriptFormatter=Wa;function yt(r){return(0,bm.escapeWithQuotes)(r,"'")}});var pS=v(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});fu.JavaLanguageGenerator=void 0;var kB=Ha(),OB=ja(),Em=An(),PB=TB(Hs()),dS=Sm();function TB(r){return r&&r.__esModule?r:{default:r}}var hS=class{constructor(){this.id="java",this.fileName="Java",this.highlighter="java"}generateAction(e){let{action:t,pageAlias:i}=e,n=new dS.JavaScriptFormatter(6);if(n.newLine(),n.add("// "+(0,OB.actionTitle)(t)),t.name==="openPage")return n.add(`Page ${i} = context.newPage();`),t.url&&t.url!=="about:blank"&&t.url!=="chrome://newtab/"&&n.add(`${i}.navigate(${We(t.url)});`),n.format();let s=e.isMainFrame?i:e.frameName?`${i}.frame(${We(e.frameName)})`:`${i}.frameByUrl(${We(e.frameUrl)})`,o=(0,kB.toSignalMap)(t);o.dialog&&n.add(`  ${i}.onceDialog(dialog -> {
        System.out.println(String.format("Dialog message: %s", dialog.message()));
        dialog.dismiss();
      });`);let l=this._generateActionCall(t,e.isMainFrame),u=`${s}.${l};`;return o.popup&&(u=`Page ${o.popup.popupAlias} = ${i}.waitForPopup(() -> {
        ${u}
      });`),o.download&&(u=`Download download = ${i}.waitForDownload(() -> {
        ${u}
      });`),o.waitForNavigation&&(u=`
      // ${i}.waitForNavigation(new Page.WaitForNavigationOptions().setUrl(${We(o.waitForNavigation.url)}), () ->
      ${i}.waitForNavigation(() -> {
        ${u}
      });`),n.add(u),o.assertNavigation&&n.add(`// assert ${i}.url().equals(${We(o.assertNavigation.url)});`),n.format()}_generateActionCall(e,t){switch(e.name){case"openPage":throw Error("Not reached");case"closePage":return"close()";case"click":{let i="click";e.clickCount===2&&(i="dblclick");let n=(0,Em.toModifiers)(e.modifiers),s={};e.button!=="left"&&(s.button=e.button),n.length&&(s.modifiers=n),e.clickCount>2&&(s.clickCount=e.clickCount),e.position&&(s.position=e.position);let o=RB(s,t);return`${i}(${We(e.selector)}${o?", ":""}${o})`}case"check":return`check(${We(e.selector)})`;case"uncheck":return`uncheck(${We(e.selector)})`;case"fill":return`fill(${We(e.selector)}, ${We(e.text)})`;case"setInputFiles":return`setInputFiles(${We(e.selector)}, ${AB(e.files.length===1?e.files[0]:e.files)})`;case"press":{let n=[...(0,Em.toModifiers)(e.modifiers),e.key].join("+");return`press(${We(e.selector)}, ${We(n)})`}case"navigate":return`navigate(${We(e.url)})`;case"select":return`selectOption(${We(e.selector)}, ${IB(e.options.length>1?e.options:e.options[0])})`}}generateHeader(e){let t=new dS.JavaScriptFormatter;return t.add(`
    import com.microsoft.playwright.*;
    import com.microsoft.playwright.options.*;
    import java.util.*;

    public class Example {
      public static void main(String[] args) {
        try (Playwright playwright = Playwright.create()) {
          Browser browser = playwright.${e.browserName}().launch(${MB(e.launchOptions)});
          BrowserContext context = browser.newContext(${FB(e.contextOptions,e.deviceName)});`),t.format()}generateFooter(e){return`${e?`
      context.storageState(new BrowserContext.StorageStateOptions().setPath(${We(e)}));
`:""}    }
  }
}`}};fu.JavaLanguageGenerator=hS;function AB(r){return Array.isArray(r)?r.length===0?"new Path[0]":`new Path[] {${r.map(e=>"Paths.get("+We(e)+")").join(", ")}}`:`Paths.get(${We(r)})`}function IB(r){return Array.isArray(r)?r.length===0?"new String[0]":`new String[] {${r.map(e=>We(e)).join(", ")}}`:We(r)}function MB(r){let e=[];return Object.keys(r).length?(e.push("new BrowserType.LaunchOptions()"),typeof r.headless=="boolean"&&e.push("  .setHeadless(false)"),r.channel&&e.push(`  .setChannel(${We(r.channel)})`),e.join(`
`)):""}function FB(r,e){let t=[];if(!Object.keys(r).length&&!e)return"";let i=e?PB.default[e]:{},n=y(y({},i),r);return t.push("new Browser.NewContextOptions()"),n.acceptDownloads&&t.push("  .setAcceptDownloads(true)"),n.bypassCSP&&t.push("  .setBypassCSP(true)"),n.colorScheme&&t.push(`  .setColorScheme(ColorScheme.${n.colorScheme.toUpperCase()})`),n.deviceScaleFactor&&t.push(`  .setDeviceScaleFactor(${n.deviceScaleFactor})`),n.geolocation&&t.push(`  .setGeolocation(${n.geolocation.latitude}, ${n.geolocation.longitude})`),n.hasTouch&&t.push(`  .setHasTouch(${n.hasTouch})`),n.isMobile&&t.push(`  .setIsMobile(${n.isMobile})`),n.locale&&t.push(`  .setLocale(${We(n.locale)})`),n.proxy&&t.push(`  .setProxy(new Proxy(${We(n.proxy.server)}))`),n.storageState&&t.push(`  .setStorageStatePath(Paths.get(${We(n.storageState)}))`),n.timezoneId&&t.push(`  .setTimezoneId(${We(n.timezoneId)})`),n.userAgent&&t.push(`  .setUserAgent(${We(n.userAgent)})`),n.viewport&&t.push(`  .setViewportSize(${n.viewport.width}, ${n.viewport.height})`),t.join(`
`)}function RB(r,e){let t=[];return r.button&&t.push(`  .setButton(MouseButton.${r.button.toUpperCase()})`),r.modifiers&&t.push(`  .setModifiers(Arrays.asList(${r.modifiers.map(i=>`KeyboardModifier.${i.toUpperCase()}`).join(", ")}))`),r.clickCount&&t.push(`  .setClickCount(${r.clickCount})`),r.position&&t.push(`  .setPosition(${r.position.x}, ${r.position.y})`),t.length?(t.unshift(`new ${e?"Page":"Frame"}.ClickOptions()`),t.join(`
`)):""}function We(r){return(0,Em.escapeWithQuotes)(r,'"')}});var _S=v(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.CSharpLanguageGenerator=void 0;var fS=Ha(),NB=ja(),Cm=An(),DB=LB(Hs());function LB(r){return r&&r.__esModule?r:{default:r}}var mS=class{constructor(){this.id="csharp",this.fileName="C#",this.highlighter="csharp"}generateAction(e){let{action:t,pageAlias:i}=e,n=new Om(8);if(n.newLine(),n.add("// "+(0,NB.actionTitle)(t)),t.name==="openPage")return n.add(`var ${i} = await context.NewPageAsync();`),t.url&&t.url!=="about:blank"&&t.url!=="chrome://newtab/"&&n.add(`await ${i}.GotoAsync(${et(t.url)});`),n.format();let s=e.isMainFrame?i:e.frameName?`${i}.Frame(${et(e.frameName)})`:`${i}.FrameByUrl(${et(e.frameUrl)})`,o=(0,fS.toSignalMap)(t);o.dialog&&n.add(`    void ${i}_Dialog${o.dialog.dialogAlias}_EventHandler(object sender, IDialog dialog)
      {
          Console.WriteLine($"Dialog message: {dialog.Message}");
          dialog.DismissAsync();
          ${i}.Dialog -= ${i}_Dialog${o.dialog.dialogAlias}_EventHandler;
      }
      ${i}.Dialog += ${i}_Dialog${o.dialog.dialogAlias}_EventHandler;`);let l=[],u=this._generateActionCall(t,e.isMainFrame);o.waitForNavigation?(l.push(`await ${i}.RunAndWaitForNavigationAsync(async () =>`),l.push("{"),l.push(`    await ${s}.${u};`),l.push(`}/*, new ${e.isMainFrame?"Page":"Frame"}WaitForNavigationOptions`),l.push("{"),l.push(`    UrlString = ${et(o.waitForNavigation.url)}`),l.push("}*/);")):l.push(`await ${s}.${u};`),o.download&&(l.unshift(`var download${o.download.downloadAlias} = await ${i}.RunAndWaitForDownloadAsync(async () =>
{`),l.push("});")),o.popup&&(l.unshift(`var ${o.popup.popupAlias} = await ${i}.RunAndWaitForPopupAsync(async () =>
{`),l.push("});"));for(let d of l)n.add(d);return o.assertNavigation&&n.add(`  // Assert.AreEqual(${et(o.assertNavigation.url)}, ${i}.Url);`),n.format()}_generateActionCall(e,t){switch(e.name){case"openPage":throw Error("Not reached");case"closePage":return"CloseAsync()";case"click":{let i="Click";e.clickCount===2&&(i="DblClick");let n=(0,Cm.toModifiers)(e.modifiers),s={};if(e.button!=="left"&&(s.button=e.button),n.length&&(s.modifiers=n),e.clickCount>2&&(s.clickCount=e.clickCount),e.position&&(s.position=e.position),!Object.entries(s).length)return`${i}Async(${et(e.selector)})`;let o=Ii(s,"    ",(t?"Page":"Frame")+i+"Options");return`${i}Async(${et(e.selector)}, ${o})`}case"check":return`CheckAsync(${et(e.selector)})`;case"uncheck":return`UncheckAsync(${et(e.selector)})`;case"fill":return`FillAsync(${et(e.selector)}, ${et(e.text)})`;case"setInputFiles":return`SetInputFilesAsync(${et(e.selector)}, ${Ii(e.files)})`;case"press":{let n=[...(0,Cm.toModifiers)(e.modifiers),e.key].join("+");return`PressAsync(${et(e.selector)}, ${et(n)})`}case"navigate":return`GotoAsync(${et(e.url)})`;case"select":return`SelectOptionAsync(${et(e.selector)}, ${Ii(e.options)})`}}generateHeader(e){let t=new Om(0);return t.add(`
      using Microsoft.Playwright;
      using System;
      using System.Threading.Tasks;

      class Program
      {
          public static async Task Main()
          {
              using var playwright = await Playwright.CreateAsync();
              await using var browser = await playwright.${mu(e.browserName)}.LaunchAsync(${Ii(e.launchOptions,"    ","BrowserTypeLaunchOptions")});
              var context = await browser.NewContextAsync(${BB(e.contextOptions,e.deviceName)});`),t.format()}generateFooter(e){return`${e?`
        await context.StorageStateAsync(new BrowserContextStorageStateOptions
        {
            Path = ${et(e)}
        });
`:""}    }
}
`}};_u.CSharpLanguageGenerator=mS;function Ii(r,e="    ",t=""){if(typeof r=="string")return["permissions","colorScheme","modifiers","button"].includes(t)?`${km(t)}.${mu(r)}`:et(r);if(Array.isArray(r))return`new[] { ${r.map(i=>Ii(i,e,t)).join(", ")} }`;if(typeof r=="object"){let i=Object.keys(r);if(!i.length)return t?`new ${km(t)}`:"";let n=[];for(let s of i){let o=qB(s);n.push(`${o} = ${Ii(r[s],e,s)},`)}return t?`new ${km(t)}
{
${e}${n.join(`
${e}`)}
${e}}`:`{
${e}${n.join(`
${e}`)}
${e}}`}return t==="latitude"||t==="longitude"?String(r)+"m":String(r)}function km(r){switch(r){case"viewport":return"ViewportSize";case"proxy":return"ProxySettings";case"permissions":return"ContextPermission";case"modifiers":return"KeyboardModifier";case"button":return"MouseButton";default:return mu(r)}}function qB(r){switch(r){case"storageState":return"StorageStatePath";case"viewport":return"ViewportSize";default:return mu(r)}}function mu(r){return r[0].toUpperCase()+r.slice(1)}function BB(r,e){let t=e&&DB.default[e];return t?(r=(0,fS.sanitizeDeviceOptions)(t,r),Object.entries(r).length?Ii(r,"    ",`BrowserNewContextOptions(playwright.Devices[${et(e)}])`):`playwright.Devices[${et(e)}]`):Object.entries(r).length?Ii(r,"    ","BrowserNewContextOptions"):""}var Om=class{constructor(e=0){this._baseIndent=void 0,this._baseOffset=void 0,this._lines=[],this._baseIndent=" ".repeat(4),this._baseOffset=" ".repeat(e)}prepend(e){this._lines=e.trim().split(`
`).map(t=>t.trim()).concat(this._lines)}add(e){this._lines.push(...e.trim().split(`
`).map(t=>t.trim()))}newLine(){this._lines.push("")}format(){let e="",t="";return this._lines.map(i=>{if(i==="")return i;(i.startsWith("}")||i.startsWith("]")||i.includes("});")||i===");")&&(e=e.substring(this._baseIndent.length));let n=/^(for|while|if).*\(.*\)$/.test(t)?this._baseIndent:"";return t=i,i=e+n+i,(i.endsWith("{")||i.endsWith("[")||i.endsWith("("))&&(e+=this._baseIndent),i.endsWith("));")&&(e=e.substring(this._baseIndent.length)),this._baseOffset+i}).join(`
`)}};function et(r){return(0,Cm.escapeWithQuotes)(r,'"')}});var yS=v(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});wu.PythonLanguageGenerator=void 0;var gS=Ha(),HB=ja(),Pm=An(),jB=WB(Hs());function WB(r){return r&&r.__esModule?r:{default:r}}var wS=class{constructor(e){this.id="python",this.fileName="Python",this.highlighter="python",this._awaitPrefix=void 0,this._asyncPrefix=void 0,this._isAsync=void 0,this.id=e?"python-async":"python",this.fileName=e?"Python Async":"Python",this._isAsync=e,this._awaitPrefix=e?"await ":"",this._asyncPrefix=e?"async ":""}generateAction(e){let{action:t,pageAlias:i}=e,n=new Tm(4);if(n.newLine(),n.add("# "+(0,HB.actionTitle)(t)),t.name==="openPage")return n.add(`${i} = ${this._awaitPrefix}context.new_page()`),t.url&&t.url!=="about:blank"&&t.url!=="chrome://newtab/"&&n.add(`${this._awaitPrefix}${i}.goto(${bt(t.url)})`),n.format();let s=e.isMainFrame?i:e.frameName?`${i}.frame(${In({name:e.frameName},!1)})`:`${i}.frame(${In({url:e.frameUrl},!1)})`,o=(0,gS.toSignalMap)(t);o.dialog&&n.add(`  ${i}.once("dialog", lambda dialog: dialog.dismiss())`);let l=this._generateActionCall(t),u=`${this._awaitPrefix}${s}.${l}`;return o.popup&&(u=`${this._asyncPrefix}with ${i}.expect_popup() as popup_info {
        ${u}
      }
      ${o.popup.popupAlias} = ${this._awaitPrefix}popup_info.value`),o.download&&(u=`${this._asyncPrefix}with ${i}.expect_download() as download_info {
        ${u}
      }
      download = ${this._awaitPrefix}download_info.value`),o.waitForNavigation&&(u=`
      # ${this._asyncPrefix}with ${i}.expect_navigation(url=${bt(o.waitForNavigation.url)}):
      ${this._asyncPrefix}with ${i}.expect_navigation() {
        ${u}
      }`),n.add(u),o.assertNavigation&&n.add(`  # assert ${i}.url == ${bt(o.assertNavigation.url)}`),n.format()}_generateActionCall(e){switch(e.name){case"openPage":throw Error("Not reached");case"closePage":return"close()";case"click":{let t="click";e.clickCount===2&&(t="dblclick");let i=(0,Pm.toModifiers)(e.modifiers),n={};e.button!=="left"&&(n.button=e.button),i.length&&(n.modifiers=i),e.clickCount>2&&(n.clickCount=e.clickCount),e.position&&(n.position=e.position);let s=In(n,!0);return`${t}(${bt(e.selector)}${s})`}case"check":return`check(${bt(e.selector)})`;case"uncheck":return`uncheck(${bt(e.selector)})`;case"fill":return`fill(${bt(e.selector)}, ${bt(e.text)})`;case"setInputFiles":return`set_input_files(${bt(e.selector)}, ${gu(e.files.length===1?e.files[0]:e.files)})`;case"press":{let i=[...(0,Pm.toModifiers)(e.modifiers),e.key].join("+");return`press(${bt(e.selector)}, ${bt(i)})`}case"navigate":return`goto(${bt(e.url)})`;case"select":return`select_option(${bt(e.selector)}, ${gu(e.options.length===1?e.options[0]:e.options)})`}}generateHeader(e){let t=new Tm;return this._isAsync?t.add(`
import asyncio

from playwright.async_api import Playwright, async_playwright


async def run(playwright: Playwright) -> None {
    browser = await playwright.${e.browserName}.launch(${In(e.launchOptions,!1)})
    context = await browser.new_context(${vS(e.contextOptions,e.deviceName)})`):t.add(`
from playwright.sync_api import Playwright, sync_playwright


def run(playwright: Playwright) -> None {
    browser = playwright.${e.browserName}.launch(${In(e.launchOptions,!1)})
    context = browser.new_context(${vS(e.contextOptions,e.deviceName)})`),t.format()}generateFooter(e){return this._isAsync?`
    # ---------------------${e?`
    await context.storage_state(path=${bt(e)})`:""}
    await context.close()
    await browser.close()


async def main() -> None:
    async with async_playwright() as playwright:
        await run(playwright)


asyncio.run(main())
`:`
    # ---------------------${e?`
    context.storage_state(path=${bt(e)})`:""}
    context.close()
    browser.close()


with sync_playwright() as playwright:
    run(playwright)
`}};wu.PythonLanguageGenerator=wS;function gu(r){return r===!1?"False":r===!0?"True":r===void 0?"None":Array.isArray(r)?`[${r.map(gu).join(", ")}]`:typeof r=="string"?bt(r):typeof r=="object"?JSON.stringify(r):String(r)}function UB(r){let e=/((?<=[a-z0-9])[A-Z]|(?!^)[A-Z](?=[a-z]))/g;return r.replace(e,"_$1").toLowerCase()}function In(r,e){let t=Object.keys(r);return t.length?(e?", ":"")+t.map(i=>`${UB(i)}=${gu(r[i])}`).join(", "):""}function vS(r,e){let t=e&&jB.default[e];return t?`**playwright.devices[${bt(e)}]`+In((0,gS.sanitizeDeviceOptions)(t,r),!0):In(r,!1)}var Tm=class{constructor(e=0){this._baseIndent=void 0,this._baseOffset=void 0,this._lines=[],this._baseIndent=" ".repeat(4),this._baseOffset=" ".repeat(e)}prepend(e){this._lines=e.trim().split(`
`).map(t=>t.trim()).concat(this._lines)}add(e){this._lines.push(...e.trim().split(`
`).map(t=>t.trim()))}newLine(){this._lines.push("")}format(){let e="",t=[];return this._lines.forEach(i=>{if(i==="")return t.push(i);if(i==="}"){e=e.substring(this._baseIndent.length);return}return i=e+i,i.endsWith("{")&&(e+=this._baseIndent,i=i.substring(0,i.length-1).trimEnd()+":"),t.push(this._baseOffset+i)}),t.join(`
`)}};function bt(r){return(0,Pm.escapeWithQuotes)(r,'"')}});var bS=v(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.source=void 0;var $B='var pwExport;(()=>{"use strict";var e={317:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseCSS=function(e,t){let n;try{n=o.tokenize(e),n[n.length-1]instanceof o.EOFToken||n.push(new o.EOFToken)}catch(t){const n=t.message+` while parsing selector "${e}"`,o=(t.stack||"").indexOf(t.message);throw-1!==o&&(t.stack=t.stack.substring(0,o)+n+t.stack.substring(o+t.message.length)),t.message=n,t}const r=n.find((e=>e instanceof o.AtKeywordToken||e instanceof o.BadStringToken||e instanceof o.BadURLToken||e instanceof o.ColumnToken||e instanceof o.CDOToken||e instanceof o.CDCToken||e instanceof o.SemicolonToken||e instanceof o.OpenCurlyToken||e instanceof o.CloseCurlyToken||e instanceof o.URLToken||e instanceof o.PercentageToken));if(r)throw new Error(`Unsupported token "${r.toSource()}" while parsing selector "${e}"`);let i=0;const s=new Set;function c(){return new Error(`Unexpected token "${n[i].toSource()}" while parsing selector "${e}"`)}function l(){for(;n[i]instanceof o.WhitespaceToken;)i++}function a(e=i){return n[e]instanceof o.IdentToken}function h(e=i){return n[e]instanceof o.CommaToken}function u(e=i){return n[e]instanceof o.CloseParenToken}function p(e=i){return n[e]instanceof o.DelimToken&&"*"===n[e].value}function f(e=i){return n[e]instanceof o.EOFToken}function d(e=i){return n[e]instanceof o.DelimToken&&[">","+","~"].includes(n[e].value)}function m(e=i){return h(e)||u(e)||f(e)||d(e)||n[e]instanceof o.WhitespaceToken}function g(){const e=[y()];for(;l(),h();)i++,e.push(y());return e}function y(){return l(),function(e=i){return n[e]instanceof o.NumberToken}()||function(e=i){return n[e]instanceof o.StringToken}()?n[i++].value:function(){const e={simples:[]};for(l(),d()?e.simples.push({selector:{functions:[{name:"scope",args:[]}]},combinator:""}):e.simples.push({selector:_(),combinator:""});;){if(l(),d())e.simples[e.simples.length-1].combinator=n[i++].value,l();else if(m())break;e.simples.push({combinator:"",selector:_()})}return e}()}function _(){let e="";const r=[];for(;!m();)if(a()||p())e+=n[i++].toSource();else if(n[i]instanceof o.HashToken)e+=n[i++].toSource();else if(n[i]instanceof o.DelimToken&&"."===n[i].value){if(i++,!a())throw c();e+="."+n[i++].toSource()}else if(n[i]instanceof o.ColonToken)if(i++,a())if(t.has(n[i].value.toLowerCase())){const e=n[i++].value.toLowerCase();r.push({name:e,args:[]}),s.add(e)}else e+=":"+n[i++].toSource();else{if(!(n[i]instanceof o.FunctionToken))throw c();{const o=n[i++].value.toLowerCase();if(t.has(o)?(r.push({name:o,args:g()}),s.add(o)):e+=`:${o}(${v()})`,l(),!u())throw c();i++}}else{if(!(n[i]instanceof o.OpenSquareToken))throw c();for(e+="[",i++;!(n[i]instanceof o.CloseSquareToken||f());)e+=n[i++].toSource();if(!(n[i]instanceof o.CloseSquareToken))throw c();e+="]",i++}if(!e&&!r.length)throw c();return{css:e||void 0,functions:r}}function v(){let e="";for(;!u()&&!f();)e+=n[i++].toSource();return e}const w=g();if(!f())throw new Error(`Error while parsing selector "${e}"`);if(w.some((e=>"object"!=typeof e||!("simples"in e))))throw new Error(`Error while parsing selector "${e}"`);return{selector:w,names:Array.from(s)}},t.serializeSelector=function e(t){return t.map((t=>"string"==typeof t?`"${t}"`:"number"==typeof t?String(t):t.simples.map((({selector:t,combinator:n})=>{let o=t.css||"";return o+=t.functions.map((t=>`:${t.name}(${e(t.args)})`)).join(""),n&&(o+=" "+n),o})).join(" "))).join(", ")};var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=i?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(o,s,c):o[s]=e[s]}return o.default=e,n&&n.set(e,o),o}(n(503));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}},503:(e,t)=>{var n,o;n=function(e){var t=function(e,t,n){return e>=t&&e<=n};function n(e){return t(e,48,57)}function o(e){return n(e)||t(e,65,70)||t(e,97,102)}function r(e){return function(e){return t(e,65,90)}(e)||function(e){return t(e,97,122)}(e)}function i(e){return r(e)||function(e){return e>=128}(e)||95==e}function s(e){return i(e)||n(e)||45==e}function c(e){return t(e,0,8)||11==e||t(e,14,31)||127==e}function l(e){return 10==e}function a(e){return l(e)||9==e||32==e}var h=function(e){this.message=e};function u(e){if(e<=65535)return String.fromCharCode(e);e-=Math.pow(2,16);var t=Math.floor(e/Math.pow(2,10))+55296,n=e%Math.pow(2,10)+56320;return String.fromCharCode(t)+String.fromCharCode(n)}function p(){throw"Abstract Base Class"}function f(){return this}function d(){return this}function m(){return this}function g(){return this}function y(){return this}function _(){return this}function v(){return this}function w(){return this}function E(){throw"Abstract Base Class"}function S(){return this.value="{",this.mirror="}",this}function T(){return this.value="}",this.mirror="{",this}function b(){return this.value="[",this.mirror="]",this}function k(){return this.value="]",this.mirror="[",this}function M(){return this.value="(",this.mirror=")",this}function x(){return this.value=")",this.mirror="(",this}function C(){return this}function P(){return this}function A(){return this}function N(){return this}function O(){return this}function R(){return this}function j(){return this}function I(e){return this.value=u(e),this}function D(){throw"Abstract Base Class"}function L(e){this.value=e}function $(e){this.value=e,this.mirror=")"}function U(e){this.value=e}function q(e){this.value=e,this.type="unrestricted"}function G(e){this.value=e}function F(e){this.value=e}function H(){this.value=null,this.type="integer",this.repr=""}function K(){this.value=null,this.repr=""}function B(){this.value=null,this.type="integer",this.repr="",this.unit=""}function W(e){for(var n="",o=(e=""+e).charCodeAt(0),r=0;r<e.length;r++){var i=e.charCodeAt(r);if(0==i)throw new h("Invalid character: the input contains U+0000.");t(i,1,31)||127==i||0==r&&t(i,48,57)||1==r&&t(i,48,57)&&45==o?n+="\\\\"+i.toString(16)+" ":i>=128||45==i||95==i||t(i,48,57)||t(i,65,90)||t(i,97,122)?n+=e[r]:n+="\\\\"+e[r]}return n}function J(e){e=""+e;for(var n="",o=0;o<e.length;o++){var r=e.charCodeAt(o);if(0==r)throw new h("Invalid character: the input contains U+0000.");t(r,1,31)||127==r?n+="\\\\"+r.toString(16)+" ":n+=34==r||92==r?"\\\\"+e[o]:e[o]}return n}(h.prototype=new Error).name="InvalidCharacterError",p.prototype.toJSON=function(){return{token:this.tokenType}},p.prototype.toString=function(){return this.tokenType},p.prototype.toSource=function(){return""+this},f.prototype=Object.create(p.prototype),f.prototype.tokenType="BADSTRING",d.prototype=Object.create(p.prototype),d.prototype.tokenType="BADURL",m.prototype=Object.create(p.prototype),m.prototype.tokenType="WHITESPACE",m.prototype.toString=function(){return"WS"},m.prototype.toSource=function(){return" "},g.prototype=Object.create(p.prototype),g.prototype.tokenType="CDO",g.prototype.toSource=function(){return"\\x3c!--"},y.prototype=Object.create(p.prototype),y.prototype.tokenType="CDC",y.prototype.toSource=function(){return"--\\x3e"},_.prototype=Object.create(p.prototype),_.prototype.tokenType=":",v.prototype=Object.create(p.prototype),v.prototype.tokenType=";",w.prototype=Object.create(p.prototype),w.prototype.tokenType=",",E.prototype=Object.create(p.prototype),S.prototype=Object.create(E.prototype),S.prototype.tokenType="{",T.prototype=Object.create(E.prototype),T.prototype.tokenType="}",b.prototype=Object.create(E.prototype),b.prototype.tokenType="[",k.prototype=Object.create(E.prototype),k.prototype.tokenType="]",M.prototype=Object.create(E.prototype),M.prototype.tokenType="(",x.prototype=Object.create(E.prototype),x.prototype.tokenType=")",C.prototype=Object.create(p.prototype),C.prototype.tokenType="~=",P.prototype=Object.create(p.prototype),P.prototype.tokenType="|=",A.prototype=Object.create(p.prototype),A.prototype.tokenType="^=",N.prototype=Object.create(p.prototype),N.prototype.tokenType="$=",O.prototype=Object.create(p.prototype),O.prototype.tokenType="*=",R.prototype=Object.create(p.prototype),R.prototype.tokenType="||",j.prototype=Object.create(p.prototype),j.prototype.tokenType="EOF",j.prototype.toSource=function(){return""},I.prototype=Object.create(p.prototype),I.prototype.tokenType="DELIM",I.prototype.toString=function(){return"DELIM("+this.value+")"},I.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},I.prototype.toSource=function(){return"\\\\"==this.value?"\\\\\\n":this.value},D.prototype=Object.create(p.prototype),D.prototype.ASCIIMatch=function(e){return this.value.toLowerCase()==e.toLowerCase()},D.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},L.prototype=Object.create(D.prototype),L.prototype.tokenType="IDENT",L.prototype.toString=function(){return"IDENT("+this.value+")"},L.prototype.toSource=function(){return W(this.value)},$.prototype=Object.create(D.prototype),$.prototype.tokenType="FUNCTION",$.prototype.toString=function(){return"FUNCTION("+this.value+")"},$.prototype.toSource=function(){return W(this.value)+"("},U.prototype=Object.create(D.prototype),U.prototype.tokenType="AT-KEYWORD",U.prototype.toString=function(){return"AT("+this.value+")"},U.prototype.toSource=function(){return"@"+W(this.value)},q.prototype=Object.create(D.prototype),q.prototype.tokenType="HASH",q.prototype.toString=function(){return"HASH("+this.value+")"},q.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e},q.prototype.toSource=function(){return"id"==this.type?"#"+W(this.value):"#"+function(e){for(var n="",o=((e=""+e).charCodeAt(0),0);o<e.length;o++){var r=e.charCodeAt(o);if(0==r)throw new h("Invalid character: the input contains U+0000.");r>=128||45==r||95==r||t(r,48,57)||t(r,65,90)||t(r,97,122)?n+=e[o]:n+="\\\\"+r.toString(16)+" "}return n}(this.value)},G.prototype=Object.create(D.prototype),G.prototype.tokenType="STRING",G.prototype.toString=function(){return\'"\'+J(this.value)+\'"\'},F.prototype=Object.create(D.prototype),F.prototype.tokenType="URL",F.prototype.toString=function(){return"URL("+this.value+")"},F.prototype.toSource=function(){return\'url("\'+J(this.value)+\'")\'},H.prototype=Object.create(p.prototype),H.prototype.tokenType="NUMBER",H.prototype.toString=function(){return"integer"==this.type?"INT("+this.value+")":"NUMBER("+this.value+")"},H.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e},H.prototype.toSource=function(){return this.repr},K.prototype=Object.create(p.prototype),K.prototype.tokenType="PERCENTAGE",K.prototype.toString=function(){return"PERCENTAGE("+this.value+")"},K.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.repr=this.repr,e},K.prototype.toSource=function(){return this.repr+"%"},B.prototype=Object.create(p.prototype),B.prototype.tokenType="DIMENSION",B.prototype.toString=function(){return"DIM("+this.value+","+this.unit+")"},B.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e.unit=this.unit,e},B.prototype.toSource=function(){var e=this.repr,n=W(this.unit);return"e"!=n[0].toLowerCase()||"-"!=n[1]&&!t(n.charCodeAt(1),48,57)||(n="\\\\65 "+n.slice(1,n.length)),e+n},e.tokenize=function(e){e=function(e){for(var n=[],o=0;o<e.length;o++){var r=e.charCodeAt(o);if(13==r&&10==e.charCodeAt(o+1)&&(r=10,o++),13!=r&&12!=r||(r=10),0==r&&(r=65533),t(r,55296,56319)&&t(e.charCodeAt(o+1),56320,57343)){var i=r-55296,s=e.charCodeAt(o+1)-56320;r=Math.pow(2,16)+i*Math.pow(2,10)+s,o++}n.push(r)}return n}(e);for(var r,h=-1,p=[],E=0,D=0,W=0,J={line:E,column:D},Q=function(t){return t>=e.length?-1:e[t]},z=function(e){if(void 0===e&&(e=1),e>3)throw"Spec Error: no more than three codepoints of lookahead.";return Q(h+e)},V=function(e){return void 0===e&&(e=1),l(r=Q(h+=e))?(E+=1,W=D,D=0):D+=e,!0},X=function(){return h-=1,l(r)?(E-=1,D=W):D-=1,J.line=E,J.column=D,!0},Y=function(e){return void 0===e&&(e=r),-1==e},Z=function(){return console.log("Parse error at index "+h+", processing codepoint 0x"+r.toString(16)+"."),!0},ee=function(){if(te(),V(),a(r)){for(;a(z());)V();return new m}if(34==r)return re();if(35==r){if(s(z())||ce(z(1),z(2))){var e=new q;return ae(z(1),z(2),z(3))&&(e.type="id"),e.value=pe(),e}return new I(r)}return 36==r?61==z()?(V(),new N):new I(r):39==r?re():40==r?new M:41==r?new x:42==r?61==z()?(V(),new O):new I(r):43==r?ue()?(X(),ne()):new I(r):44==r?new w:45==r?ue()?(X(),ne()):45==z(1)&&62==z(2)?(V(2),new y):he()?(X(),oe()):new I(r):46==r?ue()?(X(),ne()):new I(r):58==r?new _:59==r?new v:60==r?33==z(1)&&45==z(2)&&45==z(3)?(V(3),new g):new I(r):64==r?ae(z(1),z(2),z(3))?new U(pe()):new I(r):91==r?new b:92==r?le()?(X(),oe()):(Z(),new I(r)):93==r?new k:94==r?61==z()?(V(),new A):new I(r):123==r?new S:124==r?61==z()?(V(),new P):124==z()?(V(),new R):new I(r):125==r?new T:126==r?61==z()?(V(),new C):new I(r):n(r)?(X(),ne()):i(r)?(X(),oe()):Y()?new j:new I(r)},te=function(){for(;47==z(1)&&42==z(2);)for(V(2);;){if(V(),42==r&&47==z()){V();break}if(Y())return void Z()}},ne=function(){var e,t=fe();return ae(z(1),z(2),z(3))?((e=new B).value=t.value,e.repr=t.repr,e.type=t.type,e.unit=pe(),e):37==z()?(V(),(e=new K).value=t.value,e.repr=t.repr,e):((e=new H).value=t.value,e.repr=t.repr,e.type=t.type,e)},oe=function(){var e=pe();if("url"==e.toLowerCase()&&40==z()){for(V();a(z(1))&&a(z(2));)V();return 34==z()||39==z()?new $(e):!a(z())||34!=z(2)&&39!=z(2)?ie():new $(e)}return 40==z()?(V(),new $(e)):new L(e)},re=function(e){void 0===e&&(e=r);for(var t="";V();){if(r==e||Y())return new G(t);if(l(r))return Z(),X(),new f;92==r?Y(z())||(l(z())?V():t+=u(se())):t+=u(r)}},ie=function(){for(var e=new F("");a(z());)V();if(Y(z()))return e;for(;V();){if(41==r||Y())return e;if(a(r)){for(;a(z());)V();return 41==z()||Y(z())?(V(),e):(me(),new d)}if(34==r||39==r||40==r||c(r))return Z(),me(),new d;if(92==r){if(!le())return Z(),me(),new d;e.value+=u(se())}else e.value+=u(r)}},se=function(){if(V(),o(r)){for(var e=[r],t=0;t<5&&o(z());t++)V(),e.push(r);a(z())&&V();var n=parseInt(e.map((function(e){return String.fromCharCode(e)})).join(""),16);return n>1114111&&(n=65533),n}return Y()?65533:r},ce=function(e,t){return 92==e&&!l(t)},le=function(){return ce(r,z())},ae=function(e,t,n){return 45==e?i(t)||45==t||ce(t,n):!!i(e)||92==e&&ce(e,t)},he=function(){return ae(r,z(1),z(2))},ue=function(){return e=r,t=z(1),o=z(2),43==e||45==e?!!n(t)||!(46!=t||!n(o)):46==e?!!n(t):!!n(e);var e,t,o},pe=function(){for(var e="";V();)if(s(r))e+=u(r);else{if(!le())return X(),e;e+=u(se())}},fe=function(){var e=[],t="integer";for(43!=z()&&45!=z()||(V(),e+=u(r));n(z());)V(),e+=u(r);if(46==z(1)&&n(z(2)))for(V(),e+=u(r),V(),e+=u(r),t="number";n(z());)V(),e+=u(r);var o=z(1),i=z(2),s=z(3);if(69!=o&&101!=o||!n(i)){if((69==o||101==o)&&(43==i||45==i)&&n(s))for(V(),e+=u(r),V(),e+=u(r),V(),e+=u(r),t="number";n(z());)V(),e+=u(r)}else for(V(),e+=u(r),V(),e+=u(r),t="number";n(z());)V(),e+=u(r);return{type:t,value:de(e),repr:e}},de=function(e){return+e},me=function(){for(;V();){if(41==r||Y())return;le()&&se()}},ge=0;!Y(z());)if(p.push(ee()),++ge>2*e.length)return"I\'m infinite-looping!";return p},e.IdentToken=L,e.FunctionToken=$,e.AtKeywordToken=U,e.HashToken=q,e.StringToken=G,e.BadStringToken=f,e.URLToken=F,e.BadURLToken=d,e.DelimToken=I,e.NumberToken=H,e.PercentageToken=K,e.DimensionToken=B,e.IncludeMatchToken=C,e.DashMatchToken=P,e.PrefixMatchToken=A,e.SuffixMatchToken=N,e.SubstringMatchToken=O,e.ColumnToken=R,e.WhitespaceToken=m,e.CDOToken=g,e.CDCToken=y,e.ColonToken=_,e.SemicolonToken=v,e.CommaToken=w,e.OpenParenToken=M,e.CloseParenToken=x,e.OpenSquareToken=b,e.CloseSquareToken=k,e.OpenCurlyToken=S,e.CloseCurlyToken=T,e.EOFToken=j,e.CSSParserToken=p,e.GroupingToken=E},void 0===(o=n.apply(t,[t]))||(e.exports=o)},461:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseSelector=function(e){const t=function(e){let t,n=0,o=0;const r={parts:[]},i=()=>{const t=e.substring(o,n).trim(),i=t.indexOf("=");let s,c;-1!==i&&t.substring(0,i).trim().match(/^[a-zA-Z_0-9-+:*]+$/)?(s=t.substring(0,i).trim(),c=t.substring(i+1)):t.length>1&&\'"\'===t[0]&&\'"\'===t[t.length-1]||t.length>1&&"\'"===t[0]&&"\'"===t[t.length-1]?(s="text",c=t):/^\\(*\\/\\//.test(t)||t.startsWith("..")?(s="xpath",c=t):(s="css",c=t);let l=!1;if("*"===s[0]&&(l=!0,s=s.substring(1)),r.parts.push({name:s,body:c}),l){if(void 0!==r.capture)throw new Error("Only one of the selectors can capture using * modifier");r.capture=r.parts.length-1}};if(!e.includes(">>"))return n=e.length,i(),r;for(;n<e.length;){const r=e[n];"\\\\"===r&&n+1<e.length?n+=2:r===t?(t=void 0,n++):t||\'"\'!==r&&"\'"!==r&&"`"!==r?t||">"!==r||">"!==e[n+1]?n++:(i(),n+=2,o=n):(t=r,n++)}return i(),r}(e),n=t.parts.map((e=>"css"===e.name||"css:light"===e.name?("css:light"===e.name&&(e.body=":light("+e.body+")"),{name:"css",body:(0,o.parseCSS)(e.body,r).selector}):e));return{selector:e,capture:t.capture,parts:n}},t.customCSSNames=void 0;var o=n(317);const r=new Set(["not","is","where","has","scope","light","visible","text","text-matches","text-is","has-text","above","below","right-of","left-of","near","nth-match"]);t.customCSSNames=r},848:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createLaxTextMatcher=d,t.createStrictTextMatcher=m,t.createRegexTextMatcher=g,t.elementText=_,t.elementMatchesText=v,t.parentElementOrShadowHost=x,t.isVisible=A,t.SelectorEvaluatorImpl=void 0;var o=n(461);t.SelectorEvaluatorImpl=class{constructor(e){this._engines=new Map,this._cacheQueryCSS=new Map,this._cacheMatches=new Map,this._cacheQuery=new Map,this._cacheMatchesSimple=new Map,this._cacheMatchesParents=new Map,this._cacheCallMatches=new Map,this._cacheCallQuery=new Map,this._cacheQuerySimple=new Map,this._cacheText=new Map,this._scoreMap=void 0,this._retainCacheCounter=0;for(const[t,n]of e)this._engines.set(t,n);this._engines.set("not",c),this._engines.set("is",r),this._engines.set("where",r),this._engines.set("has",i),this._engines.set("scope",s),this._engines.set("light",l),this._engines.set("visible",a),this._engines.set("text",h),this._engines.set("text-is",u),this._engines.set("text-matches",p),this._engines.set("has-text",f),this._engines.set("right-of",k("right-of",w)),this._engines.set("left-of",k("left-of",E)),this._engines.set("above",k("above",S)),this._engines.set("below",k("below",T)),this._engines.set("near",k("near",b)),this._engines.set("nth-match",M);const t=[...this._engines.keys()];t.sort();const n=[...o.customCSSNames];if(n.sort(),t.join("|")!==n.join("|"))throw new Error(`Please keep customCSSNames in sync with evaluator engines: ${t.join("|")} vs ${n.join("|")}`)}begin(){++this._retainCacheCounter}end(){--this._retainCacheCounter,this._retainCacheCounter||(this._cacheQueryCSS.clear(),this._cacheMatches.clear(),this._cacheQuery.clear(),this._cacheMatchesSimple.clear(),this._cacheMatchesParents.clear(),this._cacheCallMatches.clear(),this._cacheCallQuery.clear(),this._cacheQuerySimple.clear(),this._cacheText.clear())}_cached(e,t,n,o){e.has(t)||e.set(t,[]);const r=e.get(t),i=r.find((e=>n.every(((t,n)=>e.rest[n]===t))));if(i)return i.result;const s=o();return r.push({rest:n,result:s}),s}_checkSelector(e){if("object"!=typeof e||!e||!(Array.isArray(e)||"simples"in e&&e.simples.length))throw new Error(`Malformed selector "${e}"`);return e}matches(e,t,n){const o=this._checkSelector(t);this.begin();try{return this._cached(this._cacheMatches,e,[o,n.scope,n.pierceShadow],(()=>Array.isArray(o)?this._matchesEngine(r,e,o,n):!!this._matchesSimple(e,o.simples[o.simples.length-1].selector,n)&&this._matchesParents(e,o,o.simples.length-2,n)))}finally{this.end()}}query(e,t){const n=this._checkSelector(t);this.begin();try{return this._cached(this._cacheQuery,n,[e.scope,e.pierceShadow],(()=>{if(Array.isArray(n))return this._queryEngine(r,e,n);const t=this._scoreMap;this._scoreMap=new Map;let o=this._querySimple(e,n.simples[n.simples.length-1].selector);return o=o.filter((t=>this._matchesParents(t,n,n.simples.length-2,e))),this._scoreMap.size&&o.sort(((e,t)=>{const n=this._scoreMap.get(e),o=this._scoreMap.get(t);return n===o?0:void 0===n?1:void 0===o?-1:n-o})),this._scoreMap=t,o}))}finally{this.end()}}_markScore(e,t){this._scoreMap&&this._scoreMap.set(e,t)}_matchesSimple(e,t,n){return this._cached(this._cacheMatchesSimple,e,[t,n.scope,n.pierceShadow],(()=>{if(!t.functions.some((e=>"scope"===e.name||"is"===e.name))&&e===n.scope)return!1;if(t.css&&!this._matchesCSS(e,t.css))return!1;for(const o of t.functions)if(!this._matchesEngine(this._getEngine(o.name),e,o.args,n))return!1;return!0}))}_querySimple(e,t){return t.functions.length?this._cached(this._cacheQuerySimple,t,[e.scope,e.pierceShadow],(()=>{let n=t.css;const o=t.functions;let r;"*"===n&&o.length&&(n=void 0);let i=-1;void 0!==n?r=this._queryCSS(e,n):(i=o.findIndex((e=>void 0!==this._getEngine(e.name).query)),-1===i&&(i=0),r=this._queryEngine(this._getEngine(o[i].name),e,o[i].args));for(let t=0;t<o.length;t++){if(t===i)continue;const n=this._getEngine(o[t].name);void 0!==n.matches&&(r=r.filter((r=>this._matchesEngine(n,r,o[t].args,e))))}for(let t=0;t<o.length;t++){if(t===i)continue;const n=this._getEngine(o[t].name);void 0===n.matches&&(r=r.filter((r=>this._matchesEngine(n,r,o[t].args,e))))}return r})):this._queryCSS(e,t.css||"*")}_matchesParents(e,t,n,o){return n<0||this._cached(this._cacheMatchesParents,e,[t,n,o.scope,o.pierceShadow],(()=>{const{selector:r,combinator:i}=t.simples[n];if(">"===i){const i=C(e,o);return!(!i||!this._matchesSimple(i,r,o))&&this._matchesParents(i,t,n-1,o)}if("+"===i){const i=P(e,o);return!(!i||!this._matchesSimple(i,r,o))&&this._matchesParents(i,t,n-1,o)}if(""===i){let i=C(e,o);for(;i;){if(this._matchesSimple(i,r,o)){if(this._matchesParents(i,t,n-1,o))return!0;if(""===t.simples[n-1].combinator)break}i=C(i,o)}return!1}if("~"===i){let i=P(e,o);for(;i;){if(this._matchesSimple(i,r,o)){if(this._matchesParents(i,t,n-1,o))return!0;if("~"===t.simples[n-1].combinator)break}i=P(i,o)}return!1}if(">="===i){let i=e;for(;i;){if(this._matchesSimple(i,r,o)){if(this._matchesParents(i,t,n-1,o))return!0;if(""===t.simples[n-1].combinator)break}i=C(i,o)}return!1}throw new Error(`Unsupported combinator "${i}"`)}))}_matchesEngine(e,t,n,o){if(e.matches)return this._callMatches(e,t,n,o);if(e.query)return this._callQuery(e,n,o).includes(t);throw new Error(\'Selector engine should implement "matches" or "query"\')}_queryEngine(e,t,n){if(e.query)return this._callQuery(e,n,t);if(e.matches)return this._queryCSS(t,"*").filter((o=>this._callMatches(e,o,n,t)));throw new Error(\'Selector engine should implement "matches" or "query"\')}_callMatches(e,t,n,o){return this._cached(this._cacheCallMatches,t,[e,o.scope,o.pierceShadow,...n],(()=>e.matches(t,n,o,this)))}_callQuery(e,t,n){return this._cached(this._cacheCallQuery,e,[n.scope,n.pierceShadow,...t],(()=>e.query(n,t,this)))}_matchesCSS(e,t){return e.matches(t)}_queryCSS(e,t){return this._cached(this._cacheQueryCSS,t,[e.scope,e.pierceShadow],(()=>{let n=[];return function o(r){if(n=n.concat([...r.querySelectorAll(t)]),e.pierceShadow){r.shadowRoot&&o(r.shadowRoot);for(const e of r.querySelectorAll("*"))e.shadowRoot&&o(e.shadowRoot)}}(e.scope),n}))}_getEngine(e){const t=this._engines.get(e);if(!t)throw new Error(`Unknown selector engine "${e}"`);return t}};const r={matches(e,t,n,o){if(0===t.length)throw new Error(\'"is" engine expects non-empty selector list\');return t.some((t=>o.matches(e,t,n)))},query(e,t,n){if(0===t.length)throw new Error(\'"is" engine expects non-empty selector list\');let o=[];for(const r of t)o=o.concat(n.query(e,r));return 1===t.length?o:function(e){const t=new Map,n=[],o=[];function r(e){let o=t.get(e);if(o)return o;const i=x(e);return i?r(i).children.push(e):n.push(e),o={children:[],taken:!1},t.set(e,o),o}return e.forEach((e=>r(e).taken=!0)),n.forEach((function e(n){const r=t.get(n);if(r.taken&&o.push(n),r.children.length>1){const e=new Set(r.children);r.children=[];let t=n.firstElementChild;for(;t&&r.children.length<e.size;)e.has(t)&&r.children.push(t),t=t.nextElementSibling;for(t=n.shadowRoot?n.shadowRoot.firstElementChild:null;t&&r.children.length<e.size;)e.has(t)&&r.children.push(t),t=t.nextElementSibling}r.children.forEach(e)})),o}(o)}},i={matches(e,t,n,o){if(0===t.length)throw new Error(\'"has" engine expects non-empty selector list\');return o.query({...n,scope:e},t).length>0}},s={matches(e,t,n,o){if(0!==t.length)throw new Error(\'"scope" engine expects no arguments\');return 9===n.scope.nodeType?e===n.scope.documentElement:e===n.scope},query(e,t,n){if(0!==t.length)throw new Error(\'"scope" engine expects no arguments\');if(9===e.scope.nodeType){const t=e.scope.documentElement;return t?[t]:[]}return 1===e.scope.nodeType?[e.scope]:[]}},c={matches(e,t,n,o){if(0===t.length)throw new Error(\'"not" engine expects non-empty selector list\');return!o.matches(e,t,n)}},l={query:(e,t,n)=>n.query({...e,pierceShadow:!1},t),matches:(e,t,n,o)=>o.matches(e,t,{...n,pierceShadow:!1})},a={matches(e,t,n,o){if(t.length)throw new Error(\'"visible" engine expects no arguments\');return A(e)}},h={matches(e,t,n,o){if(1!==t.length||"string"!=typeof t[0])throw new Error(\'"text" engine expects a single string\');return"self"===v(o,e,d(t[0]))}},u={matches(e,t,n,o){if(1!==t.length||"string"!=typeof t[0])throw new Error(\'"text-is" engine expects a single string\');return"none"!==v(o,e,m(t[0]))}},p={matches(e,t,n,o){if(0===t.length||"string"!=typeof t[0]||t.length>2||2===t.length&&"string"!=typeof t[1])throw new Error(\'"text-matches" engine expects a regexp body and optional regexp flags\');return"self"===v(o,e,g(t[0],2===t.length?t[1]:void 0))}},f={matches(e,t,n,o){if(1!==t.length||"string"!=typeof t[0])throw new Error(\'"has-text" engine expects a single string\');return!y(e)&&d(t[0])(_(o,e))}};function d(e){return e=e.trim().replace(/\\s+/g," ").toLowerCase(),t=>t.full.trim().replace(/\\s+/g," ").toLowerCase().includes(e)}function m(e){return e=e.trim().replace(/\\s+/g," "),t=>!e&&!t.immediate.length||t.immediate.some((t=>t.trim().replace(/\\s+/g," ")===e))}function g(e,t){const n=new RegExp(e,t);return e=>n.test(e.full)}function y(e){return"SCRIPT"===e.nodeName||"STYLE"===e.nodeName||document.head&&document.head.contains(e)}function _(e,t){let n=e._cacheText.get(t);if(void 0===n){if(n={full:"",immediate:[]},!y(t)){let o="";if(t instanceof HTMLInputElement&&("submit"===t.type||"button"===t.type))n={full:t.value,immediate:[t.value]};else{for(let r=t.firstChild;r;r=r.nextSibling)r.nodeType===Node.TEXT_NODE?(n.full+=r.nodeValue||"",o+=r.nodeValue||""):(o&&n.immediate.push(o),o="",r.nodeType===Node.ELEMENT_NODE&&(n.full+=_(e,r).full));o&&n.immediate.push(o),t.shadowRoot&&(n.full+=_(e,t.shadowRoot).full)}}e._cacheText.set(t,n)}return n}function v(e,t,n){if(y(t))return"none";if(!n(_(e,t)))return"none";for(let o=t.firstChild;o;o=o.nextSibling)if(o.nodeType===Node.ELEMENT_NODE&&n(_(e,o)))return"selfAndChildren";return t.shadowRoot&&n(_(e,t.shadowRoot))?"selfAndChildren":"self"}function w(e,t,n){const o=e.left-t.right;if(!(o<0||void 0!==n&&o>n))return o+Math.max(t.bottom-e.bottom,0)+Math.max(e.top-t.top,0)}function E(e,t,n){const o=t.left-e.right;if(!(o<0||void 0!==n&&o>n))return o+Math.max(t.bottom-e.bottom,0)+Math.max(e.top-t.top,0)}function S(e,t,n){const o=t.top-e.bottom;if(!(o<0||void 0!==n&&o>n))return o+Math.max(e.left-t.left,0)+Math.max(t.right-e.right,0)}function T(e,t,n){const o=e.top-t.bottom;if(!(o<0||void 0!==n&&o>n))return o+Math.max(e.left-t.left,0)+Math.max(t.right-e.right,0)}function b(e,t,n){const o=void 0===n?50:n;let r=0;return e.left-t.right>=0&&(r+=e.left-t.right),t.left-e.right>=0&&(r+=t.left-e.right),t.top-e.bottom>=0&&(r+=t.top-e.bottom),e.top-t.bottom>=0&&(r+=e.top-t.bottom),r>o?void 0:r}function k(e,t){return{matches(n,o,r,i){const s=o.length&&"number"==typeof o[o.length-1]?o[o.length-1]:void 0,c=void 0===s?o:o.slice(0,o.length-1);if(o.length<1+(void 0===s?0:1))throw new Error(`"${e}" engine expects a selector list and optional maximum distance in pixels`);const l=n.getBoundingClientRect();let a;for(const e of i.query(r,c)){if(e===n)continue;const o=t(l,e.getBoundingClientRect(),s);void 0!==o&&(void 0===a||o<a)&&(a=o)}return void 0!==a&&(i._markScore(n,a),!0)}}}const M={query(e,t,n){let o=t[t.length-1];if(t.length<2)throw new Error(\'"nth-match" engine expects non-empty selector list and an index argument\');if("number"!=typeof o||o<1)throw new Error(\'"nth-match" engine expects a one-based index as the last argument\');const i=r.query(e,t.slice(0,t.length-1),n);return o--,o<i.length?[i[o]]:[]}};function x(e){return e.parentElement?e.parentElement:e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.parentNode.host?e.parentNode.host:void 0}function C(e,t){if(e!==t.scope)return t.pierceShadow?x(e):e.parentElement||void 0}function P(e,t){if(e!==t.scope)return e.previousElementSibling||void 0}function A(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return!0;const t=e.ownerDocument.defaultView.getComputedStyle(e);if(!t||"hidden"===t.visibility)return!1;const n=e.getBoundingClientRect();return n.width>0&&n.height>0}},854:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.querySelector=function(e,t,n){try{const o=e.parseSelector(t);return{selector:t,elements:e.querySelectorAll(o,n)}}catch(e){return{selector:t,elements:[]}}},t.generateSelector=function(e,t){e._evaluator.begin();try{const n=function(e,t){if(t.ownerDocument.documentElement===t)return[{engine:"css",selector:"html",score:1}];const n=(a,u)=>{const d=u?r:i;let m=d.get(a);return void 0===m&&(m=((r,i)=>{const a=r===t;let u=i?function(e,t,n){if("SELECT"===t.nodeName)return[];const r=(0,o.elementText)(e._evaluator,t).full.trim().replace(/\\s+/g," ").substring(0,80);if(!r)return[];const i=[];let s=r;if((r.includes(\'"\')||r.includes(">>")||"/"===r[0])&&(s=`/.*${function(e){return e.replace(/[.*+?^>${}()|[\\]\\\\]/g,"\\\\$&")}(r)}.*/`),i.push({engine:"text",selector:s,score:10}),n&&s===r){let e=t.nodeName.toLocaleLowerCase();t.hasAttribute("role")&&(e+=`[role=${h(t.getAttribute("role"))}]`),i.push({engine:"css",selector:`${e}:has-text("${r}")`,score:30})}return i}(e,r,r===t).map((e=>[e])):[];r!==t&&(u=s(u));const d=function(e,t){const n=[];for(const e of["data-testid","data-test-id","data-test"])t.hasAttribute(e)&&n.push({engine:"css",selector:`[${e}=${h(t.getAttribute(e))}]`,score:1});if("INPUT"===t.nodeName){const e=t;e.placeholder&&n.push({engine:"css",selector:`[placeholder=${h(e.placeholder)}]`,score:10})}t.hasAttribute("aria-label")&&n.push({engine:"css",selector:`[aria-label=${h(t.getAttribute("aria-label"))}]`,score:10}),t.getAttribute("alt")&&["APPLET","AREA","IMG","INPUT"].includes(t.nodeName)&&n.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[alt=${h(t.getAttribute("alt"))}]`,score:10}),t.hasAttribute("role")&&n.push({engine:"css",selector:`${t.nodeName.toLocaleLowerCase()}[role=${h(t.getAttribute("role"))}]`,score:50}),t.getAttribute("name")&&["BUTTON","FORM","FIELDSET","IFRAME","INPUT","KEYGEN","OBJECT","OUTPUT","SELECT","TEXTAREA","MAP","META","PARAM"].includes(t.nodeName)&&n.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[name=${h(t.getAttribute("name"))}]`,score:50}),["INPUT","TEXTAREA"].includes(t.nodeName)&&"hidden"!==t.getAttribute("type")&&t.getAttribute("type")&&n.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[type=${h(t.getAttribute("type"))}]`,score:50}),["INPUT","TEXTAREA","SELECT"].includes(t.nodeName)&&n.push({engine:"css",selector:t.nodeName.toLowerCase(),score:50});const o=t.getAttribute("id");return o&&!function(e){let t,n=0;for(let o=0;o<e.length;++o){const r=e[o];let i;"-"!==r&&"_"!==r&&(i=r>="a"&&r<="z"?"lower":r>="A"&&r<="Z"?"upper":r>="0"&&r<="9"?"digit":"other","lower"!==i||"upper"!==t?(t&&t!==i&&++n,t=i):t=i)}return n>=e.length/4}(o)&&n.push({engine:"css",selector:l(o),score:100}),n.push({engine:"css",selector:t.nodeName.toLocaleLowerCase(),score:200}),n}(0,r).map((e=>[e]));let m=f(e,t.ownerDocument,r,[...u,...d],a);u=s(u);const g=t=>{const o=i&&!t.length,s=[...t,...d].filter((e=>!m||p(e)<p(m)));let l=s[0];if(l)for(let t=c(r);t;t=c(t)){const i=n(t,o);if(!i)continue;if(m&&p([...i,...l])>=p(m))continue;if(l=f(e,t,r,s,a),!l)return;const c=[...i,...l];(!m||p(c)<p(m))&&(m=c)}};return g(u),r===t&&u.length&&g([]),m})(a,u),d.set(a,m)),m};return n(t,!0)}(e,t=t.closest("button,select,input,[role=button],[role=checkbox],[role=radio]")||t),d=u(n||[a(e,t)]),m=e.parseSelector(d);return{selector:d,elements:e.querySelectorAll(m,t.ownerDocument)}}finally{r.clear(),i.clear(),e._evaluator.end()}};var o=n(848);const r=new Map,i=new Map;function s(e){return e.filter((e=>"/"!==e[0].selector[0]))}function c(e){return e.parentElement?e.parentElement:e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.parentNode.host?e.parentNode.host:null}function l(e){return/^[a-zA-Z][a-zA-Z0-9\\-\\_]+$/.test(e)?"#"+e:`[id="${e}"]`}function a(e,t){const n=1e7,o=t.ownerDocument,r=[];function i(n){const o=r.slice();n&&o.unshift(n);const i=o.join(" "),s=e.parseSelector(i);return e.querySelector(s,t.ownerDocument,!1)===t?i:void 0}for(let e=t;e&&e!==o;e=c(e)){const t=e.nodeName.toLowerCase();let o="";if(e.id){const t=l(e.id),r=i(t);if(r)return{engine:"css",selector:r,score:n};o=t}const s=e.parentNode,c=[...e.classList];for(let e=0;e<c.length;++e){const t="."+c.slice(0,e+1).join("."),r=i(t);if(r)return{engine:"css",selector:r,score:n};!o&&s&&1===s.querySelectorAll(t).length&&(o=t)}if(s){const r=[...s.children],c=0===r.filter((e=>e.nodeName.toLowerCase()===t)).indexOf(e)?t:`${t}:nth-child(${1+r.indexOf(e)})`,l=i(c);if(l)return{engine:"css",selector:l,score:n};o||(o=c)}else o||(o=t);r.unshift(o)}return{engine:"css",selector:i(),score:n}}function h(e){return`"${e.replace(/"/g,\'\\\\"\').replace(/\\n/g,"\\\\n")}"`}function u(e){const t=[];let n="";for(const{engine:o,selector:r}of e)t.length&&("css"!==n||"css"!==o||r.startsWith(":nth-match("))&&t.push(">>"),n=o,"css"===o?t.push(r):t.push(`${o}=${r}`);return t.join(" ")}function p(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n].score*(e.length-n);return t}function f(e,t,n,o,r){const i=o.map((e=>({tokens:e,score:p(e)})));i.sort(((e,t)=>e.score-t.score));let s=null;for(const{tokens:o}of i){const i=e.parseSelector(u(o)),c=e.querySelectorAll(i,t),l=c.indexOf(n);if(0===l)return o;if(!r||s||-1===l||c.length>5)continue;const a=o.map((e=>"text"!==e.engine?e:e.selector.startsWith("/")&&e.selector.endsWith("/")?{engine:"css",selector:`:text-matches("${e.selector.substring(1,e.selector.length-1)}")`,score:e.score}:{engine:"css",selector:`:text("${e.selector}")`,score:e.score}));s=[{engine:"css",selector:`:nth-match(${u(a)}, ${l+1})`,score:p(a)+1e3}]}return s}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}var o={};(()=>{var e=o;e.default=void 0;var t=n(854);function r(e){return(e.altKey?1:0)|(e.ctrlKey?2:0)|(e.metaKey?4:0)|(e.shiftKey?8:0)}function i(e){switch(e.which){case 1:return"left";case 2:return"middle";case 3:return"right"}return"left"}function s(e){if("CANVAS"===e.target.nodeName)return{x:e.offsetX,y:e.offsetY}}function c(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}function l(e){if(!e||"INPUT"!==e.nodeName)return null;const t=e;return"checkbox"===t.type?t:null}function a(e,t,n,o){return e.addEventListener(t,n,o),()=>{e.removeEventListener(t,n,o)}}var h=class{constructor(e,t){this._injectedScript=void 0,this._performingAction=!1,this._outerGlassPaneElement=void 0,this._glassPaneShadow=void 0,this._innerGlassPaneElement=void 0,this._highlightElements=[],this._tooltipElement=void 0,this._listeners=[],this._hoveredModel=null,this._hoveredElement=null,this._activeModel=null,this._expectProgrammaticKeyUp=!1,this._pollRecorderModeTimer=void 0,this._mode="none",this._actionPointElement=void 0,this._actionPoint=void 0,this._actionSelector=void 0,this._params=void 0,this._params=t,this._injectedScript=e,this._outerGlassPaneElement=document.createElement("x-pw-glass"),this._outerGlassPaneElement.style.position="fixed",this._outerGlassPaneElement.style.top="0",this._outerGlassPaneElement.style.right="0",this._outerGlassPaneElement.style.bottom="0",this._outerGlassPaneElement.style.left="0",this._outerGlassPaneElement.style.zIndex="2147483647",this._outerGlassPaneElement.style.pointerEvents="none",this._outerGlassPaneElement.style.display="flex",this._tooltipElement=document.createElement("x-pw-tooltip"),this._actionPointElement=document.createElement("x-pw-action-point"),this._actionPointElement.setAttribute("hidden","true"),this._innerGlassPaneElement=document.createElement("x-pw-glass-inner"),this._innerGlassPaneElement.style.flex="auto",this._innerGlassPaneElement.appendChild(this._tooltipElement),this._glassPaneShadow=this._outerGlassPaneElement.attachShadow({mode:this._params.isUnderTest?"open":"closed"}),this._glassPaneShadow.appendChild(this._innerGlassPaneElement),this._glassPaneShadow.appendChild(this._actionPointElement);const n=document.createElement("style");n.textContent="\\n        x-pw-tooltip {\\n          align-items: center;\\n          backdrop-filter: blur(5px);\\n          background-color: rgba(0, 0, 0, 0.7);\\n          border-radius: 2px;\\n          box-shadow: rgba(0, 0, 0, 0.1) 0px 3.6px 3.7px,\\n                      rgba(0, 0, 0, 0.15) 0px 12.1px 12.3px,\\n                      rgba(0, 0, 0, 0.1) 0px -2px 4px,\\n                      rgba(0, 0, 0, 0.15) 0px -12.1px 24px,\\n                      rgba(0, 0, 0, 0.25) 0px 54px 55px;\\n          color: rgb(204, 204, 204);\\n          display: none;\\n          font-family: \'Dank Mono\', \'Operator Mono\', Inconsolata, \'Fira Mono\',\\n                       \'SF Mono\', Monaco, \'Droid Sans Mono\', \'Source Code Pro\', monospace;\\n          font-size: 12.8px;\\n          font-weight: normal;\\n          left: 0;\\n          line-height: 1.5;\\n          max-width: 600px;\\n          padding: 3.2px 5.12px 3.2px;\\n          position: absolute;\\n          top: 0;\\n        }\\n        x-pw-action-point {\\n          position: absolute;\\n          width: 20px;\\n          height: 20px;\\n          background: red;\\n          border-radius: 10px;\\n          pointer-events: none;\\n          margin: -10px 0 0 -10px;\\n          z-index: 2;\\n        }\\n        *[hidden] {\\n          display: none !important;\\n        }\\n    ",this._glassPaneShadow.appendChild(n),this._refreshListenersIfNeeded(),setInterval((()=>{this._refreshListenersIfNeeded(),t.isUnderTest&&!this._reportedReadyForTest&&(this._reportedReadyForTest=!0,console.error("Recorder script ready for test"))}),500),globalThis._playwrightRefreshOverlay=()=>{this._pollRecorderMode().catch((e=>console.log(e)))},globalThis._playwrightRefreshOverlay()}_refreshListenersIfNeeded(){(this._outerGlassPaneElement.parentElement!==document.documentElement||this._outerGlassPaneElement.nextElementSibling)&&(function(e){for(const t of e)t();e.splice(0,e.length)}(this._listeners),this._listeners=[a(document,"click",(e=>this._onClick(e)),!0),a(document,"auxclick",(e=>this._onClick(e)),!0),a(document,"input",(e=>this._onInput(e)),!0),a(document,"keydown",(e=>this._onKeyDown(e)),!0),a(document,"keyup",(e=>this._onKeyUp(e)),!0),a(document,"mousedown",(e=>this._onMouseDown(e)),!0),a(document,"mouseup",(e=>this._onMouseUp(e)),!0),a(document,"mousemove",(e=>this._onMouseMove(e)),!0),a(document,"mouseleave",(e=>this._onMouseLeave(e)),!0),a(document,"focus",(()=>this._onFocus()),!0),a(document,"scroll",(()=>{this._hoveredModel=null,this._actionPointElement.hidden=!0,this._updateHighlight()}),!0)],document.documentElement.appendChild(this._outerGlassPaneElement))}async _pollRecorderMode(){var e;this._pollRecorderModeTimer&&clearTimeout(this._pollRecorderModeTimer);const n=await globalThis._playwrightRecorderState().catch((e=>null));if(!n)return void(this._pollRecorderModeTimer=setTimeout((()=>this._pollRecorderMode()),1e3));const{mode:o,actionPoint:r,actionSelector:i}=n;o!==this._mode&&(this._mode=o,this._clearHighlight()),r&&this._actionPoint&&r.x===this._actionPoint.x&&r.y===this._actionPoint.y||(r||this._actionPoint)&&(r?(this._actionPointElement.style.top=r.y+"px",this._actionPointElement.style.left=r.x+"px",this._actionPointElement.hidden=!1):this._actionPointElement.hidden=!0,this._actionPoint=r),!this._actionSelector||null!==(e=this._hoveredModel)&&void 0!==e&&e.elements.length||(this._actionSelector=void 0),i!==this._actionSelector&&(this._hoveredModel=i?(0,t.querySelector)(this._injectedScript,i,document):null,this._updateHighlight(),this._actionSelector=i),this._pollRecorderModeTimer=setTimeout((()=>this._pollRecorderMode()),1e3)}_clearHighlight(){this._hoveredModel=null,this._activeModel=null,this._updateHighlight()}_actionInProgress(e){return!!this._performingAction||(c(e),!1)}_consumedDueToNoModel(e,t){return!t&&(c(e),!0)}_consumedDueWrongTarget(e){return!(this._activeModel&&this._activeModel.elements[0]===this._deepEventTarget(e)||(c(e),0))}_onClick(e){if("inspecting"===this._mode&&globalThis._playwrightRecorderSetSelector(this._hoveredModel?this._hoveredModel.selector:""),this._shouldIgnoreMouseEvent(e))return;if(this._actionInProgress(e))return;if(this._consumedDueToNoModel(e,this._hoveredModel))return;const t=l(this._deepEventTarget(e));t?this._performAction({name:t.checked?"check":"uncheck",selector:this._hoveredModel.selector,signals:[]}):this._performAction({name:"click",selector:this._hoveredModel.selector,position:s(e),signals:[],button:i(e),modifiers:r(e),clickCount:e.detail})}_shouldIgnoreMouseEvent(e){const t=this._deepEventTarget(e);if("none"===this._mode)return!0;if("inspecting"===this._mode)return c(e),!0;const n=t.nodeName;return"SELECT"===n||!("INPUT"!==n||!["date"].includes(t.type))}_onMouseDown(e){this._shouldIgnoreMouseEvent(e)||(this._performingAction||c(e),this._activeModel=this._hoveredModel)}_onMouseUp(e){this._shouldIgnoreMouseEvent(e)||this._performingAction||c(e)}_onMouseMove(e){if("none"===this._mode)return;const t=this._deepEventTarget(e);this._hoveredElement!==t&&(this._hoveredElement=t,this._updateModelForHoveredElement())}_onMouseLeave(e){this._deepEventTarget(e).nodeType===Node.DOCUMENT_NODE&&(this._hoveredElement=null,this._updateModelForHoveredElement())}_onFocus(){const e=this._deepActiveElement(document),n=e?(0,t.generateSelector)(this._injectedScript,e):null;this._activeModel=n&&n.selector?n:null,this._params.isUnderTest&&console.error("Highlight updated for test: "+(n?n.selector:null))}_updateModelForHoveredElement(){if(!this._hoveredElement)return this._hoveredModel=null,void this._updateHighlight();const e=this._hoveredElement,{selector:n,elements:o}=(0,t.generateSelector)(this._injectedScript,e);this._hoveredModel&&this._hoveredModel.selector===n||this._hoveredElement!==e||(this._hoveredModel=n?{selector:n,elements:o}:null,this._updateHighlight(),this._params.isUnderTest&&console.error("Highlight updated for test: "+n))}_updateHighlight(){const e=this._hoveredModel?this._hoveredModel.elements:[];this._tooltipElement.textContent=this._hoveredModel?this._hoveredModel.selector:"",this._tooltipElement.style.top="0",this._tooltipElement.style.left="0",this._tooltipElement.style.display="flex";const t=e.map((e=>e.getBoundingClientRect())),n=this._tooltipElement.offsetWidth,o=this._tooltipElement.offsetHeight,r=this._innerGlassPaneElement.offsetWidth,i=this._innerGlassPaneElement.offsetHeight;if(t.length){const e=t[0];let s=e.left;s+n>r-5&&(s=r-n-5);let c=e.bottom+5;c+o>i-5&&(c=e.top>o+5?e.top-o-5:i-5-o),this._tooltipElement.style.top=c+"px",this._tooltipElement.style.left=s+"px"}else this._tooltipElement.style.display="none";const s=this._highlightElements;this._highlightElements=[];for(const e of t){const t=s.length?s.shift():this._createHighlightElement(),n="recording"===this._mode?"#dc6f6f7f":"#6fa8dc7f";t.style.backgroundColor=this._highlightElements.length?"#f6b26b7f":n,t.style.left=e.x+"px",t.style.top=e.y+"px",t.style.width=e.width+"px",t.style.height=e.height+"px",t.style.display="block",this._highlightElements.push(t)}for(const e of s)e.style.display="none",this._highlightElements.push(e)}_createHighlightElement(){const e=document.createElement("x-pw-highlight");return e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="0",e.style.height="0",e.style.boxSizing="border-box",this._glassPaneShadow.appendChild(e),e}_onInput(e){if("recording"!==this._mode)return!0;const t=this._deepEventTarget(e);if(["INPUT","TEXTAREA"].includes(t.nodeName)){const n=t,o=(n.type||"").toLowerCase();if("checkbox"===o)return;if("file"===o)return void globalThis._playwrightRecorderRecordAction({name:"setInputFiles",selector:this._activeModel.selector,signals:[],files:[...n.files||[]].map((e=>e.name))});if(this._consumedDueWrongTarget(e))return;globalThis._playwrightRecorderRecordAction({name:"fill",selector:this._activeModel.selector,signals:[],text:n.value})}if("SELECT"===t.nodeName){const n=t;if(this._actionInProgress(e))return;this._performAction({name:"select",selector:this._hoveredModel.selector,options:[...n.selectedOptions].map((e=>e.value)),signals:[]})}}_shouldGenerateKeyPressFor(e){if(["Backspace","Delete","AltGraph"].includes(e.key))return!1;if("@"===e.key&&"KeyL"===e.code)return!1;if(navigator.platform.includes("Mac")){if("v"===e.key&&e.metaKey)return!1}else{if("v"===e.key&&e.ctrlKey)return!1;if("Insert"===e.key&&e.shiftKey)return!1}if(["Shift","Control","Meta","Alt"].includes(e.key))return!1;const t=e.ctrlKey||e.altKey||e.metaKey;return!(1===e.key.length&&!t&&!l(this._deepEventTarget(e)))}_onKeyDown(e){if("inspecting"!==this._mode){if("recording"!==this._mode)return!0;if(this._shouldGenerateKeyPressFor(e))if(this._actionInProgress(e))this._expectProgrammaticKeyUp=!0;else if(!this._consumedDueWrongTarget(e)){if(" "===e.key){const t=l(this._deepEventTarget(e));if(t)return void this._performAction({name:t.checked?"uncheck":"check",selector:this._activeModel.selector,signals:[]})}this._performAction({name:"press",selector:this._activeModel.selector,signals:[],key:e.key,modifiers:r(e)})}}else c(e)}_onKeyUp(e){this._shouldGenerateKeyPressFor(e)&&(this._expectProgrammaticKeyUp?this._expectProgrammaticKeyUp=!1:c(e))}async _performAction(e){this._performingAction=!0,await globalThis._playwrightRecorderPerformAction(e).catch((()=>{})),this._performingAction=!1,this._updateModelForHoveredElement(),this._onFocus(),this._params.isUnderTest&&console.error("Action performed for test: "+JSON.stringify({hovered:this._hoveredModel?this._hoveredModel.selector:null,active:this._activeModel?this._activeModel.selector:null}))}_deepEventTarget(e){return e.composedPath()[0]}_deepActiveElement(e){let t=e.activeElement;for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}};e.default=h})(),pwExport=o.default})();';vu.source=$B});var Am=v(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.source=void 0;var zB='var pwExport;(()=>{"use strict";var e={317:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseCSS=function(e,t){let r;try{r=n.tokenize(e),r[r.length-1]instanceof n.EOFToken||r.push(new n.EOFToken)}catch(t){const r=t.message+` while parsing selector "${e}"`,n=(t.stack||"").indexOf(t.message);throw-1!==n&&(t.stack=t.stack.substring(0,n)+r+t.stack.substring(n+t.message.length)),t.message=r,t}const o=r.find((e=>e instanceof n.AtKeywordToken||e instanceof n.BadStringToken||e instanceof n.BadURLToken||e instanceof n.ColumnToken||e instanceof n.CDOToken||e instanceof n.CDCToken||e instanceof n.SemicolonToken||e instanceof n.OpenCurlyToken||e instanceof n.CloseCurlyToken||e instanceof n.URLToken||e instanceof n.PercentageToken));if(o)throw new Error(`Unsupported token "${o.toSource()}" while parsing selector "${e}"`);let i=0;const s=new Set;function c(){return new Error(`Unexpected token "${r[i].toSource()}" while parsing selector "${e}"`)}function a(){for(;r[i]instanceof n.WhitespaceToken;)i++}function u(e=i){return r[e]instanceof n.IdentToken}function p(e=i){return r[e]instanceof n.CommaToken}function l(e=i){return r[e]instanceof n.CloseParenToken}function h(e=i){return r[e]instanceof n.DelimToken&&"*"===r[e].value}function f(e=i){return r[e]instanceof n.EOFToken}function y(e=i){return r[e]instanceof n.DelimToken&&[">","+","~"].includes(r[e].value)}function g(e=i){return p(e)||l(e)||f(e)||y(e)||r[e]instanceof n.WhitespaceToken}function m(){const e=[d()];for(;a(),p();)i++,e.push(d());return e}function d(){return a(),function(e=i){return r[e]instanceof n.NumberToken}()||function(e=i){return r[e]instanceof n.StringToken}()?r[i++].value:function(){const e={simples:[]};for(a(),y()?e.simples.push({selector:{functions:[{name:"scope",args:[]}]},combinator:""}):e.simples.push({selector:w(),combinator:""});;){if(a(),y())e.simples[e.simples.length-1].combinator=r[i++].value,a();else if(g())break;e.simples.push({combinator:"",selector:w()})}return e}()}function w(){let e="";const o=[];for(;!g();)if(u()||h())e+=r[i++].toSource();else if(r[i]instanceof n.HashToken)e+=r[i++].toSource();else if(r[i]instanceof n.DelimToken&&"."===r[i].value){if(i++,!u())throw c();e+="."+r[i++].toSource()}else if(r[i]instanceof n.ColonToken)if(i++,u())if(t.has(r[i].value.toLowerCase())){const e=r[i++].value.toLowerCase();o.push({name:e,args:[]}),s.add(e)}else e+=":"+r[i++].toSource();else{if(!(r[i]instanceof n.FunctionToken))throw c();{const n=r[i++].value.toLowerCase();if(t.has(n)?(o.push({name:n,args:m()}),s.add(n)):e+=`:${n}(${S()})`,a(),!l())throw c();i++}}else{if(!(r[i]instanceof n.OpenSquareToken))throw c();for(e+="[",i++;!(r[i]instanceof n.CloseSquareToken||f());)e+=r[i++].toSource();if(!(r[i]instanceof n.CloseSquareToken))throw c();e+="]",i++}if(!e&&!o.length)throw c();return{css:e||void 0,functions:o}}function S(){let e="";for(;!l()&&!f();)e+=r[i++].toSource();return e}const v=m();if(!f())throw new Error(`Error while parsing selector "${e}"`);if(v.some((e=>"object"!=typeof e||!("simples"in e))))throw new Error(`Error while parsing selector "${e}"`);return{selector:v,names:Array.from(s)}},t.serializeSelector=function e(t){return t.map((t=>"string"==typeof t?`"${t}"`:"number"==typeof t?String(t):t.simples.map((({selector:t,combinator:r})=>{let n=t.css||"";return n+=t.functions.map((t=>`:${t.name}(${e(t.args)})`)).join(""),r&&(n+=" "+r),n})).join(" "))).join(", ")};var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=i?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(n,s,c):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(503));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}},503:(e,t)=>{var r,n;r=function(e){var t=function(e,t,r){return e>=t&&e<=r};function r(e){return t(e,48,57)}function n(e){return r(e)||t(e,65,70)||t(e,97,102)}function o(e){return function(e){return t(e,65,90)}(e)||function(e){return t(e,97,122)}(e)}function i(e){return o(e)||function(e){return e>=128}(e)||95==e}function s(e){return i(e)||r(e)||45==e}function c(e){return t(e,0,8)||11==e||t(e,14,31)||127==e}function a(e){return 10==e}function u(e){return a(e)||9==e||32==e}var p=function(e){this.message=e};function l(e){if(e<=65535)return String.fromCharCode(e);e-=Math.pow(2,16);var t=Math.floor(e/Math.pow(2,10))+55296,r=e%Math.pow(2,10)+56320;return String.fromCharCode(t)+String.fromCharCode(r)}function h(){throw"Abstract Base Class"}function f(){return this}function y(){return this}function g(){return this}function m(){return this}function d(){return this}function w(){return this}function S(){return this}function v(){return this}function _(){throw"Abstract Base Class"}function T(){return this.value="{",this.mirror="}",this}function b(){return this.value="}",this.mirror="{",this}function E(){return this.value="[",this.mirror="]",this}function k(){return this.value="]",this.mirror="[",this}function C(){return this.value="(",this.mirror=")",this}function O(){return this.value=")",this.mirror="(",this}function M(){return this}function x(){return this}function N(){return this}function A(){return this}function j(){return this}function $(){return this}function q(){return this}function P(e){return this.value=l(e),this}function L(){throw"Abstract Base Class"}function R(e){this.value=e}function D(e){this.value=e,this.mirror=")"}function I(e){this.value=e}function U(e){this.value=e,this.type="unrestricted"}function B(e){this.value=e}function Q(e){this.value=e}function F(){this.value=null,this.type="integer",this.repr=""}function J(){this.value=null,this.repr=""}function W(){this.value=null,this.type="integer",this.repr="",this.unit=""}function z(e){for(var r="",n=(e=""+e).charCodeAt(0),o=0;o<e.length;o++){var i=e.charCodeAt(o);if(0==i)throw new p("Invalid character: the input contains U+0000.");t(i,1,31)||127==i||0==o&&t(i,48,57)||1==o&&t(i,48,57)&&45==n?r+="\\\\"+i.toString(16)+" ":i>=128||45==i||95==i||t(i,48,57)||t(i,65,90)||t(i,97,122)?r+=e[o]:r+="\\\\"+e[o]}return r}function G(e){e=""+e;for(var r="",n=0;n<e.length;n++){var o=e.charCodeAt(n);if(0==o)throw new p("Invalid character: the input contains U+0000.");t(o,1,31)||127==o?r+="\\\\"+o.toString(16)+" ":r+=34==o||92==o?"\\\\"+e[n]:e[n]}return r}(p.prototype=new Error).name="InvalidCharacterError",h.prototype.toJSON=function(){return{token:this.tokenType}},h.prototype.toString=function(){return this.tokenType},h.prototype.toSource=function(){return""+this},f.prototype=Object.create(h.prototype),f.prototype.tokenType="BADSTRING",y.prototype=Object.create(h.prototype),y.prototype.tokenType="BADURL",g.prototype=Object.create(h.prototype),g.prototype.tokenType="WHITESPACE",g.prototype.toString=function(){return"WS"},g.prototype.toSource=function(){return" "},m.prototype=Object.create(h.prototype),m.prototype.tokenType="CDO",m.prototype.toSource=function(){return"\\x3c!--"},d.prototype=Object.create(h.prototype),d.prototype.tokenType="CDC",d.prototype.toSource=function(){return"--\\x3e"},w.prototype=Object.create(h.prototype),w.prototype.tokenType=":",S.prototype=Object.create(h.prototype),S.prototype.tokenType=";",v.prototype=Object.create(h.prototype),v.prototype.tokenType=",",_.prototype=Object.create(h.prototype),T.prototype=Object.create(_.prototype),T.prototype.tokenType="{",b.prototype=Object.create(_.prototype),b.prototype.tokenType="}",E.prototype=Object.create(_.prototype),E.prototype.tokenType="[",k.prototype=Object.create(_.prototype),k.prototype.tokenType="]",C.prototype=Object.create(_.prototype),C.prototype.tokenType="(",O.prototype=Object.create(_.prototype),O.prototype.tokenType=")",M.prototype=Object.create(h.prototype),M.prototype.tokenType="~=",x.prototype=Object.create(h.prototype),x.prototype.tokenType="|=",N.prototype=Object.create(h.prototype),N.prototype.tokenType="^=",A.prototype=Object.create(h.prototype),A.prototype.tokenType="$=",j.prototype=Object.create(h.prototype),j.prototype.tokenType="*=",$.prototype=Object.create(h.prototype),$.prototype.tokenType="||",q.prototype=Object.create(h.prototype),q.prototype.tokenType="EOF",q.prototype.toSource=function(){return""},P.prototype=Object.create(h.prototype),P.prototype.tokenType="DELIM",P.prototype.toString=function(){return"DELIM("+this.value+")"},P.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},P.prototype.toSource=function(){return"\\\\"==this.value?"\\\\\\n":this.value},L.prototype=Object.create(h.prototype),L.prototype.ASCIIMatch=function(e){return this.value.toLowerCase()==e.toLowerCase()},L.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},R.prototype=Object.create(L.prototype),R.prototype.tokenType="IDENT",R.prototype.toString=function(){return"IDENT("+this.value+")"},R.prototype.toSource=function(){return z(this.value)},D.prototype=Object.create(L.prototype),D.prototype.tokenType="FUNCTION",D.prototype.toString=function(){return"FUNCTION("+this.value+")"},D.prototype.toSource=function(){return z(this.value)+"("},I.prototype=Object.create(L.prototype),I.prototype.tokenType="AT-KEYWORD",I.prototype.toString=function(){return"AT("+this.value+")"},I.prototype.toSource=function(){return"@"+z(this.value)},U.prototype=Object.create(L.prototype),U.prototype.tokenType="HASH",U.prototype.toString=function(){return"HASH("+this.value+")"},U.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e},U.prototype.toSource=function(){return"id"==this.type?"#"+z(this.value):"#"+function(e){for(var r="",n=((e=""+e).charCodeAt(0),0);n<e.length;n++){var o=e.charCodeAt(n);if(0==o)throw new p("Invalid character: the input contains U+0000.");o>=128||45==o||95==o||t(o,48,57)||t(o,65,90)||t(o,97,122)?r+=e[n]:r+="\\\\"+o.toString(16)+" "}return r}(this.value)},B.prototype=Object.create(L.prototype),B.prototype.tokenType="STRING",B.prototype.toString=function(){return\'"\'+G(this.value)+\'"\'},Q.prototype=Object.create(L.prototype),Q.prototype.tokenType="URL",Q.prototype.toString=function(){return"URL("+this.value+")"},Q.prototype.toSource=function(){return\'url("\'+G(this.value)+\'")\'},F.prototype=Object.create(h.prototype),F.prototype.tokenType="NUMBER",F.prototype.toString=function(){return"integer"==this.type?"INT("+this.value+")":"NUMBER("+this.value+")"},F.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e},F.prototype.toSource=function(){return this.repr},J.prototype=Object.create(h.prototype),J.prototype.tokenType="PERCENTAGE",J.prototype.toString=function(){return"PERCENTAGE("+this.value+")"},J.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.repr=this.repr,e},J.prototype.toSource=function(){return this.repr+"%"},W.prototype=Object.create(h.prototype),W.prototype.tokenType="DIMENSION",W.prototype.toString=function(){return"DIM("+this.value+","+this.unit+")"},W.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e.unit=this.unit,e},W.prototype.toSource=function(){var e=this.repr,r=z(this.unit);return"e"!=r[0].toLowerCase()||"-"!=r[1]&&!t(r.charCodeAt(1),48,57)||(r="\\\\65 "+r.slice(1,r.length)),e+r},e.tokenize=function(e){e=function(e){for(var r=[],n=0;n<e.length;n++){var o=e.charCodeAt(n);if(13==o&&10==e.charCodeAt(n+1)&&(o=10,n++),13!=o&&12!=o||(o=10),0==o&&(o=65533),t(o,55296,56319)&&t(e.charCodeAt(n+1),56320,57343)){var i=o-55296,s=e.charCodeAt(n+1)-56320;o=Math.pow(2,16)+i*Math.pow(2,10)+s,n++}r.push(o)}return r}(e);for(var o,p=-1,h=[],_=0,L=0,z=0,G={line:_,column:L},H=function(t){return t>=e.length?-1:e[t]},V=function(e){if(void 0===e&&(e=1),e>3)throw"Spec Error: no more than three codepoints of lookahead.";return H(p+e)},K=function(e){return void 0===e&&(e=1),a(o=H(p+=e))?(_+=1,z=L,L=0):L+=e,!0},X=function(){return p-=1,a(o)?(_-=1,L=z):L-=1,G.line=_,G.column=L,!0},Z=function(e){return void 0===e&&(e=o),-1==e},Y=function(){return console.log("Parse error at index "+p+", processing codepoint 0x"+o.toString(16)+"."),!0},ee=function(){if(te(),K(),u(o)){for(;u(V());)K();return new g}if(34==o)return oe();if(35==o){if(s(V())||ce(V(1),V(2))){var e=new U;return ue(V(1),V(2),V(3))&&(e.type="id"),e.value=he(),e}return new P(o)}return 36==o?61==V()?(K(),new A):new P(o):39==o?oe():40==o?new C:41==o?new O:42==o?61==V()?(K(),new j):new P(o):43==o?le()?(X(),re()):new P(o):44==o?new v:45==o?le()?(X(),re()):45==V(1)&&62==V(2)?(K(2),new d):pe()?(X(),ne()):new P(o):46==o?le()?(X(),re()):new P(o):58==o?new w:59==o?new S:60==o?33==V(1)&&45==V(2)&&45==V(3)?(K(3),new m):new P(o):64==o?ue(V(1),V(2),V(3))?new I(he()):new P(o):91==o?new E:92==o?ae()?(X(),ne()):(Y(),new P(o)):93==o?new k:94==o?61==V()?(K(),new N):new P(o):123==o?new T:124==o?61==V()?(K(),new x):124==V()?(K(),new $):new P(o):125==o?new b:126==o?61==V()?(K(),new M):new P(o):r(o)?(X(),re()):i(o)?(X(),ne()):Z()?new q:new P(o)},te=function(){for(;47==V(1)&&42==V(2);)for(K(2);;){if(K(),42==o&&47==V()){K();break}if(Z())return void Y()}},re=function(){var e,t=fe();return ue(V(1),V(2),V(3))?((e=new W).value=t.value,e.repr=t.repr,e.type=t.type,e.unit=he(),e):37==V()?(K(),(e=new J).value=t.value,e.repr=t.repr,e):((e=new F).value=t.value,e.repr=t.repr,e.type=t.type,e)},ne=function(){var e=he();if("url"==e.toLowerCase()&&40==V()){for(K();u(V(1))&&u(V(2));)K();return 34==V()||39==V()?new D(e):!u(V())||34!=V(2)&&39!=V(2)?ie():new D(e)}return 40==V()?(K(),new D(e)):new R(e)},oe=function(e){void 0===e&&(e=o);for(var t="";K();){if(o==e||Z())return new B(t);if(a(o))return Y(),X(),new f;92==o?Z(V())||(a(V())?K():t+=l(se())):t+=l(o)}},ie=function(){for(var e=new Q("");u(V());)K();if(Z(V()))return e;for(;K();){if(41==o||Z())return e;if(u(o)){for(;u(V());)K();return 41==V()||Z(V())?(K(),e):(ge(),new y)}if(34==o||39==o||40==o||c(o))return Y(),ge(),new y;if(92==o){if(!ae())return Y(),ge(),new y;e.value+=l(se())}else e.value+=l(o)}},se=function(){if(K(),n(o)){for(var e=[o],t=0;t<5&&n(V());t++)K(),e.push(o);u(V())&&K();var r=parseInt(e.map((function(e){return String.fromCharCode(e)})).join(""),16);return r>1114111&&(r=65533),r}return Z()?65533:o},ce=function(e,t){return 92==e&&!a(t)},ae=function(){return ce(o,V())},ue=function(e,t,r){return 45==e?i(t)||45==t||ce(t,r):!!i(e)||92==e&&ce(e,t)},pe=function(){return ue(o,V(1),V(2))},le=function(){return e=o,t=V(1),n=V(2),43==e||45==e?!!r(t)||!(46!=t||!r(n)):46==e?!!r(t):!!r(e);var e,t,n},he=function(){for(var e="";K();)if(s(o))e+=l(o);else{if(!ae())return X(),e;e+=l(se())}},fe=function(){var e=[],t="integer";for(43!=V()&&45!=V()||(K(),e+=l(o));r(V());)K(),e+=l(o);if(46==V(1)&&r(V(2)))for(K(),e+=l(o),K(),e+=l(o),t="number";r(V());)K(),e+=l(o);var n=V(1),i=V(2),s=V(3);if(69!=n&&101!=n||!r(i)){if((69==n||101==n)&&(43==i||45==i)&&r(s))for(K(),e+=l(o),K(),e+=l(o),K(),e+=l(o),t="number";r(V());)K(),e+=l(o)}else for(K(),e+=l(o),K(),e+=l(o),t="number";r(V());)K(),e+=l(o);return{type:t,value:ye(e),repr:e}},ye=function(e){return+e},ge=function(){for(;K();){if(41==o||Z())return;ae()&&se()}},me=0;!Z(V());)if(h.push(ee()),++me>2*e.length)return"I\'m infinite-looping!";return h},e.IdentToken=R,e.FunctionToken=D,e.AtKeywordToken=I,e.HashToken=U,e.StringToken=B,e.BadStringToken=f,e.URLToken=Q,e.BadURLToken=y,e.DelimToken=P,e.NumberToken=F,e.PercentageToken=J,e.DimensionToken=W,e.IncludeMatchToken=M,e.DashMatchToken=x,e.PrefixMatchToken=N,e.SuffixMatchToken=A,e.SubstringMatchToken=j,e.ColumnToken=$,e.WhitespaceToken=g,e.CDOToken=m,e.CDCToken=d,e.ColonToken=w,e.SemicolonToken=S,e.CommaToken=v,e.OpenParenToken=C,e.CloseParenToken=O,e.OpenSquareToken=E,e.CloseSquareToken=k,e.OpenCurlyToken=T,e.CloseCurlyToken=b,e.EOFToken=q,e.CSSParserToken=h,e.GroupingToken=_},void 0===(n=r.apply(t,[t]))||(e.exports=n)},461:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseSelector=function(e){const t=function(e){let t,r=0,n=0;const o={parts:[]},i=()=>{const t=e.substring(n,r).trim(),i=t.indexOf("=");let s,c;-1!==i&&t.substring(0,i).trim().match(/^[a-zA-Z_0-9-+:*]+$/)?(s=t.substring(0,i).trim(),c=t.substring(i+1)):t.length>1&&\'"\'===t[0]&&\'"\'===t[t.length-1]||t.length>1&&"\'"===t[0]&&"\'"===t[t.length-1]?(s="text",c=t):/^\\(*\\/\\//.test(t)||t.startsWith("..")?(s="xpath",c=t):(s="css",c=t);let a=!1;if("*"===s[0]&&(a=!0,s=s.substring(1)),o.parts.push({name:s,body:c}),a){if(void 0!==o.capture)throw new Error("Only one of the selectors can capture using * modifier");o.capture=o.parts.length-1}};if(!e.includes(">>"))return r=e.length,i(),o;for(;r<e.length;){const o=e[r];"\\\\"===o&&r+1<e.length?r+=2:o===t?(t=void 0,r++):t||\'"\'!==o&&"\'"!==o&&"`"!==o?t||">"!==o||">"!==e[r+1]?r++:(i(),r+=2,n=r):(t=o,r++)}return i(),o}(e),r=t.parts.map((e=>"css"===e.name||"css:light"===e.name?("css:light"===e.name&&(e.body=":light("+e.body+")"),{name:"css",body:(0,n.parseCSS)(e.body,o).selector}):e));return{selector:e,capture:t.capture,parts:r}},t.customCSSNames=void 0;var n=r(317);const o=new Set(["not","is","where","has","scope","light","visible","text","text-matches","text-is","has-text","above","below","right-of","left-of","near","nth-match"]);t.customCSSNames=o},848:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createLaxTextMatcher=y,t.createStrictTextMatcher=g,t.createRegexTextMatcher=m,t.elementText=w,t.elementMatchesText=S,t.parentElementOrShadowHost=O,t.isVisible=N,t.SelectorEvaluatorImpl=void 0;var n=r(461);t.SelectorEvaluatorImpl=class{constructor(e){this._engines=new Map,this._cacheQueryCSS=new Map,this._cacheMatches=new Map,this._cacheQuery=new Map,this._cacheMatchesSimple=new Map,this._cacheMatchesParents=new Map,this._cacheCallMatches=new Map,this._cacheCallQuery=new Map,this._cacheQuerySimple=new Map,this._cacheText=new Map,this._scoreMap=void 0,this._retainCacheCounter=0;for(const[t,r]of e)this._engines.set(t,r);this._engines.set("not",c),this._engines.set("is",o),this._engines.set("where",o),this._engines.set("has",i),this._engines.set("scope",s),this._engines.set("light",a),this._engines.set("visible",u),this._engines.set("text",p),this._engines.set("text-is",l),this._engines.set("text-matches",h),this._engines.set("has-text",f),this._engines.set("right-of",k("right-of",v)),this._engines.set("left-of",k("left-of",_)),this._engines.set("above",k("above",T)),this._engines.set("below",k("below",b)),this._engines.set("near",k("near",E)),this._engines.set("nth-match",C);const t=[...this._engines.keys()];t.sort();const r=[...n.customCSSNames];if(r.sort(),t.join("|")!==r.join("|"))throw new Error(`Please keep customCSSNames in sync with evaluator engines: ${t.join("|")} vs ${r.join("|")}`)}begin(){++this._retainCacheCounter}end(){--this._retainCacheCounter,this._retainCacheCounter||(this._cacheQueryCSS.clear(),this._cacheMatches.clear(),this._cacheQuery.clear(),this._cacheMatchesSimple.clear(),this._cacheMatchesParents.clear(),this._cacheCallMatches.clear(),this._cacheCallQuery.clear(),this._cacheQuerySimple.clear(),this._cacheText.clear())}_cached(e,t,r,n){e.has(t)||e.set(t,[]);const o=e.get(t),i=o.find((e=>r.every(((t,r)=>e.rest[r]===t))));if(i)return i.result;const s=n();return o.push({rest:r,result:s}),s}_checkSelector(e){if("object"!=typeof e||!e||!(Array.isArray(e)||"simples"in e&&e.simples.length))throw new Error(`Malformed selector "${e}"`);return e}matches(e,t,r){const n=this._checkSelector(t);this.begin();try{return this._cached(this._cacheMatches,e,[n,r.scope,r.pierceShadow],(()=>Array.isArray(n)?this._matchesEngine(o,e,n,r):!!this._matchesSimple(e,n.simples[n.simples.length-1].selector,r)&&this._matchesParents(e,n,n.simples.length-2,r)))}finally{this.end()}}query(e,t){const r=this._checkSelector(t);this.begin();try{return this._cached(this._cacheQuery,r,[e.scope,e.pierceShadow],(()=>{if(Array.isArray(r))return this._queryEngine(o,e,r);const t=this._scoreMap;this._scoreMap=new Map;let n=this._querySimple(e,r.simples[r.simples.length-1].selector);return n=n.filter((t=>this._matchesParents(t,r,r.simples.length-2,e))),this._scoreMap.size&&n.sort(((e,t)=>{const r=this._scoreMap.get(e),n=this._scoreMap.get(t);return r===n?0:void 0===r?1:void 0===n?-1:r-n})),this._scoreMap=t,n}))}finally{this.end()}}_markScore(e,t){this._scoreMap&&this._scoreMap.set(e,t)}_matchesSimple(e,t,r){return this._cached(this._cacheMatchesSimple,e,[t,r.scope,r.pierceShadow],(()=>{if(!t.functions.some((e=>"scope"===e.name||"is"===e.name))&&e===r.scope)return!1;if(t.css&&!this._matchesCSS(e,t.css))return!1;for(const n of t.functions)if(!this._matchesEngine(this._getEngine(n.name),e,n.args,r))return!1;return!0}))}_querySimple(e,t){return t.functions.length?this._cached(this._cacheQuerySimple,t,[e.scope,e.pierceShadow],(()=>{let r=t.css;const n=t.functions;let o;"*"===r&&n.length&&(r=void 0);let i=-1;void 0!==r?o=this._queryCSS(e,r):(i=n.findIndex((e=>void 0!==this._getEngine(e.name).query)),-1===i&&(i=0),o=this._queryEngine(this._getEngine(n[i].name),e,n[i].args));for(let t=0;t<n.length;t++){if(t===i)continue;const r=this._getEngine(n[t].name);void 0!==r.matches&&(o=o.filter((o=>this._matchesEngine(r,o,n[t].args,e))))}for(let t=0;t<n.length;t++){if(t===i)continue;const r=this._getEngine(n[t].name);void 0===r.matches&&(o=o.filter((o=>this._matchesEngine(r,o,n[t].args,e))))}return o})):this._queryCSS(e,t.css||"*")}_matchesParents(e,t,r,n){return r<0||this._cached(this._cacheMatchesParents,e,[t,r,n.scope,n.pierceShadow],(()=>{const{selector:o,combinator:i}=t.simples[r];if(">"===i){const i=M(e,n);return!(!i||!this._matchesSimple(i,o,n))&&this._matchesParents(i,t,r-1,n)}if("+"===i){const i=x(e,n);return!(!i||!this._matchesSimple(i,o,n))&&this._matchesParents(i,t,r-1,n)}if(""===i){let i=M(e,n);for(;i;){if(this._matchesSimple(i,o,n)){if(this._matchesParents(i,t,r-1,n))return!0;if(""===t.simples[r-1].combinator)break}i=M(i,n)}return!1}if("~"===i){let i=x(e,n);for(;i;){if(this._matchesSimple(i,o,n)){if(this._matchesParents(i,t,r-1,n))return!0;if("~"===t.simples[r-1].combinator)break}i=x(i,n)}return!1}if(">="===i){let i=e;for(;i;){if(this._matchesSimple(i,o,n)){if(this._matchesParents(i,t,r-1,n))return!0;if(""===t.simples[r-1].combinator)break}i=M(i,n)}return!1}throw new Error(`Unsupported combinator "${i}"`)}))}_matchesEngine(e,t,r,n){if(e.matches)return this._callMatches(e,t,r,n);if(e.query)return this._callQuery(e,r,n).includes(t);throw new Error(\'Selector engine should implement "matches" or "query"\')}_queryEngine(e,t,r){if(e.query)return this._callQuery(e,r,t);if(e.matches)return this._queryCSS(t,"*").filter((n=>this._callMatches(e,n,r,t)));throw new Error(\'Selector engine should implement "matches" or "query"\')}_callMatches(e,t,r,n){return this._cached(this._cacheCallMatches,t,[e,n.scope,n.pierceShadow,...r],(()=>e.matches(t,r,n,this)))}_callQuery(e,t,r){return this._cached(this._cacheCallQuery,e,[r.scope,r.pierceShadow,...t],(()=>e.query(r,t,this)))}_matchesCSS(e,t){return e.matches(t)}_queryCSS(e,t){return this._cached(this._cacheQueryCSS,t,[e.scope,e.pierceShadow],(()=>{let r=[];return function n(o){if(r=r.concat([...o.querySelectorAll(t)]),e.pierceShadow){o.shadowRoot&&n(o.shadowRoot);for(const e of o.querySelectorAll("*"))e.shadowRoot&&n(e.shadowRoot)}}(e.scope),r}))}_getEngine(e){const t=this._engines.get(e);if(!t)throw new Error(`Unknown selector engine "${e}"`);return t}};const o={matches(e,t,r,n){if(0===t.length)throw new Error(\'"is" engine expects non-empty selector list\');return t.some((t=>n.matches(e,t,r)))},query(e,t,r){if(0===t.length)throw new Error(\'"is" engine expects non-empty selector list\');let n=[];for(const o of t)n=n.concat(r.query(e,o));return 1===t.length?n:function(e){const t=new Map,r=[],n=[];function o(e){let n=t.get(e);if(n)return n;const i=O(e);return i?o(i).children.push(e):r.push(e),n={children:[],taken:!1},t.set(e,n),n}return e.forEach((e=>o(e).taken=!0)),r.forEach((function e(r){const o=t.get(r);if(o.taken&&n.push(r),o.children.length>1){const e=new Set(o.children);o.children=[];let t=r.firstElementChild;for(;t&&o.children.length<e.size;)e.has(t)&&o.children.push(t),t=t.nextElementSibling;for(t=r.shadowRoot?r.shadowRoot.firstElementChild:null;t&&o.children.length<e.size;)e.has(t)&&o.children.push(t),t=t.nextElementSibling}o.children.forEach(e)})),n}(n)}},i={matches(e,t,r,n){if(0===t.length)throw new Error(\'"has" engine expects non-empty selector list\');return n.query({...r,scope:e},t).length>0}},s={matches(e,t,r,n){if(0!==t.length)throw new Error(\'"scope" engine expects no arguments\');return 9===r.scope.nodeType?e===r.scope.documentElement:e===r.scope},query(e,t,r){if(0!==t.length)throw new Error(\'"scope" engine expects no arguments\');if(9===e.scope.nodeType){const t=e.scope.documentElement;return t?[t]:[]}return 1===e.scope.nodeType?[e.scope]:[]}},c={matches(e,t,r,n){if(0===t.length)throw new Error(\'"not" engine expects non-empty selector list\');return!n.matches(e,t,r)}},a={query:(e,t,r)=>r.query({...e,pierceShadow:!1},t),matches:(e,t,r,n)=>n.matches(e,t,{...r,pierceShadow:!1})},u={matches(e,t,r,n){if(t.length)throw new Error(\'"visible" engine expects no arguments\');return N(e)}},p={matches(e,t,r,n){if(1!==t.length||"string"!=typeof t[0])throw new Error(\'"text" engine expects a single string\');return"self"===S(n,e,y(t[0]))}},l={matches(e,t,r,n){if(1!==t.length||"string"!=typeof t[0])throw new Error(\'"text-is" engine expects a single string\');return"none"!==S(n,e,g(t[0]))}},h={matches(e,t,r,n){if(0===t.length||"string"!=typeof t[0]||t.length>2||2===t.length&&"string"!=typeof t[1])throw new Error(\'"text-matches" engine expects a regexp body and optional regexp flags\');return"self"===S(n,e,m(t[0],2===t.length?t[1]:void 0))}},f={matches(e,t,r,n){if(1!==t.length||"string"!=typeof t[0])throw new Error(\'"has-text" engine expects a single string\');return!d(e)&&y(t[0])(w(n,e))}};function y(e){return e=e.trim().replace(/\\s+/g," ").toLowerCase(),t=>t.full.trim().replace(/\\s+/g," ").toLowerCase().includes(e)}function g(e){return e=e.trim().replace(/\\s+/g," "),t=>!e&&!t.immediate.length||t.immediate.some((t=>t.trim().replace(/\\s+/g," ")===e))}function m(e,t){const r=new RegExp(e,t);return e=>r.test(e.full)}function d(e){return"SCRIPT"===e.nodeName||"STYLE"===e.nodeName||document.head&&document.head.contains(e)}function w(e,t){let r=e._cacheText.get(t);if(void 0===r){if(r={full:"",immediate:[]},!d(t)){let n="";if(t instanceof HTMLInputElement&&("submit"===t.type||"button"===t.type))r={full:t.value,immediate:[t.value]};else{for(let o=t.firstChild;o;o=o.nextSibling)o.nodeType===Node.TEXT_NODE?(r.full+=o.nodeValue||"",n+=o.nodeValue||""):(n&&r.immediate.push(n),n="",o.nodeType===Node.ELEMENT_NODE&&(r.full+=w(e,o).full));n&&r.immediate.push(n),t.shadowRoot&&(r.full+=w(e,t.shadowRoot).full)}}e._cacheText.set(t,r)}return r}function S(e,t,r){if(d(t))return"none";if(!r(w(e,t)))return"none";for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType===Node.ELEMENT_NODE&&r(w(e,n)))return"selfAndChildren";return t.shadowRoot&&r(w(e,t.shadowRoot))?"selfAndChildren":"self"}function v(e,t,r){const n=e.left-t.right;if(!(n<0||void 0!==r&&n>r))return n+Math.max(t.bottom-e.bottom,0)+Math.max(e.top-t.top,0)}function _(e,t,r){const n=t.left-e.right;if(!(n<0||void 0!==r&&n>r))return n+Math.max(t.bottom-e.bottom,0)+Math.max(e.top-t.top,0)}function T(e,t,r){const n=t.top-e.bottom;if(!(n<0||void 0!==r&&n>r))return n+Math.max(e.left-t.left,0)+Math.max(t.right-e.right,0)}function b(e,t,r){const n=e.top-t.bottom;if(!(n<0||void 0!==r&&n>r))return n+Math.max(e.left-t.left,0)+Math.max(t.right-e.right,0)}function E(e,t,r){const n=void 0===r?50:r;let o=0;return e.left-t.right>=0&&(o+=e.left-t.right),t.left-e.right>=0&&(o+=t.left-e.right),t.top-e.bottom>=0&&(o+=t.top-e.bottom),e.top-t.bottom>=0&&(o+=e.top-t.bottom),o>n?void 0:o}function k(e,t){return{matches(r,n,o,i){const s=n.length&&"number"==typeof n[n.length-1]?n[n.length-1]:void 0,c=void 0===s?n:n.slice(0,n.length-1);if(n.length<1+(void 0===s?0:1))throw new Error(`"${e}" engine expects a selector list and optional maximum distance in pixels`);const a=r.getBoundingClientRect();let u;for(const e of i.query(o,c)){if(e===r)continue;const n=t(a,e.getBoundingClientRect(),s);void 0!==n&&(void 0===u||n<u)&&(u=n)}return void 0!==u&&(i._markScore(r,u),!0)}}}const C={query(e,t,r){let n=t[t.length-1];if(t.length<2)throw new Error(\'"nth-match" engine expects non-empty selector list and an index argument\');if("number"!=typeof n||n<1)throw new Error(\'"nth-match" engine expects a one-based index as the last argument\');const i=o.query(e,t.slice(0,t.length-1),r);return n--,n<i.length?[i[n]]:[]}};function O(e){return e.parentElement?e.parentElement:e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.parentNode.host?e.parentNode.host:void 0}function M(e,t){if(e!==t.scope)return t.pierceShadow?O(e):e.parentElement||void 0}function x(e,t){if(e!==t.scope)return e.previousElementSibling||void 0}function N(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return!0;const t=e.ownerDocument.defaultView.getComputedStyle(e);if(!t||"hidden"===t.visibility)return!1;const r=e.getBoundingClientRect();return r.width>0&&r.height>0}},854:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.querySelector=function(e,t,r){try{const n=e.parseSelector(t);return{selector:t,elements:e.querySelectorAll(n,r)}}catch(e){return{selector:t,elements:[]}}},t.generateSelector=function(e,t){e._evaluator.begin();try{const r=function(e,t){if(t.ownerDocument.documentElement===t)return[{engine:"css",selector:"html",score:1}];const r=(u,l)=>{const y=l?o:i;let g=y.get(u);return void 0===g&&(g=((o,i)=>{const u=o===t;let l=i?function(e,t,r){if("SELECT"===t.nodeName)return[];const o=(0,n.elementText)(e._evaluator,t).full.trim().replace(/\\s+/g," ").substring(0,80);if(!o)return[];const i=[];let s=o;if((o.includes(\'"\')||o.includes(">>")||"/"===o[0])&&(s=`/.*${function(e){return e.replace(/[.*+?^>${}()|[\\]\\\\]/g,"\\\\$&")}(o)}.*/`),i.push({engine:"text",selector:s,score:10}),r&&s===o){let e=t.nodeName.toLocaleLowerCase();t.hasAttribute("role")&&(e+=`[role=${p(t.getAttribute("role"))}]`),i.push({engine:"css",selector:`${e}:has-text("${o}")`,score:30})}return i}(e,o,o===t).map((e=>[e])):[];o!==t&&(l=s(l));const y=function(e,t){const r=[];for(const e of["data-testid","data-test-id","data-test"])t.hasAttribute(e)&&r.push({engine:"css",selector:`[${e}=${p(t.getAttribute(e))}]`,score:1});if("INPUT"===t.nodeName){const e=t;e.placeholder&&r.push({engine:"css",selector:`[placeholder=${p(e.placeholder)}]`,score:10})}t.hasAttribute("aria-label")&&r.push({engine:"css",selector:`[aria-label=${p(t.getAttribute("aria-label"))}]`,score:10}),t.getAttribute("alt")&&["APPLET","AREA","IMG","INPUT"].includes(t.nodeName)&&r.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[alt=${p(t.getAttribute("alt"))}]`,score:10}),t.hasAttribute("role")&&r.push({engine:"css",selector:`${t.nodeName.toLocaleLowerCase()}[role=${p(t.getAttribute("role"))}]`,score:50}),t.getAttribute("name")&&["BUTTON","FORM","FIELDSET","IFRAME","INPUT","KEYGEN","OBJECT","OUTPUT","SELECT","TEXTAREA","MAP","META","PARAM"].includes(t.nodeName)&&r.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[name=${p(t.getAttribute("name"))}]`,score:50}),["INPUT","TEXTAREA"].includes(t.nodeName)&&"hidden"!==t.getAttribute("type")&&t.getAttribute("type")&&r.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[type=${p(t.getAttribute("type"))}]`,score:50}),["INPUT","TEXTAREA","SELECT"].includes(t.nodeName)&&r.push({engine:"css",selector:t.nodeName.toLowerCase(),score:50});const n=t.getAttribute("id");return n&&!function(e){let t,r=0;for(let n=0;n<e.length;++n){const o=e[n];let i;"-"!==o&&"_"!==o&&(i=o>="a"&&o<="z"?"lower":o>="A"&&o<="Z"?"upper":o>="0"&&o<="9"?"digit":"other","lower"!==i||"upper"!==t?(t&&t!==i&&++r,t=i):t=i)}return r>=e.length/4}(n)&&r.push({engine:"css",selector:a(n),score:100}),r.push({engine:"css",selector:t.nodeName.toLocaleLowerCase(),score:200}),r}(0,o).map((e=>[e]));let g=f(e,t.ownerDocument,o,[...l,...y],u);l=s(l);const m=t=>{const n=i&&!t.length,s=[...t,...y].filter((e=>!g||h(e)<h(g)));let a=s[0];if(a)for(let t=c(o);t;t=c(t)){const i=r(t,n);if(!i)continue;if(g&&h([...i,...a])>=h(g))continue;if(a=f(e,t,o,s,u),!a)return;const c=[...i,...a];(!g||h(c)<h(g))&&(g=c)}};return m(l),o===t&&l.length&&m([]),g})(u,l),y.set(u,g)),g};return r(t,!0)}(e,t=t.closest("button,select,input,[role=button],[role=checkbox],[role=radio]")||t),y=l(r||[u(e,t)]),g=e.parseSelector(y);return{selector:y,elements:e.querySelectorAll(g,t.ownerDocument)}}finally{o.clear(),i.clear(),e._evaluator.end()}};var n=r(848);const o=new Map,i=new Map;function s(e){return e.filter((e=>"/"!==e[0].selector[0]))}function c(e){return e.parentElement?e.parentElement:e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.parentNode.host?e.parentNode.host:null}function a(e){return/^[a-zA-Z][a-zA-Z0-9\\-\\_]+$/.test(e)?"#"+e:`[id="${e}"]`}function u(e,t){const r=1e7,n=t.ownerDocument,o=[];function i(r){const n=o.slice();r&&n.unshift(r);const i=n.join(" "),s=e.parseSelector(i);return e.querySelector(s,t.ownerDocument,!1)===t?i:void 0}for(let e=t;e&&e!==n;e=c(e)){const t=e.nodeName.toLowerCase();let n="";if(e.id){const t=a(e.id),o=i(t);if(o)return{engine:"css",selector:o,score:r};n=t}const s=e.parentNode,c=[...e.classList];for(let e=0;e<c.length;++e){const t="."+c.slice(0,e+1).join("."),o=i(t);if(o)return{engine:"css",selector:o,score:r};!n&&s&&1===s.querySelectorAll(t).length&&(n=t)}if(s){const o=[...s.children],c=0===o.filter((e=>e.nodeName.toLowerCase()===t)).indexOf(e)?t:`${t}:nth-child(${1+o.indexOf(e)})`,a=i(c);if(a)return{engine:"css",selector:a,score:r};n||(n=c)}else n||(n=t);o.unshift(n)}return{engine:"css",selector:i(),score:r}}function p(e){return`"${e.replace(/"/g,\'\\\\"\').replace(/\\n/g,"\\\\n")}"`}function l(e){const t=[];let r="";for(const{engine:n,selector:o}of e)t.length&&("css"!==r||"css"!==n||o.startsWith(":nth-match("))&&t.push(">>"),r=n,"css"===n?t.push(o):t.push(`${n}=${o}`);return t.join(" ")}function h(e){let t=0;for(let r=0;r<e.length;r++)t+=e[r].score*(e.length-r);return t}function f(e,t,r,n,o){const i=n.map((e=>({tokens:e,score:h(e)})));i.sort(((e,t)=>e.score-t.score));let s=null;for(const{tokens:n}of i){const i=e.parseSelector(l(n)),c=e.querySelectorAll(i,t),a=c.indexOf(r);if(0===a)return n;if(!o||s||-1===a||c.length>5)continue;const u=n.map((e=>"text"!==e.engine?e:e.selector.startsWith("/")&&e.selector.endsWith("/")?{engine:"css",selector:`:text-matches("${e.selector.substring(1,e.selector.length-1)}")`,score:e.score}:{engine:"css",selector:`:text("${e.selector}")`,score:e.score}));s=[{engine:"css",selector:`:nth-match(${l(u)}, ${a+1})`,score:h(u)+1e3}]}return s}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}var n={};(()=>{var e=n;e.default=void 0;var t=r(854);var o=class{constructor(e){this._injectedScript=void 0,this._injectedScript=e,window.playwright||(window.playwright={$:(e,t)=>this._querySelector(e,!!t),$$:e=>this._querySelectorAll(e),inspect:e=>this._inspect(e),selector:e=>this._selector(e),resume:()=>this._resume()})}_querySelector(e,t){if("string"!=typeof e)throw new Error("Usage: playwright.query(\'Playwright >> selector\').");const r=this._injectedScript.parseSelector(e);return this._injectedScript.querySelector(r,document,t)}_querySelectorAll(e){if("string"!=typeof e)throw new Error("Usage: playwright.$$(\'Playwright >> selector\').");const t=this._injectedScript.parseSelector(e);return this._injectedScript.querySelectorAll(t,document)}_inspect(e){if("string"!=typeof e)throw new Error("Usage: playwright.inspect(\'Playwright >> selector\').");window.inspect(this._querySelector(e,!1))}_selector(e){if(!(e instanceof Element))throw new Error("Usage: playwright.selector(element).");return(0,t.generateSelector)(this._injectedScript,e).selector}_resume(){window._playwrightResume().catch((()=>{}))}};e.default=o})(),pwExport=n.default})();';yu.source=zB});var xS=v(Im=>{"use strict";Object.defineProperty(Im,"__esModule",{value:!0});Im.installAppIcon=KB;var VB=GB(x("fs"));function GB(r){return r&&r.__esModule?r:{default:r}}function KB(r){return c(this,null,function*(){let e=yield VB.default.promises.readFile(x.resolve("./appIcon.png"));yield r._delegate._mainFrameSession._client.send("Browser.setDockTile",{image:e.toString("base64")})})}});var ES=v((M7,SS)=>{var Mi=x("constants"),JB=process.cwd,bu=null,XB=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return bu||(bu=JB.call(process)),bu};try{process.cwd()}catch(r){}typeof process.chdir=="function"&&(Mm=process.chdir,process.chdir=function(r){bu=null,Mm.call(process,r)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Mm));var Mm;SS.exports=YB;function YB(r){Mi.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(r),r.lutimes||t(r),r.chown=s(r.chown),r.fchown=s(r.fchown),r.lchown=s(r.lchown),r.chmod=i(r.chmod),r.fchmod=i(r.fchmod),r.lchmod=i(r.lchmod),r.chownSync=o(r.chownSync),r.fchownSync=o(r.fchownSync),r.lchownSync=o(r.lchownSync),r.chmodSync=n(r.chmodSync),r.fchmodSync=n(r.fchmodSync),r.lchmodSync=n(r.lchmodSync),r.stat=l(r.stat),r.fstat=l(r.fstat),r.lstat=l(r.lstat),r.statSync=u(r.statSync),r.fstatSync=u(r.fstatSync),r.lstatSync=u(r.lstatSync),r.lchmod||(r.lchmod=function(h,p,f){f&&process.nextTick(f)},r.lchmodSync=function(){}),r.lchown||(r.lchown=function(h,p,f,m){m&&process.nextTick(m)},r.lchownSync=function(){}),XB==="win32"&&(r.rename=function(h){return function(p,f,m){var _=Date.now(),g=0;h(p,f,function w(b){if(b&&(b.code==="EACCES"||b.code==="EPERM")&&Date.now()-_<6e4){setTimeout(function(){r.stat(f,function(C,E){C&&C.code==="ENOENT"?h(p,f,w):m(b)})},g),g<100&&(g+=10);return}m&&m(b)})}}(r.rename)),r.read=function(h){function p(f,m,_,g,w,b){var C;if(b&&typeof b=="function"){var E=0;C=function(N,P,L){if(N&&N.code==="EAGAIN"&&E<10)return E++,h.call(r,f,m,_,g,w,C);b.apply(this,arguments)}}return h.call(r,f,m,_,g,w,C)}return Object.setPrototypeOf&&Object.setPrototypeOf(p,h),p}(r.read),r.readSync=function(h){return function(p,f,m,_,g){for(var w=0;;)try{return h.call(r,p,f,m,_,g)}catch(b){if(b.code==="EAGAIN"&&w<10){w++;continue}throw b}}}(r.readSync);function e(h){h.lchmod=function(p,f,m){h.open(p,Mi.O_WRONLY|Mi.O_SYMLINK,f,function(_,g){if(_){m&&m(_);return}h.fchmod(g,f,function(w){h.close(g,function(b){m&&m(w||b)})})})},h.lchmodSync=function(p,f){var m=h.openSync(p,Mi.O_WRONLY|Mi.O_SYMLINK,f),_=!0,g;try{g=h.fchmodSync(m,f),_=!1}finally{if(_)try{h.closeSync(m)}catch(w){}else h.closeSync(m)}return g}}function t(h){Mi.hasOwnProperty("O_SYMLINK")?(h.lutimes=function(p,f,m,_){h.open(p,Mi.O_SYMLINK,function(g,w){if(g){_&&_(g);return}h.futimes(w,f,m,function(b){h.close(w,function(C){_&&_(b||C)})})})},h.lutimesSync=function(p,f,m){var _=h.openSync(p,Mi.O_SYMLINK),g,w=!0;try{g=h.futimesSync(_,f,m),w=!1}finally{if(w)try{h.closeSync(_)}catch(b){}else h.closeSync(_)}return g}):(h.lutimes=function(p,f,m,_){_&&process.nextTick(_)},h.lutimesSync=function(){})}function i(h){return h&&function(p,f,m){return h.call(r,p,f,function(_){d(_)&&(_=null),m&&m.apply(this,arguments)})}}function n(h){return h&&function(p,f){try{return h.call(r,p,f)}catch(m){if(!d(m))throw m}}}function s(h){return h&&function(p,f,m,_){return h.call(r,p,f,m,function(g){d(g)&&(g=null),_&&_.apply(this,arguments)})}}function o(h){return h&&function(p,f,m){try{return h.call(r,p,f,m)}catch(_){if(!d(_))throw _}}}function l(h){return h&&function(p,f,m){typeof f=="function"&&(m=f,f=null);function _(g,w){w&&(w.uid<0&&(w.uid+=4294967296),w.gid<0&&(w.gid+=4294967296)),m&&m.apply(this,arguments)}return f?h.call(r,p,f,_):h.call(r,p,_)}}function u(h){return h&&function(p,f){var m=f?h.call(r,p,f):h.call(r,p);return m.uid<0&&(m.uid+=4294967296),m.gid<0&&(m.gid+=4294967296),m}}function d(h){if(!h||h.code==="ENOSYS")return!0;var p=!process.getuid||process.getuid()!==0;return!!(p&&(h.code==="EINVAL"||h.code==="EPERM"))}}});var OS=v((F7,kS)=>{var CS=x("stream").Stream;kS.exports=ZB;function ZB(r){return{ReadStream:e,WriteStream:t};function e(i,n){if(!(this instanceof e))return new e(i,n);CS.call(this);var s=this;this.path=i,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,n=n||{};for(var o=Object.keys(n),l=0,u=o.length;l<u;l++){var d=o[l];this[d]=n[d]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}r.open(this.path,this.flags,this.mode,function(h,p){if(h){s.emit("error",h),s.readable=!1;return}s.fd=p,s.emit("open",p),s._read()})}function t(i,n){if(!(this instanceof t))return new t(i,n);CS.call(this),this.path=i,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,n=n||{};for(var s=Object.keys(n),o=0,l=s.length;o<l;o++){var u=s[o];this[u]=n[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=r.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var TS=v((R7,PS)=>{"use strict";PS.exports=e2;var QB=Object.getPrototypeOf||function(r){return r.__proto__};function e2(r){if(r===null||typeof r!="object")return r;if(r instanceof Object)var e={__proto__:QB(r)};else var e=Object.create(null);return Object.getOwnPropertyNames(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}});var Dm=v((N7,Nm)=>{var Ge=x("fs"),t2=ES(),r2=OS(),i2=TS(),xu=x("util"),xt,Su;typeof Symbol=="function"&&typeof Symbol.for=="function"?(xt=Symbol.for("graceful-fs.queue"),Su=Symbol.for("graceful-fs.previous")):(xt="___graceful-fs.queue",Su="___graceful-fs.previous");function n2(){}function AS(r,e){Object.defineProperty(r,xt,{get:function(){return e}})}var Mn=n2;xu.debuglog?Mn=xu.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Mn=function(){var r=xu.format.apply(xu,arguments);r="GFS4: "+r.split(/\n/).join(`
GFS4: `),console.error(r)});Ge[xt]||(IS=global[xt]||[],AS(Ge,IS),Ge.close=function(r){function e(t,i){return r.call(Ge,t,function(n){n||MS(),typeof i=="function"&&i.apply(this,arguments)})}return Object.defineProperty(e,Su,{value:r}),e}(Ge.close),Ge.closeSync=function(r){function e(t){r.apply(Ge,arguments),MS()}return Object.defineProperty(e,Su,{value:r}),e}(Ge.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Mn(Ge[xt]),x("assert").equal(Ge[xt].length,0)}));var IS;global[xt]||AS(global,Ge[xt]);Nm.exports=Fm(i2(Ge));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!Ge.__patched&&(Nm.exports=Fm(Ge),Ge.__patched=!0);function Fm(r){t2(r),r.gracefulify=Fm,r.createReadStream=N,r.createWriteStream=P;var e=r.readFile;r.readFile=t;function t(T,F,q){return typeof F=="function"&&(q=F,F=null),z(T,F,q);function z(Y,I,Z,j){return e(Y,I,function(H){H&&(H.code==="EMFILE"||H.code==="ENFILE")?Ws([z,[Y,I,Z],H,j||Date.now(),Date.now()]):typeof Z=="function"&&Z.apply(this,arguments)})}}var i=r.writeFile;r.writeFile=n;function n(T,F,q,z){return typeof q=="function"&&(z=q,q=null),Y(T,F,q,z);function Y(I,Z,j,H,pe){return i(I,Z,j,function(ie){ie&&(ie.code==="EMFILE"||ie.code==="ENFILE")?Ws([Y,[I,Z,j,H],ie,pe||Date.now(),Date.now()]):typeof H=="function"&&H.apply(this,arguments)})}}var s=r.appendFile;s&&(r.appendFile=o);function o(T,F,q,z){return typeof q=="function"&&(z=q,q=null),Y(T,F,q,z);function Y(I,Z,j,H,pe){return s(I,Z,j,function(ie){ie&&(ie.code==="EMFILE"||ie.code==="ENFILE")?Ws([Y,[I,Z,j,H],ie,pe||Date.now(),Date.now()]):typeof H=="function"&&H.apply(this,arguments)})}}var l=r.copyFile;l&&(r.copyFile=u);function u(T,F,q,z){return typeof q=="function"&&(z=q,q=0),Y(T,F,q,z);function Y(I,Z,j,H,pe){return l(I,Z,j,function(ie){ie&&(ie.code==="EMFILE"||ie.code==="ENFILE")?Ws([Y,[I,Z,j,H],ie,pe||Date.now(),Date.now()]):typeof H=="function"&&H.apply(this,arguments)})}}var d=r.readdir;r.readdir=h;function h(T,F,q){return typeof F=="function"&&(q=F,F=null),z(T,F,q);function z(Y,I,Z,j){return d(Y,I,function(H,pe){H&&(H.code==="EMFILE"||H.code==="ENFILE")?Ws([z,[Y,I,Z],H,j||Date.now(),Date.now()]):(pe&&pe.sort&&pe.sort(),typeof Z=="function"&&Z.call(this,H,pe))})}}if(process.version.substr(0,4)==="v0.8"){var p=r2(r);w=p.ReadStream,C=p.WriteStream}var f=r.ReadStream;f&&(w.prototype=Object.create(f.prototype),w.prototype.open=b);var m=r.WriteStream;m&&(C.prototype=Object.create(m.prototype),C.prototype.open=E),Object.defineProperty(r,"ReadStream",{get:function(){return w},set:function(T){w=T},enumerable:!0,configurable:!0}),Object.defineProperty(r,"WriteStream",{get:function(){return C},set:function(T){C=T},enumerable:!0,configurable:!0});var _=w;Object.defineProperty(r,"FileReadStream",{get:function(){return _},set:function(T){_=T},enumerable:!0,configurable:!0});var g=C;Object.defineProperty(r,"FileWriteStream",{get:function(){return g},set:function(T){g=T},enumerable:!0,configurable:!0});function w(T,F){return this instanceof w?(f.apply(this,arguments),this):w.apply(Object.create(w.prototype),arguments)}function b(){var T=this;S(T.path,T.flags,T.mode,function(F,q){F?(T.autoClose&&T.destroy(),T.emit("error",F)):(T.fd=q,T.emit("open",q),T.read())})}function C(T,F){return this instanceof C?(m.apply(this,arguments),this):C.apply(Object.create(C.prototype),arguments)}function E(){var T=this;S(T.path,T.flags,T.mode,function(F,q){F?(T.destroy(),T.emit("error",F)):(T.fd=q,T.emit("open",q))})}function N(T,F){return new r.ReadStream(T,F)}function P(T,F){return new r.WriteStream(T,F)}var L=r.open;r.open=S;function S(T,F,q,z){return typeof q=="function"&&(z=q,q=null),Y(T,F,q,z);function Y(I,Z,j,H,pe){return L(I,Z,j,function(ie,W){ie&&(ie.code==="EMFILE"||ie.code==="ENFILE")?Ws([Y,[I,Z,j,H],ie,pe||Date.now(),Date.now()]):typeof H=="function"&&H.apply(this,arguments)})}}return r}function Ws(r){Mn("ENQUEUE",r[0].name,r[1]),Ge[xt].push(r),Rm()}var Eu;function MS(){for(var r=Date.now(),e=0;e<Ge[xt].length;++e)Ge[xt][e].length>2&&(Ge[xt][e][3]=r,Ge[xt][e][4]=r);Rm()}function Rm(){if(clearTimeout(Eu),Eu=void 0,Ge[xt].length!==0){var r=Ge[xt].shift(),e=r[0],t=r[1],i=r[2],n=r[3],s=r[4];if(n===void 0)Mn("RETRY",e.name,t),e.apply(null,t);else if(Date.now()-n>=6e4){Mn("TIMEOUT",e.name,t);var o=t.pop();typeof o=="function"&&o.call(null,i)}else{var l=Date.now()-s,u=Math.max(s-n,1),d=Math.min(u*1.2,100);l>=d?(Mn("RETRY",e.name,t),e.apply(null,t.concat([n]))):Ge[xt].push(r)}Eu===void 0&&(Eu=setTimeout(Rm,0))}}});var RS=v((D7,FS)=>{function tr(r,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(r)),this._timeouts=r,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}FS.exports=tr;tr.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts};tr.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null};tr.prototype.retry=function(r){if(this._timeout&&clearTimeout(this._timeout),!r)return!1;var e=new Date().getTime();if(r&&e-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(r);var t=this._timeouts.shift();if(t===void 0)if(this._cachedTimeouts)this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),t=this._timeouts.shift();else return!1;var i=this,n=setTimeout(function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout(function(){i._operationTimeoutCb(i._attempts)},i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)},t);return this._options.unref&&n.unref(),!0};tr.prototype.attempt=function(r,e){this._fn=r,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var t=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){t._operationTimeoutCb()},t._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};tr.prototype.try=function(r){console.log("Using RetryOperation.try() is deprecated"),this.attempt(r)};tr.prototype.start=function(r){console.log("Using RetryOperation.start() is deprecated"),this.attempt(r)};tr.prototype.start=tr.prototype.try;tr.prototype.errors=function(){return this._errors};tr.prototype.attempts=function(){return this._attempts};tr.prototype.mainError=function(){if(this._errors.length===0)return null;for(var r={},e=null,t=0,i=0;i<this._errors.length;i++){var n=this._errors[i],s=n.message,o=(r[s]||0)+1;r[s]=o,o>=t&&(e=n,t=o)}return e}});var NS=v(Fn=>{var s2=RS();Fn.operation=function(r){var e=Fn.timeouts(r);return new s2(e,{forever:r&&r.forever,unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})};Fn.timeouts=function(r){if(r instanceof Array)return[].concat(r);var e={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var t in r)e[t]=r[t];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var i=[],n=0;n<e.retries;n++)i.push(this.createTimeout(n,e));return r&&r.forever&&!i.length&&i.push(this.createTimeout(n,e)),i.sort(function(s,o){return s-o}),i};Fn.createTimeout=function(r,e){var t=e.randomize?Math.random()+1:1,i=Math.round(t*e.minTimeout*Math.pow(e.factor,r));return i=Math.min(i,e.maxTimeout),i};Fn.wrap=function(r,e,t){if(e instanceof Array&&(t=e,e=null),!t){t=[];for(var i in r)typeof r[i]=="function"&&t.push(i)}for(var n=0;n<t.length;n++){var s=t[n],o=r[s];r[s]=function(u){var d=Fn.operation(e),h=Array.prototype.slice.call(arguments,1),p=h.pop();h.push(function(f){d.retry(f)||(f&&(arguments[0]=d.mainError()),p.apply(this,arguments))}),d.attempt(function(){u.apply(r,h)})}.bind(r,o),r[s].options=e}}});var LS=v((q7,DS)=>{DS.exports=NS()});var qS=v((B7,Cu)=>{Cu.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&Cu.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&Cu.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var US=v((H7,zs)=>{var Me=global.process;typeof Me!="object"||!Me?zs.exports=function(){}:(BS=x("assert"),Us=qS(),HS=/^win/i.test(Me.platform),Ua=x("events"),typeof Ua!="function"&&(Ua=Ua.EventEmitter),Me.__signal_exit_emitter__?pt=Me.__signal_exit_emitter__:(pt=Me.__signal_exit_emitter__=new Ua,pt.count=0,pt.emitted={}),pt.infinite||(pt.setMaxListeners(1/0),pt.infinite=!0),zs.exports=function(r,e){if(global.process===Me){BS.equal(typeof r,"function","a callback must be provided for exit handler"),$s===!1&&Lm();var t="exit";e&&e.alwaysLast&&(t="afterexit");var i=function(){pt.removeListener(t,r),pt.listeners("exit").length===0&&pt.listeners("afterexit").length===0&&ku()};return pt.on(t,r),i}},ku=function(){!$s||global.process!==Me||($s=!1,Us.forEach(function(e){try{Me.removeListener(e,Ou[e])}catch(t){}}),Me.emit=Pu,Me.reallyExit=qm,pt.count-=1)},zs.exports.unload=ku,Rn=function(e,t,i){pt.emitted[e]||(pt.emitted[e]=!0,pt.emit(e,t,i))},Ou={},Us.forEach(function(r){Ou[r]=function(){if(Me===global.process){var t=Me.listeners(r);t.length===pt.count&&(ku(),Rn("exit",null,r),Rn("afterexit",null,r),HS&&r==="SIGHUP"&&(r="SIGINT"),Me.kill(Me.pid,r))}}}),zs.exports.signals=function(){return Us},$s=!1,Lm=function(){$s||Me!==global.process||($s=!0,pt.count+=1,Us=Us.filter(function(e){try{return Me.on(e,Ou[e]),!0}catch(t){return!1}}),Me.emit=WS,Me.reallyExit=jS)},zs.exports.load=Lm,qm=Me.reallyExit,jS=function(e){Me===global.process&&(Me.exitCode=e||0,Rn("exit",Me.exitCode,null),Rn("afterexit",Me.exitCode,null),qm.call(Me,Me.exitCode))},Pu=Me.emit,WS=function(e,t){if(e==="exit"&&Me===global.process){t!==void 0&&(Me.exitCode=t);var i=Pu.apply(this,arguments);return Rn("exit",Me.exitCode,null),Rn("afterexit",Me.exitCode,null),i}else return Pu.apply(this,arguments)});var BS,Us,HS,Ua,pt,ku,Rn,Ou,$s,Lm,qm,jS,Pu,WS});var zS=v((j7,Bm)=>{"use strict";var $S=Symbol();function o2(r,e,t){let i=e[$S];if(i)return e.stat(r,(s,o)=>{if(s)return t(s);t(null,o.mtime,i)});let n=new Date(Math.ceil(Date.now()/1e3)*1e3+5);e.utimes(r,n,n,s=>{if(s)return t(s);e.stat(r,(o,l)=>{if(o)return t(o);let u=l.mtime.getTime()%1e3==0?"s":"ms";Object.defineProperty(e,$S,{value:u}),t(null,l.mtime,u)})})}function a2(r){let e=Date.now();return r==="s"&&(e=Math.ceil(e/1e3)*1e3),new Date(e)}Bm.exports.probe=o2;Bm.exports.getMtime=a2});var XS=v((W7,za)=>{"use strict";var c2=x("path"),Hm=Dm(),l2=LS(),u2=US(),VS=zS(),Yr={};function $a(r,e){return e.lockfilePath||`${r}.lock`}function jm(r,e,t){if(!e.realpath)return t(null,c2.resolve(r));e.fs.realpath(r,t)}function Wm(r,e,t){let i=$a(r,e);e.fs.mkdir(i,n=>{if(!n)return VS.probe(i,e.fs,(s,o,l)=>{if(s)return e.fs.rmdir(i,()=>{}),t(s);t(null,o,l)});if(n.code!=="EEXIST")return t(n);if(e.stale<=0)return t(Object.assign(new Error("Lock file is already being held"),{code:"ELOCKED",file:r}));e.fs.stat(i,(s,o)=>{if(s)return s.code==="ENOENT"?Wm(r,R(y({},e),{stale:0}),t):t(s);if(!GS(o,e))return t(Object.assign(new Error("Lock file is already being held"),{code:"ELOCKED",file:r}));KS(r,e,l=>{if(l)return t(l);Wm(r,R(y({},e),{stale:0}),t)})})})}function GS(r,e){return r.mtime.getTime()<Date.now()-e.stale}function KS(r,e,t){e.fs.rmdir($a(r,e),i=>{if(i&&i.code!=="ENOENT")return t(i);t()})}function Tu(r,e){let t=Yr[r];t.updateTimeout||(t.updateDelay=t.updateDelay||e.update,t.updateTimeout=setTimeout(()=>{t.updateTimeout=null,e.fs.stat(t.lockfilePath,(i,n)=>{let s=t.lastUpdate+e.stale<Date.now();if(i)return i.code==="ENOENT"||s?Um(r,t,Object.assign(i,{code:"ECOMPROMISED"})):(t.updateDelay=1e3,Tu(r,e));if(!(t.mtime.getTime()===n.mtime.getTime()))return Um(r,t,Object.assign(new Error("Unable to update lock within the stale threshold"),{code:"ECOMPROMISED"}));let l=VS.getMtime(t.mtimePrecision);e.fs.utimes(t.lockfilePath,l,l,u=>{let d=t.lastUpdate+e.stale<Date.now();if(!t.released){if(u)return u.code==="ENOENT"||d?Um(r,t,Object.assign(u,{code:"ECOMPROMISED"})):(t.updateDelay=1e3,Tu(r,e));t.mtime=l,t.lastUpdate=Date.now(),t.updateDelay=null,Tu(r,e)}})})},t.updateDelay),t.updateTimeout.unref&&t.updateTimeout.unref())}function Um(r,e,t){e.released=!0,e.updateTimeout&&clearTimeout(e.updateTimeout),Yr[r]===e&&delete Yr[r],e.options.onCompromised(t)}function d2(r,e,t){e=y({stale:1e4,update:null,realpath:!0,retries:0,fs:Hm,onCompromised:i=>{throw i}},e),e.retries=e.retries||0,e.retries=typeof e.retries=="number"?{retries:e.retries}:e.retries,e.stale=Math.max(e.stale||0,2e3),e.update=e.update==null?e.stale/2:e.update||0,e.update=Math.max(Math.min(e.update,e.stale/2),1e3),jm(r,e,(i,n)=>{if(i)return t(i);let s=l2.operation(e.retries);s.attempt(()=>{Wm(n,e,(o,l,u)=>{if(s.retry(o))return;if(o)return t(s.mainError());let d=Yr[n]={lockfilePath:$a(n,e),mtime:l,mtimePrecision:u,options:e,lastUpdate:Date.now()};Tu(n,e),t(null,h=>{if(d.released)return h&&h(Object.assign(new Error("Lock is already released"),{code:"ERELEASED"}));JS(n,R(y({},e),{realpath:!1}),h)})})})})}function JS(r,e,t){e=y({fs:Hm,realpath:!0},e),jm(r,e,(i,n)=>{if(i)return t(i);let s=Yr[n];if(!s)return t(Object.assign(new Error("Lock is not acquired/owned by you"),{code:"ENOTACQUIRED"}));s.updateTimeout&&clearTimeout(s.updateTimeout),s.released=!0,delete Yr[n],KS(n,e,t)})}function h2(r,e,t){e=y({stale:1e4,realpath:!0,fs:Hm},e),e.stale=Math.max(e.stale||0,2e3),jm(r,e,(i,n)=>{if(i)return t(i);e.fs.stat($a(n,e),(s,o)=>s?s.code==="ENOENT"?t(null,!1):t(s):t(null,!GS(o,e)))})}function p2(){return Yr}u2(()=>{for(let r in Yr){let e=Yr[r].options;try{e.fs.rmdirSync($a(r,e))}catch(t){}}});za.exports.lock=d2;za.exports.unlock=JS;za.exports.check=h2;za.exports.getLocks=p2});var ZS=v((U7,YS)=>{"use strict";var f2=Dm();function m2(r){let e=["mkdir","realpath","stat","rmdir","utimes"],t=y({},r);return e.forEach(i=>{t[i]=(...n)=>{let s=n.pop(),o;try{o=r[`${i}Sync`](...n)}catch(l){return s(l)}s(null,o)}}),t}function _2(r){return(...e)=>new Promise((t,i)=>{e.push((n,s)=>{n?i(n):t(s)}),r(...e)})}function g2(r){return(...e)=>{let t,i;if(e.push((n,s)=>{t=n,i=s}),r(...e),t)throw t;return i}}function w2(r){if(r=y({},r),r.fs=m2(r.fs||f2),typeof r.retries=="number"&&r.retries>0||r.retries&&typeof r.retries.retries=="number"&&r.retries.retries>0)throw Object.assign(new Error("Cannot use retries with the sync api"),{code:"ESYNC"});return r}YS.exports={toPromise:_2,toSync:g2,toSyncOptions:w2}});var eE=v(($7,Fi)=>{"use strict";var Vs=XS(),{toPromise:Au,toSync:Iu,toSyncOptions:$m}=ZS();function QS(r,e){return c(this,null,function*(){let t=yield Au(Vs.lock)(r,e);return Au(t)})}function v2(r,e){let t=Iu(Vs.lock)(r,$m(e));return Iu(t)}function y2(r,e){return Au(Vs.unlock)(r,e)}function b2(r,e){return Iu(Vs.unlock)(r,$m(e))}function x2(r,e){return Au(Vs.check)(r,e)}function S2(r,e){return Iu(Vs.check)(r,$m(e))}Fi.exports=QS;Fi.exports.lock=QS;Fi.exports.unlock=y2;Fi.exports.lockSync=v2;Fi.exports.unlockSync=b2;Fi.exports.check=x2;Fi.exports.checkSync=S2});var tE=v(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.deps=void 0;var E2={bionic:{tools:["xvfb","fonts-noto-color-emoji","ttf-unifont","libfontconfig","libfreetype6","xfonts-cyrillic","xfonts-scalable","fonts-liberation","fonts-ipafont-gothic","fonts-wqy-zenhei","fonts-tlwg-loma-otf","ttf-ubuntu-font-family"],chromium:["fonts-liberation","libasound2","libatk-bridge2.0-0","libatk1.0-0","libatspi2.0-0","libcairo2","libcups2","libdbus-1-3","libdrm2","libegl1","libgbm1","libglib2.0-0","libgtk-3-0","libnspr4","libnss3","libpango-1.0-0","libx11-6","libx11-xcb1","libxcb1","libxcomposite1","libxdamage1","libxext6","libxfixes3","libxrandr2","libxshmfence1"],firefox:["ffmpeg","libatk1.0-0","libcairo-gobject2","libcairo2","libdbus-1-3","libdbus-glib-1-2","libfontconfig1","libfreetype6","libgdk-pixbuf2.0-0","libglib2.0-0","libgtk-3-0","libpango-1.0-0","libpangocairo-1.0-0","libpangoft2-1.0-0","libx11-6","libx11-xcb1","libxcb-shm0","libxcb1","libxcomposite1","libxcursor1","libxdamage1","libxext6","libxfixes3","libxi6","libxrender1","libxt6"],webkit:["gstreamer1.0-libav","gstreamer1.0-plugins-bad","gstreamer1.0-plugins-base","gstreamer1.0-plugins-good","libatk-bridge2.0-0","libatk1.0-0","libbrotli1","libcairo2","libegl1","libenchant1c2a","libepoxy0","libevdev2","libfontconfig1","libfreetype6","libgdk-pixbuf2.0-0","libgl1","libgles2","libglib2.0-0","libgstreamer-gl1.0-0","libgstreamer1.0-0","libgtk-3-0","libharfbuzz-icu0","libharfbuzz0b","libhyphen0","libicu60","libjpeg-turbo8","libnotify4","libopenjp2-7","libopus0","libpango-1.0-0","libpng16-16","libsecret-1-0","libvpx5","libwayland-client0","libwayland-egl1","libwayland-server0","libwebp6","libwebpdemux2","libwoff1","libx11-6","libxcomposite1","libxdamage1","libxkbcommon0","libxml2","libxslt1.1"]},focal:{tools:["xvfb","fonts-noto-color-emoji","ttf-unifont","libfontconfig","libfreetype6","xfonts-cyrillic","xfonts-scalable","fonts-liberation","fonts-ipafont-gothic","fonts-wqy-zenhei","fonts-tlwg-loma-otf","ttf-ubuntu-font-family"],chromium:["fonts-liberation","libasound2","libatk-bridge2.0-0","libatk1.0-0","libatspi2.0-0","libcairo2","libcups2","libdbus-1-3","libdrm2","libegl1","libgbm1","libglib2.0-0","libgtk-3-0","libnspr4","libnss3","libpango-1.0-0","libx11-6","libx11-xcb1","libxcb1","libxcomposite1","libxdamage1","libxext6","libxfixes3","libxrandr2","libxshmfence1"],firefox:["ffmpeg","libatk1.0-0","libcairo-gobject2","libcairo2","libdbus-1-3","libdbus-glib-1-2","libfontconfig1","libfreetype6","libgdk-pixbuf2.0-0","libglib2.0-0","libgtk-3-0","libpango-1.0-0","libpangocairo-1.0-0","libpangoft2-1.0-0","libx11-6","libx11-xcb1","libxcb-shm0","libxcb1","libxcomposite1","libxcursor1","libxdamage1","libxext6","libxfixes3","libxi6","libxrender1","libxt6"],webkit:["gstreamer1.0-libav","gstreamer1.0-plugins-bad","gstreamer1.0-plugins-base","gstreamer1.0-plugins-good","libatk-bridge2.0-0","libatk1.0-0","libcairo2","libegl1","libenchant1c2a","libepoxy0","libevdev2","libfontconfig1","libfreetype6","libgdk-pixbuf2.0-0","libgl1","libgles2","libglib2.0-0","libgstreamer-gl1.0-0","libgstreamer1.0-0","libgtk-3-0","libharfbuzz-icu0","libharfbuzz0b","libhyphen0","libicu66","libjpeg-turbo8","libnotify4","libopenjp2-7","libopus0","libpango-1.0-0","libpng16-16","libsecret-1-0","libsoup2.4-1","libvpx6","libwayland-client0","libwayland-egl1","libwayland-server0","libwebp6","libwebpdemux2","libwoff1","libx11-6","libxcomposite1","libxdamage1","libxkbcommon0","libxml2","libxslt1.1"]},hirsute:{tools:["xvfb","fonts-noto-color-emoji","ttf-unifont","libfontconfig","libfreetype6","xfonts-cyrillic","xfonts-scalable","fonts-liberation","fonts-ipafont-gothic","fonts-wqy-zenhei","fonts-tlwg-loma-otf","ttf-ubuntu-font-family"],chromium:["libasound2","libatk-bridge2.0-0","libatk1.0-0","libatspi2.0-0","libcairo2","libcups2","libdbus-1-3","libdrm2","libgbm1","libglib2.0-0","libnspr4","libnss3","libpango-1.0-0","libx11-6","libxcb1","libxcomposite1","libxdamage1","libxext6","libxfixes3","libxkbcommon0","libxrandr2","libxshmfence1"],firefox:["ffmpeg","libatk1.0-0","libcairo-gobject2","libcairo2","libdbus-1-3","libdbus-glib-1-2","libfontconfig1","libfreetype6","libgdk-pixbuf-2.0-0","libglib2.0-0","libgtk-3-0","libgtk2.0-0","libharfbuzz0b","libpango-1.0-0","libpangocairo-1.0-0","libpangoft2-1.0-0","libx11-6","libx11-xcb1","libxcb-shm0","libxcb1","libxcomposite1","libxcursor1","libxdamage1","libxext6","libxfixes3","libxi6","libxrender1","libxt6"],webkit:["gstreamer1.0-libav","gstreamer1.0-plugins-bad","gstreamer1.0-plugins-base","gstreamer1.0-plugins-good","libatk-bridge2.0-0","libatk1.0-0","libcairo2","libegl1","libepoxy0","libevdev2","libfontconfig1","libfreetype6","libgdk-pixbuf-2.0-0","libgl1","libgles2","libglib2.0-0","libgstreamer-gl1.0-0","libgstreamer-plugins-bad1.0-0","libgstreamer-plugins-base1.0-0","libgstreamer1.0-0","libgtk-3-0","libharfbuzz-icu0","libharfbuzz0b","libhyphen0","libjavascriptcoregtk-4.0-18","libjpeg-turbo8","liblcms2-2","libnotify4","libopenjp2-7","libopus0","libpango-1.0-0","libpng16-16","libsecret-1-0","libsoup2.4-1","libvpx6","libwayland-client0","libwayland-egl1","libwayland-server0","libwebkit2gtk-4.0-37","libwebp6","libwebpdemux2","libwoff1","libwpe-1.0-1","libwpebackend-fdo-1.0-1","libwpewebkit-1.0-3","libx11-6","libxcomposite1","libxdamage1","libxkbcommon0","libxml2","libxslt1.1"]}};Mu.deps=E2});var aE=v(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});Ks.installDependenciesWindows=P2;Ks.installDependenciesLinux=T2;Ks.validateDependenciesWindows=I2;Ks.validateDependenciesLinux=M2;var Fu=zm(x("fs")),Nn=zm(x("path")),Va=nE(x("os")),C2=zm(x("child_process")),rE=nl(),Gs=nE(G());function iE(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(iE=function(i){return i?t:e})(r)}function nE(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=iE(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function zm(r){return r&&r.__esModule?r:{default:r}}var sE=Nn.default.join(__dirname,"..","..","bin"),k2=r=>Fu.default.promises.access(r,Fu.default.constants.X_OK).then(()=>!0).catch(e=>!1);function O2(){if(Va.platform()!=="win32"||Va.arch()!=="x64")return!1;let[r,e]=Va.release().split(".").map(t=>parseInt(t,10));return r>6||r===6&&e>1}function P2(r){return c(this,null,function*(){if(r.has("chromium")){let{code:e}=yield Gs.spawnAsync("powershell.exe",["-File",Nn.default.join(sE,"install_media_pack.ps1")],{cwd:sE,stdio:"inherit"});if(e!==0)throw new Error("Failed to install windows dependencies!")}})}function T2(r){return c(this,null,function*(){let e=yield(0,rE.getUbuntuVersion)();if(e!=="18.04"&&e!=="20.04"&&e!=="21.04"){console.warn("Cannot install dependencies for this linux distribution!");return}let t=[],{deps:i}=tE();for(let d of r)e==="18.04"?t.push(...i.bionic[d]):e==="20.04"?t.push(...i.focal[d]):e==="21.04"&&t.push(...i.hirsute[d]);let n=Array.from(new Set(t));console.log("Installing Ubuntu dependencies...");let s=[];s.push("apt-get update"),s.push(["apt-get","install","-y","--no-install-recommends",...n].join(" "));let[o,l]=yield A2(s),u=C2.default.spawn(o,l,{stdio:"inherit"});yield new Promise((d,h)=>{u.on("exit",d),u.on("error",h)})})}function A2(r){return c(this,null,function*(){return process.getuid()===0?["sh",["-c",`${r.join("&& ")}`]]:(yield Gs.spawnAsync("which",["sudo"])).code===0?["sudo",["--","sh","-c",`${r.join("&& ")}`]]:["su",["root","-c",`${r.join("&& ")}`]]})}function I2(r){return c(this,null,function*(){let e=r,t=[];for(let d of e)t.push(...yield oE(d));let i=yield Promise.all(t.map(d=>R2(d))),n=new Set;for(let d of i)for(let h of d)n.add(h);if(!n.size)return;let s=!1,o=!1;for(let d of n)d.startsWith("api-ms-win-crt")||d==="vcruntime140.dll"||d==="vcruntime140_1.dll"||d==="msvcp140.dll"?s=!0:(d==="mf.dll"||d==="mfplat.dll"||d==="msmpeg2vdec.dll"||d==="evr.dll"||d==="avrt.dll")&&(o=!0);let l=[];s&&l.push("Some of the Universal C Runtime files cannot be found on the system. You can fix","that by installing Microsoft Visual C++ Redistributable for Visual Studio from:","https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads",""),o&&l.push("Some of the Media Foundation files cannot be found on the system. If you are","on Windows Server try fixing this by running the following command in PowerShell","as Administrator:","","    Install-WindowsFeature Server-Media-Foundation","","For Windows N editions visit:","https://support.microsoft.com/en-us/help/3145500/media-feature-pack-list-for-windows-n-editions",""),l.push("Full list of missing libraries:",`    ${[...n].join(`
    `)}`,"");let u=`Host system is missing dependencies!

${l.join(`
`)}`;if(O2())throw new Error(u);console.warn("WARNING: running on unsupported windows version!"),console.warn(u)})}function M2(r,e){return c(this,null,function*(){let t=r,i=[];for(let f of t)i.push(...yield oE(f));let n=yield Promise.all(i.map(f=>N2(f,t))),s=new Set;for(let f of n)for(let m of f)s.add(m);for(let f of yield D2(e))s.add(f);if(!s.size)return;let o=new Set,l=yield(0,rE.getUbuntuVersion)(),u=null;if(l==="18.04"?u=L2:l==="20.04"?u=q2:l==="21.04"&&(u=B2),u=Object.assign({},u,H2),u)for(let f of s){let m=u[f];m&&(o.add(m),s.delete(f))}let d=process.getuid()!==0&&Va.platform()!=="win32"?"sudo ":"";if(o.size&&!s.size)throw new Error(`
`+Gs.wrapInASCIIBox(["Host system is missing a few dependencies to run browsers.","Please install them with the following command:","",`    ${d}npx playwright install-deps`,"","<3 Playwright Team"].join(`
`),1));let h="";o.size&&(h=["  Install missing packages with:",`      ${d}apt-get install ${[...o].join(`\\
          `)}`,"",""].join(`
`));let p="";throw s.size&&(p=[`  ${o.size?"Missing libraries we didn't find packages for:":"Missing libraries are:"}`,`      ${[...s].join(`
      `)}`,""].join(`
`)),new Error(`Host system is missing dependencies!

`+h+p)})}function F2(r){switch(Va.platform()){case"linux":return r.endsWith(".so")||r.includes(".so.");case"win32":return r.endsWith(".dll");default:return!1}}function oE(r){return c(this,null,function*(){let e=(yield Fu.default.promises.readdir(r)).map(s=>Nn.default.resolve(r,s)),t=yield Promise.all(e.map(s=>Fu.default.promises.stat(s))),i=e.filter((s,o)=>t[o].isFile());return(yield Promise.all(i.map(s=>c(this,null,function*(){let o=Nn.default.basename(s).toLowerCase();return F2(o)||(yield k2(s))?s:!1})))).filter(Boolean)})}function R2(r){return c(this,null,function*(){let e=Nn.default.join(__dirname,"..","..","bin","PrintDeps.exe"),t=Nn.default.dirname(r),{stdout:i,code:n}=yield Gs.spawnAsync(e,[r],{cwd:t,env:R(y({},process.env),{LD_LIBRARY_PATH:process.env.LD_LIBRARY_PATH?`${process.env.LD_LIBRARY_PATH}:${t}`:t})});return n!==0?[]:i.split(`
`).map(o=>o.trim()).filter(o=>o.endsWith("not found")&&o.includes("=>")).map(o=>o.split("=>")[0].trim().toLowerCase())})}function N2(r,e){return c(this,null,function*(){let t=Nn.default.dirname(r),i=e.join(":");process.env.LD_LIBRARY_PATH&&(i=`${process.env.LD_LIBRARY_PATH}:${i}`);let{stdout:n,code:s}=yield Gs.spawnAsync("ldd",[r],{cwd:t,env:R(y({},process.env),{LD_LIBRARY_PATH:i})});return s!==0?[]:n.split(`
`).map(l=>l.trim()).filter(l=>l.endsWith("not found")&&l.includes("=>")).map(l=>l.split("=>")[0].trim())})}function D2(r){return c(this,null,function*(){if(!r.length)return[];let{stdout:e,code:t,error:i}=yield Gs.spawnAsync("/sbin/ldconfig",["-p"],{});if(t!==0||i)return[];let n=s=>e.toLowerCase().includes(s.toLowerCase());return r.filter(s=>!n(s))})}var L2={"libasound.so.2":"libasound2","libatk-1.0.so.0":"libatk1.0-0","libatk-bridge-2.0.so.0":"libatk-bridge2.0-0","libatspi.so.0":"libatspi2.0-0","libbrotlidec.so.1":"libbrotli1","libcairo-gobject.so.2":"libcairo-gobject2","libcairo.so.2":"libcairo2","libcups.so.2":"libcups2","libdbus-1.so.3":"libdbus-1-3","libdbus-glib-1.so.2":"libdbus-glib-1-2","libdrm.so.2":"libdrm2","libEGL.so.1":"libegl1","libenchant.so.1":"libenchant1c2a","libepoxy.so.0":"libepoxy0","libevent-2.1.so.6":"libevent-2.1-6","libevdev.so.2":"libevdev2","libfontconfig.so.1":"libfontconfig1","libfreetype.so.6":"libfreetype6","libgbm.so.1":"libgbm1","libgdk_pixbuf-2.0.so.0":"libgdk-pixbuf2.0-0","libgdk-3.so.0":"libgtk-3-0","libgdk-x11-2.0.so.0":"libgtk2.0-0","libgio-2.0.so.0":"libglib2.0-0","libGL.so.1":"libgl1","libGLESv2.so.2":"libgles2","libglib-2.0.so.0":"libglib2.0-0","libgmodule-2.0.so.0":"libglib2.0-0","libgobject-2.0.so.0":"libglib2.0-0","libgstapp-1.0.so.0":"gstreamer1.0-plugins-base","libgstaudio-1.0.so.0":"gstreamer1.0-plugins-base","libgstbase-1.0.so.0":"libgstreamer1.0-0","libgstcodecparsers-1.0.so.0":"gstreamer1.0-plugins-bad","libgstfft-1.0.so.0":"gstreamer1.0-plugins-base","libgstgl-1.0.so.0":"libgstreamer-gl1.0-0","libgstpbutils-1.0.so.0":"gstreamer1.0-plugins-base","libgstreamer-1.0.so.0":"libgstreamer1.0-0","libgsttag-1.0.so.0":"gstreamer1.0-plugins-base","libgstvideo-1.0.so.0":"gstreamer1.0-plugins-base","libgthread-2.0.so.0":"libglib2.0-0","libgtk-3.so.0":"libgtk-3-0","libgtk-x11-2.0.so.0":"libgtk2.0-0","libharfbuzz-icu.so.0":"libharfbuzz-icu0","libharfbuzz.so.0":"libharfbuzz0b","libhyphen.so.0":"libhyphen0","libicudata.so.60":"libicu60","libicui18n.so.60":"libicu60","libicuuc.so.60":"libicu60","libjpeg.so.8":"libjpeg-turbo8","libnotify.so.4":"libnotify4","libnspr4.so":"libnspr4","libnss3.so":"libnss3","libnssutil3.so":"libnss3","libopenjp2.so.7":"libopenjp2-7","libopus.so.0":"libopus0","libpango-1.0.so.0":"libpango-1.0-0","libpangocairo-1.0.so.0":"libpangocairo-1.0-0","libpangoft2-1.0.so.0":"libpangoft2-1.0-0","libpng16.so.16":"libpng16-16","libsecret-1.so.0":"libsecret-1-0","libsmime3.so":"libnss3","libvpx.so.5":"libvpx5","libwayland-client.so.0":"libwayland-client0","libwayland-egl.so.1":"libwayland-egl1","libwayland-server.so.0":"libwayland-server0","libwebp.so.6":"libwebp6","libwebpdemux.so.2":"libwebpdemux2","libwoff2dec.so.1.0.2":"libwoff1","libX11-xcb.so.1":"libx11-xcb1","libX11.so.6":"libx11-6","libxcb-dri3.so.0":"libxcb-dri3-0","libxcb-shm.so.0":"libxcb-shm0","libxcb.so.1":"libxcb1","libXcomposite.so.1":"libxcomposite1","libXcursor.so.1":"libxcursor1","libXdamage.so.1":"libxdamage1","libXext.so.6":"libxext6","libXfixes.so.3":"libxfixes3","libXi.so.6":"libxi6","libxkbcommon.so.0":"libxkbcommon0","libxml2.so.2":"libxml2","libXrandr.so.2":"libxrandr2","libXrender.so.1":"libxrender1","libxslt.so.1":"libxslt1.1","libXt.so.6":"libxt6","libXtst.so.6":"libxtst6"},q2={"libasound.so.2":"libasound2","libatk-1.0.so.0":"libatk1.0-0","libatk-bridge-2.0.so.0":"libatk-bridge2.0-0","libatspi.so.0":"libatspi2.0-0","libcairo-gobject.so.2":"libcairo-gobject2","libcairo.so.2":"libcairo2","libcups.so.2":"libcups2","libdbus-1.so.3":"libdbus-1-3","libdbus-glib-1.so.2":"libdbus-glib-1-2","libdrm.so.2":"libdrm2","libEGL.so.1":"libegl1","libenchant.so.1":"libenchant1c2a","libevdev.so.2":"libevdev2","libepoxy.so.0":"libepoxy0","libfontconfig.so.1":"libfontconfig1","libfreetype.so.6":"libfreetype6","libgbm.so.1":"libgbm1","libgdk_pixbuf-2.0.so.0":"libgdk-pixbuf2.0-0","libgdk-3.so.0":"libgtk-3-0","libgdk-x11-2.0.so.0":"libgtk2.0-0","libgio-2.0.so.0":"libglib2.0-0","libGL.so.1":"libgl1","libGLESv2.so.2":"libgles2","libglib-2.0.so.0":"libglib2.0-0","libgmodule-2.0.so.0":"libglib2.0-0","libgobject-2.0.so.0":"libglib2.0-0","libgstapp-1.0.so.0":"gstreamer1.0-plugins-base","libgstaudio-1.0.so.0":"gstreamer1.0-plugins-base","libgstbase-1.0.so.0":"libgstreamer1.0-0","libgstcodecparsers-1.0.so.0":"gstreamer1.0-plugins-bad","libgstfft-1.0.so.0":"gstreamer1.0-plugins-base","libgstgl-1.0.so.0":"libgstreamer-gl1.0-0","libgstpbutils-1.0.so.0":"gstreamer1.0-plugins-base","libgstreamer-1.0.so.0":"libgstreamer1.0-0","libgsttag-1.0.so.0":"gstreamer1.0-plugins-base","libgstvideo-1.0.so.0":"gstreamer1.0-plugins-base","libgthread-2.0.so.0":"libglib2.0-0","libgtk-3.so.0":"libgtk-3-0","libgtk-x11-2.0.so.0":"libgtk2.0-0","libharfbuzz-icu.so.0":"libharfbuzz-icu0","libharfbuzz.so.0":"libharfbuzz0b","libhyphen.so.0":"libhyphen0","libicui18n.so.66":"libicu66","libicuuc.so.66":"libicu66","libjpeg.so.8":"libjpeg-turbo8","libnotify.so.4":"libnotify4","libnspr4.so":"libnspr4","libnss3.so":"libnss3","libnssutil3.so":"libnss3","libopenjp2.so.7":"libopenjp2-7","libopus.so.0":"libopus0","libpango-1.0.so.0":"libpango-1.0-0","libpangocairo-1.0.so.0":"libpangocairo-1.0-0","libpangoft2-1.0.so.0":"libpangoft2-1.0-0","libpng16.so.16":"libpng16-16","libsecret-1.so.0":"libsecret-1-0","libsmime3.so":"libnss3","libsoup-2.4.so.1":"libsoup2.4-1","libvpx.so.6":"libvpx6","libwayland-client.so.0":"libwayland-client0","libwayland-egl.so.1":"libwayland-egl1","libwayland-server.so.0":"libwayland-server0","libwebp.so.6":"libwebp6","libwebpdemux.so.2":"libwebpdemux2","libwoff2dec.so.1.0.2":"libwoff1","libX11-xcb.so.1":"libx11-xcb1","libX11.so.6":"libx11-6","libxcb-dri3.so.0":"libxcb-dri3-0","libxcb-shm.so.0":"libxcb-shm0","libxcb.so.1":"libxcb1","libXcomposite.so.1":"libxcomposite1","libXcursor.so.1":"libxcursor1","libXdamage.so.1":"libxdamage1","libXext.so.6":"libxext6","libXfixes.so.3":"libxfixes3","libXi.so.6":"libxi6","libxkbcommon.so.0":"libxkbcommon0","libxml2.so.2":"libxml2","libXrandr.so.2":"libxrandr2","libXrender.so.1":"libxrender1","libxslt.so.1":"libxslt1.1","libXt.so.6":"libxt6","libXtst.so.6":"libxtst6","libxshmfence.so.1":"libxshmfence1"},B2={"libasound.so.2":"libasound2","libatk-1.0.so.0":"libatk1.0-0","libatk-bridge-2.0.so.0":"libatk-bridge2.0-0","libatspi.so.0":"libatspi2.0-0","libcairo-gobject.so.2":"libcairo-gobject2","libcairo.so.2":"libcairo2","libcups.so.2":"libcups2","libdbus-1.so.3":"libdbus-1-3","libdbus-glib-1.so.2":"libdbus-glib-1-2","libdrm.so.2":"libdrm2","libEGL.so.1":"libegl1","libepoxy.so.0":"libepoxy0","libfontconfig.so.1":"libfontconfig1","libfreetype.so.6":"libfreetype6","libgbm.so.1":"libgbm1","libgdk_pixbuf-2.0.so.0":"libgdk-pixbuf-2.0-0","libgdk-3.so.0":"libgtk-3-0","libgdk-x11-2.0.so.0":"libgtk2.0-0","libgio-2.0.so.0":"libglib2.0-0","libGL.so.1":"libgl1","libGLESv2.so.2":"libgles2","libglib-2.0.so.0":"libglib2.0-0","libgmodule-2.0.so.0":"libglib2.0-0","libgobject-2.0.so.0":"libglib2.0-0","libgstapp-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstaudio-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstbase-1.0.so.0":"libgstreamer1.0-0","libgstcodecparsers-1.0.so.0":"libgstreamer-plugins-bad1.0-0","libgstfft-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstgl-1.0.so.0":"libgstreamer-gl1.0-0","libgstpbutils-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstreamer-1.0.so.0":"libgstreamer1.0-0","libgsttag-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstvideo-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgthread-2.0.so.0":"libglib2.0-0","libgtk-3.so.0":"libgtk-3-0","libgtk-x11-2.0.so.0":"libgtk2.0-0","libharfbuzz-icu.so.0":"libharfbuzz-icu0","libharfbuzz.so.0":"libharfbuzz0b","libhyphen.so.0":"libhyphen0","libjavascriptcoregtk-4.0.so.18":"libjavascriptcoregtk-4.0-18","libjpeg.so.8":"libjpeg-turbo8","liblcms2.so.2":"liblcms2-2","libnotify.so.4":"libnotify4","libnspr4.so":"libnspr4","libnss3.so":"libnss3","libnssutil3.so":"libnss3","libopenjp2.so.7":"libopenjp2-7","libopus.so.0":"libopus0","libpango-1.0.so.0":"libpango-1.0-0","libpangocairo-1.0.so.0":"libpangocairo-1.0-0","libpangoft2-1.0.so.0":"libpangoft2-1.0-0","libpng16.so.16":"libpng16-16","libsecret-1.so.0":"libsecret-1-0","libsmime3.so":"libnss3","libsoup-2.4.so.1":"libsoup2.4-1","libvpx.so.6":"libvpx6","libwayland-client.so.0":"libwayland-client0","libwayland-egl.so.1":"libwayland-egl1","libwayland-server.so.0":"libwayland-server0","libwebkit2gtk-4.0.so.37":"libwebkit2gtk-4.0-37","libwebp.so.6":"libwebp6","libwebpdemux.so.2":"libwebpdemux2","libwoff2dec.so.1.0.2":"libwoff1","libwpe-1.0.so.1":"libwpe-1.0-1","libWPEBackend-fdo-1.0.so.1":"libwpebackend-fdo-1.0-1","libWPEWebKit-1.0.so.3":"libwpewebkit-1.0-3","libX11-xcb.so.1":"libx11-xcb1","libX11.so.6":"libx11-6","libxcb-shm.so.0":"libxcb-shm0","libxcb.so.1":"libxcb1","libXcomposite.so.1":"libxcomposite1","libXcursor.so.1":"libxcursor1","libXdamage.so.1":"libxdamage1","libXext.so.6":"libxext6","libXfixes.so.3":"libxfixes3","libXi.so.6":"libxi6","libxkbcommon.so.0":"libxkbcommon0","libxml2.so.2":"libxml2","libXrandr.so.2":"libxrandr2","libXrender.so.1":"libxrender1","libxshmfence.so.1":"libxshmfence1","libxslt.so.1":"libxslt1.1","libXt.so.6":"libxt6"},H2={"libx264.so":"gstreamer1.0-libav"}});var uE=v((G7,lE)=>{var j2=Zo(),W2=function(){},U2=function(r){return r.setHeader&&typeof r.abort=="function"},$2=function(r){return r.stdio&&Array.isArray(r.stdio)&&r.stdio.length===3},cE=function(r,e,t){if(typeof e=="function")return cE(r,null,e);e||(e={}),t=j2(t||W2);var i=r._writableState,n=r._readableState,s=e.readable||e.readable!==!1&&r.readable,o=e.writable||e.writable!==!1&&r.writable,l=!1,u=function(){r.writable||d()},d=function(){o=!1,s||t.call(r)},h=function(){s=!1,o||t.call(r)},p=function(w){t.call(r,w?new Error("exited with error code: "+w):null)},f=function(w){t.call(r,w)},m=function(){process.nextTick(_)},_=function(){if(!l){if(s&&!(n&&n.ended&&!n.destroyed))return t.call(r,new Error("premature close"));if(o&&!(i&&i.ended&&!i.destroyed))return t.call(r,new Error("premature close"))}},g=function(){r.req.on("finish",d)};return U2(r)?(r.on("complete",d),r.on("abort",m),r.req?g():r.on("request",g)):o&&!i&&(r.on("end",u),r.on("close",u)),$2(r)&&r.on("exit",p),r.on("end",h),r.on("finish",d),e.error!==!1&&r.on("error",f),r.on("close",m),function(){l=!0,r.removeListener("complete",d),r.removeListener("abort",m),r.removeListener("request",g),r.req&&r.req.removeListener("finish",d),r.removeListener("end",u),r.removeListener("close",u),r.removeListener("finish",d),r.removeListener("exit",p),r.removeListener("end",h),r.removeListener("error",f),r.removeListener("close",m)}};lE.exports=cE});var pE=v((K7,hE)=>{var z2=Zo(),V2=uE(),Vm=x("fs"),Ga=function(){},G2=/^v?\.0/.test(process.version),Ru=function(r){return typeof r=="function"},K2=function(r){return!G2||!Vm?!1:(r instanceof(Vm.ReadStream||Ga)||r instanceof(Vm.WriteStream||Ga))&&Ru(r.close)},J2=function(r){return r.setHeader&&Ru(r.abort)},X2=function(r,e,t,i){i=z2(i);var n=!1;r.on("close",function(){n=!0}),V2(r,{readable:e,writable:t},function(o){if(o)return i(o);n=!0,i()});var s=!1;return function(o){if(!n&&!s){if(s=!0,K2(r))return r.close(Ga);if(J2(r))return r.abort();if(Ru(r.destroy))return r.destroy();i(o||new Error("stream was destroyed"))}}},dE=function(r){r()},Y2=function(r,e){return r.pipe(e)},Z2=function(){var r=Array.prototype.slice.call(arguments),e=Ru(r[r.length-1]||Ga)&&r.pop()||Ga;if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new Error("pump requires two streams per minimum");var t,i=r.map(function(n,s){var o=s<r.length-1,l=s>0;return X2(n,o,l,function(u){t||(t=u),u&&i.forEach(dE),!o&&(i.forEach(dE),e(t))})});return r.reduce(Y2)};hE.exports=Z2});var mE=v((J7,fE)=>{"use strict";var{PassThrough:Q2}=x("stream");fE.exports=r=>{r=y({},r);let{array:e}=r,{encoding:t}=r,i=t==="buffer",n=!1;e?n=!(t||i):t=t||"utf8",i&&(t=null);let s=new Q2({objectMode:n});t&&s.setEncoding(t);let o=0,l=[];return s.on("data",u=>{l.push(u),n?o=l.length:o+=u.length}),s.getBufferedValue=()=>e?l:i?Buffer.concat(l,o):l.join(""),s.getBufferedLength=()=>o,s}});var _E=v((X7,Js)=>{"use strict";var{constants:e6}=x("buffer"),t6=pE(),r6=mE(),Gm=class extends Error{constructor(){super("maxBuffer exceeded");this.name="MaxBufferError"}};function Nu(r,e){return c(this,null,function*(){if(!r)return Promise.reject(new Error("Expected a stream"));e=y({maxBuffer:1/0},e);let{maxBuffer:t}=e,i;return yield new Promise((n,s)=>{let o=l=>{l&&i.getBufferedLength()<=e6.MAX_LENGTH&&(l.bufferedData=i.getBufferedValue()),s(l)};i=t6(r,r6(e),l=>{if(l){o(l);return}n()}),i.on("data",()=>{i.getBufferedLength()>t&&o(new Gm)})}),i.getBufferedValue()})}Js.exports=Nu;Js.exports.default=Nu;Js.exports.buffer=(r,e)=>Nu(r,R(y({},e),{encoding:"buffer"}));Js.exports.array=(r,e)=>Nu(r,R(y({},e),{array:!0}));Js.exports.MaxBufferError=Gm});var yE=v((Y7,vE)=>{vE.exports=Du;function Du(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}Du.prototype.go=function(r){this.pending<this.max?wE(this,r):this.waiting.push(r)};Du.prototype.wait=function(r){this.pending===0?r(this.error):this.listeners.push(r)};Du.prototype.hold=function(){return gE(this)};function gE(r){r.pending+=1;var e=!1;return t;function t(n){if(e)throw new Error("callback called twice");if(e=!0,r.error=r.error||n,r.pending-=1,r.waiting.length>0&&r.pending<r.max)wE(r,r.waiting.shift());else if(r.pending===0){var s=r.listeners;r.listeners=[],s.forEach(i)}}function i(n){n(r.error)}}function wE(r,e){e(gE(r))}});var xE=v(Ja=>{var Ka=x("fs"),Lu=x("util"),Km=x("stream"),bE=Km.Readable,Jm=Km.Writable,i6=Km.PassThrough,n6=yE(),qu=x("events").EventEmitter;Ja.createFromBuffer=s6;Ja.createFromFd=o6;Ja.BufferSlicer=Qr;Ja.FdSlicer=Zr;Lu.inherits(Zr,qu);function Zr(r,e){e=e||{},qu.call(this),this.fd=r,this.pend=new n6,this.pend.max=1,this.refCount=0,this.autoClose=!!e.autoClose}Zr.prototype.read=function(r,e,t,i,n){var s=this;s.pend.go(function(o){Ka.read(s.fd,r,e,t,i,function(l,u,d){o(),n(l,u,d)})})};Zr.prototype.write=function(r,e,t,i,n){var s=this;s.pend.go(function(o){Ka.write(s.fd,r,e,t,i,function(l,u,d){o(),n(l,u,d)})})};Zr.prototype.createReadStream=function(r){return new Bu(this,r)};Zr.prototype.createWriteStream=function(r){return new Hu(this,r)};Zr.prototype.ref=function(){this.refCount+=1};Zr.prototype.unref=function(){var r=this;if(r.refCount-=1,r.refCount>0)return;if(r.refCount<0)throw new Error("invalid unref");r.autoClose&&Ka.close(r.fd,e);function e(t){t?r.emit("error",t):r.emit("close")}};Lu.inherits(Bu,bE);function Bu(r,e){e=e||{},bE.call(this,e),this.context=r,this.context.ref(),this.start=e.start||0,this.endOffset=e.end,this.pos=this.start,this.destroyed=!1}Bu.prototype._read=function(r){var e=this;if(!e.destroyed){var t=Math.min(e._readableState.highWaterMark,r);if(e.endOffset!=null&&(t=Math.min(t,e.endOffset-e.pos)),t<=0){e.destroyed=!0,e.push(null),e.context.unref();return}e.context.pend.go(function(i){if(e.destroyed)return i();var n=new Buffer(t);Ka.read(e.context.fd,n,0,t,e.pos,function(s,o){s?e.destroy(s):o===0?(e.destroyed=!0,e.push(null),e.context.unref()):(e.pos+=o,e.push(n.slice(0,o))),i()})})}};Bu.prototype.destroy=function(r){this.destroyed||(r=r||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",r),this.context.unref())};Lu.inherits(Hu,Jm);function Hu(r,e){e=e||{},Jm.call(this,e),this.context=r,this.context.ref(),this.start=e.start||0,this.endOffset=e.end==null?1/0:+e.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}Hu.prototype._write=function(r,e,t){var i=this;if(!i.destroyed){if(i.pos+r.length>i.endOffset){var n=new Error("maximum file length exceeded");n.code="ETOOBIG",i.destroy(),t(n);return}i.context.pend.go(function(s){if(i.destroyed)return s();Ka.write(i.context.fd,r,0,r.length,i.pos,function(o,l){o?(i.destroy(),s(),t(o)):(i.bytesWritten+=l,i.pos+=l,i.emit("progress"),s(),t())})})}};Hu.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())};Lu.inherits(Qr,qu);function Qr(r,e){qu.call(this),e=e||{},this.refCount=0,this.buffer=r,this.maxChunkSize=e.maxChunkSize||Number.MAX_SAFE_INTEGER}Qr.prototype.read=function(r,e,t,i,n){var s=i+t,o=s-this.buffer.length,l=o>0?o:t;this.buffer.copy(r,e,i,s),setImmediate(function(){n(null,l)})};Qr.prototype.write=function(r,e,t,i,n){r.copy(this.buffer,i,e,e+t),setImmediate(function(){n(null,t,r)})};Qr.prototype.createReadStream=function(r){r=r||{};var e=new i6(r);e.destroyed=!1,e.start=r.start||0,e.endOffset=r.end,e.pos=e.endOffset||this.buffer.length;for(var t=this.buffer.slice(e.start,e.pos),i=0;;){var n=i+this.maxChunkSize;if(n>=t.length){i<t.length&&e.write(t.slice(i,t.length));break}e.write(t.slice(i,n)),i=n}return e.end(),e.destroy=function(){e.destroyed=!0},e};Qr.prototype.createWriteStream=function(r){var e=this;r=r||{};var t=new Jm(r);return t.start=r.start||0,t.endOffset=r.end==null?this.buffer.length:+r.end,t.bytesWritten=0,t.pos=t.start,t.destroyed=!1,t._write=function(i,n,s){if(!t.destroyed){var o=t.pos+i.length;if(o>t.endOffset){var l=new Error("maximum file length exceeded");l.code="ETOOBIG",t.destroyed=!0,s(l);return}i.copy(e.buffer,t.pos,0,i.length),t.bytesWritten+=i.length,t.pos=o,t.emit("progress"),s()}},t.destroy=function(){t.destroyed=!0},t};Qr.prototype.ref=function(){this.refCount+=1};Qr.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")};function s6(r,e){return new Qr(r,e)}function o6(r,e){return new Zr(r,e)}});var TE=v(Rr=>{var Xm=x("fs"),a6=x("zlib"),SE=xE(),c6=sm(),ju=x("util"),Wu=x("events").EventEmitter,EE=x("stream").Transform,Ym=x("stream").PassThrough,l6=x("stream").Writable;Rr.open=u6;Rr.fromFd=CE;Rr.fromBuffer=d6;Rr.fromRandomAccessReader=Zm;Rr.dosDateTimeToDate=OE;Rr.validateFileName=PE;Rr.ZipFile=Ri;Rr.Entry=Xa;Rr.RandomAccessReader=Ni;function u6(r,e,t){typeof e=="function"&&(t=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!0),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),t==null&&(t=zu),Xm.open(r,"r",function(i,n){if(i)return t(i);CE(n,e,function(s,o){s&&Xm.close(n,zu),t(s,o)})})}function CE(r,e,t){typeof e=="function"&&(t=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!1),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),t==null&&(t=zu),Xm.fstat(r,function(i,n){if(i)return t(i);var s=SE.createFromFd(r,{autoClose:!0});Zm(s,n.size,e,t)})}function d6(r,e,t){typeof e=="function"&&(t=e,e=null),e==null&&(e={}),e.autoClose=!1,e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1);var i=SE.createFromBuffer(r,{maxChunkSize:65536});Zm(i,r.length,e,t)}function Zm(r,e,t,i){typeof t=="function"&&(i=t,t=null),t==null&&(t={}),t.autoClose==null&&(t.autoClose=!0),t.lazyEntries==null&&(t.lazyEntries=!1),t.decodeStrings==null&&(t.decodeStrings=!0);var n=!!t.decodeStrings;if(t.validateEntrySizes==null&&(t.validateEntrySizes=!0),t.strictFileNames==null&&(t.strictFileNames=!1),i==null&&(i=zu),typeof e!="number")throw new Error("expected totalSize parameter to be a number");if(e>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");r.ref();var s=22,o=65535,l=Math.min(s+o,e),u=Fr(l),d=e-u.length;Xs(r,u,0,l,d,function(h){if(h)return i(h);for(var p=l-s;p>=0;p-=1)if(u.readUInt32LE(p)===101010256){var f=u.slice(p),m=f.readUInt16LE(4);if(m!==0)return i(new Error("multi-disk zip files are not supported: found disk number: "+m));var _=f.readUInt16LE(10),g=f.readUInt32LE(16),w=f.readUInt16LE(20),b=f.length-s;if(w!==b)return i(new Error("invalid comment length. expected: "+b+". found: "+w));var C=n?$u(f,22,f.length,!1):f.slice(22);if(!(_===65535||g===4294967295))return i(null,new Ri(r,g,e,_,C,t.autoClose,t.lazyEntries,n,t.validateEntrySizes,t.strictFileNames));var E=Fr(20),N=d+p-E.length;Xs(r,E,0,E.length,N,function(P){if(P)return i(P);if(E.readUInt32LE(0)!==117853008)return i(new Error("invalid zip64 end of central directory locator signature"));var L=Ys(E,8),S=Fr(56);Xs(r,S,0,S.length,L,function(T){return T?i(T):S.readUInt32LE(0)!==101075792?i(new Error("invalid zip64 end of central directory record signature")):(_=Ys(S,32),g=Ys(S,48),i(null,new Ri(r,g,e,_,C,t.autoClose,t.lazyEntries,n,t.validateEntrySizes,t.strictFileNames)))})});return}i(new Error("end of central directory record signature not found"))})}ju.inherits(Ri,Wu);function Ri(r,e,t,i,n,s,o,l,u,d){var h=this;Wu.call(h),h.reader=r,h.reader.on("error",function(p){kE(h,p)}),h.reader.once("close",function(){h.emit("close")}),h.readEntryCursor=e,h.fileSize=t,h.entryCount=i,h.comment=n,h.entriesRead=0,h.autoClose=!!s,h.lazyEntries=!!o,h.decodeStrings=!!l,h.validateEntrySizes=!!u,h.strictFileNames=!!d,h.isOpen=!0,h.emittedError=!1,h.lazyEntries||h._readEntry()}Ri.prototype.close=function(){!this.isOpen||(this.isOpen=!1,this.reader.unref())};function hr(r,e){r.autoClose&&r.close(),kE(r,e)}function kE(r,e){r.emittedError||(r.emittedError=!0,r.emit("error",e))}Ri.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()};Ri.prototype._readEntry=function(){var r=this;if(r.entryCount===r.entriesRead){setImmediate(function(){r.autoClose&&r.close(),!r.emittedError&&r.emit("end")});return}if(!r.emittedError){var e=Fr(46);Xs(r.reader,e,0,e.length,r.readEntryCursor,function(t){if(t)return hr(r,t);if(!r.emittedError){var i=new Xa,n=e.readUInt32LE(0);if(n!==33639248)return hr(r,new Error("invalid central directory file header signature: 0x"+n.toString(16)));if(i.versionMadeBy=e.readUInt16LE(4),i.versionNeededToExtract=e.readUInt16LE(6),i.generalPurposeBitFlag=e.readUInt16LE(8),i.compressionMethod=e.readUInt16LE(10),i.lastModFileTime=e.readUInt16LE(12),i.lastModFileDate=e.readUInt16LE(14),i.crc32=e.readUInt32LE(16),i.compressedSize=e.readUInt32LE(20),i.uncompressedSize=e.readUInt32LE(24),i.fileNameLength=e.readUInt16LE(28),i.extraFieldLength=e.readUInt16LE(30),i.fileCommentLength=e.readUInt16LE(32),i.internalFileAttributes=e.readUInt16LE(36),i.externalFileAttributes=e.readUInt32LE(38),i.relativeOffsetOfLocalHeader=e.readUInt32LE(42),i.generalPurposeBitFlag&64)return hr(r,new Error("strong encryption is not supported"));r.readEntryCursor+=46,e=Fr(i.fileNameLength+i.extraFieldLength+i.fileCommentLength),Xs(r.reader,e,0,e.length,r.readEntryCursor,function(s){if(s)return hr(r,s);if(!r.emittedError){var o=(i.generalPurposeBitFlag&2048)!=0;i.fileName=r.decodeStrings?$u(e,0,i.fileNameLength,o):e.slice(0,i.fileNameLength);var l=i.fileNameLength+i.extraFieldLength,u=e.slice(i.fileNameLength,l);i.extraFields=[];for(var d=0;d<u.length-3;){var h=u.readUInt16LE(d+0),p=u.readUInt16LE(d+2),f=d+4,m=f+p;if(m>u.length)return hr(r,new Error("extra field length exceeds extra field buffer size"));var _=Fr(p);u.copy(_,0,f,m),i.extraFields.push({id:h,data:_}),d=m}if(i.fileComment=r.decodeStrings?$u(e,l,l+i.fileCommentLength,o):e.slice(l,l+i.fileCommentLength),i.comment=i.fileComment,r.readEntryCursor+=e.length,r.entriesRead+=1,i.uncompressedSize===4294967295||i.compressedSize===4294967295||i.relativeOffsetOfLocalHeader===4294967295){for(var g=null,d=0;d<i.extraFields.length;d++){var w=i.extraFields[d];if(w.id===1){g=w.data;break}}if(g==null)return hr(r,new Error("expected zip64 extended information extra field"));var b=0;if(i.uncompressedSize===4294967295){if(b+8>g.length)return hr(r,new Error("zip64 extended information extra field does not include uncompressed size"));i.uncompressedSize=Ys(g,b),b+=8}if(i.compressedSize===4294967295){if(b+8>g.length)return hr(r,new Error("zip64 extended information extra field does not include compressed size"));i.compressedSize=Ys(g,b),b+=8}if(i.relativeOffsetOfLocalHeader===4294967295){if(b+8>g.length)return hr(r,new Error("zip64 extended information extra field does not include relative header offset"));i.relativeOffsetOfLocalHeader=Ys(g,b),b+=8}}if(r.decodeStrings)for(var d=0;d<i.extraFields.length;d++){var w=i.extraFields[d];if(w.id===28789){if(w.data.length<6||w.data.readUInt8(0)!==1)continue;var C=w.data.readUInt32LE(1);if(c6.unsigned(e.slice(0,i.fileNameLength))!==C)continue;i.fileName=$u(w.data,5,w.data.length,!0);break}}if(r.validateEntrySizes&&i.compressionMethod===0){var E=i.uncompressedSize;if(i.isEncrypted()&&(E+=12),i.compressedSize!==E){var N="compressed/uncompressed size mismatch for stored file: "+i.compressedSize+" != "+i.uncompressedSize;return hr(r,new Error(N))}}if(r.decodeStrings){r.strictFileNames||(i.fileName=i.fileName.replace(/\\/g,"/"));var P=PE(i.fileName,r.validateFileNameOptions);if(P!=null)return hr(r,new Error(P))}r.emit("entry",i),r.lazyEntries||r._readEntry()}})}})}};Ri.prototype.openReadStream=function(r,e,t){var i=this,n=0,s=r.compressedSize;if(t==null)t=e,e={};else{if(e.decrypt!=null){if(!r.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(e.decrypt!==!1)throw new Error("invalid options.decrypt value: "+e.decrypt);if(r.isCompressed()&&e.decompress!==!1)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(e.decompress!=null){if(!r.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!(e.decompress===!1||e.decompress===!0))throw new Error("invalid options.decompress value: "+e.decompress)}if(e.start!=null||e.end!=null){if(r.isCompressed()&&e.decompress!==!1)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(r.isEncrypted()&&e.decrypt!==!1)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(e.start!=null){if(n=e.start,n<0)throw new Error("options.start < 0");if(n>r.compressedSize)throw new Error("options.start > entry.compressedSize")}if(e.end!=null){if(s=e.end,s<0)throw new Error("options.end < 0");if(s>r.compressedSize)throw new Error("options.end > entry.compressedSize");if(s<n)throw new Error("options.end < options.start")}}if(!i.isOpen)return t(new Error("closed"));if(r.isEncrypted()&&e.decrypt!==!1)return t(new Error("entry is encrypted, and options.decrypt !== false"));i.reader.ref();var o=Fr(30);Xs(i.reader,o,0,o.length,r.relativeOffsetOfLocalHeader,function(l){try{if(l)return t(l);var u=o.readUInt32LE(0);if(u!==67324752)return t(new Error("invalid local file header signature: 0x"+u.toString(16)));var d=o.readUInt16LE(26),h=o.readUInt16LE(28),p=r.relativeOffsetOfLocalHeader+o.length+d+h,f;if(r.compressionMethod===0)f=!1;else if(r.compressionMethod===8)f=e.decompress!=null?e.decompress:!0;else return t(new Error("unsupported compression method: "+r.compressionMethod));var m=p,_=m+r.compressedSize;if(r.compressedSize!==0&&_>i.fileSize)return t(new Error("file data overflows file bounds: "+m+" + "+r.compressedSize+" > "+i.fileSize));var g=i.reader.createReadStream({start:m+n,end:m+s}),w=g;if(f){var b=!1,C=a6.createInflateRaw();g.on("error",function(E){setImmediate(function(){b||C.emit("error",E)})}),g.pipe(C),i.validateEntrySizes?(w=new Ya(r.uncompressedSize),C.on("error",function(E){setImmediate(function(){b||w.emit("error",E)})}),C.pipe(w)):w=C,w.destroy=function(){b=!0,C!==w&&C.unpipe(w),g.unpipe(C),g.destroy()}}t(null,w)}finally{i.reader.unref()}})};function Xa(){}Xa.prototype.getLastModDate=function(){return OE(this.lastModFileDate,this.lastModFileTime)};Xa.prototype.isEncrypted=function(){return(this.generalPurposeBitFlag&1)!=0};Xa.prototype.isCompressed=function(){return this.compressionMethod===8};function OE(r,e){var t=r&31,i=(r>>5&15)-1,n=(r>>9&127)+1980,s=0,o=(e&31)*2,l=e>>5&63,u=e>>11&31;return new Date(n,i,t,u,l,o,s)}function PE(r){return r.indexOf("\\")!==-1?"invalid characters in fileName: "+r:/^[a-zA-Z]:/.test(r)||/^\//.test(r)?"absolute path: "+r:r.split("/").indexOf("..")!==-1?"invalid relative path: "+r:null}function Xs(r,e,t,i,n,s){if(i===0)return setImmediate(function(){s(null,Fr(0))});r.read(e,t,i,n,function(o,l){if(o)return s(o);if(l<i)return s(new Error("unexpected EOF"));s()})}ju.inherits(Ya,EE);function Ya(r){EE.call(this),this.actualByteCount=0,this.expectedByteCount=r}Ya.prototype._transform=function(r,e,t){if(this.actualByteCount+=r.length,this.actualByteCount>this.expectedByteCount){var i="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return t(new Error(i))}t(null,r)};Ya.prototype._flush=function(r){if(this.actualByteCount<this.expectedByteCount){var e="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return r(new Error(e))}r()};ju.inherits(Ni,Wu);function Ni(){Wu.call(this),this.refCount=0}Ni.prototype.ref=function(){this.refCount+=1};Ni.prototype.unref=function(){var r=this;if(r.refCount-=1,r.refCount>0)return;if(r.refCount<0)throw new Error("invalid unref");r.close(e);function e(t){if(t)return r.emit("error",t);r.emit("close")}};Ni.prototype.createReadStream=function(r){var e=r.start,t=r.end;if(e===t){var i=new Ym;return setImmediate(function(){i.end()}),i}var n=this._readStreamForRange(e,t),s=!1,o=new Uu(this);n.on("error",function(u){setImmediate(function(){s||o.emit("error",u)})}),o.destroy=function(){n.unpipe(o),o.unref(),n.destroy()};var l=new Ya(t-e);return o.on("error",function(u){setImmediate(function(){s||l.emit("error",u)})}),l.destroy=function(){s=!0,o.unpipe(l),o.destroy()},n.pipe(o).pipe(l)};Ni.prototype._readStreamForRange=function(r,e){throw new Error("not implemented")};Ni.prototype.read=function(r,e,t,i,n){var s=this.createReadStream({start:i,end:i+t}),o=new l6,l=0;o._write=function(u,d,h){u.copy(r,e+l,0,u.length),l+=u.length,h()},o.on("finish",n),s.on("error",function(u){n(u)}),s.pipe(o)};Ni.prototype.close=function(r){setImmediate(r)};ju.inherits(Uu,Ym);function Uu(r){Ym.call(this),this.context=r,this.context.ref(),this.unreffedYet=!1}Uu.prototype._flush=function(r){this.unref(),r()};Uu.prototype.unref=function(r){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var h6="\0\u263A\u263B\u2665\u2666\u2663\u2660\u2022\u25D8\u25CB\u25D9\u2642\u2640\u266A\u266B\u263C\u25BA\u25C4\u2195\u203C\xB6\xA7\u25AC\u21A8\u2191\u2193\u2192\u2190\u221F\u2194\u25B2\u25BC !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2302\xC7\xFC\xE9\xE2\xE4\xE0\xE5\xE7\xEA\xEB\xE8\xEF\xEE\xEC\xC4\xC5\xC9\xE6\xC6\xF4\xF6\xF2\xFB\xF9\xFF\xD6\xDC\xA2\xA3\xA5\u20A7\u0192\xE1\xED\xF3\xFA\xF1\xD1\xAA\xBA\xBF\u2310\xAC\xBD\xBC\xA1\xAB\xBB\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255D\u255C\u255B\u2510\u2514\u2534\u252C\u251C\u2500\u253C\u255E\u255F\u255A\u2554\u2569\u2566\u2560\u2550\u256C\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256B\u256A\u2518\u250C\u2588\u2584\u258C\u2590\u2580\u03B1\xDF\u0393\u03C0\u03A3\u03C3\xB5\u03C4\u03A6\u0398\u03A9\u03B4\u221E\u03C6\u03B5\u2229\u2261\xB1\u2265\u2264\u2320\u2321\xF7\u2248\xB0\u2219\xB7\u221A\u207F\xB2\u25A0\xA0";function $u(r,e,t,i){if(i)return r.toString("utf8",e,t);for(var n="",s=e;s<t;s++)n+=h6[r[s]];return n}function Ys(r,e){var t=r.readUInt32LE(e),i=r.readUInt32LE(e+4);return i*4294967296+t}var Fr;typeof Buffer.allocUnsafe=="function"?Fr=function(r){return Buffer.allocUnsafe(r)}:Fr=function(r){return new Buffer(r)};function zu(r){if(r)throw r}});var ME=v((e9,IE)=>{var pr=Pr()("extract-zip"),{createWriteStream:p6,promises:Zs}=x("fs"),f6=_E(),Dn=x("path"),{promisify:Qm}=x("util"),m6=x("stream"),_6=TE(),g6=Qm(_6.open),w6=Qm(m6.pipeline),AE=class{constructor(e,t){this.zipPath=e,this.opts=t}extract(){return c(this,null,function*(){return pr("opening",this.zipPath,"with opts",this.opts),this.zipfile=yield g6(this.zipPath,{lazyEntries:!0}),this.canceled=!1,new Promise((e,t)=>{this.zipfile.on("error",i=>{this.canceled=!0,t(i)}),this.zipfile.readEntry(),this.zipfile.on("close",()=>{this.canceled||(pr("zip extraction complete"),e())}),this.zipfile.on("entry",i=>c(this,null,function*(){if(this.canceled){pr("skipping entry",i.fileName,{cancelled:this.canceled});return}if(pr("zipfile entry",i.fileName),i.fileName.startsWith("__MACOSX/")){this.zipfile.readEntry();return}let n=Dn.dirname(Dn.join(this.opts.dir,i.fileName));try{yield Zs.mkdir(n,{recursive:!0});let s=yield Zs.realpath(n);if(Dn.relative(this.opts.dir,s).split(Dn.sep).includes(".."))throw new Error(`Out of bound path "${s}" found while processing file ${i.fileName}`);yield this.extractEntry(i),pr("finished processing",i.fileName),this.zipfile.readEntry()}catch(s){this.canceled=!0,this.zipfile.close(),t(s)}}))})})}extractEntry(e){return c(this,null,function*(){if(this.canceled){pr("skipping entry extraction",e.fileName,{cancelled:this.canceled});return}this.opts.onEntry&&this.opts.onEntry(e,this.zipfile);let t=Dn.join(this.opts.dir,e.fileName),i=e.externalFileAttributes>>16&65535,n=61440,s=16384,o=40960,l=(i&n)===o,u=(i&n)===s;!u&&e.fileName.endsWith("/")&&(u=!0);let d=e.versionMadeBy>>8;u||(u=d===0&&e.externalFileAttributes===16),pr("extracting entry",{filename:e.fileName,isDir:u,isSymlink:l});let h=this.getExtractedMode(i,u)&511,p=u?t:Dn.dirname(t),f={recursive:!0};if(u&&(f.mode=h),pr("mkdir",y({dir:p},f)),yield Zs.mkdir(p,f),u)return;pr("opening read stream",t);let m=yield Qm(this.zipfile.openReadStream.bind(this.zipfile))(e);if(l){let _=yield f6(m);pr("creating symlink",_,t),yield Zs.symlink(_,t)}else yield w6(m,p6(t,{mode:h}))})}getExtractedMode(e,t){let i=e;return i===0&&(t?(this.opts.defaultDirMode&&(i=parseInt(this.opts.defaultDirMode,10)),i||(i=493)):(this.opts.defaultFileMode&&(i=parseInt(this.opts.defaultFileMode,10)),i||(i=420))),i}};IE.exports=function(r,e){return c(this,null,function*(){if(pr("creating target directory",e.dir),!Dn.isAbsolute(e.dir))throw new Error("Target directory is expected to be absolute");return yield Zs.mkdir(e.dir,{recursive:!0}),e.dir=yield Zs.realpath(e.dir),new AE(r,e).extract()})}});var NE=v(Gu=>{"use strict";Object.defineProperty(Gu,"__esModule",{value:!0});Gu.downloadBrowserWithProgressBar=x6;Gu.logPolitely=RE;var v6=Vu(ME()),FE=Vu(x("fs")),y6=Vu(x("os")),b6=Vu(x("path")),e_=G(),Di=Xe();function Vu(r){return r&&r.__esModule?r:{default:r}}function x6(r,e,t,i,n){return c(this,null,function*(){let s=`Playwright build of ${r}`;if(yield(0,e_.existsAsync)(e))return Di.debugLogger.log("install",`browser ${r} is already downloaded.`),!1;let o=i,l=b6.default.join(y6.default.tmpdir(),n);try{yield(0,e_.download)(o,l,{progressBarName:s,log:Di.debugLogger.log.bind(Di.debugLogger,"install")}),Di.debugLogger.log("install","extracting archive"),Di.debugLogger.log("install",`-- zip: ${l}`),Di.debugLogger.log("install",`-- location: ${e}`),yield(0,v6.default)(l,{dir:e}),Di.debugLogger.log("install",`fixing permissions at ${t}`),yield FE.default.promises.chmod(t,493)}catch(u){throw Di.debugLogger.log("install",`FAILED installation ${s} with error: ${u}`),process.exitCode=1,u}finally{(yield(0,e_.existsAsync)(l))&&(yield FE.default.promises.unlink(l))}return RE(`${s} downloaded to ${e}`),!0})}function RE(r){let e=process.env.npm_config_loglevel;["silent","error","warn"].indexOf(e||"")>-1||console.log(r)}});var DE=v((r9,S6)=>{S6.exports={comment:"Do not edit this file, use utils/roll_browser.js",browsers:[{name:"chromium",revision:"930007",installByDefault:!0},{name:"chromium-with-symbols",revision:"930007",installByDefault:!1},{name:"firefox",revision:"1297",installByDefault:!0},{name:"firefox-beta",revision:"1293",installByDefault:!1},{name:"webkit",revision:"1564",installByDefault:!0,revisionOverrides:{"mac10.14":"1446"}},{name:"ffmpeg",revision:"1006",installByDefault:!0}]}});var Qa=v(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.installDefaultBrowsersForNpmInstall=T6;fr.installBrowsersForNpmInstall=zE;fr.findChromiumChannel=A6;fr.registry=fr.Registry=fr.registryDirectory=void 0;var ei=r_(x("os")),De=LE(x("path")),E6=r_(x("util")),Li=r_(x("fs")),C6=LE(eE()),k6=nl(),Le=G(),Ku=aE(),t_=NE();function LE(r){return r&&r.__esModule?r:{default:r}}function qE(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(qE=function(i){return i?t:e})(r)}function r_(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=qE(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var BE=De.default.join(__dirname,"..",".."),HE=De.default.join(__dirname,"..","..","bin"),O6={chromium:{"ubuntu18.04":["chrome-linux","chrome"],"ubuntu20.04":["chrome-linux","chrome"],"mac10.13":["chrome-mac","Chromium.app","Contents","MacOS","Chromium"],"mac10.14":["chrome-mac","Chromium.app","Contents","MacOS","Chromium"],"mac10.15":["chrome-mac","Chromium.app","Contents","MacOS","Chromium"],mac11:["chrome-mac","Chromium.app","Contents","MacOS","Chromium"],"mac11-arm64":["chrome-mac","Chromium.app","Contents","MacOS","Chromium"],win32:["chrome-win","chrome.exe"],win64:["chrome-win","chrome.exe"]},firefox:{"ubuntu18.04":["firefox","firefox"],"ubuntu20.04":["firefox","firefox"],"mac10.13":["firefox","Nightly.app","Contents","MacOS","firefox"],"mac10.14":["firefox","Nightly.app","Contents","MacOS","firefox"],"mac10.15":["firefox","Nightly.app","Contents","MacOS","firefox"],mac11:["firefox","Nightly.app","Contents","MacOS","firefox"],"mac11-arm64":["firefox","Nightly.app","Contents","MacOS","firefox"],win32:["firefox","firefox.exe"],win64:["firefox","firefox.exe"]},webkit:{"ubuntu18.04":["pw_run.sh"],"ubuntu20.04":["pw_run.sh"],"mac10.13":void 0,"mac10.14":["pw_run.sh"],"mac10.15":["pw_run.sh"],mac11:["pw_run.sh"],"mac11-arm64":["pw_run.sh"],win32:["Playwright.exe"],win64:["Playwright.exe"]},ffmpeg:{"ubuntu18.04":["ffmpeg-linux"],"ubuntu20.04":["ffmpeg-linux"],"mac10.13":["ffmpeg-mac"],"mac10.14":["ffmpeg-mac"],"mac10.15":["ffmpeg-mac"],mac11:["ffmpeg-mac"],"mac11-arm64":["ffmpeg-mac"],win32:["ffmpeg-win32.exe"],win64:["ffmpeg-win64.exe"]}},Qs={chromium:{"ubuntu18.04":"%s/builds/chromium/%s/chromium-linux.zip","ubuntu20.04":"%s/builds/chromium/%s/chromium-linux.zip","mac10.13":"%s/builds/chromium/%s/chromium-mac.zip","mac10.14":"%s/builds/chromium/%s/chromium-mac.zip","mac10.15":"%s/builds/chromium/%s/chromium-mac.zip",mac11:"%s/builds/chromium/%s/chromium-mac.zip","mac11-arm64":"%s/builds/chromium/%s/chromium-mac-arm64.zip",win32:"%s/builds/chromium/%s/chromium-win32.zip",win64:"%s/builds/chromium/%s/chromium-win64.zip"},"chromium-with-symbols":{"ubuntu18.04":"%s/builds/chromium/%s/chromium-with-symbols-linux.zip","ubuntu20.04":"%s/builds/chromium/%s/chromium-with-symbols-linux.zip","mac10.13":"%s/builds/chromium/%s/chromium-with-symbols-mac.zip","mac10.14":"%s/builds/chromium/%s/chromium-with-symbols-mac.zip","mac10.15":"%s/builds/chromium/%s/chromium-with-symbols-mac.zip",mac11:"%s/builds/chromium/%s/chromium-with-symbols-mac.zip","mac11-arm64":"%s/builds/chromium/%s/chromium-with-symbols-mac-arm64.zip",win32:"%s/builds/chromium/%s/chromium-with-symbols-win32.zip",win64:"%s/builds/chromium/%s/chromium-with-symbols-win64.zip"},firefox:{"ubuntu18.04":"%s/builds/firefox/%s/firefox-ubuntu-18.04.zip","ubuntu20.04":"%s/builds/firefox/%s/firefox-ubuntu-20.04.zip","mac10.13":"%s/builds/firefox/%s/firefox-mac-11.zip","mac10.14":"%s/builds/firefox/%s/firefox-mac-11.zip","mac10.15":"%s/builds/firefox/%s/firefox-mac-11.zip",mac11:"%s/builds/firefox/%s/firefox-mac-11.zip","mac11-arm64":"%s/builds/firefox/%s/firefox-mac-11-arm64.zip",win32:"%s/builds/firefox/%s/firefox-win32.zip",win64:"%s/builds/firefox/%s/firefox-win64.zip"},"firefox-beta":{"ubuntu18.04":"%s/builds/firefox-beta/%s/firefox-beta-ubuntu-18.04.zip","ubuntu20.04":"%s/builds/firefox-beta/%s/firefox-beta-ubuntu-20.04.zip","mac10.13":"%s/builds/firefox-beta/%s/firefox-beta-mac-11.zip","mac10.14":"%s/builds/firefox-beta/%s/firefox-beta-mac-11.zip","mac10.15":"%s/builds/firefox-beta/%s/firefox-beta-mac-11.zip",mac11:"%s/builds/firefox-beta/%s/firefox-beta-mac-11.zip","mac11-arm64":"%s/builds/firefox-beta/%s/firefox-beta-mac-11-arm64.zip",win32:"%s/builds/firefox-beta/%s/firefox-beta-win32.zip",win64:"%s/builds/firefox-beta/%s/firefox-beta-win64.zip"},webkit:{"ubuntu18.04":"%s/builds/webkit/%s/webkit-ubuntu-18.04.zip","ubuntu20.04":"%s/builds/webkit/%s/webkit-ubuntu-20.04.zip","mac10.13":void 0,"mac10.14":"%s/builds/deprecated-webkit-mac-10.14/%s/deprecated-webkit-mac-10.14.zip","mac10.15":"%s/builds/webkit/%s/webkit-mac-10.15.zip",mac11:"%s/builds/webkit/%s/webkit-mac-10.15.zip","mac11-arm64":"%s/builds/webkit/%s/webkit-mac-11-arm64.zip",win32:"%s/builds/webkit/%s/webkit-win64.zip",win64:"%s/builds/webkit/%s/webkit-win64.zip"},ffmpeg:{"ubuntu18.04":"%s/builds/ffmpeg/%s/ffmpeg-linux.zip","ubuntu20.04":"%s/builds/ffmpeg/%s/ffmpeg-linux.zip","mac10.13":"%s/builds/ffmpeg/%s/ffmpeg-mac.zip","mac10.14":"%s/builds/ffmpeg/%s/ffmpeg-mac.zip","mac10.15":"%s/builds/ffmpeg/%s/ffmpeg-mac.zip",mac11:"%s/builds/ffmpeg/%s/ffmpeg-mac.zip","mac11-arm64":"%s/builds/ffmpeg/%s/ffmpeg-mac.zip",win32:"%s/builds/ffmpeg/%s/ffmpeg-win32.zip",win64:"%s/builds/ffmpeg/%s/ffmpeg-win64.zip"}},qi=(()=>{let r,e=(0,Le.getFromENV)("PLAYWRIGHT_BROWSERS_PATH");if(e==="0")r=De.default.join(__dirname,"..","..",".local-browsers");else if(e)r=e;else{let t;if(process.platform==="linux")t=process.env.XDG_CACHE_HOME||De.default.join(ei.homedir(),".cache");else if(process.platform==="darwin")t=De.default.join(ei.homedir(),"Library","Caches");else if(process.platform==="win32")t=process.env.LOCALAPPDATA||De.default.join(ei.homedir(),"AppData","Local");else throw new Error("Unsupported platform: "+process.platform);r=De.default.join(t,"ms-playwright")}return De.default.isAbsolute(r)||(r=De.default.resolve((0,Le.getFromENV)("INIT_CWD")||process.cwd(),r)),r})();fr.registryDirectory=qi;function P6(r){let e=De.default.basename(r);for(let t of WE)if(e.startsWith(t+"-"))return!0;return!1}function jE(r){return r.browsers.map(e=>{let t=e.name,i=(e.revisionOverrides||{})[Le.hostPlatform],n=i||e.revision,s=i?`${t}_${Le.hostPlatform}_special`:`${t}`;return{name:t,revision:n,installByDefault:!!e.installByDefault,dir:De.default.join(qi,s.replace(/-/g,"_")+"-"+n)}})}var WE=["chromium","firefox","webkit","ffmpeg","firefox-beta","chromium-with-symbols"],i_=class{constructor(e){this._executables=void 0;let t=jE(e),i=(C,E)=>{let N=O6[E][Le.hostPlatform];return N?De.default.join(C,...N):void 0},n=(C,E,N,P)=>{if(!E)throw new Error(`${C} is not supported on ${Le.hostPlatform}`);let L=$E(P,`install${N?"":" "+C}`);if(!(0,Le.canAccessFile)(E)){let S=["Looks like Playwright Test or Playwright was just installed or updated.",`Please run the following command to download new browser${N?"s":""}:`,"",`    ${L}`,"","<3 Playwright Team"].join(`
`);throw new Error(`Executable doesn't exist at ${E}
${(0,Le.wrapInASCIIBox)(S,1)}`)}return E};this._executables=[];let s=t.find(C=>C.name==="chromium"),o=i(s.dir,"chromium");this._executables.push({type:"browser",name:"chromium",browserName:"chromium",directory:s.dir,executablePath:()=>o,executablePathOrDie:C=>n("chromium",o,s.installByDefault,C),installType:s.installByDefault?"download-by-default":"download-on-demand",validateHostRequirements:()=>this._validateHostRequirements("chromium",s.dir,["chrome-linux"],[],["chrome-win"]),_install:()=>this._downloadExecutable(s,o,Qs.chromium[Le.hostPlatform],"PLAYWRIGHT_CHROMIUM_DOWNLOAD_HOST"),_dependencyGroup:"chromium"});let l=t.find(C=>C.name==="chromium-with-symbols"),u=i(l.dir,"chromium");this._executables.push({type:"tool",name:"chromium-with-symbols",browserName:"chromium",directory:l.dir,executablePath:()=>u,executablePathOrDie:C=>n("chromium-with-symbols",u,l.installByDefault,C),installType:l.installByDefault?"download-by-default":"download-on-demand",validateHostRequirements:()=>this._validateHostRequirements("chromium",l.dir,["chrome-linux"],[],["chrome-win"]),_install:()=>this._downloadExecutable(l,u,Qs["chromium-with-symbols"][Le.hostPlatform],"PLAYWRIGHT_CHROMIUM_DOWNLOAD_HOST"),_dependencyGroup:"chromium"}),this._executables.push(this._createChromiumChannel("chrome",{linux:"/opt/google/chrome/chrome",darwin:"/Applications/Google Chrome.app/Contents/MacOS/Google Chrome",win32:"\\Google\\Chrome\\Application\\chrome.exe"},()=>this._installChromiumChannel("chrome",{linux:"reinstall_chrome_stable_linux.sh",darwin:"reinstall_chrome_stable_mac.sh",win32:"reinstall_chrome_stable_win.ps1"}))),this._executables.push(this._createChromiumChannel("chrome-beta",{linux:"/opt/google/chrome-beta/chrome",darwin:"/Applications/Google Chrome Beta.app/Contents/MacOS/Google Chrome Beta",win32:"\\Google\\Chrome Beta\\Application\\chrome.exe"},()=>this._installChromiumChannel("chrome-beta",{linux:"reinstall_chrome_beta_linux.sh",darwin:"reinstall_chrome_beta_mac.sh",win32:"reinstall_chrome_beta_win.ps1"}))),this._executables.push(this._createChromiumChannel("chrome-dev",{linux:"/opt/google/chrome-unstable/chrome",darwin:"/Applications/Google Chrome Dev.app/Contents/MacOS/Google Chrome Dev",win32:"\\Google\\Chrome Dev\\Application\\chrome.exe"})),this._executables.push(this._createChromiumChannel("chrome-canary",{linux:"",darwin:"/Applications/Google Chrome Canary.app/Contents/MacOS/Google Chrome Canary",win32:"\\Google\\Chrome SxS\\Application\\chrome.exe"})),this._executables.push(this._createChromiumChannel("msedge",{linux:"",darwin:"/Applications/Microsoft Edge.app/Contents/MacOS/Microsoft Edge",win32:"\\Microsoft\\Edge\\Application\\msedge.exe"},()=>this._installMSEdgeChannel("msedge",{linux:"",darwin:"reinstall_msedge_stable_mac.sh",win32:"reinstall_msedge_stable_win.ps1"}))),this._executables.push(this._createChromiumChannel("msedge-beta",{linux:"/opt/microsoft/msedge-beta/msedge",darwin:"/Applications/Microsoft Edge Beta.app/Contents/MacOS/Microsoft Edge Beta",win32:"\\Microsoft\\Edge Beta\\Application\\msedge.exe"},()=>this._installMSEdgeChannel("msedge-beta",{darwin:"reinstall_msedge_beta_mac.sh",linux:"reinstall_msedge_beta_linux.sh",win32:"reinstall_msedge_beta_win.ps1"}))),this._executables.push(this._createChromiumChannel("msedge-dev",{linux:"/opt/microsoft/msedge-dev/msedge",darwin:"/Applications/Microsoft Edge Dev.app/Contents/MacOS/Microsoft Edge Dev",win32:"\\Microsoft\\Edge Dev\\Application\\msedge.exe"},()=>this._installMSEdgeChannel("msedge-dev",{darwin:"reinstall_msedge_dev_mac.sh",linux:"reinstall_msedge_dev_linux.sh",win32:"reinstall_msedge_dev_win.ps1"}))),this._executables.push(this._createChromiumChannel("msedge-canary",{linux:"",darwin:"/Applications/Microsoft Edge Canary.app/Contents/MacOS/Microsoft Edge Canary",win32:"\\Microsoft\\Edge SxS\\Application\\msedge.exe"}));let d=t.find(C=>C.name==="firefox"),h=i(d.dir,"firefox");this._executables.push({type:"browser",name:"firefox",browserName:"firefox",directory:d.dir,executablePath:()=>h,executablePathOrDie:C=>n("firefox",h,d.installByDefault,C),installType:d.installByDefault?"download-by-default":"download-on-demand",validateHostRequirements:()=>this._validateHostRequirements("firefox",d.dir,["firefox"],[],["firefox"]),_install:()=>this._downloadExecutable(d,h,Qs.firefox[Le.hostPlatform],"PLAYWRIGHT_FIREFOX_DOWNLOAD_HOST"),_dependencyGroup:"firefox"});let p=t.find(C=>C.name==="firefox-beta"),f=i(p.dir,"firefox");this._executables.push({type:"tool",name:"firefox-beta",browserName:"firefox",directory:p.dir,executablePath:()=>f,executablePathOrDie:C=>n("firefox-beta",f,p.installByDefault,C),installType:p.installByDefault?"download-by-default":"download-on-demand",validateHostRequirements:()=>this._validateHostRequirements("firefox",p.dir,["firefox"],[],["firefox"]),_install:()=>this._downloadExecutable(p,f,Qs["firefox-beta"][Le.hostPlatform],"PLAYWRIGHT_FIREFOX_DOWNLOAD_HOST"),_dependencyGroup:"firefox"});let m=t.find(C=>C.name==="webkit"),_=i(m.dir,"webkit"),g=[De.default.join("minibrowser-gtk"),De.default.join("minibrowser-gtk","bin"),De.default.join("minibrowser-gtk","lib"),De.default.join("minibrowser-wpe"),De.default.join("minibrowser-wpe","bin"),De.default.join("minibrowser-wpe","lib")];this._executables.push({type:"browser",name:"webkit",browserName:"webkit",directory:m.dir,executablePath:()=>_,executablePathOrDie:C=>n("webkit",_,m.installByDefault,C),installType:m.installByDefault?"download-by-default":"download-on-demand",validateHostRequirements:()=>this._validateHostRequirements("webkit",m.dir,g,["libGLESv2.so.2","libx264.so"],[""]),_install:()=>this._downloadExecutable(m,_,Qs.webkit[Le.hostPlatform],"PLAYWRIGHT_WEBKIT_DOWNLOAD_HOST"),_dependencyGroup:"webkit"});let w=t.find(C=>C.name==="ffmpeg"),b=i(w.dir,"ffmpeg");this._executables.push({type:"tool",name:"ffmpeg",browserName:void 0,directory:w.dir,executablePath:()=>b,executablePathOrDie:C=>n("ffmpeg",b,w.installByDefault,C),installType:w.installByDefault?"download-by-default":"download-on-demand",validateHostRequirements:()=>Promise.resolve(),_install:()=>this._downloadExecutable(w,b,Qs.ffmpeg[Le.hostPlatform],"PLAYWRIGHT_FFMPEG_DOWNLOAD_HOST"),_dependencyGroup:"tools"})}_createChromiumChannel(e,t,i){let n=s=>{let o=t[process.platform];if(!o){if(s)throw new Error(`Chromium distribution '${e}' is not supported on ${process.platform}`);return}let l=process.platform==="win32"?[process.env.LOCALAPPDATA,process.env.PROGRAMFILES,process.env["PROGRAMFILES(X86)"]].filter(Boolean):[""];for(let h of l){let p=De.default.join(h,o);if((0,Le.canAccessFile)(p))return p}if(!s)return;let u=l.length?` at ${De.default.join(l[0],o)}`:"",d=i?`
Run "npx playwright install ${e}"`:"";throw new Error(`Chromium distribution '${e}' is not found${u}${d}`)};return{type:"channel",name:e,browserName:"chromium",directory:void 0,executablePath:()=>n(!1),executablePathOrDie:s=>n(!0),installType:i?"install-script":"none",validateHostRequirements:()=>Promise.resolve(),_install:i}}executables(){return this._executables}findExecutable(e){return this._executables.find(t=>t.name===e)}defaultExecutables(){return this._executables.filter(e=>e.installType==="download-by-default")}_addRequirementsAndDedupe(e){let t=new Set;for(let i of e)t.add(i),i.browserName==="chromium"&&t.add(this.findExecutable("ffmpeg"));return Array.from(t)}_validateHostRequirements(e,t,i,n,s){return c(this,null,function*(){if((0,Le.getAsBooleanFromENV)("PLAYWRIGHT_SKIP_VALIDATE_HOST_REQUIREMENTS")){process.stdout.write("Skipping host requirements validation logic because `PLAYWRIGHT_SKIP_VALIDATE_HOST_REQUIREMENTS` env variable is set.\n");return}let o=yield(0,k6.getUbuntuVersion)();if(e==="firefox"&&o==="16.04")throw new Error("Cannot launch Firefox on Ubuntu 16.04! Minimum required Ubuntu version for Firefox browser is 18.04");if(ei.platform()==="linux")return yield(0,Ku.validateDependenciesLinux)(i.map(l=>De.default.join(t,l)),n);if(ei.platform()==="win32"&&ei.arch()==="x64")return yield(0,Ku.validateDependenciesWindows)(s.map(l=>De.default.join(t,l)))})}installDeps(e){return c(this,null,function*(){let t=this._addRequirementsAndDedupe(e),i=new Set;for(let n of t)n._dependencyGroup&&i.add(n._dependencyGroup);if(i.add("tools"),ei.platform()==="win32")return yield(0,Ku.installDependenciesWindows)(i);if(ei.platform()==="linux")return yield(0,Ku.installDependenciesLinux)(i)})}install(e){return c(this,null,function*(){let t=this._addRequirementsAndDedupe(e);yield Li.promises.mkdir(qi,{recursive:!0});let i=De.default.join(qi,"__dirlock"),n=yield C6.default.lock(qi,{retries:{retries:10,factor:1.27579},onCompromised:o=>{throw new Error(`${o.message} Path: ${i}`)},lockfilePath:i}),s=De.default.join(qi,".links");try{yield Li.promises.mkdir(s,{recursive:!0}),yield Li.promises.writeFile(De.default.join(s,(0,Le.calculateSha1)(BE)),BE),yield this._validateInstallationCache(s);for(let o of t)if(o._install)yield o._install();else throw new Error(`ERROR: Playwright does not support installing ${o.name}`)}catch(o){if(o.code==="ELOCKED"){let l=process.platform==="win32"?"rm -R":"rm -rf";throw new Error(`
`+(0,Le.wrapInASCIIBox)(["An active lockfile is found at:","",`  ${i}`,"","Either:","- wait a few minutes if other Playwright is installing browsers in parallel","- remove lock manually with:","",`    ${l} ${i}`,"","<3 Playwright Team"].join(`
`),1))}else throw o}finally{yield n()}})}_downloadExecutable(e,t,i,n){return c(this,null,function*(){if(!i||!t)throw new Error(`ERROR: Playwright does not support ${e.name} on ${Le.hostPlatform}`);let s=n&&(0,Le.getFromENV)(n)||(0,Le.getFromENV)("PLAYWRIGHT_DOWNLOAD_HOST")||"https://playwright.azureedge.net",o=E6.format(i,s,e.revision),l=`${e.name} v${e.revision}`,u=`playwright-download-${e.name}-${Le.hostPlatform}-${e.revision}.zip`;yield(0,t_.downloadBrowserWithProgressBar)(l,e.dir,t,o,u).catch(d=>{throw new Error(`Failed to download ${l}, caused by
${d.stack}`)}),yield Li.promises.writeFile(UE(e.dir),"")})}_installMSEdgeChannel(e,t){return c(this,null,function*(){let i=[];if(process.platform!=="linux"){let n=JSON.parse(yield(0,Le.fetchData)({url:"https://edgeupdates.microsoft.com/api/products"})),s={msedge:"Stable","msedge-beta":"Beta","msedge-dev":"Dev"}[e],o=n.find(h=>h.Product===s),l={darwin:{platform:"MacOS",arch:"universal",artifact:"pkg"},win32:{platform:"Windows",arch:ei.arch()==="x64"?"x64":"x86",artifact:"msi"}}[process.platform],u=l?o.Releases.find(h=>h.Platform===l.platform&&h.Architecture===l.arch):null,d=u?u.Artifacts.find(h=>h.ArtifactName===l.artifact):null;if(d)i.push(d.Location);else throw new Error(`Cannot install ${e} on ${process.platform}`)}yield this._installChromiumChannel(e,t,i)})}_installChromiumChannel(n,s){return c(this,arguments,function*(e,t,i=[]){let o=t[process.platform];if(!o)throw new Error(`Cannot install ${e} on ${process.platform}`);let l=o.endsWith(".ps1"),u=l?"powershell.exe":"bash",d=[...l?["-File"]:[],De.default.join(HE,o),...i],{code:h}=yield(0,Le.spawnAsync)(u,d,{cwd:HE,stdio:"inherit"});if(h!==0)throw new Error(`Failed to install ${e}`)})}_validateInstallationCache(e){return c(this,null,function*(){let t=new Set;for(let i of yield Li.promises.readdir(e)){let n=De.default.join(e,i),s="";try{s=(yield Li.promises.readFile(n)).toString();let o=x(De.default.join(s,"browsers.json")),l=jE(o);for(let u of WE){let d=l.find(m=>m.name===u);if(!d)continue;let h=d.dir,p=parseInt(d.revision,10);(!(u==="chromium"&&p>=786218||u==="firefox"&&p>=1128||u==="webkit"&&p>=1307||u!=="firefox"&&u!=="chromium"&&u!=="webkit")||(yield(0,Le.existsAsync)(UE(h))))&&t.add(h)}}catch(o){yield Li.promises.unlink(n).catch(l=>{})}}if(!(0,Le.getAsBooleanFromENV)("PLAYWRIGHT_SKIP_BROWSER_GC")){let i=(yield Li.promises.readdir(qi)).map(s=>De.default.join(qi,s));i=i.filter(s=>P6(s));let n=new Set(i);for(let s of t)n.delete(s);for(let s of n)(0,t_.logPolitely)("Removing unused browser at "+s);yield(0,Le.removeFolders)([...n])}})}};fr.Registry=i_;function UE(r){return De.default.join(r,"INSTALLATION_COMPLETE")}function $E(r,e){switch(r){case"python":return`playwright ${e}`;case"java":return`mvn exec:java -e -Dexec.mainClass=com.microsoft.playwright.CLI -Dexec.args="${e}"`;case"csharp":return`playwright ${e}`;default:return`npx playwright ${e}`}}function T6(){return c(this,null,function*(){let r=Za.defaultExecutables().map(e=>e.name);return zE(r)})}function zE(r){return c(this,null,function*(){if((0,Le.getAsBooleanFromENV)("PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD"))return(0,t_.logPolitely)("Skipping browsers download because `PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD` env variable is set"),!1;let e=[];for(let t of r){let i=Za.findExecutable(t);if(!i||i.installType==="none")throw new Error(`Cannot install ${t}`);e.push(i)}yield Za.install(e)})}function A6(r){let e=null;for(let t of["chromium","chrome","msedge"])try{Za.findExecutable(t).executablePathOrDie(r),e=t==="chromium"?void 0:t;break}catch(i){}if(e===null){let t=$E(r,"install chromium"),i=["No chromium-based browser found on the system.","Please run the following command to download one:","",`    ${t}`,"","<3 Playwright Team"].join(`
`);throw new Error(`
`+(0,Le.wrapInASCIIBox)(i,1))}return e}var Za=new i_(DE());fr.registry=Za});var KE=v(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});Xu.RecorderApp=void 0;var I6=GE(x("fs")),M6=GE(x("path")),F6=Ar(),R6=x("events"),ec=nt(),N6=G(),D6=B6(bi()),L6=xS(),q6=Qa();function VE(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(VE=function(i){return i?t:e})(r)}function B6(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=VE(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function GE(r){return r&&r.__esModule?r:{default:r}}var Ju=class extends R6.EventEmitter{constructor(e,t){super();this._page=void 0,this.wsEndpoint=void 0,this.setMaxListeners(0),this._page=e,this.wsEndpoint=t}close(){return c(this,null,function*(){yield this._page.context().close((0,ec.internalCallMetadata)())})}_init(){return c(this,null,function*(){yield(0,L6.installAppIcon)(this._page),yield this._page._setServerRequestInterceptor(t=>c(this,null,function*(){if(t.request().url().startsWith("https://playwright/")){let i=t.request().url().substring("https://playwright/".length),n=x.resolve("../../../webpack/recorder/"+i),s=yield I6.default.promises.readFile(n);yield t.fulfill({status:200,headers:[{name:"Content-Type",value:D6.getType(M6.default.extname(n))||"application/octet-stream"}],body:s.toString("base64"),isBase64:!0});return}yield t.continue()})),yield this._page.exposeBinding("dispatch",!1,(t,i)=>this.emit("event",i)),this._page.once("close",()=>{this.emit("close"),this._page.context().close((0,ec.internalCallMetadata)()).catch(t=>console.error(t))}),yield this._page.mainFrame().goto((0,ec.internalCallMetadata)(),"https://playwright/index.html")})}static open(e){return c(this,null,function*(){let t=tc().createPlaywright("javascript",!0),i=["--app=data:text/html,","--window-size=600,600","--window-position=1280,10"];process.env.PWTEST_RECORDER_PORT&&i.push(`--remote-debugging-port=${process.env.PWTEST_RECORDER_PORT}`);let n=yield t.chromium.launchPersistentContext((0,ec.internalCallMetadata)(),"",{channel:(0,q6.findChromiumChannel)(e),args:i,noDefaultViewport:!0,headless:!!process.env.PWTEST_CLI_HEADLESS||(0,N6.isUnderTest)()&&!process.env.HEADFUL,useWebSocket:!!process.env.PWTEST_RECORDER_PORT});yield new F6.ProgressController((0,ec.internalCallMetadata)(),n._browser).run(u=>c(this,null,function*(){yield n._browser._defaultContext._loadDefaultContextAsIs(u)}));let[o]=n.pages(),l=new Ju(o,n._browser.options.wsEndpoint);return yield l._init(),l})}setMode(e){return c(this,null,function*(){yield this._page.mainFrame().evaluateExpression((t=>{window.playwrightSetMode(t)}).toString(),!0,e,"main").catch(()=>{})})}setFile(e){return c(this,null,function*(){yield this._page.mainFrame().evaluateExpression((t=>{window.playwrightSetFile(t)}).toString(),!0,e,"main").catch(()=>{})})}setPaused(e){return c(this,null,function*(){yield this._page.mainFrame().evaluateExpression((t=>{window.playwrightSetPaused(t)}).toString(),!0,e,"main").catch(()=>{})})}setSources(e){return c(this,null,function*(){yield this._page.mainFrame().evaluateExpression((t=>{window.playwrightSetSources(t)}).toString(),!0,e,"main").catch(()=>{}),process.env.PWTEST_CLI_EXIT&&e.length&&(process.stdout.write(`
-------------8<-------------
`),process.stdout.write(e[0].text),process.stdout.write(`
-------------8<-------------
`))})}setSelector(e,t){return c(this,null,function*(){yield this._page.mainFrame().evaluateExpression((i=>{window.playwrightSetSelector(i.selector,i.focus)}).toString(),!0,{selector:e,focus:t},"main").catch(()=>{})})}updateCallLogs(e){return c(this,null,function*(){yield this._page.mainFrame().evaluateExpression((t=>{window.playwrightUpdateLogs(t)}).toString(),!0,e,"main").catch(()=>{})})}bringToFront(){return c(this,null,function*(){yield this._page.bringToFront()})}};Xu.RecorderApp=Ju});var JE=v(n_=>{"use strict";Object.defineProperty(n_,"__esModule",{value:!0});n_.metadataToCallLog=H6;function H6(r,e){var t,i;let n=r.apiName||r.method;r.method==="waitForEventInfo"&&(n+=`(${r.params.info.event})`),n=n.replace("object.expect","expect"),r.error&&(e="error");let s={url:(t=r.params)===null||t===void 0?void 0:t.url,selector:(i=r.params)===null||i===void 0?void 0:i.selector},o=r.endTime?r.endTime-r.startTime:void 0;return typeof o=="number"&&r.pauseStartTime&&r.pauseEndTime&&(o-=r.pauseEndTime-r.pauseStartTime,o=Math.max(o,0)),{id:r.id,messages:r.log,title:n,status:e,error:r.error,params:s,duration:o}}});var c_=v(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.RecorderSupplement=void 0;var s_=a_(x("fs")),j6=sS(),eo=An(),XE=Ot(),W6=Aa(),o_=gt(),U6=pS(),YE=Sm(),$6=_S(),ZE=yS(),z6=a_(bS()),V6=a_(Am()),G6=KE(),rc=G(),K6=JE(),QE=tm(),J6=x("events");function eC(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(eC=function(i){return i?t:e})(r)}function a_(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=eC(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var tC=Symbol("RecorderSupplement"),ic=class{static showInspector(e){ic.show(e,{}).catch(()=>{})}static show(e,t={}){let i=e[tC];if(!i){let n=new ic(e,t);i=n.install().then(()=>n),e[tC]=i}return i}constructor(e,t){this._context=void 0,this._mode=void 0,this._highlightedSelector="",this._recorderApp=null,this._currentCallsMetadata=new Map,this._recorderSources=[],this._userSources=new Map,this._allMetadatas=new Map,this._debugger=void 0,this._contextRecorder=void 0,this._mode=t.startRecording?"recording":"none",this._contextRecorder=new to(e,t),this._context=e,this._debugger=QE.Debugger.lookup(e),e.instrumentation.addListener(this)}install(){return c(this,null,function*(){let e=yield G6.RecorderApp.open(this._context._browser.options.sdkLanguage);this._recorderApp=e,e.once("close",()=>{this._debugger.resume(!1),this._recorderApp=null}),e.on("event",t=>{if(t.event==="setMode"){this._setMode(t.params.mode),this._refreshOverlay();return}if(t.event==="selectorUpdated"){this._highlightedSelector=t.params.selector,this._refreshOverlay();return}if(t.event==="step"){this._debugger.resume(!0);return}if(t.event==="resume"){this._debugger.resume(!1);return}if(t.event==="pause"){this._debugger.pauseOnNextStatement();return}if(t.event==="clear"){this._contextRecorder.clearScript();return}}),yield Promise.all([e.setMode(this._mode),e.setPaused(this._debugger.isPaused()),this._pushAllSources()]),this._context.once(o_.BrowserContext.Events.Close,()=>{this._contextRecorder.dispose(),e.close().catch(()=>{})}),this._contextRecorder.on(to.Events.Change,t=>{var i;this._recorderSources=t.sources,this._pushAllSources(),(i=this._recorderApp)===null||i===void 0||i.setFile(t.primaryFileName)}),yield this._context.exposeBinding("_playwrightRecorderState",!1,t=>{let i=this._highlightedSelector,n;for(let[o,l]of this._currentCallsMetadata)t.page===l.attribution.page&&(n=o.point||n,i=i||o.params.selector);return{mode:this._mode,actionPoint:n,actionSelector:i}}),yield this._context.exposeBinding("_playwrightRecorderSetSelector",!1,(t,i)=>c(this,null,function*(){var n,s;this._setMode("none"),yield(n=this._recorderApp)===null||n===void 0?void 0:n.setSelector(i,!0),yield(s=this._recorderApp)===null||s===void 0?void 0:s.bringToFront()})),yield this._context.exposeBinding("_playwrightResume",!1,()=>{this._debugger.resume(!1)}),yield this._context.extendInjectedScript(V6.source),yield this._contextRecorder.install(),this._debugger.isPaused()&&this._pausedStateChanged(),this._debugger.on(QE.Debugger.Events.PausedStateChanged,()=>this._pausedStateChanged()),this._context.recorderAppForTest=e})}_pausedStateChanged(){var e;for(let{metadata:t,sdkObject:i}of this._debugger.pausedDetails())this._currentCallsMetadata.has(t)||this.onBeforeCall(i,t);(e=this._recorderApp)===null||e===void 0||e.setPaused(this._debugger.isPaused()),this._updateUserSources(),this.updateCallLog([...this._currentCallsMetadata.keys()])}_setMode(e){var t;this._mode=e,(t=this._recorderApp)===null||t===void 0||t.setMode(this._mode),this._contextRecorder.setEnabled(this._mode==="recording"),this._debugger.setMuted(this._mode==="recording"),this._mode!=="none"&&this._context.pages()[0].bringToFront().catch(()=>{})}_refreshOverlay(){for(let e of this._context.pages())e.mainFrame().evaluateExpression("window._playwrightRefreshOverlay()",!1,void 0,"main").catch(()=>{})}onBeforeCall(e,t){return c(this,null,function*(){if(this._mode!=="recording"&&(this._currentCallsMetadata.set(t,e),this._allMetadatas.set(t.id,t),this._updateUserSources(),this.updateCallLog([t]),t.params&&t.params.selector)){var i;this._highlightedSelector=t.params.selector,(i=this._recorderApp)===null||i===void 0||i.setSelector(this._highlightedSelector).catch(()=>{})}})}onAfterCall(e,t){return c(this,null,function*(){this._mode!=="recording"&&(t.error||this._currentCallsMetadata.delete(t),this._updateUserSources(),this.updateCallLog([t]))})}_updateUserSources(){var e;for(let i of this._userSources.values())i.highlight=[],i.revealLine=void 0;let t;for(let i of this._currentCallsMetadata.keys()){if(!i.stack||!i.stack[0])continue;let{file:n,line:s}=i.stack[0],o=this._userSources.get(n);if(o||(o={file:n,text:this._readSource(n),highlight:[],language:X6(n)},this._userSources.set(n,o)),s){let l=this._debugger.isPaused(i);o.highlight.push({line:s,type:i.error?"error":l?"paused":"running"}),o.revealLine=s,t=o.file}}this._pushAllSources(),t&&((e=this._recorderApp)===null||e===void 0||e.setFile(t))}_pushAllSources(){var e;(e=this._recorderApp)===null||e===void 0||e.setSources([...this._recorderSources,...this._userSources.values()])}onBeforeInputAction(e,t){return c(this,null,function*(){})}onCallLog(e,t,i,n){return c(this,null,function*(){this.updateCallLog([n])})}updateCallLog(e){var t;if(this._mode==="recording")return;let i=[];for(let n of e){if(!n.method)continue;let s="done";this._currentCallsMetadata.has(n)&&(s="in-progress"),this._debugger.isPaused(n)&&(s="paused"),i.push((0,K6.metadataToCallLog)(n,s))}(t=this._recorderApp)===null||t===void 0||t.updateCallLogs(i)}_readSource(e){try{return s_.readFileSync(e,"utf-8")}catch(t){return"// No source available"}}};Yu.RecorderSupplement=ic;var to=class extends J6.EventEmitter{constructor(e,t){super();this._generator=void 0,this._pageAliases=new Map,this._lastPopupOrdinal=0,this._lastDialogOrdinal=0,this._lastDownloadOrdinal=0,this._timers=new Set,this._context=void 0,this._params=void 0,this._recorderSources=void 0,this._context=e,this._params=t;let i=t.language||e._browser.options.sdkLanguage,n=new Set([new U6.JavaLanguageGenerator,new YE.JavaScriptLanguageGenerator(!1),new YE.JavaScriptLanguageGenerator(!0),new ZE.PythonLanguageGenerator(!1),new ZE.PythonLanguageGenerator(!0),new $6.CSharpLanguageGenerator]),s=[...n].find(d=>d.id===i);if(!s)throw new Error(`
===============================
Unsupported language: '${i}'
===============================
`);n.delete(s);let o=[s,...n];this._recorderSources=[];let l=new j6.CodeGenerator(e._browser.options.name,!!t.startRecording,t.launchOptions||{},t.contextOptions||{},t.device,t.saveStorage),u="";l.on("change",()=>{this._recorderSources=[];for(let d of o){let h={file:d.fileName,text:l.generateText(d),language:d.highlighter,highlight:[]};h.revealLine=h.text.split(`
`).length-1,this._recorderSources.push(h),d===o[0]&&(u=h.text)}this.emit(to.Events.Change,{sources:this._recorderSources,primaryFileName:s.fileName})}),t.outputFile&&(e.on(o_.BrowserContext.Events.BeforeClose,()=>{s_.writeFileSync(t.outputFile,u),u=""}),process.on("exit",()=>{u&&s_.writeFileSync(t.outputFile,u)})),this._generator=l}install(){return c(this,null,function*(){this._context.on(o_.BrowserContext.Events.Page,e=>this._onPage(e));for(let e of this._context.pages())this._onPage(e);yield this._context.exposeBinding("_playwrightRecorderPerformAction",!1,(e,t)=>this._performAction(e.frame,t)),yield this._context.exposeBinding("_playwrightRecorderRecordAction",!1,(e,t)=>this._recordAction(e.frame,t)),yield this._context.extendInjectedScript(z6.source,{isUnderTest:(0,rc.isUnderTest)()})})}setEnabled(e){this._generator.setEnabled(e)}dispose(){for(let e of this._timers)clearTimeout(e);this._timers.clear()}_onPage(e){return c(this,null,function*(){let t=e.mainFrame();e.on("close",()=>{this._pageAliases.delete(e),this._generator.addAction(R(y({pageAlias:n},(0,eo.describeFrame)(e.mainFrame())),{committed:!0,action:{name:"closePage",signals:[]}}))}),t.on(W6.Frame.Events.Navigation,()=>this._onFrameNavigated(t,e)),e.on(XE.Page.Events.Download,()=>this._onDownload(e)),e.on(XE.Page.Events.Dialog,()=>this._onDialog(e));let i=this._pageAliases.size?String(++this._lastPopupOrdinal):"",n="page"+i;this._pageAliases.set(e,n),e.opener()?this._onPopup(e.opener(),e):this._generator.addAction(R(y({pageAlias:n},(0,eo.describeFrame)(e.mainFrame())),{committed:!0,action:{name:"openPage",url:e.mainFrame().url(),signals:[]}}))})}clearScript(){if(this._generator.restart(),this._params.startRecording)for(let e of this._context.pages())this._onFrameNavigated(e.mainFrame(),e)}_performAction(e,t){return c(this,null,function*(){this._generator.commitLastAction();let i=e._page,n=R(y({pageAlias:this._pageAliases.get(i)},(0,eo.describeFrame)(e)),{action:t}),s=(l,u,d)=>c(this,null,function*(){let h={id:`call@${(0,rc.createGuid)()}`,apiName:"frame."+l,objectId:e.guid,pageId:e._page.guid,frameId:e.guid,startTime:(0,rc.monotonicTime)(),endTime:0,type:"Frame",method:l,params:u,log:[],snapshots:[]};this._generator.willPerformAction(n);try{yield e.instrumentation.onBeforeCall(e,h),yield d(h)}catch(f){h.endTime=(0,rc.monotonicTime)(),yield e.instrumentation.onAfterCall(e,h),this._generator.performedActionFailed(n);return}h.endTime=(0,rc.monotonicTime)(),yield e.instrumentation.onAfterCall(e,h);let p=setTimeout(()=>{n.committed=!0,this._timers.delete(p)},5e3);this._generator.didPerformAction(n),this._timers.add(p)}),o=5e3;if(t.name==="click"){let{options:l}=(0,eo.toClickOptions)(t);yield s("click",{selector:t.selector},u=>e.click(u,t.selector,R(y({},l),{timeout:o})))}if(t.name==="press"){let u=[...(0,eo.toModifiers)(t.modifiers),t.key].join("+");yield s("press",{selector:t.selector,key:u},d=>e.press(d,t.selector,u,{timeout:o}))}if(t.name==="check"&&(yield s("check",{selector:t.selector},l=>e.check(l,t.selector,{timeout:o}))),t.name==="uncheck"&&(yield s("uncheck",{selector:t.selector},l=>e.uncheck(l,t.selector,{timeout:o}))),t.name==="select"){let l=t.options.map(u=>({value:u}));yield s("selectOption",{selector:t.selector,values:l},u=>e.selectOption(u,t.selector,[],l,{timeout:o}))}})}_recordAction(e,t){return c(this,null,function*(){this._generator.commitLastAction(),this._generator.addAction(R(y({pageAlias:this._pageAliases.get(e._page)},(0,eo.describeFrame)(e)),{action:t}))})}_onFrameNavigated(e,t){let i=this._pageAliases.get(t);this._generator.signal(i,e,{name:"navigation",url:e.url()})}_onPopup(e,t){let i=this._pageAliases.get(e),n=this._pageAliases.get(t);this._generator.signal(i,e.mainFrame(),{name:"popup",popupAlias:n})}_onDownload(e){let t=this._pageAliases.get(e);this._generator.signal(t,e.mainFrame(),{name:"download",downloadAlias:String(++this._lastDownloadOrdinal)})}_onDialog(e){let t=this._pageAliases.get(e);this._generator.signal(t,e.mainFrame(),{name:"dialog",dialogAlias:String(++this._lastDialogOrdinal)})}};to.Events={Change:"change"};function X6(r){return r.endsWith(".py")?"python":r.endsWith(".java")?"java":r.endsWith(".cs")?"csharp":"javascript"}});var gt=v(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});Hi.assertBrowserContextIsNotOwned=s4;Hi.validateBrowserContextOptions=o4;Hi.verifyGeolocation=oC;Hi.normalizeProxySettings=aC;Hi.BrowserContext=void 0;var Y6=d_(x("os")),Z6=er(),ro=G(),Q6=Mt(),rC=d_(jt()),l_=Ot(),iC=n4(x("path")),Zu=nt(),nC=tm(),e4=eS(),t4=rS(),u_=c_(),r4=d_(Am()),i4=Ca();function n4(r){return r&&r.__esModule?r:{default:r}}function sC(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(sC=function(i){return i?t:e})(r)}function d_(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=sC(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var Bi=class extends Zu.SdkObject{constructor(e,t,i){super(e,"browser-context");this._timeoutSettings=new Z6.TimeoutSettings,this._pageBindings=new Map,this._options=void 0,this._requestInterceptor=void 0,this._isPersistentContext=void 0,this._closedStatus="open",this._closePromise=void 0,this._closePromiseFulfill=void 0,this._permissions=new Map,this._downloads=new Set,this._browser=void 0,this._browserContextId=void 0,this._selectors=void 0,this._origins=new Set,this._harRecorder=void 0,this.tracing=void 0,this.fetchRequest=void 0,this.attribution.context=this,this._browser=e,this._options=t,this._browserContextId=i,this._isPersistentContext=!i,this._closePromise=new Promise(n=>this._closePromiseFulfill=n),this.instrumentation=(0,Zu.createInstrumentation)(),this._options.recordHar&&(this._harRecorder=new t4.HarRecorder(this,R(y({},this._options.recordHar),{path:iC.default.join(this._browser.options.artifactsDir,`${(0,ro.createGuid)()}.har`)}))),this.tracing=new e4.Tracing(this),this.fetchRequest=new i4.BrowserContextFetchRequest(this)}isPersistentContext(){return this._isPersistentContext}_setSelectors(e){this._selectors=e}selectors(){return this._selectors||this._browser.options.selectors}_initialize(){return c(this,null,function*(){if(this.attribution.isInternal)return;let e=new nC.Debugger(this);this.instrumentation.addListener(e),(0,ro.debugMode)()==="inspector"&&(yield u_.RecorderSupplement.show(this,{pauseOnNextStatement:!0})),e.isPaused()&&u_.RecorderSupplement.showInspector(this),e.on(nC.Debugger.Events.PausedStateChanged,()=>{u_.RecorderSupplement.showInspector(this)}),(0,ro.debugMode)()==="console"&&(yield this.extendInjectedScript(r4.source))})}_ensureVideosPath(){return c(this,null,function*(){this._options.recordVideo&&(yield(0,ro.mkdirIfNeeded)(iC.default.join(this._options.recordVideo.dir,"dummy")))})}_browserClosed(){for(let e of this.pages())e._didClose();this._didCloseInternal()}_didCloseInternal(){this._closedStatus!=="closed"&&(this._closedStatus="closed",this._deleteAllDownloads(),this._downloads.clear(),this._isPersistentContext&&this._onClosePersistent(),this._closePromiseFulfill(new Error("Context closed")),this.emit(Bi.Events.Close))}cookies(){return c(this,arguments,function*(e=[]){return e&&!Array.isArray(e)&&(e=[e]),yield this._doCookies(e)})}setHTTPCredentials(e){return this._doSetHTTPCredentials(e)}exposeBinding(e,t,i){return c(this,null,function*(){if(this._pageBindings.has(e))throw new Error(`Function "${e}" has been already registered`);for(let s of this.pages())if(s.getBinding(e))throw new Error(`Function "${e}" has been already registered in one of the pages`);let n=new l_.PageBinding(e,i,t);this._pageBindings.set(e,n),yield this._doExposeBinding(n)})}grantPermissions(e,t){return c(this,null,function*(){let i="*";t&&(i=new URL(t).origin);let n=new Set(this._permissions.get(i)||[]);e.forEach(o=>n.add(o));let s=[...n.values()];this._permissions.set(i,s),yield this._doGrantPermissions(i,s)})}clearPermissions(){return c(this,null,function*(){this._permissions.clear(),yield this._doClearPermissions()})}setDefaultNavigationTimeout(e){this._timeoutSettings.setDefaultNavigationTimeout(e)}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e)}_loadDefaultContextAsIs(e){return c(this,null,function*(){if(!this.pages().length){let i=Q6.helper.waitForEvent(e,this,Bi.Events.Page);e.cleanupWhenAborted(()=>i.dispose);let n=yield i.promise;if(n._pageIsError)throw n._pageIsError}let t=this.pages();if(t[0]._pageIsError)throw t[0]._pageIsError;return yield t[0].mainFrame()._waitForLoadState(e,"load"),t})}_loadDefaultContext(e){return c(this,null,function*(){let t=yield this._loadDefaultContextAsIs(e);if(this._options.isMobile||this._options.locale){let i=t[0];yield this.newPage(e.metadata),yield i.close(e.metadata)}})}_authenticateProxyViaHeader(){let e=this._options.proxy||this._browser.options.proxy||{username:void 0,password:void 0},{username:t,password:i}=e;if(t){this._options.httpCredentials={username:t,password:i};let n=Buffer.from(`${t}:${i}`).toString("base64");this._options.extraHTTPHeaders=rC.mergeHeaders([this._options.extraHTTPHeaders,rC.singleHeader("Proxy-Authorization",`Basic ${n}`)])}}_authenticateProxyViaCredentials(){let e=this._options.proxy||this._browser.options.proxy;if(!e)return;let{username:t,password:i}=e;t&&(this._options.httpCredentials={username:t,password:i||""})}_setRequestInterceptor(e){return c(this,null,function*(){this._requestInterceptor=e,yield this._doUpdateRequestInterception()})}isClosingOrClosed(){return this._closedStatus!=="open"}_deleteAllDownloads(){return c(this,null,function*(){yield Promise.all(Array.from(this._downloads).map(e=>e.artifact.deleteOnContextClose()))})}close(e){return c(this,null,function*(){if(this._closedStatus==="open"){var t;this.emit(Bi.Events.BeforeClose),this._closedStatus="closing",yield(t=this._harRecorder)===null||t===void 0?void 0:t.flush(),yield this.tracing.dispose();let i=[];for(let{context:n,artifact:s}of this._browser._idToVideo.values())n===this&&i.push(s.finishedPromise());this._isPersistentContext?yield Promise.all(this.pages().map(n=>n.close(e))):yield this._doClose(),i.push(this._deleteAllDownloads()),yield Promise.all(i),this._isPersistentContext&&(yield this._browser.close()),this._didCloseInternal()}yield this._closePromise})}newPage(e){return c(this,null,function*(){let i=yield(yield this.newPageDelegate()).pageOrError();if(i instanceof l_.Page){if(i.isClosed())throw new Error("Page has been closed.");return i}throw i})}addVisitedOrigin(e){this._origins.add(e)}storageState(){return c(this,null,function*(){let e={cookies:yield this.cookies(),origins:[]};if(this._origins.size){let t=(0,Zu.internalCallMetadata)(),i=yield this.newPage(t);yield i._setServerRequestInterceptor(n=>{n.fulfill({body:"<html></html>"}).catch(()=>{})});for(let n of this._origins){let s={origin:n,localStorage:[]},o=i.mainFrame();yield o.goto(t,n);let l=yield o.evaluateExpression(`({
          localStorage: Object.keys(localStorage).map(name => ({ name, value: localStorage.getItem(name) })),
        })`,!1,void 0,"utility");s.localStorage=l.localStorage,l.localStorage.length&&e.origins.push(s)}yield i.close(t)}return e})}setStorageState(e,t){return c(this,null,function*(){if(t.cookies&&(yield this.addCookies(t.cookies)),t.origins&&t.origins.length){let i=(0,Zu.internalCallMetadata)(),n=yield this.newPage(i);yield n._setServerRequestInterceptor(s=>{s.fulfill({body:"<html></html>"}).catch(()=>{})});for(let s of t.origins){let o=n.mainFrame();yield o.goto(e,s.origin),yield o.evaluateExpression(`
          originState => {
            for (const { name, value } of (originState.localStorage || []))
              localStorage.setItem(name, value);
          }`,!0,s,"utility")}yield n.close(i)}})}extendInjectedScript(e,t){return c(this,null,function*(){let i=s=>s.extendInjectedScript(e,t).catch(()=>{}),n=s=>(s.on(l_.Page.Events.InternalFrameNavigatedToNewDocument,i),Promise.all(s.frames().map(i)));return this.on(Bi.Events.Page,n),Promise.all(this.pages().map(n))})}};Hi.BrowserContext=Bi;Bi.Events={Close:"close",Page:"page",Request:"request",Response:"response",RequestFailed:"requestfailed",RequestFinished:"requestfinished",BeforeClose:"beforeclose",VideoStarted:"videostarted"};function s4(r){for(let e of r.pages())if(e._ownedContext)throw new Error("Please use browser.newContext() for multi-page scripts that share the context.")}function o4(r,e){if(r.noDefaultViewport&&r.deviceScaleFactor!==void 0)throw new Error('"deviceScaleFactor" option is not supported with null "viewport"');if(r.noDefaultViewport&&r.isMobile!==void 0)throw new Error('"isMobile" option is not supported with null "viewport"');if(!r.viewport&&!r.noDefaultViewport&&(r.viewport={width:1280,height:720}),r.recordVideo){if(!r.recordVideo.size)if(r.noDefaultViewport)r.recordVideo.size={width:800,height:600};else{let t=r.viewport,i=Math.min(1,800/Math.max(t.width,t.height));r.recordVideo.size={width:Math.floor(t.width*i),height:Math.floor(t.height*i)}}r.recordVideo.size.width&=~1,r.recordVideo.size.height&=~1}if(r.proxy){if(!e.proxy&&e.isChromium&&Y6.platform()==="win32")throw new Error(`Browser needs to be launched with the global proxy. If all contexts override the proxy, global proxy will be never used and can be any string, for example "launch({ proxy: { server: 'http://per-context' } })"`);r.proxy=aC(r.proxy)}(0,ro.debugMode)()==="inspector"&&(r.bypassCSP=!0),oC(r.geolocation),r._debugName||(r._debugName=(0,ro.createGuid)())}function oC(r){if(!r)return;r.accuracy=r.accuracy||0;let{longitude:e,latitude:t,accuracy:i}=r;if(e<-180||e>180)throw new Error("geolocation.longitude: precondition -180 <= LONGITUDE <= 180 failed.");if(t<-90||t>90)throw new Error("geolocation.latitude: precondition -90 <= LATITUDE <= 90 failed.");if(i<0)throw new Error("geolocation.accuracy: precondition 0 <= ACCURACY failed.")}function aC(r){let{server:e,bypass:t}=r,i;try{i=new URL(e),(!i.host||!i.protocol)&&(i=new URL("http://"+e))}catch(n){i=new URL("http://"+e)}if(i.protocol==="socks4:"&&(r.username||r.password))throw new Error("Socks4 proxy protocol does not support authentication");if(i.protocol==="socks5:"&&(r.username||r.password))throw new Error("Browser does not support socks5 proxy authentication");return e=i.protocol+"//"+i.host,t&&(t=t.split(",").map(n=>n.trim()).join(",")),R(y({},r),{server:e,bypass:t})}});var uC=v(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});Qu.Download=void 0;var a4=u4(x("path")),cC=Ot(),c4=G(),l4=Da();function u4(r){return r&&r.__esModule?r:{default:r}}var lC=class{constructor(e,t,i,n,s){this.artifact=void 0,this.url=void 0,this._page=void 0,this._suggestedFilename=void 0;let o=e._browserContext._options.acceptDownloads?void 0:"Pass { acceptDownloads: true } when you are creating your browser context.";this.artifact=new l4.Artifact(e,a4.default.join(t,i),o,()=>this._page._browserContext._doCancelDownload(i)),this._page=e,this.url=n,this._suggestedFilename=s,e._browserContext._downloads.add(this),s!==void 0&&this._page.emit(cC.Page.Events.Download,this)}_filenameSuggested(e){(0,c4.assert)(this._suggestedFilename===void 0),this._suggestedFilename=e,this._page.emit(cC.Page.Events.Download,this)}suggestedFilename(){return this._suggestedFilename}};Qu.Download=lC});var no=v(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.Browser=void 0;var d4=gt(),dC=Ot(),h4=uC(),p4=nt(),f4=Da(),io=class extends p4.SdkObject{constructor(e){super(e.rootSdkObject,"browser");this.options=void 0,this._downloads=new Map,this._defaultContext=null,this._startedClosing=!1,this._idToVideo=new Map,this.attribution.browser=this,this.options=e}_downloadCreated(e,t,i,n){let s=new h4.Download(e,this.options.downloadsPath||"",t,i,n);this._downloads.set(t,s)}_downloadFilenameSuggested(e,t){let i=this._downloads.get(e);!i||i._filenameSuggested(t)}_downloadFinished(e,t){let i=this._downloads.get(e);!i||(i.artifact.reportFinished(t),this._downloads.delete(e))}_videoStarted(e,t,i,n){let s=new f4.Artifact(e,i);this._idToVideo.set(t,{context:e,artifact:s}),e.emit(d4.BrowserContext.Events.VideoStarted,s),n.then(o=>{o instanceof dC.Page&&(o._video=s,o.emit(dC.Page.Events.Video,s))})}_takeVideo(e){let t=this._idToVideo.get(e);return this._idToVideo.delete(e),t==null?void 0:t.artifact}_didClose(){for(let e of this.contexts())e._browserClosed();this._defaultContext&&this._defaultContext._browserClosed(),this.emit(io.Events.Disconnected)}close(){return c(this,null,function*(){this._startedClosing||(this._startedClosing=!0,yield this.options.browserProcess.close()),this.isConnected()&&(yield new Promise(e=>this.once(io.Events.Disconnected,e)))})}killForTests(){return c(this,null,function*(){yield this.options.browserProcess.kill()})}};ed.Browser=io;io.Events={Disconnected:"disconnected"}});var so=v(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.CRSession=rr.CRSessionEvents=rr.CRConnection=rr.kBrowserCloseMessageId=rr.ConnectionEvents=void 0;var m4=G(),hC=x("events"),pC=Bt(),_4=Xe(),g4=Mt(),td=Xr(),fC={Disconnected:Symbol("ConnectionEvents.Disconnected")};rr.ConnectionEvents=fC;var mC=-9999;rr.kBrowserCloseMessageId=mC;var _C=class extends hC.EventEmitter{constructor(e,t,i){super();this._lastId=0,this._transport=void 0,this._sessions=new Map,this._protocolLogger=void 0,this._browserLogsCollector=void 0,this.rootSession=void 0,this._closed=!1,this.setMaxListeners(0),this._transport=e,this._protocolLogger=t,this._browserLogsCollector=i,this._transport.onmessage=this._onMessage.bind(this),this._transport.onclose=this._onClose.bind(this),this.rootSession=new rd(this,"","browser",""),this._sessions.set("",this.rootSession)}static fromSession(e){return e._connection}session(e){return this._sessions.get(e)||null}_rawSend(e,t,i){let n=++this._lastId,s={id:n,method:t,params:i};return e&&(s.sessionId=e),this._protocolLogger("send",s),this._transport.send(s),n}_onMessage(e){return c(this,null,function*(){if(this._protocolLogger("receive",e),e.id===mC)return;if(e.method==="Target.attachedToTarget"){let i=e.params.sessionId,n=e.sessionId||"",s=new rd(this,n,e.params.targetInfo.type,i);this._sessions.set(i,s)}else if(e.method==="Target.detachedFromTarget"){let i=this._sessions.get(e.params.sessionId);i&&(i._onClosed(void 0),this._sessions.delete(e.params.sessionId))}let t=this._sessions.get(e.sessionId||"");t&&t._onMessage(e)})}_onClose(){this._closed=!0,this._transport.onmessage=void 0,this._transport.onclose=void 0;let e=g4.helper.formatBrowserLogs(this._browserLogsCollector.recentLogs());for(let t of this._sessions.values())t._onClosed(e);this._sessions.clear(),Promise.resolve().then(()=>this.emit(fC.Disconnected))}close(){this._closed||this._transport.close()}createSession(e){return c(this,null,function*(){let{sessionId:t}=yield this.rootSession.send("Target.attachToTarget",{targetId:e.targetId,flatten:!0});return this._sessions.get(t)})}createBrowserSession(){return c(this,null,function*(){let{sessionId:e}=yield this.rootSession.send("Target.attachToBrowserTarget");return this._sessions.get(e)})}};rr.CRConnection=_C;var gC={Disconnected:Symbol("Events.CDPSession.Disconnected")};rr.CRSessionEvents=gC;var rd=class extends hC.EventEmitter{constructor(e,t,i,n){super();this._connection=void 0,this._eventListener=void 0,this._callbacks=new Map,this._targetType=void 0,this._sessionId=void 0,this._rootSessionId=void 0,this._crashed=!1,this._browserDisconnectedLogs=void 0,this.on=void 0,this.addListener=void 0,this.off=void 0,this.removeListener=void 0,this.once=void 0,this.guid=void 0,this.guid=`cdp-session@${n}`,this.setMaxListeners(0),this._connection=e,this._rootSessionId=t,this._targetType=i,this._sessionId=n,this.on=super.on,this.addListener=super.addListener,this.off=super.removeListener,this.removeListener=super.removeListener,this.once=super.once}_markAsCrashed(){this._crashed=!0}send(e,t){return c(this,null,function*(){if(this._crashed)throw new td.ProtocolError(!0,"Target crashed");if(this._browserDisconnectedLogs!==void 0)throw new td.ProtocolError(!0,"Browser closed."+this._browserDisconnectedLogs);if(!this._connection)throw new td.ProtocolError(!0,"Target closed");let i=this._connection._rawSend(this._sessionId,e,t);return new Promise((n,s)=>{this._callbacks.set(i,{resolve:n,reject:s,error:new td.ProtocolError(!1),method:e})})})}_sendMayFail(e,t){return this.send(e,t).catch(i=>_4.debugLogger.log("error",i))}_onMessage(e){if(e.id&&this._callbacks.has(e.id)){let t=this._callbacks.get(e.id);this._callbacks.delete(e.id),e.error?t.reject(w4(t.error,t.method,e.error)):t.resolve(e.result)}else(0,m4.assert)(!e.id),Promise.resolve().then(()=>{this._eventListener&&this._eventListener(e.method,e.params),this.emit(e.method,e.params)})}detach(){return c(this,null,function*(){if(!this._connection)throw new Error(`Session already detached. Most likely the ${this._targetType} has been closed.`);let e=this._connection.session(this._rootSessionId);if(!e)throw new Error("Root session has been closed");yield e.send("Target.detachFromTarget",{sessionId:this._sessionId})})}_onClosed(e){this._browserDisconnectedLogs=e;let t=e!==void 0?"Browser closed."+e:"Target closed";for(let i of this._callbacks.values())i.error.sessionClosed=!0,i.reject((0,pC.rewriteErrorMessage)(i.error,t));this._callbacks.clear(),this._connection=null,Promise.resolve().then(()=>this.emit(gC.Disconnected))}};rr.CRSession=rd;function w4(r,e,t){let i=`Protocol error (${e}): ${t.message}`;return"data"in t&&(i+=` ${t.data}`),(0,pC.rewriteErrorMessage)(r,i)}});var Ln=v(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});ji.getExceptionMessage=wC;ji.releaseObject=S4;ji.readProtocolStream=E4;ji.toConsoleMessageLocation=C4;ji.exceptionToError=k4;ji.toModifiersMask=O4;var v4=x4(x("fs")),y4=G(),b4=Bt();function x4(r){return r&&r.__esModule?r:{default:r}}function wC(r){if(r.exception)return r.exception.description||String(r.exception.value);let e=r.text;if(r.stackTrace)for(let t of r.stackTrace.callFrames){let i=t.url+":"+t.lineNumber+":"+t.columnNumber;e+=`
    at ${t.functionName||"<anonymous>"} (${i})`}return e}function S4(r,e){return c(this,null,function*(){yield r.send("Runtime.releaseObject",{objectId:e}).catch(t=>{})})}function E4(r,e,t){return c(this,null,function*(){let i=!1,n;t&&(yield(0,y4.mkdirIfNeeded)(t),n=yield v4.default.promises.open(t,"w"));let s=[];for(;!i;){let o=yield r.send("IO.read",{handle:e});i=o.eof;let l=Buffer.from(o.data,o.base64Encoded?"base64":void 0);s.push(l),n&&(yield n.write(l))}return n&&(yield n.close()),yield r.send("IO.close",{handle:e}),Buffer.concat(s)})}function C4(r){return r&&r.callFrames.length?{url:r.callFrames[0].url,lineNumber:r.callFrames[0].lineNumber,columnNumber:r.callFrames[0].columnNumber}:{url:"",lineNumber:0,columnNumber:0}}function k4(r){let e=wC(r),t=e.split(`
`),i=t.findIndex(d=>d.startsWith("    at")),n="",s="";i===-1?n=e:(n=t.slice(0,i).join(`
`),s=e);let{name:o,message:l}=(0,b4.splitErrorMessage)(n),u=new Error(l);return u.stack=s,u.name=o,u}function O4(r){let e=0;return r.has("Alt")&&(e|=1),r.has("Control")&&(e|=2),r.has("Meta")&&(e|=4),r.has("Shift")&&(e|=8),e}});var sd=v(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});nd.CRExecutionContext=void 0;var id=Ln(),qn=I4(xi()),P4=Bt(),T4=Pa(),A4=Xr();function vC(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(vC=function(i){return i?t:e})(r)}function I4(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=vC(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var yC=class{constructor(e,t){this._client=void 0,this._contextId=void 0,this._client=e,this._contextId=t.id}rawEvaluateJSON(e){return c(this,null,function*(){let{exceptionDetails:t,result:i}=yield this._client.send("Runtime.evaluate",{expression:e,contextId:this._contextId,returnByValue:!0}).catch(h_);if(t)throw new qn.JavaScriptErrorInEvaluate((0,id.getExceptionMessage)(t));return i.value})}rawEvaluateHandle(e){return c(this,null,function*(){let{exceptionDetails:t,result:i}=yield this._client.send("Runtime.evaluate",{expression:e,contextId:this._contextId}).catch(h_);if(t)throw new qn.JavaScriptErrorInEvaluate((0,id.getExceptionMessage)(t));return i.objectId})}rawCallFunctionNoReply(e,...t){this._client.send("Runtime.callFunctionOn",{functionDeclaration:e.toString(),arguments:t.map(i=>i instanceof qn.JSHandle?{objectId:i._objectId}:{value:i}),returnByValue:!0,executionContextId:this._contextId,userGesture:!0}).catch(()=>{})}evaluateWithArguments(e,t,i,n,s){return c(this,null,function*(){let{exceptionDetails:o,result:l}=yield this._client.send("Runtime.callFunctionOn",{functionDeclaration:e,objectId:i._objectId,arguments:[{objectId:i._objectId},...n.map(u=>({value:u})),...s.map(u=>({objectId:u}))],returnByValue:t,awaitPromise:!0,userGesture:!0}).catch(h_);if(o)throw new qn.JavaScriptErrorInEvaluate((0,id.getExceptionMessage)(o));return t?(0,T4.parseEvaluationResultValue)(l.value):i._context.createHandle(l)})}getProperties(e,t){return c(this,null,function*(){let i=yield this._client.send("Runtime.getProperties",{objectId:t,ownProperties:!0}),n=new Map;for(let s of i.result)!s.enumerable||!s.value||n.set(s.name,e.createHandle(s.value));return n})}createHandle(e,t){return new qn.JSHandle(e,t.subtype||t.type,F4(t),t.objectId,M4(t))}releaseHandle(e){return c(this,null,function*(){yield(0,id.releaseObject)(this._client,e)})}};nd.CRExecutionContext=yC;function h_(r){if(r.message.includes("Object reference chain is too long"))return{result:{type:"undefined"}};if(r.message.includes("Object couldn't be returned by value"))return{result:{type:"undefined"}};throw r instanceof TypeError&&r.message.startsWith("Converting circular structure to JSON")&&(0,P4.rewriteErrorMessage)(r,r.message+" Are you passing a nested JSHandle?"),!qn.isJavaScriptErrorInEvaluate(r)&&!(0,A4.isSessionClosedError)(r)?new Error("Execution context was destroyed, most likely because of a navigation."):r}function M4(r){let e=r.value,t=r.unserializableValue;return t?qn.parseUnserializableValue(t):e}function F4(r){if(r.type==="undefined")return"undefined";if("value"in r)return String(r.value);if(r.unserializableValue)return String(r.unserializableValue);if(r.description==="Object"&&r.preview){let e=[];for(let{name:t,value:i}of r.preview.properties)e.push(`${t}: ${i}`);return`{${e.join(", ")}}`}if(r.subtype==="array"&&r.preview){let e=[];for(let{name:t,value:i}of r.preview.properties)e[+t]=i;return"["+String(e)+"]"}return r.description}});var OC=v(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});od.CRNetworkManager=void 0;var bC=Mt(),Pt=_t(),nc=R4(jt()),oo=G();function xC(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(xC=function(i){return i?t:e})(r)}function R4(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=xC(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var SC=class{constructor(e,t,i){this._client=void 0,this._page=void 0,this._parentManager=void 0,this._requestIdToRequest=new Map,this._requestIdToRequestWillBeSentEvent=new Map,this._credentials=null,this._attemptedAuthentications=new Set,this._userRequestInterceptionEnabled=!1,this._protocolRequestInterceptionEnabled=!1,this._requestIdToRequestPausedEvent=new Map,this._eventListeners=void 0,this._responseExtraInfoTracker=new kC,this._client=e,this._page=t,this._parentManager=i,this._eventListeners=this.instrumentNetworkEvents(e)}instrumentNetworkEvents(e,t){return[Pt.eventsHelper.addEventListener(e,"Fetch.requestPaused",this._onRequestPaused.bind(this,t)),Pt.eventsHelper.addEventListener(e,"Fetch.authRequired",this._onAuthRequired.bind(this)),Pt.eventsHelper.addEventListener(e,"Network.requestWillBeSent",this._onRequestWillBeSent.bind(this,t)),Pt.eventsHelper.addEventListener(e,"Network.requestWillBeSentExtraInfo",this._onRequestWillBeSentExtraInfo.bind(this)),Pt.eventsHelper.addEventListener(e,"Network.responseReceived",this._onResponseReceived.bind(this)),Pt.eventsHelper.addEventListener(e,"Network.responseReceivedExtraInfo",this._onResponseReceivedExtraInfo.bind(this)),Pt.eventsHelper.addEventListener(e,"Network.loadingFinished",this._onLoadingFinished.bind(this)),Pt.eventsHelper.addEventListener(e,"Network.loadingFailed",this._onLoadingFailed.bind(this)),Pt.eventsHelper.addEventListener(e,"Network.webSocketCreated",i=>this._page._frameManager.onWebSocketCreated(i.requestId,i.url)),Pt.eventsHelper.addEventListener(e,"Network.webSocketWillSendHandshakeRequest",i=>this._page._frameManager.onWebSocketRequest(i.requestId)),Pt.eventsHelper.addEventListener(e,"Network.webSocketHandshakeResponseReceived",i=>this._page._frameManager.onWebSocketResponse(i.requestId,i.response.status,i.response.statusText)),Pt.eventsHelper.addEventListener(e,"Network.webSocketFrameSent",i=>i.response.payloadData&&this._page._frameManager.onWebSocketFrameSent(i.requestId,i.response.opcode,i.response.payloadData)),Pt.eventsHelper.addEventListener(e,"Network.webSocketFrameReceived",i=>i.response.payloadData&&this._page._frameManager.webSocketFrameReceived(i.requestId,i.response.opcode,i.response.payloadData)),Pt.eventsHelper.addEventListener(e,"Network.webSocketClosed",i=>this._page._frameManager.webSocketClosed(i.requestId)),Pt.eventsHelper.addEventListener(e,"Network.webSocketFrameError",i=>this._page._frameManager.webSocketError(i.requestId,i.errorMessage))]}initialize(){return c(this,null,function*(){yield this._client.send("Network.enable")})}dispose(){Pt.eventsHelper.removeEventListeners(this._eventListeners)}authenticate(e){return c(this,null,function*(){this._credentials=e,yield this._updateProtocolRequestInterception()})}setOffline(e){return c(this,null,function*(){yield this._client.send("Network.emulateNetworkConditions",{offline:e,latency:0,downloadThroughput:-1,uploadThroughput:-1})})}setRequestInterception(e){return c(this,null,function*(){this._userRequestInterceptionEnabled=e,yield this._updateProtocolRequestInterception()})}_updateProtocolRequestInterception(){return c(this,null,function*(){let e=this._userRequestInterceptionEnabled||!!this._credentials;e!==this._protocolRequestInterceptionEnabled&&(this._protocolRequestInterceptionEnabled=e,e?yield Promise.all([this._client.send("Network.setCacheDisabled",{cacheDisabled:!0}),this._client.send("Fetch.enable",{handleAuthRequests:!0,patterns:[{urlPattern:"*",requestStage:"Request"},{urlPattern:"*",requestStage:"Response"}]})]):yield Promise.all([this._client.send("Network.setCacheDisabled",{cacheDisabled:!1}),this._client.send("Fetch.disable")]))})}_onRequestWillBeSent(e,t){if(this._responseExtraInfoTracker.requestWillBeSent(t),this._protocolRequestInterceptionEnabled&&!t.request.url.startsWith("data:")){let i=t.requestId,n=this._requestIdToRequestPausedEvent.get(i);n?(this._onRequest(e,t,n),this._requestIdToRequestPausedEvent.delete(i)):this._requestIdToRequestWillBeSentEvent.set(t.requestId,t)}else this._onRequest(e,t,null)}_onRequestWillBeSentExtraInfo(e){this._responseExtraInfoTracker.requestWillBeSentExtraInfo(e)}_onAuthRequired(e){let t="Default";this._attemptedAuthentications.has(e.requestId)?t="CancelAuth":this._credentials&&(t="ProvideCredentials",this._attemptedAuthentications.add(e.requestId));let{username:i,password:n}=this._credentials||{username:void 0,password:void 0};this._client._sendMayFail("Fetch.continueWithAuth",{requestId:e.requestId,authChallengeResponse:{response:t,username:i,password:n}})}_onRequestPaused(e,t){if(!t.responseStatusCode&&!t.responseErrorReason){let s=this._requestIdToRequest.get(t.networkId);s&&this._responseExtraInfoTracker.requestPaused(s.request,t)}if(!this._userRequestInterceptionEnabled&&this._protocolRequestInterceptionEnabled&&this._client._sendMayFail("Fetch.continueRequest",{requestId:t.requestId}),!t.networkId){this._client._sendMayFail("Fetch.failRequest",{requestId:t.requestId,errorReason:"Aborted"});return}if(t.request.url.startsWith("data:"))return;if(t.responseStatusCode||t.responseErrorReason){let s=t.responseStatusCode&&t.responseStatusCode>=300&&t.responseStatusCode<400,o=this._requestIdToRequest.get(t.networkId),l=o==null?void 0:o._routeForRedirectChain();if(s||!l||!l._interceptingResponse){this._client._sendMayFail("Fetch.continueRequest",{requestId:t.requestId});return}l._responseInterceptedCallback(t);return}let i=t.networkId,n=this._requestIdToRequestWillBeSentEvent.get(i);n?(this._onRequest(e,n,t),this._requestIdToRequestWillBeSentEvent.delete(i)):this._requestIdToRequestPausedEvent.set(i,t)}_onRequest(e,t,i){if(t.request.url.startsWith("data:"))return;let n=null;if(t.redirectResponse){let h=this._requestIdToRequest.get(t.requestId);h&&(this._handleRequestRedirect(h,t.redirectResponse,t.timestamp),n=h)}let s=t.frameId?this._page._frameManager.frame(t.frameId):e;if(!s&&i&&i.frameId&&(s=this._page._frameManager.frame(i.frameId)),!s&&t.frameId===this._page._delegate._targetId&&(s=this._page._frameManager.frameAttached(t.frameId,null)),i&&i.request.method==="OPTIONS"&&this._page._needsRequestInterception()){let h=i.request.headers,p=[{name:"Access-Control-Allow-Origin",value:h.Origin||"*"},{name:"Access-Control-Allow-Methods",value:h["Access-Control-Request-Method"]||"GET, POST, OPTIONS, DELETE"},{name:"Access-Control-Allow-Credentials",value:"true"}];h["Access-Control-Request-Headers"]&&p.push({name:"Access-Control-Allow-Headers",value:h["Access-Control-Request-Headers"]}),this._client._sendMayFail("Fetch.fulfillRequest",{requestId:i.requestId,responseCode:204,responsePhrase:nc.STATUS_TEXTS["204"],responseHeaders:p,body:""});return}if(!s){i&&this._client._sendMayFail("Fetch.continueRequest",{requestId:i.requestId});return}let o=null;i&&(n?this._client._sendMayFail("Fetch.continueRequest",{requestId:i.requestId}):o=new CC(this._client,i.requestId));let u=t.requestId===t.loaderId&&t.type==="Document"?t.loaderId:void 0,d=new EC({frame:s,documentId:u,route:o,requestWillBeSentEvent:t,requestPausedEvent:i,redirectedFrom:n});this._requestIdToRequest.set(t.requestId,d),this._page._frameManager.requestStarted(d.request,o||void 0)}_createResponse(e,t){var i,n,s,o,l;let u=()=>c(this,null,function*(){let f=yield this._client.send("Network.getResponseBody",{requestId:e._requestId});return Buffer.from(f.body,f.base64Encoded?"base64":"utf8")}),d=t.timing,h;d?h={startTime:(d.requestTime-e._timestamp+e._wallTime)*1e3,domainLookupStart:d.dnsStart,domainLookupEnd:d.dnsEnd,connectStart:d.connectStart,secureConnectionStart:d.sslStart,connectEnd:d.connectEnd,requestStart:d.sendStart,responseStart:d.receiveHeadersEnd}:h={startTime:e._wallTime*1e3,domainLookupStart:-1,domainLookupEnd:-1,connectStart:-1,secureConnectionStart:-1,connectEnd:-1,requestStart:-1,responseStart:-1};let p=new nc.Response(e.request,t.status,t.statusText,(0,oo.headersObjectToArray)(t.headers),h,u,t.protocol);return t!=null&&t.remoteIPAddress&&typeof(t==null?void 0:t.remotePort)=="number"?p._serverAddrFinished({ipAddress:t.remoteIPAddress,port:t.remotePort}):p._serverAddrFinished(),p._securityDetailsFinished({protocol:t==null||(i=t.securityDetails)===null||i===void 0?void 0:i.protocol,subjectName:t==null||(n=t.securityDetails)===null||n===void 0?void 0:n.subjectName,issuer:t==null||(s=t.securityDetails)===null||s===void 0?void 0:s.issuer,validFrom:t==null||(o=t.securityDetails)===null||o===void 0?void 0:o.validFrom,validTo:t==null||(l=t.securityDetails)===null||l===void 0?void 0:l.validTo}),this._responseExtraInfoTracker.processResponse(e._requestId,p,e.wasFulfilled()),p}_handleRequestRedirect(e,t,i){let n=this._createResponse(e,t);n._requestFinished((i-e._timestamp)*1e3),this._requestIdToRequest.delete(e._requestId),e._interceptionId&&this._attemptedAuthentications.delete(e._interceptionId),this._page._frameManager.requestReceivedResponse(n),this._page._frameManager.reportRequestFinished(e.request,n)}_onResponseReceivedExtraInfo(e){this._responseExtraInfoTracker.responseReceivedExtraInfo(e)}_onResponseReceived(e){this._responseExtraInfoTracker.responseReceived(e);let t=this._requestIdToRequest.get(e.requestId);if(!t)return;let i=this._createResponse(t,e.response);this._page._frameManager.requestReceivedResponse(i)}_onLoadingFinished(e){this._responseExtraInfoTracker.loadingFinished(e);let t=this._requestIdToRequest.get(e.requestId);if(t||(t=this._maybeAdoptMainRequest(e.requestId)),!t)return;let i=t.request._existingResponse();i&&(t.request.responseSize.transferSize=e.encodedDataLength,t.request.responseSize.encodedBodySize=e.encodedDataLength-t.request.responseSize.responseHeadersSize,i._requestFinished(bC.helper.secondsToRoundishMillis(e.timestamp-t._timestamp))),this._requestIdToRequest.delete(t._requestId),t._interceptionId&&this._attemptedAuthentications.delete(t._interceptionId),this._page._frameManager.reportRequestFinished(t.request,i)}_onLoadingFailed(e){this._responseExtraInfoTracker.loadingFailed(e);let t=this._requestIdToRequest.get(e.requestId);if(t||(t=this._maybeAdoptMainRequest(e.requestId)),!t)return;let i=t.request._existingResponse();i&&i._requestFinished(bC.helper.secondsToRoundishMillis(e.timestamp-t._timestamp)),this._requestIdToRequest.delete(t._requestId),t._interceptionId&&this._attemptedAuthentications.delete(t._interceptionId),t.request._setFailureText(e.errorText),this._page._frameManager.requestFailed(t.request,!!e.canceled)}_maybeAdoptMainRequest(e){if(!this._parentManager)return;let t=this._parentManager._requestIdToRequest.get(e);if(!(!t||t._documentId!==e))return this._requestIdToRequest.set(e,t),this._parentManager._requestIdToRequest.delete(e),t._interceptionId&&this._parentManager._attemptedAuthentications.has(t._interceptionId)&&(this._parentManager._attemptedAuthentications.delete(t._interceptionId),this._attemptedAuthentications.add(t._interceptionId)),t}};od.CRNetworkManager=SC;var EC=class{constructor(e){this.request=void 0,this._requestId=void 0,this._interceptionId=void 0,this._documentId=void 0,this._timestamp=void 0,this._wallTime=void 0,this._route=void 0,this._redirectedFrom=void 0;let{frame:t,documentId:i,route:n,requestWillBeSentEvent:s,requestPausedEvent:o,redirectedFrom:l}=e;this._timestamp=s.timestamp,this._wallTime=s.wallTime,this._requestId=s.requestId,this._interceptionId=o&&o.requestId,this._documentId=i,this._route=n,this._redirectedFrom=l;let{headers:u,method:d,url:h,postDataEntries:p=null}=o?o.request:s.request,f=(s.type||"").toLowerCase(),m=null;p&&p.length&&p[0].bytes&&(m=Buffer.from(p[0].bytes,"base64")),this.request=new nc.Request(t,(l==null?void 0:l.request)||null,i,h,f,d,m,(0,oo.headersObjectToArray)(u))}_routeForRedirectChain(){let e=this;for(;e._redirectedFrom;)e=e._redirectedFrom;return e._route}wasFulfilled(){var e;return((e=this._routeForRedirectChain())===null||e===void 0?void 0:e._wasFulfilled)||!1}},CC=class{constructor(e,t){this._client=void 0,this._interceptionId=void 0,this._responseInterceptedPromise=void 0,this._responseInterceptedCallback=()=>{},this._interceptingResponse=!1,this._wasFulfilled=!1,this._client=e,this._interceptionId=t,this._responseInterceptedPromise=new Promise(i=>this._responseInterceptedCallback=i)}responseBody(){return c(this,null,function*(){let e=yield this._client.send("Fetch.getResponseBody",{requestId:this._interceptionId});return Buffer.from(e.body,e.base64Encoded?"base64":"utf8")})}continue(e,t){return c(this,null,function*(){if(this._interceptingResponse=!!t.interceptResponse,yield this._client._sendMayFail("Fetch.continueRequest",{requestId:this._interceptionId,url:t.url,headers:t.headers,method:t.method,postData:t.postData?t.postData.toString("base64"):void 0}),!this._interceptingResponse)return null;let i=yield this._responseInterceptedPromise;if(this._interceptionId=i.requestId,i.responseErrorReason)throw this._client._sendMayFail("Fetch.continueRequest",{requestId:i.requestId}),new Error(`Request failed: ${i.responseErrorReason}`);return new nc.InterceptedResponse(e,i.responseStatusCode,"",i.responseHeaders)})}fulfill(e){return c(this,null,function*(){this._wasFulfilled=!0;let t=e.isBase64?e.body:Buffer.from(e.body).toString("base64"),i=N4(e.headers);yield this._client._sendMayFail("Fetch.fulfillRequest",{requestId:this._interceptionId,responseCode:e.status,responsePhrase:nc.STATUS_TEXTS[String(e.status)],responseHeaders:i,body:t})})}abort(e="failed"){return c(this,null,function*(){let t=D4[e];(0,oo.assert)(t,"Unknown error code: "+e),yield this._client._sendMayFail("Fetch.failRequest",{requestId:this._interceptionId,errorReason:t})})}};function N4(r){let e=r.findIndex(({name:s})=>s.toLowerCase()==="set-cookie");if(e===-1)return r;let t=r[e],i=t.value.split(`
`);if(i.length===1)return r;let n=r.slice();return n.splice(e,1,...i.map(s=>({name:t.name,value:s}))),n}var D4={aborted:"Aborted",accessdenied:"AccessDenied",addressunreachable:"AddressUnreachable",blockedbyclient:"BlockedByClient",blockedbyresponse:"BlockedByResponse",connectionaborted:"ConnectionAborted",connectionclosed:"ConnectionClosed",connectionfailed:"ConnectionFailed",connectionrefused:"ConnectionRefused",connectionreset:"ConnectionReset",internetdisconnected:"InternetDisconnected",namenotresolved:"NameNotResolved",timedout:"TimedOut",failed:"Failed"},kC=class{constructor(){this._requests=new Map}requestWillBeSent(e){let t=this._requests.get(e.requestId);t&&e.redirectResponse?this._innerResponseReceived(t,e.redirectResponse):this._getOrCreateEntry(e.requestId)}requestWillBeSentExtraInfo(e){let t=this._getOrCreateEntry(e.requestId);!t||(t.requestWillBeSentExtraInfo.push(e),this._patchHeaders(t,t.requestWillBeSentExtraInfo.length-1))}responseReceived(e){let t=this._requests.get(e.requestId);!t||this._innerResponseReceived(t,e.response)}requestPaused(e,t){e.setRawRequestHeaders((0,oo.headersObjectToArray)(t.request.headers,`
`))}_innerResponseReceived(e,t){t.connectionId||(e.sawResponseWithoutConnectionId=!0)}responseReceivedExtraInfo(e){let t=this._getOrCreateEntry(e.requestId);t.responseReceivedExtraInfo.push(e),this._patchHeaders(t,t.responseReceivedExtraInfo.length-1),this._checkFinished(t)}processResponse(e,t,i){if(i){this._stopTracking(e);return}let n=this._requests.get(e);!n||n.sawResponseWithoutConnectionId||(t.setWillReceiveExtraHeaders(),n.responses.push(t),this._patchHeaders(n,n.responses.length-1))}loadingFinished(e){let t=this._requests.get(e.requestId);!t||(t.loadingFinished=e,this._checkFinished(t))}loadingFailed(e){let t=this._requests.get(e.requestId);!t||(t.loadingFailed=e,this._checkFinished(t))}_getOrCreateEntry(e){let t=this._requests.get(e);return t||(t={requestId:e,requestWillBeSentExtraInfo:[],responseReceivedExtraInfo:[],responses:[],sawResponseWithoutConnectionId:!1},this._requests.set(e,t)),t}_patchHeaders(e,t){let i=e.responses[t],n=e.requestWillBeSentExtraInfo[t];i&&n&&i.request().setRawRequestHeaders((0,oo.headersObjectToArray)(n.headers,`
`));let s=e.responseReceivedExtraInfo[t];if(i&&s){var o;i.setRawResponseHeaders((0,oo.headersObjectToArray)(s.headers,`
`)),i.request().responseSize.responseHeadersSize=((o=s.headersText)===null||o===void 0?void 0:o.length)||0}}_checkFinished(e){if(!(!e.loadingFinished&&!e.loadingFailed)&&e.responses.length<=e.responseReceivedExtraInfo.length){this._stopTracking(e.requestId);return}}_stopTracking(e){this._requests.delete(e)}}});var cd=v(ad=>{"use strict";Object.defineProperty(ad,"__esModule",{value:!0});ad.Dialog=void 0;var PC=G(),L4=nt(),TC=class extends L4.SdkObject{constructor(e,t,i,n,s){super(e,"dialog");this._page=void 0,this._type=void 0,this._message=void 0,this._onHandle=void 0,this._handled=!1,this._defaultValue=void 0,this._page=e,this._type=t,this._message=i,this._onHandle=n,this._defaultValue=s||"",this._page._frameManager.dialogDidOpen()}type(){return this._type}message(){return this._message}defaultValue(){return this._defaultValue}accept(e){return c(this,null,function*(){(0,PC.assert)(!this._handled,"Cannot accept dialog which is already handled!"),this._handled=!0,this._page._frameManager.dialogWillClose(),yield this._onHandle(!0,e)})}dismiss(){return c(this,null,function*(){(0,PC.assert)(!this._handled,"Cannot dismiss dialog which is already handled!"),this._handled=!0,this._page._frameManager.dialogWillClose(),yield this._onHandle(!1)})}};ad.Dialog=TC});var p_=v(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});ld.macEditingCommands=void 0;var q4={Backspace:"deleteBackward:",Enter:"insertNewline:",NumpadEnter:"insertNewline:",Escape:"cancelOperation:",ArrowUp:"moveUp:",ArrowDown:"moveDown:",ArrowLeft:"moveLeft:",ArrowRight:"moveRight:",F5:"complete:",Delete:"deleteForward:",Home:"scrollToBeginningOfDocument:",End:"scrollToEndOfDocument:",PageUp:"scrollPageUp:",PageDown:"scrollPageDown:","Shift+Backspace":"deleteBackward:","Shift+Enter":"insertNewline:","Shift+NumpadEnter":"insertNewline:","Shift+Escape":"cancelOperation:","Shift+ArrowUp":"moveUpAndModifySelection:","Shift+ArrowDown":"moveDownAndModifySelection:","Shift+ArrowLeft":"moveLeftAndModifySelection:","Shift+ArrowRight":"moveRightAndModifySelection:","Shift+F5":"complete:","Shift+Delete":"deleteForward:","Shift+Home":"moveToBeginningOfDocumentAndModifySelection:","Shift+End":"moveToEndOfDocumentAndModifySelection:","Shift+PageUp":"pageUpAndModifySelection:","Shift+PageDown":"pageDownAndModifySelection:","Shift+Numpad5":"delete:","Control+Tab":"selectNextKeyView:","Control+Enter":"insertLineBreak:","Control+NumpadEnter":"insertLineBreak:","Control+Quote":"insertSingleQuoteIgnoringSubstitution:","Control+KeyA":"moveToBeginningOfParagraph:","Control+KeyB":"moveBackward:","Control+KeyD":"deleteForward:","Control+KeyE":"moveToEndOfParagraph:","Control+KeyF":"moveForward:","Control+KeyH":"deleteBackward:","Control+KeyK":"deleteToEndOfParagraph:","Control+KeyL":"centerSelectionInVisibleArea:","Control+KeyN":"moveDown:","Control+KeyO":["insertNewlineIgnoringFieldEditor:","moveBackward:"],"Control+KeyP":"moveUp:","Control+KeyT":"transpose:","Control+KeyV":"pageDown:","Control+KeyY":"yank:","Control+Backspace":"deleteBackwardByDecomposingPreviousCharacter:","Control+ArrowUp":"scrollPageUp:","Control+ArrowDown":"scrollPageDown:","Control+ArrowLeft":"moveToLeftEndOfLine:","Control+ArrowRight":"moveToRightEndOfLine:","Shift+Control+Enter":"insertLineBreak:","Shift+Control+NumpadEnter":"insertLineBreak:","Shift+Control+Tab":"selectPreviousKeyView:","Shift+Control+Quote":"insertDoubleQuoteIgnoringSubstitution:","Shift+Control+KeyA":"moveToBeginningOfParagraphAndModifySelection:","Shift+Control+KeyB":"moveBackwardAndModifySelection:","Shift+Control+KeyE":"moveToEndOfParagraphAndModifySelection:","Shift+Control+KeyF":"moveForwardAndModifySelection:","Shift+Control+KeyN":"moveDownAndModifySelection:","Shift+Control+KeyP":"moveUpAndModifySelection:","Shift+Control+KeyV":"pageDownAndModifySelection:","Shift+Control+Backspace":"deleteBackwardByDecomposingPreviousCharacter:","Shift+Control+ArrowUp":"scrollPageUp:","Shift+Control+ArrowDown":"scrollPageDown:","Shift+Control+ArrowLeft":"moveToLeftEndOfLineAndModifySelection:","Shift+Control+ArrowRight":"moveToRightEndOfLineAndModifySelection:","Alt+Backspace":"deleteWordBackward:","Alt+Enter":"insertNewlineIgnoringFieldEditor:","Alt+NumpadEnter":"insertNewlineIgnoringFieldEditor:","Alt+Escape":"complete:","Alt+ArrowUp":["moveBackward:","moveToBeginningOfParagraph:"],"Alt+ArrowDown":["moveForward:","moveToEndOfParagraph:"],"Alt+ArrowLeft":"moveWordLeft:","Alt+ArrowRight":"moveWordRight:","Alt+Delete":"deleteWordForward:","Alt+PageUp":"pageUp:","Alt+PageDown":"pageDown:","Shift+Alt+Backspace":"deleteWordBackward:","Shift+Alt+Enter":"insertNewlineIgnoringFieldEditor:","Shift+Alt+NumpadEnter":"insertNewlineIgnoringFieldEditor:","Shift+Alt+Escape":"complete:","Shift+Alt+ArrowUp":"moveParagraphBackwardAndModifySelection:","Shift+Alt+ArrowDown":"moveParagraphForwardAndModifySelection:","Shift+Alt+ArrowLeft":"moveWordLeftAndModifySelection:","Shift+Alt+ArrowRight":"moveWordRightAndModifySelection:","Shift+Alt+Delete":"deleteWordForward:","Shift+Alt+PageUp":"pageUp:","Shift+Alt+PageDown":"pageDown:","Control+Alt+KeyB":"moveWordBackward:","Control+Alt+KeyF":"moveWordForward:","Control+Alt+Backspace":"deleteWordBackward:","Shift+Control+Alt+KeyB":"moveWordBackwardAndModifySelection:","Shift+Control+Alt+KeyF":"moveWordForwardAndModifySelection:","Shift+Control+Alt+Backspace":"deleteWordBackward:","Meta+NumpadSubtract":"cancel:","Meta+Backspace":"deleteToBeginningOfLine:","Meta+ArrowUp":"moveToBeginningOfDocument:","Meta+ArrowDown":"moveToEndOfDocument:","Meta+ArrowLeft":"moveToLeftEndOfLine:","Meta+ArrowRight":"moveToRightEndOfLine:","Shift+Meta+NumpadSubtract":"cancel:","Shift+Meta+Backspace":"deleteToBeginningOfLine:","Shift+Meta+ArrowUp":"moveToBeginningOfDocumentAndModifySelection:","Shift+Meta+ArrowDown":"moveToEndOfDocumentAndModifySelection:","Shift+Meta+ArrowLeft":"moveToLeftEndOfLineAndModifySelection:","Shift+Meta+ArrowRight":"moveToRightEndOfLineAndModifySelection:","Meta+KeyA":"selectAll:"};ld.macEditingCommands=q4});var RC=v(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.RawTouchscreenImpl=Ui.RawMouseImpl=Ui.RawKeyboardImpl=void 0;var B4=W4(Wl()),H4=p_(),j4=G(),Wi=Ln();function AC(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(AC=function(i){return i?t:e})(r)}function W4(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=AC(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var IC=class{constructor(e,t,i){this._client=e,this._isMac=t,this._dragManger=i}_commandsForCode(e,t){if(!this._isMac)return[];let i=[];for(let o of["Shift","Control","Alt","Meta"])t.has(o)&&i.push(o);i.push(e);let n=i.join("+"),s=H4.macEditingCommands[n]||[];return(0,j4.isString)(s)&&(s=[s]),s=s.filter(o=>!o.startsWith("insert")),s.map(o=>o.substring(0,o.length-1))}keydown(e,t,i,n,s,o,l,u){return c(this,null,function*(){if(t==="Escape"&&(yield this._dragManger.cancelDrag()))return;let d=this._commandsForCode(t,e);yield this._client.send("Input.dispatchKeyEvent",{type:u?"keyDown":"rawKeyDown",modifiers:(0,Wi.toModifiersMask)(e),windowsVirtualKeyCode:n,code:t,commands:d,key:s,text:u,unmodifiedText:u,autoRepeat:l,location:o,isKeypad:o===B4.keypadLocation})})}keyup(e,t,i,n,s,o){return c(this,null,function*(){yield this._client.send("Input.dispatchKeyEvent",{type:"keyUp",modifiers:(0,Wi.toModifiersMask)(e),key:s,windowsVirtualKeyCode:n,code:t,location:o})})}sendText(e){return c(this,null,function*(){yield this._client.send("Input.insertText",{text:e})})}};Ui.RawKeyboardImpl=IC;var MC=class{constructor(e,t,i){this._client=void 0,this._page=void 0,this._dragManager=void 0,this._page=e,this._client=t,this._dragManager=i}move(e,t,i,n,s){return c(this,null,function*(){yield this._dragManager.interceptDragCausedByMove(e,t,i,n,s,()=>c(this,null,function*(){yield this._client.send("Input.dispatchMouseEvent",{type:"mouseMoved",button:i,x:e,y:t,modifiers:(0,Wi.toModifiersMask)(s)})}))})}down(e,t,i,n,s,o){return c(this,null,function*(){this._dragManager.isDragging()||(yield this._client.send("Input.dispatchMouseEvent",{type:"mousePressed",button:i,x:e,y:t,modifiers:(0,Wi.toModifiersMask)(s),clickCount:o}))})}up(e,t,i,n,s,o){return c(this,null,function*(){if(this._dragManager.isDragging()){yield this._dragManager.drop(e,t,s);return}yield this._client.send("Input.dispatchMouseEvent",{type:"mouseReleased",button:i,x:e,y:t,modifiers:(0,Wi.toModifiersMask)(s),clickCount:o})})}wheel(e,t,i,n,s,o){return c(this,null,function*(){yield this._client.send("Input.dispatchMouseEvent",{type:"mouseWheel",x:e,y:t,modifiers:(0,Wi.toModifiersMask)(n),deltaX:s,deltaY:o})})}};Ui.RawMouseImpl=MC;var FC=class{constructor(e){this._client=void 0,this._client=e}tap(e,t,i){return c(this,null,function*(){yield Promise.all([this._client.send("Input.dispatchTouchEvent",{type:"touchStart",modifiers:(0,Wi.toModifiersMask)(i),touchPoints:[{x:e,y:t}]}),this._client.send("Input.dispatchTouchEvent",{type:"touchEnd",modifiers:(0,Wi.toModifiersMask)(i),touchPoints:[]})])})}};Ui.RawTouchscreenImpl=FC});var NC=v(f_=>{"use strict";Object.defineProperty(f_,"__esModule",{value:!0});f_.getAccessibilityTree=U4;function U4(r,e){return c(this,null,function*(){let{nodes:t}=yield r.send("Accessibility.getFullAXTree"),i=ud.createTree(r,t);return{tree:i,needle:e?yield i._findElement(e):null}})}var ud=class{constructor(e,t){this._payload=void 0,this._children=[],this._richlyEditable=!1,this._editable=!1,this._focusable=!1,this._expanded=!1,this._hidden=!1,this._name=void 0,this._role=void 0,this._cachedHasFocusableChild=void 0,this._client=void 0,this._client=e,this._payload=t,this._name=this._payload.name?this._payload.name.value:"",this._role=this._payload.role?this._payload.role.value:"Unknown";for(let i of this._payload.properties||[])i.name==="editable"&&(this._richlyEditable=i.value.value==="richtext",this._editable=!0),i.name==="focusable"&&(this._focusable=i.value.value),i.name==="expanded"&&(this._expanded=i.value.value),i.name==="hidden"&&(this._hidden=i.value.value)}_isPlainTextField(){return this._richlyEditable?!1:this._editable?!0:this._role==="textbox"||this._role==="ComboBox"||this._role==="searchbox"}_isTextOnlyObject(){let e=this._role;return e==="LineBreak"||e==="text"||e==="InlineTextBox"||e==="StaticText"}_hasFocusableChild(){if(this._cachedHasFocusableChild===void 0){this._cachedHasFocusableChild=!1;for(let e of this._children)if(e._focusable||e._hasFocusableChild()){this._cachedHasFocusableChild=!0;break}}return this._cachedHasFocusableChild}children(){return this._children}_findElement(e){return c(this,null,function*(){let t=e._objectId,{node:{backendNodeId:i}}=yield this._client.send("DOM.describeNode",{objectId:t});return this.find(s=>s._payload.backendDOMNodeId===i)||null})}find(e){if(e(this))return this;for(let t of this._children){let i=t.find(e);if(i)return i}return null}isLeafNode(){if(!this._children.length||this._isPlainTextField()||this._isTextOnlyObject())return!0;switch(this._role){case"doc-cover":case"graphics-symbol":case"img":case"Meter":case"scrollbar":case"slider":case"separator":case"progressbar":return!0;default:break}return this._hasFocusableChild()?!1:!!(this._focusable&&this._role!=="WebArea"&&this._role!=="RootWebArea"&&this._name||this._role==="heading"&&this._name)}isControl(){switch(this._role){case"button":case"checkbox":case"ColorWell":case"combobox":case"DisclosureTriangle":case"listbox":case"menu":case"menubar":case"menuitem":case"menuitemcheckbox":case"menuitemradio":case"radio":case"scrollbar":case"searchbox":case"slider":case"spinbutton":case"switch":case"tab":case"textbox":case"tree":return!0;default:return!1}}isInteresting(e){return this._role==="Ignored"||this._hidden?!1:this._focusable||this._richlyEditable||this.isControl()?!0:e?!1:this.isLeafNode()&&!!this._name}normalizedRole(){switch(this._role){case"RootWebArea":return"WebArea";case"StaticText":return"text";default:return this._role}}serialize(){let e=new Map;for(let u of this._payload.properties||[])e.set(u.name.toLowerCase(),u.value.value);this._payload.description&&e.set("description",this._payload.description.value);let t={role:this.normalizedRole(),name:this._payload.name&&this._payload.name.value||""},i=["description","keyshortcuts","roledescription","valuetext"];for(let u of i)!e.has(u)||(t[u]=e.get(u));let n=["disabled","expanded","focused","modal","multiline","multiselectable","readonly","required","selected"];for(let u of n){if(u==="focused"&&(this._role==="WebArea"||this._role==="RootWebArea"))continue;let d=e.get(u);!d||(t[u]=d)}let s=["level","valuemax","valuemin"];for(let u of s)!e.has(u)||(t[u]=e.get(u));let o=["autocomplete","haspopup","invalid","orientation"];for(let u of o){let d=e.get(u);!d||d==="false"||(t[u]=d)}let l=t;return this._payload.value&&(typeof this._payload.value.value=="string"&&(l.valueString=this._payload.value.value),typeof this._payload.value.value=="number"&&(l.valueNumber=this._payload.value.value)),e.has("checked")&&(l.checked=e.get("checked")==="true"?"checked":e.get("checked")==="false"?"unchecked":"mixed"),e.has("pressed")&&(l.pressed=e.get("pressed")==="true"?"pressed":e.get("pressed")==="false"?"released":"mixed"),l}static createTree(e,t){let i=new Map;for(let n of t)i.set(n.nodeId,new ud(e,n));for(let n of i.values())for(let s of n._payload.childIds||[])n._children.push(i.get(s));return i.values().next().value}}});var BC=v(hd=>{"use strict";Object.defineProperty(hd,"__esModule",{value:!0});hd.CRCoverage=void 0;var Bn=_t(),dd=G(),DC=class{constructor(e){this._jsCoverage=void 0,this._cssCoverage=void 0,this._jsCoverage=new LC(e),this._cssCoverage=new qC(e)}startJSCoverage(e){return c(this,null,function*(){return yield this._jsCoverage.start(e)})}stopJSCoverage(){return c(this,null,function*(){return yield this._jsCoverage.stop()})}startCSSCoverage(e){return c(this,null,function*(){return yield this._cssCoverage.start(e)})}stopCSSCoverage(){return c(this,null,function*(){return yield this._cssCoverage.stop()})}};hd.CRCoverage=DC;var LC=class{constructor(e){this._client=void 0,this._enabled=void 0,this._scriptIds=void 0,this._scriptSources=void 0,this._eventListeners=void 0,this._resetOnNavigation=void 0,this._reportAnonymousScripts=!1,this._client=e,this._enabled=!1,this._scriptIds=new Set,this._scriptSources=new Map,this._eventListeners=[],this._resetOnNavigation=!1}start(){return c(this,arguments,function*(e={}){(0,dd.assert)(!this._enabled,"JSCoverage is already enabled");let{resetOnNavigation:t=!0,reportAnonymousScripts:i=!1}=e;this._resetOnNavigation=t,this._reportAnonymousScripts=i,this._enabled=!0,this._scriptIds.clear(),this._scriptSources.clear(),this._eventListeners=[Bn.eventsHelper.addEventListener(this._client,"Debugger.scriptParsed",this._onScriptParsed.bind(this)),Bn.eventsHelper.addEventListener(this._client,"Runtime.executionContextsCleared",this._onExecutionContextsCleared.bind(this)),Bn.eventsHelper.addEventListener(this._client,"Debugger.paused",this._onDebuggerPaused.bind(this))],yield Promise.all([this._client.send("Profiler.enable"),this._client.send("Profiler.startPreciseCoverage",{callCount:!0,detailed:!0}),this._client.send("Debugger.enable"),this._client.send("Debugger.setSkipAllPauses",{skip:!0})])})}_onDebuggerPaused(){this._client.send("Debugger.resume")}_onExecutionContextsCleared(){!this._resetOnNavigation||(this._scriptIds.clear(),this._scriptSources.clear())}_onScriptParsed(e){return c(this,null,function*(){if(this._scriptIds.add(e.scriptId),!e.url&&!this._reportAnonymousScripts)return;let t=yield this._client._sendMayFail("Debugger.getScriptSource",{scriptId:e.scriptId});t&&this._scriptSources.set(e.scriptId,t.scriptSource)})}stop(){return c(this,null,function*(){(0,dd.assert)(this._enabled,"JSCoverage is not enabled"),this._enabled=!1;let[e]=yield Promise.all([this._client.send("Profiler.takePreciseCoverage"),this._client.send("Profiler.stopPreciseCoverage"),this._client.send("Profiler.disable"),this._client.send("Debugger.disable")]);Bn.eventsHelper.removeEventListeners(this._eventListeners);let t=[];for(let i of e.result){if(!this._scriptIds.has(i.scriptId)||!i.url&&!this._reportAnonymousScripts)continue;let n=this._scriptSources.get(i.scriptId);n?t.push(R(y({},i),{source:n})):t.push(i)}return t})}},qC=class{constructor(e){this._client=void 0,this._enabled=void 0,this._stylesheetURLs=void 0,this._stylesheetSources=void 0,this._eventListeners=void 0,this._resetOnNavigation=void 0,this._client=e,this._enabled=!1,this._stylesheetURLs=new Map,this._stylesheetSources=new Map,this._eventListeners=[],this._resetOnNavigation=!1}start(){return c(this,arguments,function*(e={}){(0,dd.assert)(!this._enabled,"CSSCoverage is already enabled");let{resetOnNavigation:t=!0}=e;this._resetOnNavigation=t,this._enabled=!0,this._stylesheetURLs.clear(),this._stylesheetSources.clear(),this._eventListeners=[Bn.eventsHelper.addEventListener(this._client,"CSS.styleSheetAdded",this._onStyleSheet.bind(this)),Bn.eventsHelper.addEventListener(this._client,"Runtime.executionContextsCleared",this._onExecutionContextsCleared.bind(this))],yield Promise.all([this._client.send("DOM.enable"),this._client.send("CSS.enable"),this._client.send("CSS.startRuleUsageTracking")])})}_onExecutionContextsCleared(){!this._resetOnNavigation||(this._stylesheetURLs.clear(),this._stylesheetSources.clear())}_onStyleSheet(e){return c(this,null,function*(){let t=e.header;if(!t.sourceURL)return;let i=yield this._client._sendMayFail("CSS.getStyleSheetText",{styleSheetId:t.styleSheetId});i&&(this._stylesheetURLs.set(t.styleSheetId,t.sourceURL),this._stylesheetSources.set(t.styleSheetId,i.text))})}stop(){return c(this,null,function*(){(0,dd.assert)(this._enabled,"CSSCoverage is not enabled"),this._enabled=!1;let e=yield this._client.send("CSS.stopRuleUsageTracking");yield Promise.all([this._client.send("CSS.disable"),this._client.send("DOM.disable")]),Bn.eventsHelper.removeEventListeners(this._eventListeners);let t=new Map;for(let n of e.ruleUsage){let s=t.get(n.styleSheetId);s||(s=[],t.set(n.styleSheetId,s)),s.push({startOffset:n.startOffset,endOffset:n.endOffset,count:n.used?1:0})}let i=[];for(let n of this._stylesheetURLs.keys()){let s=this._stylesheetURLs.get(n),o=this._stylesheetSources.get(n),l=$4(t.get(n)||[]);i.push({url:s,ranges:l,text:o})}return i})}};function $4(r){let e=[];for(let s of r)e.push({offset:s.startOffset,type:0,range:s}),e.push({offset:s.endOffset,type:1,range:s});e.sort((s,o)=>{if(s.offset!==o.offset)return s.offset-o.offset;if(s.type!==o.type)return o.type-s.type;let l=s.range.endOffset-s.range.startOffset,u=o.range.endOffset-o.range.startOffset;return s.type===0?u-l:l-u});let t=[],i=[],n=0;for(let s of e){if(t.length&&n<s.offset&&t[t.length-1]>0){let o=i.length?i[i.length-1]:null;o&&o.end===n?o.end=s.offset:i.push({start:n,end:s.offset})}n=s.offset,s.type===0?t.push(s.range.count):t.pop()}return i.filter(s=>s.end-s.start>1)}});var UC=v(pd=>{"use strict";Object.defineProperty(pd,"__esModule",{value:!0});pd.CRPDF=void 0;var HC=G(),z4=Ln(),V4={letter:{width:8.5,height:11},legal:{width:8.5,height:14},tabloid:{width:11,height:17},ledger:{width:17,height:11},a0:{width:33.1,height:46.8},a1:{width:23.4,height:33.1},a2:{width:16.54,height:23.4},a3:{width:11.7,height:16.54},a4:{width:8.27,height:11.7},a5:{width:5.83,height:8.27},a6:{width:4.13,height:5.83}},jC={px:1,in:96,cm:37.8,mm:3.78};function ao(r){if(r===void 0)return;let e=r.substring(r.length-2).toLowerCase(),t="";jC.hasOwnProperty(e)?t=r.substring(0,r.length-2):(e="px",t=r);let i=Number(t);return(0,HC.assert)(!isNaN(i),"Failed to parse parameter value: "+r),i*jC[e]/96}var WC=class{constructor(e){this._client=void 0,this._client=e}generate(){return c(this,arguments,function*(e={}){let{scale:t=1,displayHeaderFooter:i=!1,headerTemplate:n="",footerTemplate:s="",printBackground:o=!1,landscape:l=!1,pageRanges:u="",preferCSSPageSize:d=!1,margin:h={}}=e,p=8.5,f=11;if(e.format){let C=V4[e.format.toLowerCase()];(0,HC.assert)(C,"Unknown paper format: "+e.format),p=C.width,f=C.height}else p=ao(e.width)||p,f=ao(e.height)||f;let m=ao(h.top)||0,_=ao(h.left)||0,g=ao(h.bottom)||0,w=ao(h.right)||0,b=yield this._client.send("Page.printToPDF",{transferMode:"ReturnAsStream",landscape:l,displayHeaderFooter:i,headerTemplate:n,footerTemplate:s,printBackground:o,scale:t,paperWidth:p,paperHeight:f,marginTop:m,marginBottom:g,marginLeft:_,marginRight:w,pageRanges:u,preferCSSPageSize:d});return yield(0,z4.readProtocolStream)(this._client,b.stream,null)})}};pd.CRPDF=WC});var lo=v(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.gracefullyCloseAll=G4;Hn.launchProcess=K4;Hn.envArrayToObject=J4;Hn.gracefullyCloseSet=void 0;var $C=KC(x("child_process")),zC=KC(x("readline")),co=_t(),VC=G();function GC(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(GC=function(i){return i?t:e})(r)}function KC(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=GC(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var sc=new Set;Hn.gracefullyCloseSet=sc;function G4(){return c(this,null,function*(){yield Promise.all(Array.from(sc).map(r=>r().catch(e=>{})))})}var JC=process.getMaxListeners();JC!==0&&process.setMaxListeners(Math.max(JC||0,100));function K4(r){return c(this,null,function*(){let e=r.stdio==="pipe"?["ignore","pipe","pipe","pipe","pipe"]:["pipe","pipe","pipe"];r.log(`<launching> ${r.command} ${r.args?r.args.join(" "):""}`);let t={detached:process.platform!=="win32",env:r.env,cwd:r.cwd,shell:r.shell,stdio:e},i=$C.spawn(r.command,r.args||[],t),n=()=>c(this,null,function*(){r.log(`[pid=${i.pid||"N/A"}] starting temporary directories cleanup`);let b=yield(0,VC.removeFolders)(r.tempDirectories);for(let C=0;C<r.tempDirectories.length;++C)b[C]&&r.log(`[pid=${i.pid||"N/A"}] exception while removing ${r.tempDirectories[C]}: ${b[C]}`);r.log(`[pid=${i.pid||"N/A"}] finished temporary directories cleanup`)});if(i.on("error",()=>{}),!i.pid){let b,C=new Promise((E,N)=>b=E);return i.once("error",E=>{b(new Error("Failed to launch: "+E))}),n().then(()=>C).then(E=>Promise.reject(E))}r.log(`<launched> pid=${i.pid}`),zC.createInterface({input:i.stdout}).on("line",b=>{r.log(`[pid=${i.pid}][out] `+b)}),zC.createInterface({input:i.stderr}).on("line",b=>{r.log(`[pid=${i.pid}][err] `+b)});let l=!1,u=()=>{},d=new Promise(b=>u=b),h=()=>{},p=new Promise(b=>h=b);i.once("exit",(b,C)=>{r.log(`[pid=${i.pid}] <process did exit: exitCode=${b}, signal=${C}>`),l=!0,co.eventsHelper.removeEventListeners(f),sc.delete(_),r.onExit(b,C),u(),n().then(h)});let f=[co.eventsHelper.addEventListener(process,"exit",g)];r.handleSIGINT&&f.push(co.eventsHelper.addEventListener(process,"SIGINT",()=>{_().then(()=>{(0,VC.isUnderTest)()?setTimeout(()=>process.exit(130),0):process.exit(130)})})),r.handleSIGTERM&&f.push(co.eventsHelper.addEventListener(process,"SIGTERM",_)),r.handleSIGHUP&&f.push(co.eventsHelper.addEventListener(process,"SIGHUP",_)),sc.add(_);let m=!1;function _(){return c(this,null,function*(){if(sc.delete(_),m){r.log(`[pid=${i.pid}] <forecefully close>`),g(),yield d;return}m=!0,r.log(`[pid=${i.pid}] <gracefully close start>`),yield r.attemptToGracefullyClose().catch(()=>g()),yield p,r.log(`[pid=${i.pid}] <gracefully close end>`)})}function g(){if(r.log(`[pid=${i.pid}] <kill>`),co.eventsHelper.removeEventListeners(f),i.pid&&!i.killed&&!l){r.log(`[pid=${i.pid}] <will force kill>`);try{if(process.platform==="win32"){let b=$C.execSync(`taskkill /pid ${i.pid} /T /F /FI "MEMUSAGE gt 0"`);r.log(`[pid=${i.pid}] taskkill output: ${b.toString()}`)}else process.kill(-i.pid,"SIGKILL")}catch(b){r.log(`[pid=${i.pid}] exception while trying to kill process: ${b}`)}}else r.log(`[pid=${i.pid}] <skipped force kill spawnedProcess.killed=${i.killed} processClosed=${l}>`);n()}function w(){return g(),p}return{launchedProcess:i,gracefullyClose:_,kill:w}})}function J4(r){let e={};for(let{name:t,value:i}of r)e[t]=i;return e}});var YC=v(md=>{"use strict";Object.defineProperty(md,"__esModule",{value:!0});md.VideoRecorder=void 0;var m_=G(),X4=Ot(),Y4=lo(),Z4=Ar(),Q4=nt(),XC=25,fd=class{static launch(e,t,i){return c(this,null,function*(){if(!i.outputFile.endsWith(".webm"))throw new Error("File must have .webm extension");let n=new Z4.ProgressController((0,Q4.internalCallMetadata)(),e);return n.setLogName("browser"),yield n.run(s=>c(this,null,function*(){let o=new fd(e,t,s);return yield o._launch(i),o}))})}constructor(e,t,i){this._process=null,this._gracefullyClose=null,this._lastWritePromise=Promise.resolve(),this._lastFrameTimestamp=0,this._lastFrameBuffer=null,this._lastWriteTimestamp=0,this._progress=void 0,this._frameQueue=[],this._isStopped=!1,this._ffmpegPath=void 0,this._progress=i,this._ffmpegPath=t,e.on(X4.Page.Events.ScreencastFrame,n=>this.writeFrame(n.buffer,n.timestamp))}_launch(e){return c(this,null,function*(){let t=e.width,i=e.height,n=`-loglevel error -f image2pipe -avioflags direct -fpsprobesize 0 -probesize 32 -analyzeduration 0 -c:v mjpeg -i - -y -an -r ${XC} -c:v vp8 -qmin 0 -qmax 50 -crf 8 -deadline realtime -speed 8 -b:v 1M -threads 1 -vf pad=${t}:${i}:0:0:gray,crop=${t}:${i}:0:0`.split(" ");n.push(e.outputFile);let s=this._progress,{launchedProcess:o,gracefullyClose:l}=yield(0,Y4.launchProcess)({command:this._ffmpegPath,args:n,stdio:"stdin",log:u=>s.log(u),tempDirectories:[],attemptToGracefullyClose:()=>c(this,null,function*(){s.log("Closing stdin..."),o.stdin.end()}),onExit:(u,d)=>{s.log(`ffmpeg onkill exitCode=${u} signal=${d}`)}});o.stdin.on("finish",()=>{s.log("ffmpeg finished input.")}),o.stdin.on("error",()=>{s.log("ffmpeg error.")}),this._process=o,this._gracefullyClose=l})}writeFrame(e,t){if((0,m_.assert)(this._process),!this._isStopped){if(this._progress.log("writing frame "+t),this._lastFrameBuffer){let i=t-this._lastFrameTimestamp,n=Math.max(1,Math.round(XC*i));for(let s=0;s<n;++s)this._frameQueue.push(this._lastFrameBuffer);this._lastWritePromise=this._lastWritePromise.then(()=>this._sendFrames())}this._lastFrameBuffer=e,this._lastFrameTimestamp=t,this._lastWriteTimestamp=(0,m_.monotonicTime)()}}_sendFrames(){return c(this,null,function*(){for(;this._frameQueue.length;)yield this._sendFrame(this._frameQueue.shift())})}_sendFrame(e){return c(this,null,function*(){return new Promise(t=>this._process.stdin.write(e,t)).then(t=>{t&&this._progress.log(`ffmpeg failed to write: ${t}`)})})}stop(){return c(this,null,function*(){this._isStopped||(this.writeFrame(Buffer.from([]),this._lastFrameTimestamp+((0,m_.monotonicTime)()-this._lastWriteTimestamp)/1e3),this._isStopped=!0,yield this._lastWritePromise,yield this._gracefullyClose())})}};md.VideoRecorder=fd});var QC=v(_d=>{"use strict";Object.defineProperty(_d,"__esModule",{value:!0});_d.DragManager=void 0;var e3=G(),__=Ln(),ZC=class{constructor(e){this._crPage=void 0,this._dragState=null,this._lastPosition={x:0,y:0},this._crPage=e}cancelDrag(){return c(this,null,function*(){return this._dragState?(yield this._crPage._mainFrameSession._client.send("Input.dispatchDragEvent",{type:"dragCancel",x:this._lastPosition.x,y:this._lastPosition.y,data:{items:[],dragOperationsMask:65535}}),this._dragState=null,!0):!1})}interceptDragCausedByMove(e,t,i,n,s,o){return c(this,null,function*(){if(this._lastPosition={x:e,y:t},this._dragState){yield this._crPage._mainFrameSession._client.send("Input.dispatchDragEvent",{type:"dragOver",x:e,y:t,data:this._dragState,modifiers:(0,__.toModifiersMask)(s)});return}if(i!=="left")return o();let l=this._crPage._mainFrameSession._client,u,d=new Promise(p=>u=p);yield Promise.all(this._crPage._page.frames().map(p=>c(this,null,function*(){yield p.nonStallingEvaluateInExistingContext(function(){let f=Promise.resolve(!1),m=null,_=w=>m=w,g=()=>{f=new Promise(w=>{window.addEventListener("dragstart",_,{once:!0,capture:!0}),setTimeout(()=>w(m?!m.defaultPrevented:!1),0)})};window.addEventListener("mousemove",g,{once:!0,capture:!0}),window.__cleanupDrag=()=>c(this,null,function*(){let w=yield f;return window.removeEventListener("mousemove",g,{capture:!0}),window.removeEventListener("dragstart",_,{capture:!0}),w})}.toString(),!0,"utility").catch(()=>{})}))),l.on("Input.dragIntercepted",u);try{yield l.send("Input.setInterceptDrags",{enabled:!0})}catch(p){return l.off("Input.dragIntercepted",u),o()}yield o();let h=(yield Promise.all(this._crPage._page.frames().map(p=>c(this,null,function*(){return p.nonStallingEvaluateInExistingContext("window.__cleanupDrag && window.__cleanupDrag()",!1,"utility").catch(()=>!1)})))).some(p=>p);this._dragState=h?(yield d).data:null,l.off("Input.dragIntercepted",u),yield l.send("Input.setInterceptDrags",{enabled:!1}),this._dragState&&(yield this._crPage._mainFrameSession._client.send("Input.dispatchDragEvent",{type:"dragEnter",x:e,y:t,data:this._dragState,modifiers:(0,__.toModifiersMask)(s)}))})}isDragging(){return!!this._dragState}drop(e,t,i){return c(this,null,function*(){(0,e3.assert)(this._dragState,"missing drag state"),yield this._crPage._mainFrameSession._client.send("Input.dispatchDragEvent",{type:"drop",x:e,y:t,data:this._dragState,modifiers:(0,__.toModifiersMask)(i)}),this._dragState=null})}};_d.DragManager=ZC});var sk=v(vd=>{"use strict";Object.defineProperty(vd,"__esModule",{value:!0});vd.CRPage=void 0;var ek=v_(Is()),tk=Mt(),Ke=_t(),t3=v_(jt()),g_=so(),rk=sd(),r3=OC(),uo=Ot(),oc=Ln(),i3=v_(cd()),n3=p3(x("path")),w_=RC(),s3=NC(),o3=BC(),a3=UC(),c3=po(),l3=Bt(),ho=G(),u3=YC(),d3=QC(),h3=Qa();function p3(r){return r&&r.__esModule?r:{default:r}}function ik(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(ik=function(i){return i?t:e})(r)}function v_(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=ik(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var gd="__playwright_utility_world__",nk=class{static mainFrameSession(e){return e._delegate._mainFrameSession}constructor(e,t,i,n,s,o){this._mainFrameSession=void 0,this._sessions=new Map,this._page=void 0,this.rawMouse=void 0,this.rawKeyboard=void 0,this.rawTouchscreen=void 0,this._targetId=void 0,this._opener=void 0,this._pdf=void 0,this._coverage=void 0,this._browserContext=void 0,this._pagePromise=void 0,this._initializedPage=null,this._isBackgroundPage=void 0,this._nextWindowOpenPopupFeatures=[],this._targetId=t,this._opener=n,this._isBackgroundPage=o;let l=new d3.DragManager(this);if(this.rawKeyboard=new w_.RawKeyboardImpl(e,i._browser._isMac,l),this.rawMouse=new w_.RawMouseImpl(this,e,l),this.rawTouchscreen=new w_.RawTouchscreenImpl(e),this._pdf=new a3.CRPDF(e),this._coverage=new o3.CRCoverage(e),this._browserContext=i,this._page=new uo.Page(this,i),this._mainFrameSession=new wd(this,e,t,null),this._sessions.set(t,this._mainFrameSession),e.once(g_.CRSessionEvents.Disconnected,()=>this._page._didDisconnect()),n&&!i._options.noDefaultViewport){let u=n._nextWindowOpenPopupFeatures.shift()||[],d=tk.helper.getViewportSizeFromWindowFeatures(u);d&&(this._page._state.emulatedSize={viewport:d,screen:d})}this._pagePromise=this._mainFrameSession._initialize(s).then(u=>c(this,null,function*(){return yield this._page.initOpener(this._opener),u})).catch(u=>c(this,null,function*(){throw yield this._page.initOpener(this._opener),u})).then(()=>(this._initializedPage=this._page,this._reportAsNew(),this._page)).catch(u=>(this._reportAsNew(u),u))}_reportAsNew(e){this._isBackgroundPage?e||this._browserContext.emit(c3.CRBrowserContext.CREvents.BackgroundPage,this._page):this._page.reportAsNew(e)}_forAllFrameSessions(e){return c(this,null,function*(){let t=Array.from(this._sessions.values());yield Promise.all(t.map(i=>i._isMainFrame()?e(i):e(i).catch(n=>{if(!(n.message&&(n.message.includes("Target closed.")||n.message.includes("Session closed."))))throw n})))})}_sessionForFrame(e){for(;!this._sessions.has(e._id);){let t=e.parentFrame();if(!t)throw new Error("Frame has been detached.");e=t}return this._sessions.get(e._id)}_sessionForHandle(e){let t=e._context.frame;return this._sessionForFrame(t)}willBeginDownload(){this._mainFrameSession._willBeginDownload()}pageOrError(){return c(this,null,function*(){return this._pagePromise})}didClose(){for(let e of this._sessions.values())e.dispose();this._page._didClose()}navigateFrame(e,t,i){return c(this,null,function*(){return this._sessionForFrame(e)._navigate(e,t,i)})}exposeBinding(e){return c(this,null,function*(){yield this._forAllFrameSessions(t=>t._initBinding(e)),yield Promise.all(this._page.frames().map(t=>t.evaluateExpression(e.source,!1,{}).catch(i=>{})))})}updateExtraHTTPHeaders(){return c(this,null,function*(){yield this._forAllFrameSessions(e=>e._updateExtraHTTPHeaders(!1))})}updateGeolocation(){return c(this,null,function*(){yield this._forAllFrameSessions(e=>e._updateGeolocation(!1))})}updateOffline(){return c(this,null,function*(){yield this._forAllFrameSessions(e=>e._updateOffline(!1))})}updateHttpCredentials(){return c(this,null,function*(){yield this._forAllFrameSessions(e=>e._updateHttpCredentials(!1))})}setEmulatedSize(e){return c(this,null,function*(){(0,ho.assert)(this._page._state.emulatedSize===e),yield this._mainFrameSession._updateViewport()})}bringToFront(){return c(this,null,function*(){yield this._mainFrameSession._client.send("Page.bringToFront")})}updateEmulateMedia(){return c(this,null,function*(){yield this._forAllFrameSessions(e=>e._updateEmulateMedia(!1))})}updateRequestInterception(){return c(this,null,function*(){yield this._forAllFrameSessions(e=>e._updateRequestInterception())})}setFileChooserIntercepted(e){return c(this,null,function*(){yield this._forAllFrameSessions(t=>t._setFileChooserIntercepted(e))})}reload(){return c(this,null,function*(){yield this._mainFrameSession._client.send("Page.reload")})}_go(e){return c(this,null,function*(){let t=yield this._mainFrameSession._client.send("Page.getNavigationHistory"),i=t.entries[t.currentIndex+e];return i?(yield this._mainFrameSession._client.send("Page.navigateToHistoryEntry",{entryId:i.id}),!0):!1})}goBack(){return this._go(-1)}goForward(){return this._go(1)}evaluateOnNewDocument(e,t="main"){return c(this,null,function*(){yield this._forAllFrameSessions(i=>i._evaluateOnNewDocument(e,t))})}closePage(e){return c(this,null,function*(){e?yield this._mainFrameSession._client.send("Page.close"):yield this._browserContext._browser._closePage(this)})}canScreenshotOutsideViewport(){return!1}setBackgroundColor(e){return c(this,null,function*(){yield this._mainFrameSession._client.send("Emulation.setDefaultBackgroundColorOverride",{color:e})})}takeScreenshot(e,t,i,n,s){return c(this,null,function*(){let{visualViewport:o}=yield this._mainFrameSession._client.send("Page.getLayoutMetrics");i||(i=y({x:o.pageX+n.x,y:o.pageY+n.y},tk.helper.enclosingIntSize({width:n.width/o.scale,height:n.height/o.scale})));let l=R(y({},i),{scale:n?o.scale:1});e.throwIfAborted();let u=yield this._mainFrameSession._client.send("Page.captureScreenshot",{format:t,quality:s,clip:l});return Buffer.from(u.data,"base64")})}resetViewport(){return c(this,null,function*(){yield this._mainFrameSession._client.send("Emulation.setDeviceMetricsOverride",{mobile:!1,width:0,height:0,deviceScaleFactor:0})})}getContentFrame(e){return c(this,null,function*(){return this._sessionForHandle(e)._getContentFrame(e)})}getOwnerFrame(e){return c(this,null,function*(){return this._sessionForHandle(e)._getOwnerFrame(e)})}isElementHandle(e){return e.subtype==="node"}getBoundingBox(e){return c(this,null,function*(){return this._sessionForHandle(e)._getBoundingBox(e)})}scrollRectIntoViewIfNeeded(e,t){return c(this,null,function*(){return this._sessionForHandle(e)._scrollRectIntoViewIfNeeded(e,t)})}setScreencastOptions(e){return c(this,null,function*(){e?yield this._mainFrameSession._startScreencast(this,{format:"jpeg",quality:e.quality,maxWidth:e.width,maxHeight:e.height}):yield this._mainFrameSession._stopScreencast(this)})}rafCountForStablePosition(){return 1}getContentQuads(e){return c(this,null,function*(){return this._sessionForHandle(e)._getContentQuads(e)})}setInputFiles(e,t){return c(this,null,function*(){yield e.evaluateInUtility(([i,n,s])=>i.setInputFiles(n,s),t)})}adoptElementHandle(e,t){return c(this,null,function*(){return this._sessionForHandle(e)._adoptElementHandle(e,t)})}getAccessibilityTree(e){return c(this,null,function*(){return(0,s3.getAccessibilityTree)(this._mainFrameSession._client,e)})}inputActionEpilogue(){return c(this,null,function*(){yield this._mainFrameSession._client.send("Page.enable").catch(e=>{})})}pdf(e){return c(this,null,function*(){return this._pdf.generate(e)})}coverage(){return this._coverage}getFrameElement(e){return c(this,null,function*(){let t=e.parentFrame();if(!t)throw new Error("Frame has been detached.");let i=this._sessionForFrame(t),{backendNodeId:n}=yield i._client.send("DOM.getFrameOwner",{frameId:e._id}).catch(s=>{throw s instanceof Error&&s.message.includes("Frame with the given id was not found.")&&(0,l3.rewriteErrorMessage)(s,"Frame has been detached."),s});if(t=e.parentFrame(),!t)throw new Error("Frame has been detached.");return i._adoptBackendNodeId(n,yield t._mainContext())})}};vd.CRPage=nk;var wd=class{constructor(e,t,i,n){this._client=void 0,this._crPage=void 0,this._page=void 0,this._networkManager=void 0,this._contextIdToContext=new Map,this._eventListeners=[],this._targetId=void 0,this._firstNonInitialNavigationCommittedPromise=void 0,this._firstNonInitialNavigationCommittedFulfill=()=>{},this._firstNonInitialNavigationCommittedReject=s=>{},this._windowId=void 0,this._swappedIn=!1,this._videoRecorder=null,this._screencastId=null,this._screencastClients=new Set,this._client=t,this._crPage=e,this._page=e._page,this._targetId=i,this._networkManager=new r3.CRNetworkManager(t,this._page,n?n._networkManager:null),this._firstNonInitialNavigationCommittedPromise=new Promise((s,o)=>{this._firstNonInitialNavigationCommittedFulfill=s,this._firstNonInitialNavigationCommittedReject=o}),t.once(g_.CRSessionEvents.Disconnected,()=>{this._firstNonInitialNavigationCommittedReject(new Error("Page closed"))})}_isMainFrame(){return this._targetId===this._crPage._targetId}_addRendererListeners(){this._eventListeners.push(Ke.eventsHelper.addEventListener(this._client,"Log.entryAdded",e=>this._onLogEntryAdded(e)),Ke.eventsHelper.addEventListener(this._client,"Page.fileChooserOpened",e=>this._onFileChooserOpened(e)),Ke.eventsHelper.addEventListener(this._client,"Page.frameAttached",e=>this._onFrameAttached(e.frameId,e.parentFrameId)),Ke.eventsHelper.addEventListener(this._client,"Page.frameDetached",e=>this._onFrameDetached(e.frameId,e.reason)),Ke.eventsHelper.addEventListener(this._client,"Page.frameNavigated",e=>this._onFrameNavigated(e.frame,!1)),Ke.eventsHelper.addEventListener(this._client,"Page.frameRequestedNavigation",e=>this._onFrameRequestedNavigation(e)),Ke.eventsHelper.addEventListener(this._client,"Page.frameStoppedLoading",e=>this._onFrameStoppedLoading(e.frameId)),Ke.eventsHelper.addEventListener(this._client,"Page.javascriptDialogOpening",e=>this._onDialog(e)),Ke.eventsHelper.addEventListener(this._client,"Page.navigatedWithinDocument",e=>this._onFrameNavigatedWithinDocument(e.frameId,e.url)),Ke.eventsHelper.addEventListener(this._client,"Runtime.bindingCalled",e=>this._onBindingCalled(e)),Ke.eventsHelper.addEventListener(this._client,"Runtime.consoleAPICalled",e=>this._onConsoleAPI(e)),Ke.eventsHelper.addEventListener(this._client,"Runtime.exceptionThrown",e=>this._handleException(e.exceptionDetails)),Ke.eventsHelper.addEventListener(this._client,"Runtime.executionContextCreated",e=>this._onExecutionContextCreated(e.context)),Ke.eventsHelper.addEventListener(this._client,"Runtime.executionContextDestroyed",e=>this._onExecutionContextDestroyed(e.executionContextId)),Ke.eventsHelper.addEventListener(this._client,"Runtime.executionContextsCleared",e=>this._onExecutionContextsCleared()),Ke.eventsHelper.addEventListener(this._client,"Target.attachedToTarget",e=>this._onAttachedToTarget(e)),Ke.eventsHelper.addEventListener(this._client,"Target.detachedFromTarget",e=>this._onDetachedFromTarget(e)))}_addBrowserListeners(){this._eventListeners.push(Ke.eventsHelper.addEventListener(this._client,"Inspector.targetCrashed",e=>this._onTargetCrashed()),Ke.eventsHelper.addEventListener(this._client,"Page.screencastFrame",e=>this._onScreencastFrame(e)),Ke.eventsHelper.addEventListener(this._client,"Page.windowOpen",e=>this._onWindowOpen(e)))}_initialize(e){return c(this,null,function*(){if(e&&!this._crPage._browserContext._browser.isClank()&&!this._crPage._browserContext._options.noDefaultViewport){let{windowId:o}=yield this._client.send("Browser.getWindowForTarget");this._windowId=o}let t;if(this._isMainFrame()&&this._crPage._browserContext._options.recordVideo&&e){let o=(0,ho.createGuid)(),l=n3.default.join(this._crPage._browserContext._options.recordVideo.dir,o+".webm");t=R(y({},this._crPage._browserContext._options.recordVideo.size),{outputFile:l}),yield this._crPage._browserContext._ensureVideosPath(),yield this._createVideoRecorder(o,t),this._crPage.pageOrError().then(u=>{u instanceof Error&&this._stopVideoRecording().catch(()=>{})})}let i;this._isMainFrame()||this._addRendererListeners(),this._addBrowserListeners();let n=[this._client.send("Page.enable"),this._client.send("Page.getFrameTree").then(({frameTree:o})=>{this._isMainFrame()&&(this._handleFrameTree(o),this._addRendererListeners());let l=this._isMainFrame()?this._page.frames():[this._page._frameManager.frame(this._targetId)];for(let d of l){this._client._sendMayFail("Page.createIsolatedWorld",{frameId:d._id,grantUniveralAccess:!0,worldName:gd});for(let h of this._crPage._browserContext._pageBindings.values())d.evaluateExpression(h.source,!1,void 0).catch(p=>{});for(let h of this._crPage._browserContext._evaluateOnNewDocumentSources)d.evaluateExpression(h,!1,void 0,"main").catch(p=>{})}this._isMainFrame()&&this._page.mainFrame().url()===":"?i.catch(d=>{}).then(()=>{this._eventListeners.push(Ke.eventsHelper.addEventListener(this._client,"Page.lifecycleEvent",d=>this._onLifecycleEvent(d)))}):(this._firstNonInitialNavigationCommittedFulfill(),this._eventListeners.push(Ke.eventsHelper.addEventListener(this._client,"Page.lifecycleEvent",d=>this._onLifecycleEvent(d))))}),this._client.send("Log.enable",{}),i=this._client.send("Page.setLifecycleEventsEnabled",{enabled:!0}),this._client.send("Runtime.enable",{}),this._client.send("Page.addScriptToEvaluateOnNewDocument",{source:"",worldName:gd}),this._networkManager.initialize(),this._client.send("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0})];this._isMainFrame()&&n.push(this._client.send("Emulation.setFocusEmulationEnabled",{enabled:!0}));let s=this._crPage._browserContext._options;s.bypassCSP&&n.push(this._client.send("Page.setBypassCSP",{enabled:!0})),s.ignoreHTTPSErrors&&n.push(this._client.send("Security.setIgnoreCertificateErrors",{ignore:!0})),this._isMainFrame()&&n.push(this._updateViewport()),s.hasTouch&&n.push(this._client.send("Emulation.setTouchEmulationEnabled",{enabled:!0})),s.javaScriptEnabled===!1&&n.push(this._client.send("Emulation.setScriptExecutionDisabled",{value:!0})),(s.userAgent||s.locale)&&n.push(this._client.send("Emulation.setUserAgentOverride",{userAgent:s.userAgent||"",acceptLanguage:s.locale})),s.locale&&n.push(f3(this._client,s.locale)),s.timezoneId&&n.push(m3(this._client,s.timezoneId)),n.push(this._updateGeolocation(!0)),n.push(this._updateExtraHTTPHeaders(!0)),n.push(this._updateRequestInterception()),n.push(this._updateOffline(!0)),n.push(this._updateHttpCredentials(!0)),n.push(this._updateEmulateMedia(!0));for(let o of this._crPage._page.allBindings())n.push(this._initBinding(o));for(let o of this._crPage._browserContext._evaluateOnNewDocumentSources)n.push(this._evaluateOnNewDocument(o,"main"));for(let o of this._crPage._page._evaluateOnNewDocumentSources)n.push(this._evaluateOnNewDocument(o,"main"));t&&n.push(this._startVideoRecording(t)),n.push(this._client.send("Runtime.runIfWaitingForDebugger")),n.push(this._firstNonInitialNavigationCommittedPromise),yield Promise.all(n)})}dispose(){Ke.eventsHelper.removeEventListeners(this._eventListeners),this._networkManager.dispose(),this._crPage._sessions.delete(this._targetId)}_navigate(e,t,i){return c(this,null,function*(){let n=yield this._client.send("Page.navigate",{url:t,referrer:i,frameId:e._id});if(n.errorText)throw new Error(`${n.errorText} at ${t}`);return{newDocumentId:n.loaderId}})}_onLifecycleEvent(e){this._eventBelongsToStaleFrame(e.frameId)||(e.name==="load"?this._page._frameManager.frameLifecycleEvent(e.frameId,"load"):e.name==="DOMContentLoaded"&&this._page._frameManager.frameLifecycleEvent(e.frameId,"domcontentloaded"))}_onFrameStoppedLoading(e){this._eventBelongsToStaleFrame(e)||this._page._frameManager.frameStoppedLoading(e)}_handleFrameTree(e){if(this._onFrameAttached(e.frame.id,e.frame.parentId||null),this._onFrameNavigated(e.frame,!0),!!e.childFrames)for(let t of e.childFrames)this._handleFrameTree(t)}_eventBelongsToStaleFrame(e){let t=this._page._frameManager.frame(e);if(!t)return!0;let i=this._crPage._sessionForFrame(t);return i&&i!==this&&!i._swappedIn}_onFrameAttached(e,t){let i=this._crPage._sessions.get(e);if(i&&e!==this._targetId){i._swappedIn=!0;let n=this._page._frameManager.frame(e);n&&this._page._frameManager.removeChildFramesRecursively(n);return}t&&!this._page._frameManager.frame(t)||this._page._frameManager.frameAttached(e,t)}_onFrameNavigated(e,t){this._eventBelongsToStaleFrame(e.id)||(this._page._frameManager.frameCommittedNewDocumentNavigation(e.id,e.url+(e.urlFragment||""),e.name||"",e.loaderId,t),t||this._firstNonInitialNavigationCommittedFulfill())}_onFrameRequestedNavigation(e){this._eventBelongsToStaleFrame(e.frameId)||e.disposition==="currentTab"&&this._page._frameManager.frameRequestedNavigation(e.frameId)}_onFrameNavigatedWithinDocument(e,t){this._eventBelongsToStaleFrame(e)||this._page._frameManager.frameCommittedSameDocumentNavigation(e,t)}_onFrameDetached(e,t){if(!this._crPage._sessions.has(e)){if(t==="swap"){let i=this._page._frameManager.frame(e);i&&this._page._frameManager.removeChildFramesRecursively(i);return}this._page._frameManager.frameDetached(e)}}_onExecutionContextCreated(e){let t=e.auxData?this._page._frameManager.frame(e.auxData.frameId):null;if(!t||this._eventBelongsToStaleFrame(t._id))return;let i=new rk.CRExecutionContext(this._client,e),n=null;e.auxData&&!!e.auxData.isDefault?n="main":e.name===gd&&(n="utility");let s=new ek.FrameExecutionContext(i,t,n);n&&t._contextCreated(n,s),this._contextIdToContext.set(e.id,s)}_onExecutionContextDestroyed(e){let t=this._contextIdToContext.get(e);!t||(this._contextIdToContext.delete(e),t.frame._contextDestroyed(t))}_onExecutionContextsCleared(){for(let e of Array.from(this._contextIdToContext.keys()))this._onExecutionContextDestroyed(e)}_onAttachedToTarget(e){let t=g_.CRConnection.fromSession(this._client).session(e.sessionId);if(e.targetInfo.type==="iframe"){let s=e.targetInfo.targetId,o=this._page._frameManager.frame(s);if(!o)return;this._page._frameManager.removeChildFramesRecursively(o);let l=new wd(this._crPage,t,s,this);this._crPage._sessions.set(s,l),l._initialize(!1).catch(u=>u);return}if(e.targetInfo.type!=="worker"){t._sendMayFail("Runtime.runIfWaitingForDebugger").then(()=>{this._client._sendMayFail("Target.detachFromTarget",{sessionId:e.sessionId})});return}let i=e.targetInfo.url,n=new uo.Worker(this._page,i);this._page._addWorker(e.sessionId,n),t.once("Runtime.executionContextCreated",s=>c(this,null,function*(){n._createExecutionContext(new rk.CRExecutionContext(t,s.context))})),t._sendMayFail("Runtime.enable"),t._sendMayFail("Network.enable"),t._sendMayFail("Runtime.runIfWaitingForDebugger"),t.on("Runtime.consoleAPICalled",s=>{let o=s.args.map(l=>n._existingExecutionContext.createHandle(l));this._page._addConsoleMessage(s.type,o,(0,oc.toConsoleMessageLocation)(s.stackTrace))}),t.on("Runtime.exceptionThrown",s=>this._page.emit(uo.Page.Events.PageError,(0,oc.exceptionToError)(s.exceptionDetails))),this._networkManager.instrumentNetworkEvents(t,this._page._frameManager.frame(this._targetId))}_onDetachedFromTarget(e){this._page._removeWorker(e.sessionId);let t=this._crPage._sessions.get(e.targetId);if(!!t){if(t._swappedIn){t.dispose();return}this._client.send("Page.enable").catch(i=>null).then(()=>{t._swappedIn||this._page._frameManager.frameDetached(e.targetId),t.dispose()})}}_onWindowOpen(e){this._crPage._nextWindowOpenPopupFeatures.push(e.windowFeatures)}_onConsoleAPI(e){return c(this,null,function*(){if(e.executionContextId===0)return;let t=this._contextIdToContext.get(e.executionContextId),i=e.args.map(n=>t.createHandle(n));this._page._addConsoleMessage(e.type,i,(0,oc.toConsoleMessageLocation)(e.stackTrace))})}_initBinding(e){return c(this,null,function*(){yield Promise.all([this._client.send("Runtime.addBinding",{name:e.name}),this._client.send("Page.addScriptToEvaluateOnNewDocument",{source:e.source})])})}_onBindingCalled(e){return c(this,null,function*(){let t=this._contextIdToContext.get(e.executionContextId);(yield this._crPage.pageOrError())instanceof Error||(yield this._page._onBindingCalled(e.payload,t))})}_onDialog(e){!this._page._frameManager.frame(this._targetId)||this._page.emit(uo.Page.Events.Dialog,new i3.Dialog(this._page,e.type,e.message,(t,i)=>c(this,null,function*(){yield this._client.send("Page.handleJavaScriptDialog",{accept:t,promptText:i})}),e.defaultPrompt))}_handleException(e){this._page.firePageError((0,oc.exceptionToError)(e))}_onTargetCrashed(){return c(this,null,function*(){this._client._markAsCrashed(),this._page._didCrash()})}_onLogEntryAdded(e){let{level:t,text:i,args:n,source:s,url:o,lineNumber:l}=e.entry;if(n&&n.map(u=>(0,oc.releaseObject)(this._client,u.objectId)),s!=="worker"){let u={url:o||"",lineNumber:l||0,columnNumber:0};this._page._addConsoleMessage(t,[],u,i)}}_onFileChooserOpened(e){return c(this,null,function*(){let t=this._page._frameManager.frame(e.frameId);if(!t)return;let i;try{let n=yield t._utilityContext();i=yield this._adoptBackendNodeId(e.backendNodeId,n)}catch(n){return}yield this._page._onFileChooserOpened(i)})}_willBeginDownload(){this._crPage._initializedPage||this._firstNonInitialNavigationCommittedReject(new Error("Starting new page download"))}_onScreencastFrame(e){this._client.send("Page.screencastFrameAck",{sessionId:e.sessionId}).catch(()=>{});let t=Buffer.from(e.data,"base64");this._page.emit(uo.Page.Events.ScreencastFrame,{buffer:t,timestamp:e.metadata.timestamp,width:e.metadata.deviceWidth,height:e.metadata.deviceHeight})}_createVideoRecorder(e,t){return c(this,null,function*(){(0,ho.assert)(!this._screencastId);let i=h3.registry.findExecutable("ffmpeg").executablePathOrDie(this._page._browserContext._browser.options.sdkLanguage);this._videoRecorder=yield u3.VideoRecorder.launch(this._crPage._page,i,t),this._screencastId=e})}_startVideoRecording(e){return c(this,null,function*(){let t=this._screencastId;(0,ho.assert)(t),this._page.once(uo.Page.Events.Close,()=>this._stopVideoRecording().catch(()=>{}));let i=new Promise(n=>this._client.once("Page.screencastFrame",n));yield this._startScreencast(this._videoRecorder,{format:"jpeg",quality:90,maxWidth:e.width,maxHeight:e.height}),i.then(()=>{this._crPage._browserContext._browser._videoStarted(this._crPage._browserContext,t,e.outputFile,this._crPage.pageOrError())})})}_stopVideoRecording(){return c(this,null,function*(){if(!this._screencastId)return;let e=this._screencastId;this._screencastId=null;let t=this._videoRecorder;this._videoRecorder=null,yield this._stopScreencast(t),yield t.stop().catch(()=>{});let i=this._crPage._browserContext._browser._takeVideo(e);i==null||i.reportFinished()})}_startScreencast(i){return c(this,arguments,function*(e,t={}){this._screencastClients.add(e),this._screencastClients.size===1&&(yield this._client.send("Page.startScreencast",t))})}_stopScreencast(e){return c(this,null,function*(){this._screencastClients.delete(e),this._screencastClients.size||(yield this._client._sendMayFail("Page.stopScreencast"))})}_updateExtraHTTPHeaders(e){return c(this,null,function*(){let t=t3.mergeHeaders([this._crPage._browserContext._options.extraHTTPHeaders,this._page._state.extraHTTPHeaders]);(!e||t.length)&&(yield this._client.send("Network.setExtraHTTPHeaders",{headers:(0,ho.headersArrayToObject)(t,!1)}))})}_updateGeolocation(e){return c(this,null,function*(){let t=this._crPage._browserContext._options.geolocation;(!e||t)&&(yield this._client.send("Emulation.setGeolocationOverride",t||{}))})}_updateOffline(e){return c(this,null,function*(){let t=!!this._crPage._browserContext._options.offline;(!e||t)&&(yield this._networkManager.setOffline(t))})}_updateHttpCredentials(e){return c(this,null,function*(){let t=this._crPage._browserContext._options.httpCredentials||null;(!e||t)&&(yield this._networkManager.authenticate(t))})}_updateViewport(){return c(this,null,function*(){if(this._crPage._browserContext._browser.isClank())return;(0,ho.assert)(this._isMainFrame());let e=this._crPage._browserContext._options,t=this._page._state.emulatedSize;if(t===null)return;let i=t.viewport,n=t.screen,s=i.width>i.height,o=[this._client.send("Emulation.setDeviceMetricsOverride",{mobile:!!e.isMobile,width:i.width,height:i.height,screenWidth:n.width,screenHeight:n.height,deviceScaleFactor:e.deviceScaleFactor||1,screenOrientation:s?{angle:90,type:"landscapePrimary"}:{angle:0,type:"portraitPrimary"}})];if(this._windowId){let l={width:0,height:0};this._crPage._browserContext._browser.options.headful&&(l={width:24,height:88},process.platform==="win32"?l={width:16,height:88}:process.platform==="linux"?l={width:8,height:85}:process.platform==="darwin"&&(l={width:2,height:80}),this._crPage._browserContext.isPersistentContext()&&(l.height+=46)),o.push(this.setWindowBounds({width:i.width+l.width,height:i.height+l.height}))}yield Promise.all(o)})}windowBounds(){return c(this,null,function*(){let{bounds:e}=yield this._client.send("Browser.getWindowBounds",{windowId:this._windowId});return e})}setWindowBounds(e){return c(this,null,function*(){return yield this._client.send("Browser.setWindowBounds",{windowId:this._windowId,bounds:e})})}_updateEmulateMedia(e){return c(this,null,function*(){if(this._crPage._browserContext._browser.isClank())return;let t=this._page._state.colorScheme===null?"":this._page._state.colorScheme,i=this._page._state.reducedMotion===null?"":this._page._state.reducedMotion,n=this._page._state.forcedColors===null?"":this._page._state.forcedColors,s=[{name:"prefers-color-scheme",value:t},{name:"prefers-reduced-motion",value:i},{name:"forced-colors",value:n}];yield this._client.send("Emulation.setEmulatedMedia",{media:this._page._state.mediaType||"",features:s})})}_updateRequestInterception(){return c(this,null,function*(){yield this._networkManager.setRequestInterception(this._page._needsRequestInterception())})}_setFileChooserIntercepted(e){return c(this,null,function*(){yield this._client.send("Page.setInterceptFileChooserDialog",{enabled:e}).catch(t=>{})})}_evaluateOnNewDocument(e,t){return c(this,null,function*(){let i=t==="utility"?gd:void 0;yield this._client.send("Page.addScriptToEvaluateOnNewDocument",{source:e,worldName:i})})}_getContentFrame(e){return c(this,null,function*(){let t=yield this._client.send("DOM.describeNode",{objectId:e._objectId});return!t||typeof t.node.frameId!="string"?null:this._page._frameManager.frame(t.node.frameId)})}_getOwnerFrame(e){return c(this,null,function*(){let t=yield e.evaluateHandle(s=>{let o=s;return o.documentElement&&o.documentElement.ownerDocument===o?o.documentElement:s.ownerDocument?s.ownerDocument.documentElement:null});if(!t||!t._objectId)return null;let i=yield this._client.send("DOM.describeNode",{objectId:t._objectId}),n=i&&typeof i.node.frameId=="string"?i.node.frameId:null;return t.dispose(),n})}_getBoundingBox(e){return c(this,null,function*(){let t=yield this._client._sendMayFail("DOM.getBoxModel",{objectId:e._objectId});if(!t)return null;let i=t.model.border,n=Math.min(i[0],i[2],i[4],i[6]),s=Math.min(i[1],i[3],i[5],i[7]),o=Math.max(i[0],i[2],i[4],i[6])-n,l=Math.max(i[1],i[3],i[5],i[7])-s,u=yield this._framePosition();return u?{x:n+u.x,y:s+u.y,width:o,height:l}:null})}_framePosition(){return c(this,null,function*(){let e=this._page._frameManager.frame(this._targetId);return e?e===this._page.mainFrame()?{x:0,y:0}:yield(yield e.frameElement()).boundingBox():null})}_scrollRectIntoViewIfNeeded(e,t){return c(this,null,function*(){return yield this._client.send("DOM.scrollIntoViewIfNeeded",{objectId:e._objectId,rect:t}).then(()=>"done").catch(i=>{if(i instanceof Error&&i.message.includes("Node does not have a layout object"))return"error:notvisible";if(i instanceof Error&&i.message.includes("Node is detached from document"))return"error:notconnected";throw i})})}_getContentQuads(e){return c(this,null,function*(){let t=yield this._client._sendMayFail("DOM.getContentQuads",{objectId:e._objectId});if(!t)return null;let i=yield this._framePosition();return i?t.quads.map(n=>[{x:n[0]+i.x,y:n[1]+i.y},{x:n[2]+i.x,y:n[3]+i.y},{x:n[4]+i.x,y:n[5]+i.y},{x:n[6]+i.x,y:n[7]+i.y}]):null})}_adoptElementHandle(e,t){return c(this,null,function*(){let i=yield this._client.send("DOM.describeNode",{objectId:e._objectId});return this._adoptBackendNodeId(i.node.backendNodeId,t)})}_adoptBackendNodeId(e,t){return c(this,null,function*(){let i=yield this._client._sendMayFail("DOM.resolveNode",{backendNodeId:e,executionContextId:t._delegate._contextId});if(!i||i.object.subtype==="null")throw new Error(ek.kUnableToAdoptErrorMessage);return t.createHandle(i.object).asElement()})}};function f3(r,e){return c(this,null,function*(){try{yield r.send("Emulation.setLocaleOverride",{locale:e})}catch(t){if(t.message.includes("Another locale override is already in effect"))return;throw t}})}function m3(r,e){return c(this,null,function*(){try{yield r.send("Emulation.setTimezoneOverride",{timezoneId:e})}catch(t){if(t.message.includes("Timezone override is already in effect"))return;throw t.message.includes("Invalid timezone")?new Error(`Invalid timezone ID: ${e}`):t}})}});var po=v(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});mo.CRBrowserContext=mo.CRBrowser=void 0;var _3=no(),yd=gt(),mr=G(),ok=y3(jt()),bd=Ot(),g3=Aa(),ak=so(),ck=sk(),w3=Ln(),v3=sd();function lk(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(lk=function(i){return i?t:e})(r)}function y3(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=lk(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var xd=class extends _3.Browser{static connect(e,t,i){return c(this,null,function*(){let n=new ak.CRConnection(e,t.protocolLogger,t.browserLogsCollector),s=new xd(n,t);s._devtools=i;let o=n.rootSession;t.__testHookOnConnectToBrowser&&(yield t.__testHookOnConnectToBrowser());let l=yield o.send("Browser.getVersion");return s._isMac=l.userAgent.includes("Macintosh"),s._version=l.product.substring(l.product.indexOf("/")+1),s._userAgent=l.userAgent,t.persistent?(s._defaultContext=new fo(s,void 0,t.persistent),yield Promise.all([o.send("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0}).then(()=>c(this,null,function*(){yield o.send("Target.getTargetInfo")})),s._defaultContext._initialize()]),yield s._waitForAllPagesToBeInitialized(),s):(yield o.send("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0}),s)})}constructor(e,t){super(t);this._connection=void 0,this._session=void 0,this._clientRootSessionPromise=null,this._contexts=new Map,this._crPages=new Map,this._backgroundPages=new Map,this._serviceWorkers=new Map,this._devtools=void 0,this._isMac=!1,this._version="",this._tracingRecording=!1,this._tracingPath="",this._tracingClient=void 0,this._userAgent="",this._connection=e,this._session=this._connection.rootSession,this._connection.on(ak.ConnectionEvents.Disconnected,()=>this._didClose()),this._session.on("Target.attachedToTarget",this._onAttachedToTarget.bind(this)),this._session.on("Target.detachedFromTarget",this._onDetachedFromTarget.bind(this)),this._session.on("Browser.downloadWillBegin",this._onDownloadWillBegin.bind(this)),this._session.on("Browser.downloadProgress",this._onDownloadProgress.bind(this))}newContext(e){return c(this,null,function*(){(0,yd.validateBrowserContextOptions)(e,this.options);let{browserContextId:t}=yield this._session.send("Target.createBrowserContext",{disposeOnDetach:!0,proxyServer:e.proxy?e.proxy.server:void 0,proxyBypassList:e.proxy?e.proxy.bypass:void 0}),i=new fo(this,t,e);return yield i._initialize(),this._contexts.set(t,i),i})}contexts(){return Array.from(this._contexts.values())}version(){return this._version}userAgent(){return this._userAgent}isClank(){return this.options.name==="clank"}_waitForAllPagesToBeInitialized(){return c(this,null,function*(){yield Promise.all([...this._crPages.values()].map(e=>e.pageOrError()))})}_onAttachedToTarget({targetInfo:e,sessionId:t,waitingForDebugger:i}){if(e.type==="browser")return;let n=this._connection.session(t);(0,mr.assert)(e.browserContextId,"targetInfo: "+JSON.stringify(e,null,2));let s=this._contexts.get(e.browserContextId)||null;if(s||(s=this._defaultContext),e.type==="other"&&e.url.startsWith("devtools://devtools")&&this._devtools){this._devtools.install(n);return}if(e.type==="other"||!s){i&&n._sendMayFail("Runtime.runIfWaitingForDebugger").then(()=>{this._session._sendMayFail("Target.detachFromTarget",{sessionId:t})});return}if((0,mr.assert)(!this._crPages.has(e.targetId),"Duplicate target "+e.targetId),(0,mr.assert)(!this._backgroundPages.has(e.targetId),"Duplicate target "+e.targetId),(0,mr.assert)(!this._serviceWorkers.has(e.targetId),"Duplicate target "+e.targetId),e.type==="background_page"){let o=new ck.CRPage(n,e.targetId,s,null,!1,!0);this._backgroundPages.set(e.targetId,o);return}if(e.type==="page"){let o=e.openerId&&this._crPages.get(e.openerId)||null,l=new ck.CRPage(n,e.targetId,s,o,!0,!1);this._crPages.set(e.targetId,l);return}if(e.type==="service_worker"){let o=new uk(s,n,e.url);this._serviceWorkers.set(e.targetId,o),s.emit(fo.CREvents.ServiceWorker,o);return}(0,mr.assert)(!1,"Unknown target type: "+e.type)}_onDetachedFromTarget(e){let t=e.targetId,i=this._crPages.get(t);if(i){this._crPages.delete(t),i.didClose();return}let n=this._backgroundPages.get(t);if(n){this._backgroundPages.delete(t),n.didClose();return}let s=this._serviceWorkers.get(t);if(s){this._serviceWorkers.delete(t),s.emit(bd.Worker.Events.Close);return}}_findOwningPage(e){for(let t of this._crPages.values())if(t._page._frameManager.frame(e))return t;return null}_onDownloadWillBegin(e){let t=this._findOwningPage(e.frameId);(0,mr.assert)(t,"Download started in unknown page: "+JSON.stringify(e)),t.willBeginDownload();let i=t._initializedPage;!i&&t._opener&&(i=t._opener._initializedPage),!!i&&this._downloadCreated(i,e.guid,e.url,e.suggestedFilename)}_onDownloadProgress(e){e.state==="completed"&&this._downloadFinished(e.guid,""),e.state==="canceled"&&this._downloadFinished(e.guid,"canceled")}_closePage(e){return c(this,null,function*(){yield this._session.send("Target.closeTarget",{targetId:e._targetId})})}newBrowserCDPSession(){return c(this,null,function*(){return yield this._connection.createBrowserSession()})}startTracing(i){return c(this,arguments,function*(e,t={}){(0,mr.assert)(!this._tracingRecording,"Cannot start recording trace while already recording trace."),this._tracingClient=e?e._delegate._mainFrameSession._client:this._session;let n=["-*","devtools.timeline","v8.execute","disabled-by-default-devtools.timeline","disabled-by-default-devtools.timeline.frame","toplevel","blink.console","blink.user_timing","latencyInfo","disabled-by-default-devtools.timeline.stack","disabled-by-default-v8.cpu_profiler","disabled-by-default-v8.cpu_profiler.hires"],{path:s=null,screenshots:o=!1,categories:l=n}=t;o&&l.push("disabled-by-default-devtools.screenshot"),this._tracingPath=s,this._tracingRecording=!0,yield this._tracingClient.send("Tracing.start",{transferMode:"ReturnAsStream",categories:l.join(",")})})}stopTracing(){return c(this,null,function*(){(0,mr.assert)(this._tracingClient,"Tracing was not started.");let[e]=yield Promise.all([new Promise(i=>this._tracingClient.once("Tracing.tracingComplete",i)),this._tracingClient.send("Tracing.end")]),t=yield(0,w3.readProtocolStream)(this._tracingClient,e.stream,this._tracingPath);return this._tracingRecording=!1,t})}isConnected(){return!this._connection._closed}_clientRootSession(){return c(this,null,function*(){return this._clientRootSessionPromise||(this._clientRootSessionPromise=this._connection.createBrowserSession()),this._clientRootSessionPromise})}};mo.CRBrowser=xd;var uk=class extends bd.Worker{constructor(e,t,i){super(e,i);this._browserContext=void 0,this._browserContext=e,t.once("Runtime.executionContextCreated",n=>{this._createExecutionContext(new v3.CRExecutionContext(t,n.context))}),t.send("Runtime.enable",{}).catch(n=>{}),t.send("Runtime.runIfWaitingForDebugger").catch(n=>{})}},fo=class extends yd.BrowserContext{constructor(e,t,i){super(e,i,t);this._evaluateOnNewDocumentSources=void 0,this._evaluateOnNewDocumentSources=[],this._authenticateProxyViaCredentials()}_initialize(){var e=t=>super[t];return c(this,null,function*(){(0,mr.assert)(!Array.from(this._browser._crPages.values()).some(n=>n._browserContext===this));let i=[e("_initialize").call(this)];this._browser.options.name!=="electron"&&this._browser.options.name!=="clank"&&i.push(this._browser._session.send("Browser.setDownloadBehavior",{behavior:this._options.acceptDownloads?"allowAndName":"deny",browserContextId:this._browserContextId,downloadPath:this._browser.options.downloadsPath,eventsEnabled:!0})),this._options.permissions&&i.push(this.grantPermissions(this._options.permissions)),yield Promise.all(i)})}pages(){let e=[];for(let t of this._browser._crPages.values())t._browserContext===this&&t._initializedPage&&e.push(t._initializedPage);return e}newPageDelegate(){return c(this,null,function*(){(0,yd.assertBrowserContextIsNotOwned)(this);let e=this._browser.isClank()?new Set(this._browser._crPages.keys()):void 0,{targetId:t}=yield this._browser._session.send("Target.createTarget",{url:"about:blank",browserContextId:this._browserContextId});if(e){let i=new Set(this._browser._crPages.keys());for(let n of e)i.delete(n);for(let n of i)this._browser._crPages.get(n)._opener&&i.delete(n);(0,mr.assert)(i.size===1),[t]=[...i]}return this._browser._crPages.get(t)})}_doCookies(e){return c(this,null,function*(){let{cookies:t}=yield this._browser._session.send("Storage.getCookies",{browserContextId:this._browserContextId});return ok.filterCookies(t.map(i=>{let n=y({sameSite:"Lax"},i);return delete n.size,delete n.priority,delete n.session,delete n.sameParty,delete n.sourceScheme,delete n.sourcePort,n}),e)})}addCookies(e){return c(this,null,function*(){yield this._browser._session.send("Storage.setCookies",{cookies:ok.rewriteCookies(e),browserContextId:this._browserContextId})})}clearCookies(){return c(this,null,function*(){yield this._browser._session.send("Storage.clearCookies",{browserContextId:this._browserContextId})})}_doGrantPermissions(e,t){return c(this,null,function*(){let i=new Map([["geolocation","geolocation"],["midi","midi"],["notifications","notifications"],["camera","videoCapture"],["microphone","audioCapture"],["background-sync","backgroundSync"],["ambient-light-sensor","sensors"],["accelerometer","sensors"],["gyroscope","sensors"],["magnetometer","sensors"],["accessibility-events","accessibilityEvents"],["clipboard-read","clipboardReadWrite"],["clipboard-write","clipboardSanitizedWrite"],["payment-handler","paymentHandler"],["midi-sysex","midiSysex"]]),n=t.map(s=>{let o=i.get(s);if(!o)throw new Error("Unknown permission: "+s);return o});yield this._browser._session.send("Browser.grantPermissions",{origin:e==="*"?void 0:e,browserContextId:this._browserContextId,permissions:n})})}_doClearPermissions(){return c(this,null,function*(){yield this._browser._session.send("Browser.resetPermissions",{browserContextId:this._browserContextId})})}setGeolocation(e){return c(this,null,function*(){(0,yd.verifyGeolocation)(e),this._options.geolocation=e;for(let t of this.pages())yield t._delegate.updateGeolocation()})}setExtraHTTPHeaders(e){return c(this,null,function*(){this._options.extraHTTPHeaders=e;for(let t of this.pages())yield t._delegate.updateExtraHTTPHeaders()})}setOffline(e){return c(this,null,function*(){this._options.offline=e;for(let t of this.pages())yield t._delegate.updateOffline()})}_doSetHTTPCredentials(e){return c(this,null,function*(){this._options.httpCredentials=e;for(let t of this.pages())yield t._delegate.updateHttpCredentials()})}_doAddInitScript(e){return c(this,null,function*(){this._evaluateOnNewDocumentSources.push(e);for(let t of this.pages())yield t._delegate.evaluateOnNewDocument(e)})}_doExposeBinding(e){return c(this,null,function*(){for(let t of this.pages())yield t._delegate.exposeBinding(e)})}_doUpdateRequestInterception(){return c(this,null,function*(){for(let e of this.pages())yield e._delegate.updateRequestInterception()})}_doClose(){return c(this,null,function*(){(0,mr.assert)(this._browserContextId),yield this._browser._session.send("Target.disposeBrowserContext",{browserContextId:this._browserContextId}),this._browser._contexts.delete(this._browserContextId);for(let[e,t]of this._browser._serviceWorkers)t._browserContext===this&&(t.emit(bd.Worker.Events.Close),this._browser._serviceWorkers.delete(e))})}_onClosePersistent(){for(let[e,t]of this._browser._backgroundPages.entries())t._browserContext===this&&t._initializedPage&&(t.didClose(),this._browser._backgroundPages.delete(e))}_doCancelDownload(e){return c(this,null,function*(){yield this._browser._session.send("Browser.cancelDownload",{guid:e,browserContextId:this._browserContextId})})}backgroundPages(){let e=[];for(let t of this._browser._backgroundPages.values())t._browserContext===this&&t._initializedPage&&e.push(t._initializedPage);return e}serviceWorkers(){return Array.from(this._browser._serviceWorkers.values()).filter(e=>e._browserContext===this)}newCDPSession(e){return c(this,null,function*(){let t=null;if(e instanceof bd.Page)t=e._delegate._targetId;else if(e instanceof g3.Frame){let s=e._page._delegate._sessions.get(e._id);if(!s)throw new Error("This frame does not have a separate CDP session, it is a part of the parent frame's session");t=s._targetId}else throw new Error("page: expected Page or Frame");let i=yield this._browser._clientRootSession(),{sessionId:n}=yield i.send("Target.attachToTarget",{targetId:t,flatten:!0});return this._browser._connection.session(n)})}};mo.CRBrowserContext=fo;fo.CREvents={BackgroundPage:"backgroundpage",ServiceWorker:"serviceworker"}});var hk=v(Sd=>{"use strict";Object.defineProperty(Sd,"__esModule",{value:!0});Sd.Transport=void 0;var b3=G(),dk=class{constructor(e,t,i,n="le"){this._pipeWrite=void 0,this._data=Buffer.from([]),this._waitForNextTask=(0,b3.makeWaitForNextTask)(),this._closed=!1,this._bytesLeft=0,this.onmessage=void 0,this.onclose=void 0,this._endian=void 0,this._closeableStream=void 0,this._pipeWrite=e,this._endian=n,this._closeableStream=i,t.on("data",s=>this._dispatch(s)),t.on("close",()=>{this._closed=!0,this.onclose&&this.onclose()}),this.onmessage=void 0,this.onclose=void 0}send(e){if(this._closed)throw new Error("Pipe has been closed");let t=Buffer.from(e,"utf-8"),i=Buffer.alloc(4);this._endian==="be"?i.writeUInt32BE(t.length,0):i.writeUInt32LE(t.length,0),this._pipeWrite.write(i),this._pipeWrite.write(t)}close(){this._closeableStream.close()}_dispatch(e){for(this._data=Buffer.concat([this._data,e]);!(!this._bytesLeft&&this._data.length<4||(this._bytesLeft||(this._bytesLeft=this._endian==="be"?this._data.readUInt32BE(0):this._data.readUInt32LE(0),this._data=this._data.slice(4)),!this._bytesLeft||this._data.length<this._bytesLeft));){let t=this._data.slice(0,this._bytesLeft);this._data=this._data.slice(this._bytesLeft),this._bytesLeft=0,this._waitForNextTask(()=>{this.onmessage&&this.onmessage(t.toString("utf-8"))})}}};Sd.Transport=dk});var b_=v(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.AndroidDevice=_o.Android=void 0;var ir=gk(Pr()),x3=x("events"),S3=gk(x("fs")),pk=A3(xs()),fk=G(),E3=gt(),C3=Ar(),k3=po(),O3=Mt(),P3=hk(),T3=Xe(),mk=er(),y_=nt();function _k(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(_k=function(i){return i?t:e})(r)}function A3(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=_k(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function gk(r){return r&&r.__esModule?r:{default:r}}var wk=class extends y_.SdkObject{constructor(e,t){super(t.rootSdkObject,"android");this._backend=void 0,this._devices=new Map,this._timeoutSettings=void 0,this._playwrightOptions=void 0,this._backend=e,this._playwrightOptions=t,this._timeoutSettings=new mk.TimeoutSettings}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e)}devices(){return c(this,null,function*(){let e=(yield this._backend.devices()).filter(i=>i.status==="device"),t=new Set;for(let i of e){if(t.add(i.serial),this._devices.has(i.serial))continue;let n=yield ti.create(this,i);this._devices.set(i.serial,n)}for(let i of this._devices.keys())t.has(i)||this._devices.delete(i);return[...this._devices.values()]})}_deviceClosed(e){this._devices.delete(e.serial)}};_o.Android=wk;var ti=class extends y_.SdkObject{constructor(e,t,i){super(e,"android-device");this._backend=void 0,this.model=void 0,this.serial=void 0,this._driverPromise=void 0,this._lastId=0,this._callbacks=new Map,this._pollingWebViews=void 0,this._timeoutSettings=void 0,this._webViews=new Map,this._browserConnections=new Set,this._android=void 0,this._isClosed=!1,this._android=e,this._backend=t,this.model=i,this.serial=t.serial,this._timeoutSettings=new mk.TimeoutSettings(e._timeoutSettings)}static create(e,t){return c(this,null,function*(){yield t.init();let i=yield t.runCommand("shell:getprop ro.product.model"),n=new ti(e,t,i.toString().trim());return yield n._init(),n})}_init(){return c(this,null,function*(){yield this._refreshWebViews();let e=()=>{this._pollingWebViews=setTimeout(()=>this._refreshWebViews().then(e).catch(()=>{}),500)};e()})}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e)}shell(e){return c(this,null,function*(){let t=yield this._backend.runCommand(`shell:${e}`);return yield this._refreshWebViews(),t})}open(e){return c(this,null,function*(){return yield this._backend.open(`${e}`)})}screenshot(){return c(this,null,function*(){return yield this._backend.runCommand("shell:screencap -p")})}_driver(){return c(this,null,function*(){return this._driverPromise||(this._driverPromise=this._installDriver()),this._driverPromise})}_installDriver(){return c(this,null,function*(){(0,ir.default)("pw:android")("Stopping the old driver"),yield this.shell("am force-stop com.microsoft.playwright.androiddriver"),(0,ir.default)("pw:android")("Uninstalling the old driver"),yield this.shell("cmd package uninstall com.microsoft.playwright.androiddriver"),yield this.shell("cmd package uninstall com.microsoft.playwright.androiddriver.test"),(0,ir.default)("pw:android")("Installing the new driver");for(let i of["android-driver.apk","android-driver-target.apk"])yield this.installApk(yield S3.default.promises.readFile(x.resolve(`../../../bin/${i}`)));(0,ir.default)("pw:android")("Starting the new driver"),this.shell("am instrument -w com.microsoft.playwright.androiddriver.test/androidx.test.runner.AndroidJUnitRunner").catch(i=>(0,ir.default)("pw:android")(i));let e=yield this._waitForLocalAbstract("playwright_android_driver_socket"),t=new P3.Transport(e,e,e,"be");return t.onmessage=i=>{let n=JSON.parse(i),{id:s,result:o,error:l}=n,u=this._callbacks.get(s);!u||(l?u.reject(new Error(l)):u.fulfill(o),this._callbacks.delete(s))},t})}_waitForLocalAbstract(e){return c(this,null,function*(){let t;for((0,ir.default)("pw:android")(`Polling the socket localabstract:${e}`);!t;)try{t=yield this._backend.open(`localabstract:${e}`)}catch(i){yield new Promise(n=>setTimeout(n,250))}return(0,ir.default)("pw:android")(`Connected to localabstract:${e}`),t})}send(i){return c(this,arguments,function*(e,t={}){t.timeout=this._timeoutSettings.timeout(t);let n=yield this._driver(),s=++this._lastId,o=new Promise((l,u)=>this._callbacks.set(s,{fulfill:l,reject:u}));return n.send(JSON.stringify({id:s,method:e,params:t})),o})}close(){return c(this,null,function*(){this._isClosed=!0,this._pollingWebViews&&clearTimeout(this._pollingWebViews);for(let e of this._browserConnections)yield e.close();this._driverPromise&&(yield this._driver()).close(),yield this._backend.close(),this._android._deviceClosed(this),this.emit(ti.Events.Closed)})}launchBrowser(e="com.android.chrome",t){return c(this,null,function*(){(0,ir.default)("pw:android")("Force-stopping",e),yield this._backend.runCommand(`shell:am force-stop ${e}`);let i="playwright-"+(0,fk.createGuid)(),n=`_ --disable-fre --no-default-browser-check --no-first-run --remote-debugging-socket-name=${i}`;return(0,ir.default)("pw:android")("Starting",e,n),yield this._backend.runCommand(`shell:echo "${n}" > /data/local/tmp/chrome-command-line`),yield this._backend.runCommand(`shell:am start -n ${e}/com.google.android.apps.chrome.Main about:blank`),yield this._connectToBrowser(i,t)})}connectToWebView(e){return c(this,null,function*(){if(!this._webViews.get(e))throw new Error("WebView has been closed");return yield this._connectToBrowser(`webview_devtools_remote_${e}`)})}_connectToBrowser(i){return c(this,arguments,function*(e,t={}){let n=yield this._waitForLocalAbstract(e),s=new vk(this,n);yield s._init(),this._browserConnections.add(s);let o=R(y({},this._android._playwrightOptions),{name:"clank",isChromium:!0,slowMo:0,persistent:R(y({},t),{noDefaultViewport:!0}),artifactsDir:"",downloadsPath:"",tracesDir:"",browserProcess:new yk(s),proxy:t.proxy,protocolLogger:O3.helper.debugProtocolLogger(),browserLogsCollector:new T3.RecentLogsCollector});(0,E3.validateBrowserContextOptions)(t,o);let l=yield k3.CRBrowser.connect(s,o),u=new C3.ProgressController((0,y_.internalCallMetadata)(),this),d=l._defaultContext;yield u.run(h=>c(this,null,function*(){yield d._loadDefaultContextAsIs(h)}));{let p=d.pages()[0]._delegate;yield p._mainFrameSession._client.send("Emulation.setDeviceMetricsOverride",{mobile:!1,width:0,height:0,deviceScaleFactor:0}),yield p._mainFrameSession._client.send("Emulation.clearDeviceMetricsOverride",{})}return d})}webViews(){return[...this._webViews.values()]}installApk(e,t){return c(this,null,function*(){let i=t&&t.args?t.args:["-r","-t","-S"];(0,ir.default)("pw:android")("Opening install socket");let n=yield this._backend.open(`shell:cmd package install ${i.join(" ")} ${e.length}`);(0,ir.default)("pw:android")("Writing driver bytes: "+e.length),yield n.write(e);let s=yield new Promise(o=>n.on("data",o));(0,ir.default)("pw:android")("Written driver bytes: "+s),n.close()})}push(e,t,i=420){return c(this,null,function*(){let n=yield this._backend.open("sync:"),s=(h,p)=>c(this,null,function*(){let f=Buffer.alloc(h.length+4);f.write(h,0),f.writeUInt32LE(p,h.length),yield n.write(f)}),o=(h,p)=>c(this,null,function*(){yield s(h,p.length),yield n.write(p)});yield o("SEND",Buffer.from(`${t},${i}`));let l=65535;for(let h=0;h<e.length;h+=l)yield o("DATA",e.slice(h,h+l));yield s("DONE",Date.now()/1e3|0);let d=(yield new Promise(h=>n.once("data",h))).slice(0,4).toString();if(d!=="OKAY")throw new Error("Could not push: "+d);n.close()})}_refreshWebViews(){return c(this,null,function*(){let e=(yield this._backend.runCommand("shell:cat /proc/net/unix | grep webview_devtools_remote")).toString().split(`
`);if(this._isClosed)return;let t=new Set;for(let i of e){let n=i.match(/[^@]+@webview_devtools_remote_(\d+)/);if(!n)continue;let s=+n[1];t.add(s)}for(let i of t){if(this._webViews.has(i))continue;let n=(yield this._backend.runCommand(`shell:ps -A | grep ${i}`)).toString().split(`
`);if(this._isClosed)return;let s="";for(let l of n){let u=l.match(/[^\s]+\s+(\d+).*$/);!u||+u[1]!==i||(s=l.substring(l.lastIndexOf(" ")+1))}let o={pid:i,pkg:s};this._webViews.set(i,o),this.emit(ti.Events.WebViewAdded,o)}for(let i of this._webViews.keys())t.has(i)||(this._webViews.delete(i),this.emit(ti.Events.WebViewRemoved,i))})}};_o.AndroidDevice=ti;ti.Events={WebViewAdded:"webViewAdded",WebViewRemoved:"webViewRemoved",Closed:"closed"};var vk=class extends x3.EventEmitter{constructor(e,t){super();this.device=void 0,this._socket=void 0,this._receiver=void 0,this._waitForNextTask=(0,fk.makeWaitForNextTask)(),this.onmessage=void 0,this.onclose=void 0,this.setMaxListeners(0),this.device=e,this._socket=t,this._socket.on("close",()=>{this._waitForNextTask(()=>{this.onclose&&this.onclose()})}),this._receiver=new pk.Receiver,this._receiver.on("message",i=>{this._waitForNextTask(()=>{this.onmessage&&this.onmessage(JSON.parse(i))})})}_init(){return c(this,null,function*(){yield this._socket.write(Buffer.from(`GET /devtools/browser HTTP/1.1\r
Upgrade: WebSocket\r
Connection: Upgrade\r
Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==\r
Sec-WebSocket-Version: 13\r
\r
`)),yield new Promise(e=>this._socket.once("data",e)),this._socket.on("data",e=>this._receiver._write(e,"binary",()=>{}))})}send(e){return c(this,null,function*(){yield this._socket.write(I3(JSON.stringify(e)))})}close(){return c(this,null,function*(){this._socket.close()})}};function I3(r){return pk.Sender.frame(Buffer.from(r),{opcode:1,mask:!0,fin:!0,readOnly:!0})[0]}var yk=class{constructor(e){this._browser=void 0,this.onclose=void 0,this._browser=e}kill(){return c(this,null,function*(){})}close(){return c(this,null,function*(){yield this._browser.close()})}}});var Ok=v(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});Cd.AdbBackend=void 0;var go=Sk(x("assert")),ac=Sk(Pr()),bk=R3(x("net")),M3=x("events"),F3=G();function xk(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(xk=function(i){return i?t:e})(r)}function R3(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=xk(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function Sk(r){return r&&r.__esModule?r:{default:r}}var Ek=class{devices(){return c(this,null,function*(){return(yield kk("host:devices")).toString().trim().split(`
`).map(i=>{let[n,s]=i.trim().split("	");return new Ck(n,s)})})}};Cd.AdbBackend=Ek;var Ck=class{constructor(e,t){this.serial=void 0,this.status=void 0,this.serial=e,this.status=t}init(){return c(this,null,function*(){})}close(){return c(this,null,function*(){})}runCommand(e){return kk(e,this.serial)}open(e){return c(this,null,function*(){let t=yield N3(e,this.serial);return t.becomeSocket(),t})}};function kk(r,e){return c(this,null,function*(){(0,ac.default)("pw:adb:runCommand")(r,e);let t=new x_(r,bk.createConnection({port:5037}));if(e){yield t.write(Ed(`host:transport:${e}`));let s=yield t.read(4);(0,go.default)(s.toString()==="OKAY",s.toString())}yield t.write(Ed(r));let i=yield t.read(4);(0,go.default)(i.toString()==="OKAY",i.toString());let n;if(r.startsWith("shell:"))n=yield t.readAll();else{let s=parseInt((yield t.read(4)).toString(),16);n=yield t.read(s)}return t.close(),n})}function N3(r,e){return c(this,null,function*(){let t=new x_(r,bk.createConnection({port:5037}));if(e){yield t.write(Ed(`host:transport:${e}`));let n=yield t.read(4);(0,go.default)(n.toString()==="OKAY",n.toString())}yield t.write(Ed(r));let i=yield t.read(4);return(0,go.default)(i.toString()==="OKAY",i.toString()),t})}function Ed(r){let e=r.length.toString(16);return e="0".repeat(4-e.length)+e,Buffer.from(e+r)}var x_=class extends M3.EventEmitter{constructor(e,t){super();this.guid=(0,F3.createGuid)(),this._socket=void 0,this._buffer=Buffer.from([]),this._isSocket=!1,this._notifyReader=void 0,this._connectPromise=void 0,this._isClosed=!1,this._command=void 0,this._command=e,this._socket=t,this._connectPromise=new Promise(i=>this._socket.on("connect",i)),this._socket.on("data",i=>{if((0,ac.default)("pw:adb:data")(i.toString()),this._isSocket){this.emit("data",i);return}this._buffer=Buffer.concat([this._buffer,i]),this._notifyReader&&this._notifyReader()}),this._socket.on("close",()=>{this._isClosed=!0,this._notifyReader&&this._notifyReader(),this.close(),this.emit("close")}),this._socket.on("error",i=>this.emit("error",i))}write(e){return c(this,null,function*(){(0,ac.default)("pw:adb:send")(e.toString().substring(0,100)+"..."),yield this._connectPromise,yield new Promise(t=>this._socket.write(e,t))})}close(){this._isClosed||((0,ac.default)("pw:adb")("Close "+this._command),this._socket.destroy())}read(e){return c(this,null,function*(){for(yield this._connectPromise,(0,go.default)(!this._isSocket,"Can not read by length in socket mode");this._buffer.length<e;)yield new Promise(i=>this._notifyReader=i);let t=this._buffer.slice(0,e);return this._buffer=this._buffer.slice(e),(0,ac.default)("pw:adb:recv")(t.toString().substring(0,100)+"..."),t})}readAll(){return c(this,null,function*(){for(;!this._isClosed;)yield new Promise(e=>this._notifyReader=e);return this._buffer})}becomeSocket(){(0,go.default)(!this._buffer.length),this._isSocket=!0}}});var Pd=v(Od=>{"use strict";Object.defineProperty(Od,"__esModule",{value:!0});Od.WebSocketTransport=void 0;var D3=q3(xs()),L3=G();function q3(r){return r&&r.__esModule?r:{default:r}}var kd=class{static connect(e,t,i){return c(this,null,function*(){e.log(`<ws connecting> ${t}`);let n=new kd(e,t,i),s=!1;return e.cleanupWhenAborted(()=>c(this,null,function*(){s||(yield n.closeAndWait().catch(o=>null))})),yield new Promise((o,l)=>{n._ws.addEventListener("open",()=>c(this,null,function*(){e.log(`<ws connected> ${t}`),o(n)})),n._ws.addEventListener("error",u=>{e.log(`<ws connect error> ${t} ${u.message}`),l(new Error("WebSocket error: "+u.message)),n._ws.close()})}),s=!0,n})}constructor(e,t,i){this._ws=void 0,this._progress=void 0,this.onmessage=void 0,this.onclose=void 0,this.wsEndpoint=void 0,this.wsEndpoint=t,this._ws=new D3.default(t,[],{perMessageDeflate:!1,maxPayload:256*1024*1024,handshakeTimeout:e.timeUntilDeadline(),headers:i}),this._progress=e;let n=(0,L3.makeWaitForNextTask)();this._ws.addEventListener("message",s=>{n(()=>{try{this.onmessage&&this.onmessage.call(null,JSON.parse(s.data))}catch(o){this._ws.close()}})}),this._ws.addEventListener("close",s=>{this._progress&&this._progress.log(`<ws disconnected> ${t}`),this.onclose&&this.onclose.call(null)}),this._ws.addEventListener("error",()=>{})}send(e){this._ws.send(JSON.stringify(e))}close(){this._progress&&this._progress.log(`<ws disconnecting> ${this._ws.url}`),this._ws.close()}closeAndWait(){return c(this,null,function*(){let e=new Promise(t=>this._ws.once("close",t));this.close(),yield e})}};Od.WebSocketTransport=kd});var Ak=v(Td=>{"use strict";Object.defineProperty(Td,"__esModule",{value:!0});Td.PipeTransport=void 0;var B3=G(),Pk=Xe(),Tk=class{constructor(e,t){this._pipeWrite=void 0,this._pendingMessage="",this._waitForNextTask=(0,B3.makeWaitForNextTask)(),this._closed=!1,this.onmessage=void 0,this.onclose=void 0,this._pipeWrite=e,t.on("data",i=>this._dispatch(i)),t.on("close",()=>{this._closed=!0,this.onclose&&this.onclose.call(null)}),t.on("error",i=>Pk.debugLogger.log("error",i)),e.on("error",i=>Pk.debugLogger.log("error",i)),this.onmessage=void 0,this.onclose=void 0}send(e){if(this._closed)throw new Error("Pipe has been closed");this._pipeWrite.write(JSON.stringify(e)),this._pipeWrite.write("\0")}close(){throw new Error("unimplemented")}_dispatch(e){let t=e.indexOf("\0");if(t===-1){this._pendingMessage+=e.toString();return}let i=this._pendingMessage+e.toString(void 0,0,t);this._waitForNextTask(()=>{this.onmessage&&this.onmessage.call(null,JSON.parse(i))});let n=t+1;for(t=e.indexOf("\0",n);t!==-1;){let s=e.toString(void 0,n,t);this._waitForNextTask(()=>{this.onmessage&&this.onmessage.call(null,JSON.parse(s))}),n=t+1,t=e.indexOf("\0",n)}this._pendingMessage=e.toString(void 0,n)}};Td.PipeTransport=Tk});var Md=v(Id=>{"use strict";Object.defineProperty(Id,"__esModule",{value:!0});Id.BrowserType=void 0;var cc=qk(x("fs")),Ik=$3(x("os")),Ad=qk(x("path")),Mk=gt(),Fk=Qa(),H3=Pd(),Rk=lo(),j3=Ak(),Nk=Ar(),S_=er(),E_=G(),Dk=Mt(),W3=Xe(),U3=nt();function Lk(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(Lk=function(i){return i?t:e})(r)}function $3(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=Lk(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function qk(r){return r&&r.__esModule?r:{default:r}}var z3=Ad.default.join(Ik.tmpdir(),"playwright-artifacts-"),Bk=class extends U3.SdkObject{constructor(e,t){super(t.rootSdkObject,"browser-type");this._name=void 0,this._playwrightOptions=void 0,this.attribution.browserType=this,this._playwrightOptions=t,this._name=e}executablePath(){return Fk.registry.findExecutable(this._name).executablePath()||""}name(){return this._name}launch(e,t,i){return c(this,null,function*(){t=this._validateLaunchOptions(t);let n=new Nk.ProgressController(e,this);return n.setLogName("browser"),yield n.run(o=>{let l=t.__testHookSeleniumRemoteURL||process.env.SELENIUM_REMOTE_URL;return l?this._launchWithSeleniumHub(o,l,t):this._innerLaunchWithRetries(o,t,void 0,Dk.helper.debugProtocolLogger(i)).catch(u=>{throw this._rewriteStartupError(u)})},S_.TimeoutSettings.timeout(t))})}launchPersistentContext(e,t,i){return c(this,null,function*(){i=this._validateLaunchOptions(i);let n=new Nk.ProgressController(e,this),s=i;return n.setLogName("browser"),(yield n.run(l=>this._innerLaunchWithRetries(l,i,s,Dk.helper.debugProtocolLogger(),t).catch(u=>{throw this._rewriteStartupError(u)}),S_.TimeoutSettings.timeout(i)))._defaultContext})}_innerLaunchWithRetries(e,t,i,n,s){return c(this,null,function*(){try{return this._innerLaunch(e,t,i,n,s)}catch(o){if((typeof o=="object"&&typeof o.message=="string"?o.message:"").includes("Inconsistency detected by ld.so"))return e.log("<restarting browser due to hitting race condition in glibc>"),this._innerLaunch(e,t,i,n,s);throw o}})}_innerLaunch(e,t,i,n,s){return c(this,null,function*(){t.proxy=t.proxy?(0,Mk.normalizeProxySettings)(t.proxy):void 0;let o=new W3.RecentLogsCollector,{browserProcess:l,artifactsDir:u,transport:d}=yield this._launchProcess(e,t,!!i,o,s);t.__testHookBeforeCreateBrowser&&(yield t.__testHookBeforeCreateBrowser());let h=R(y({},this._playwrightOptions),{name:this._name,isChromium:this._name==="chromium",channel:t.channel,slowMo:t.slowMo,persistent:i,headful:!t.headless,artifactsDir:u,downloadsPath:t.downloadsPath||u,tracesDir:t.tracesDir||u,browserProcess:l,customExecutablePath:t.executablePath,proxy:t.proxy,protocolLogger:n,browserLogsCollector:o,wsEndpoint:t.useWebSocket?d.wsEndpoint:void 0});i&&(0,Mk.validateBrowserContextOptions)(i,h),V3(t,h);let p=yield this._connectToTransport(d,h);return i&&!t.ignoreAllDefaultArgs&&(yield p._defaultContext._loadDefaultContext(e)),p})}_launchProcess(e,t,i,n,s){return c(this,null,function*(){var o;let{ignoreDefaultArgs:l,ignoreAllDefaultArgs:u,args:d=[],executablePath:h=null,handleSIGINT:p=!0,handleSIGTERM:f=!0,handleSIGHUP:m=!0}=t,_=t.env?(0,Rk.envArrayToObject)(t.env):process.env,g=[];t.downloadsPath&&(yield cc.default.promises.mkdir(t.downloadsPath,{recursive:!0})),t.tracesDir&&(yield cc.default.promises.mkdir(t.tracesDir,{recursive:!0}));let w=yield cc.default.promises.mkdtemp(z3);g.push(w),s?(yield(0,E_.existsAsync)(s))||(yield cc.default.promises.mkdir(s,{recursive:!0,mode:448})):(s=yield cc.default.promises.mkdtemp(Ad.default.join(Ik.tmpdir(),`playwright_${this._name}dev_profile-`)),g.push(s));let b=[];u?b.push(...d):l?b.push(...this._defaultArgs(t,i,s).filter(I=>l.indexOf(I)===-1)):b.push(...this._defaultArgs(t,i,s));let C;if(h){if(!(yield(0,E_.existsAsync)(h)))throw new Error(`Failed to launch ${this._name} because executable doesn't exist at ${h}`);C=h}else{let I=Fk.registry.findExecutable(t.channel||this._name);if(!I||I.browserName!==this._name)throw new Error(`Unsupported ${this._name} channel "${t.channel}"`);C=I.executablePathOrDie(this._playwrightOptions.sdkLanguage),yield I.validateHostRequirements()}let E,N=t.useWebSocket||((o=t.args)===null||o===void 0?void 0:o.some(I=>I.startsWith("--remote-debugging-port"))),P=N?new Promise(I=>E=I):void 0,L,S,{launchedProcess:T,gracefullyClose:F,kill:q}=yield(0,Rk.launchProcess)({command:C,args:b,env:this._amendEnvironment(_,s,C,b),handleSIGINT:p,handleSIGTERM:f,handleSIGHUP:m,log:I=>{if(E){let Z=I.match(/DevTools listening on (.*)/);Z&&E(Z[1])}e.log(I),n.log(I)},stdio:"pipe",tempDirectories:g,attemptToGracefullyClose:()=>c(this,null,function*(){t.__testHookGracefullyClose&&(yield t.__testHookGracefullyClose()),this._attemptToGracefullyCloseBrowser(L)}),onExit:(I,Z)=>{S&&S.onclose&&S.onclose(I,Z)}});function z(I){return c(this,null,function*(){let Z;try{yield Promise.race([F(),new Promise((j,H)=>Z=setTimeout(H,I))])}catch(j){yield q().catch(H=>{})}finally{clearTimeout(Z)}})}S={onclose:void 0,process:T,close:()=>z(t.__testHookBrowserCloseTimeout||S_.DEFAULT_TIMEOUT),kill:q},e.cleanupWhenAborted(()=>z(e.timeUntilDeadline()));let Y;if(N&&(Y=yield P),t.useWebSocket)L=yield H3.WebSocketTransport.connect(e,Y);else{let I=T.stdio;L=new j3.PipeTransport(I[3],I[4])}return{browserProcess:S,artifactsDir:w,transport:L}})}connectOverCDP(e,t,i,n){return c(this,null,function*(){throw new Error("CDP connections are only supported by Chromium")})}_launchWithSeleniumHub(e,t,i){return c(this,null,function*(){throw new Error("Connecting to SELENIUM_REMOTE_URL is only supported by Chromium")})}_validateLaunchOptions(e){let{devtools:t=!1}=e,{headless:i=!t,downloadsPath:n,proxy:s}=e;return(0,E_.debugMode)()&&(i=!1),n&&!Ad.default.isAbsolute(n)&&(n=Ad.default.join(process.cwd(),n)),this._playwrightOptions.socksProxyPort&&(s={server:`socks5://127.0.0.1:${this._playwrightOptions.socksProxyPort}`}),R(y({},e),{devtools:t,headless:i,downloadsPath:n,proxy:s})}};Id.BrowserType=Bk;function V3(r,e){for(let[t,i]of Object.entries(r))t.startsWith("__testHook")&&(e[t]=i)}});var Wk=v(Fd=>{"use strict";Object.defineProperty(Fd,"__esModule",{value:!0});Fd.CRDevTools=void 0;var Hk=G3(x("fs"));function G3(r){return r&&r.__esModule?r:{default:r}}var C_="__pw_devtools__",jk=class{constructor(e){this._preferencesPath=void 0,this._prefs=void 0,this._savePromise=void 0,this.__testHookOnBinding=void 0,this._preferencesPath=e,this._savePromise=Promise.resolve()}install(e){e.on("Runtime.bindingCalled",t=>c(this,null,function*(){if(t.name!==C_)return;let i=JSON.parse(t.payload),n;if(this.__testHookOnBinding&&this.__testHookOnBinding(i),i.method==="getPreferences"){if(this._prefs===void 0)try{let s=yield Hk.default.promises.readFile(this._preferencesPath,"utf8");this._prefs=JSON.parse(s)}catch(s){this._prefs={}}n=this._prefs}else i.method==="setPreference"?(this._prefs[i.params[0]]=i.params[1],this._save()):i.method==="removePreference"?(delete this._prefs[i.params[0]],this._save()):i.method==="clearPreferences"&&(this._prefs={},this._save());e.send("Runtime.evaluate",{expression:`window.DevToolsAPI.embedderMessageAck(${i.id}, ${JSON.stringify(n)})`,contextId:t.executionContextId}).catch(s=>null)})),Promise.all([e.send("Runtime.enable"),e.send("Runtime.addBinding",{name:C_}),e.send("Page.enable"),e.send("Page.addScriptToEvaluateOnNewDocument",{source:`
        (() => {
          const init = () => {
            // Lazy init happens when InspectorFrontendHost is initialized.
            // At this point DevToolsHost is ready to be used.
            const host = window.DevToolsHost;
            const old = host.sendMessageToEmbedder.bind(host);
            host.sendMessageToEmbedder = message => {
              if (['getPreferences', 'setPreference', 'removePreference', 'clearPreferences'].includes(JSON.parse(message).method))
                window.${C_}(message);
              else
                old(message);
            };
          };
          let value;
          Object.defineProperty(window, 'InspectorFrontendHost', {
            configurable: true,
            enumerable: true,
            get() { return value; },
            set(v) { value = v; init(); },
          });
        })()
      `}),e.send("Runtime.runIfWaitingForDebugger")]).catch(t=>null)}_save(){this._savePromise=this._savePromise.then(()=>c(this,null,function*(){yield Hk.default.promises.writeFile(this._preferencesPath,JSON.stringify(this._prefs)).catch(e=>null)}))}};Fd.CRDevTools=jk});var Kk=v(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});Rd.Chromium=void 0;var K3=lc(x("fs")),Uk=lc(x("os")),$k=lc(x("path")),zk=po(),Vk=lo(),J3=so(),X3=Bt(),Y3=Md(),Z3=Pd(),Q3=Wk(),wo=G(),eH=Xe(),tH=Ar(),rH=er(),iH=Mt(),nH=lc(x("http")),sH=lc(x("https")),oH=Qa();function lc(r){return r&&r.__esModule?r:{default:r}}var aH=$k.default.join(Uk.default.tmpdir(),"playwright-artifacts-"),Gk=class extends Y3.BrowserType{constructor(e){super("chromium",e);this._devtools=void 0,(0,wo.debugMode)()&&(this._devtools=this._createDevTools())}connectOverCDP(e,t,i,n){return c(this,null,function*(){let s=new tH.ProgressController(e,this);return s.setLogName("browser"),s.run(o=>c(this,null,function*(){return yield this._connectOverCDPInternal(o,t,i)}),rH.TimeoutSettings.timeout({timeout:n}))})}_connectOverCDPInternal(e,t,i,n){return c(this,null,function*(){let s;i.headers&&(s=(0,wo.headersArrayToObject)(i.headers,!1));let o=yield K3.default.promises.mkdtemp(aH),l=yield lH(t);e.throwIfAborted();let u=yield Z3.WebSocketTransport.connect(e,l,s),d=()=>c(this,null,function*(){yield(0,wo.removeFolders)([o]),yield u.closeAndWait(),yield n==null?void 0:n()}),h={close:d,kill:d},p=R(y({},this._playwrightOptions),{slowMo:i.slowMo,name:"chromium",isChromium:!0,persistent:{noDefaultViewport:!0},browserProcess:h,protocolLogger:iH.helper.debugProtocolLogger(),browserLogsCollector:new eH.RecentLogsCollector,artifactsDir:o,downloadsPath:o,tracesDir:o});return e.throwIfAborted(),yield zk.CRBrowser.connect(u,p)})}_createDevTools(){let e=oH.registry.findExecutable("chromium").directory;return e?new Q3.CRDevTools($k.default.join(e,"devtools-preferences.json")):void 0}_connectToTransport(e,t){return c(this,null,function*(){let i=this._devtools;return t.__testHookForDevTools&&(i=this._createDevTools(),yield t.__testHookForDevTools(i)),zk.CRBrowser.connect(e,t,i)})}_rewriteStartupError(e){return!e.message.includes("crbug.com/357670")&&!e.message.includes("No usable sandbox!")&&!e.message.includes("crbug.com/638180")?e:(0,X3.rewriteErrorMessage)(e,["Chromium sandboxing failed!","================================","To workaround sandboxing issues, do either of the following:","  - (preferred): Configure environment to support sandboxing: https://github.com/microsoft/playwright/blob/master/docs/troubleshooting.md","  - (alternative): Launch Chromium without sandbox using 'chromiumSandbox: false' option","================================",""].join(`
`))}_amendEnvironment(e,t,i,n){return e}_attemptToGracefullyCloseBrowser(e){let t={method:"Browser.close",id:J3.kBrowserCloseMessageId,params:{}};e.send(t)}_launchWithSeleniumHub(e,t,i){return c(this,null,function*(){t.endsWith("/")||(t=t+"/");let n=this._innerDefaultArgs(i);n.push("--remote-debugging-port=0");let s={browserName:"chrome","goog:chromeOptions":{args:n}};e.log(`<connecting to selenium> ${t}`);let o=yield(0,wo.fetchData)({url:t+"session",method:"POST",data:JSON.stringify({desiredCapabilities:s,capabilities:{alwaysMatch:s}}),timeout:e.timeUntilDeadline()},h=>c(this,null,function*(){let p=yield(0,wo.streamToString)(h),f="";try{let m=JSON.parse(p);f=m.value.localizedMessage||m.value.message}catch(m){}return new Error(`Error connecting to Selenium at ${t}: ${f}`)})),l=JSON.parse(o).value,u=l.sessionId;e.log(`<connected to selenium> sessionId=${u}`);let d=()=>c(this,null,function*(){e.log(`<disconnecting from selenium> sessionId=${u}`),yield(0,wo.fetchData)({url:t+"session/"+u,method:"DELETE"}).catch(h=>e.log(`<error disconnecting from selenium>: ${h}`)),e.log(`<disconnected from selenium> sessionId=${u}`),Vk.gracefullyCloseSet.delete(d)});Vk.gracefullyCloseSet.add(d);try{let h=l.capabilities,p=h["goog:chromeOptions"],f=p&&typeof p=="object"?p:void 0,m=f&&typeof f.debuggerAddress=="string"?f.debuggerAddress:void 0,_=typeof p=="string"?p:void 0,g=h["se:cdp"]||m||_;return["ws://","wss://","http://","https://"].some(w=>g.startsWith(w))||(g="http://"+g),this._connectOverCDPInternal(e,g,{slowMo:i.slowMo},d)}catch(h){throw yield d(),h}})}_defaultArgs(e,t,i){let n=this._innerDefaultArgs(e);return n.push(`--user-data-dir=${i}`),e.useWebSocket?n.push("--remote-debugging-port=0"):n.push("--remote-debugging-pipe"),t?n.push("about:blank"):n.push("--no-startup-window"),n}_innerDefaultArgs(e){let{args:t=[],proxy:i}=e;if(t.find(o=>o.startsWith("--user-data-dir")))throw new Error("Pass userDataDir parameter to `browserType.launchPersistentContext(userDataDir, ...)` instead of specifying --user-data-dir argument");if(t.find(o=>o.startsWith("--remote-debugging-pipe")))throw new Error("Playwright manages remote debugging connection itself.");if(t.find(o=>!o.startsWith("-")))throw new Error("Arguments can not specify page to be opened");let s=[...cH];if(Uk.default.platform()==="darwin"&&s.push("--enable-use-zoom-for-dsf=false"),e.devtools&&s.push("--auto-open-devtools-for-tabs"),e.headless&&s.push("--headless","--hide-scrollbars","--mute-audio","--blink-settings=primaryHoverType=2,availableHoverTypes=2,primaryPointerType=4,availablePointerTypes=4"),e.chromiumSandbox!==!0&&s.push("--no-sandbox"),i){let o=new URL(i.server);o.protocol==="socks5:"&&!this._playwrightOptions.socksProxyPort&&s.push(`--host-resolver-rules="MAP * ~NOTFOUND , EXCLUDE ${o.hostname}"`),s.push(`--proxy-server=${i.server}`);let u=[];this._playwrightOptions.socksProxyPort&&u.push("<-loopback>"),i.bypass&&u.push(...i.bypass.split(",").map(d=>d.trim()).map(d=>d.startsWith(".")?"*"+d:d)),u.length>0&&s.push(`--proxy-bypass-list=${u.join(";")}`)}return s.push(...t),s}};Rd.Chromium=Gk;var cH=["--disable-background-networking","--enable-features=NetworkService,NetworkServiceInProcess","--disable-background-timer-throttling","--disable-backgrounding-occluded-windows","--disable-breakpad","--disable-client-side-phishing-detection","--disable-component-extensions-with-background-pages","--disable-default-apps","--disable-dev-shm-usage","--disable-extensions","--disable-features=ImprovedCookieControls,LazyFrameLoading,GlobalMediaControls,DestroyProfileOnBrowserClose,MediaRouter","--allow-pre-commit-input","--disable-hang-monitor","--disable-ipc-flooding-protection","--disable-popup-blocking","--disable-prompt-on-repost","--disable-renderer-backgrounding","--disable-sync","--force-color-profile=srgb","--metrics-recording-only","--no-first-run","--enable-automation","--password-store=basic","--use-mock-keychain","--no-service-autorun"];function lH(r){return c(this,null,function*(){if(r.startsWith("ws"))return r;let e=r.endsWith("/")?`${r}json/version/`:`${r}/json/version/`,t=r.startsWith("https")?sH.default:nH.default,i=yield new Promise((n,s)=>{t.get(e,o=>{(o.statusCode<200||o.statusCode>=400)&&s(new Error(`Unexpected status ${o.statusCode} when connecting to ${e}.
This does not look like a DevTools server, try connecting via ws://.`));let l="";o.on("data",u=>l+=u),o.on("end",()=>n(l))}).on("error",s)});return JSON.parse(i).webSocketDebuggerUrl})}});var Zk=v((F9,Yk)=>{var Jk=x("fs"),k_=x("path"),Xk=k_.join(__dirname,"path.txt");function uH(){let r;if(Jk.existsSync(Xk)&&(r=Jk.readFileSync(Xk,"utf-8")),process.env.ELECTRON_OVERRIDE_DIST_PATH)return k_.join(process.env.ELECTRON_OVERRIDE_DIST_PATH,r||"electron");if(r)return k_.join(__dirname,"dist",r);throw new Error("Electron failed to install correctly, please delete node_modules/electron and try installing again")}Yk.exports=uH()});var A_=v(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.Electron=vo.ElectronApplication=void 0;var dH=P_(x("fs")),Qk=P_(x("os")),hH=P_(x("path")),pH=po(),fH=so(),mH=sd(),eO=oO(xi()),tO=er(),rO=Pd(),iO=lo(),_H=gt(),nO=Ar(),O_=Mt(),uc=_t(),gH=oO(x("readline")),wH=Xe(),Nd=nt();function sO(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(sO=function(i){return i?t:e})(r)}function oO(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=sO(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function P_(r){return r&&r.__esModule?r:{default:r}}var vH=hH.default.join(Qk.default.tmpdir(),"playwright-artifacts-"),jn=class extends Nd.SdkObject{constructor(e,t,i){super(e,"electron-app");this._browserContext=void 0,this._nodeConnection=void 0,this._nodeSession=void 0,this._nodeExecutionContext=void 0,this._nodeElectronHandlePromise=void 0,this._timeoutSettings=new tO.TimeoutSettings,this._browserContext=t._defaultContext,this._browserContext.on(_H.BrowserContext.Events.Close,()=>{Promise.resolve().then(()=>this.emit(jn.Events.Close))}),this._nodeConnection=i,this._nodeSession=i.rootSession,this._nodeElectronHandlePromise=new Promise(n=>{this._nodeSession.on("Runtime.executionContextCreated",s=>c(this,null,function*(){s.context.auxData&&s.context.auxData.isDefault&&(this._nodeExecutionContext=new eO.ExecutionContext(this,new mH.CRExecutionContext(this._nodeSession,s.context)),n(yield eO.evaluate(this._nodeExecutionContext,!1,"process.mainModule.require('electron')")))}))}),this._nodeSession.send("Runtime.enable",{}).catch(n=>{})}context(){return this._browserContext}close(){return c(this,null,function*(){let t=new nO.ProgressController((0,Nd.internalCallMetadata)(),this).run(n=>O_.helper.waitForEvent(n,this,jn.Events.Close).promise,this._timeoutSettings.timeout({}));yield(yield this._nodeElectronHandlePromise).evaluate(({app:n})=>n.quit()),this._nodeConnection.close(),yield t})}browserWindow(e){return c(this,null,function*(){let t=e._delegate._targetId;return yield(yield this._nodeElectronHandlePromise).evaluateHandle(({BrowserWindow:n,webContents:s},o)=>{let l=s.fromDevToolsTargetId(o);return n.fromWebContents(l)},t)})}};vo.ElectronApplication=jn;jn.Events={Close:"close"};var aO=class extends Nd.SdkObject{constructor(e){super(e.rootSdkObject,"electron");this._playwrightOptions=void 0,this._playwrightOptions=e}launch(e){return c(this,null,function*(){let{args:t=[]}=e,i=new nO.ProgressController((0,Nd.internalCallMetadata)(),this);return i.setLogName("browser"),i.run(n=>c(this,null,function*(){let s,o=["--inspect=0","--remote-debugging-port=0",...t];Qk.default.platform()==="linux"&&process.geteuid&&process.geteuid()===0&&o.indexOf("--no-sandbox")===-1&&o.push("--no-sandbox");let l=yield dH.default.promises.mkdtemp(vH),u=new wH.RecentLogsCollector,{launchedProcess:d,gracefullyClose:h,kill:p}=yield(0,iO.launchProcess)({command:e.executablePath||Zk(),args:o,env:e.env?(0,iO.envArrayToObject)(e.env):process.env,log:P=>{n.log(P),u.log(P)},stdio:"pipe",cwd:e.cwd,tempDirectories:[l],attemptToGracefullyClose:()=>s.close(),handleSIGINT:!0,handleSIGTERM:!0,handleSIGHUP:!0,onExit:()=>{}}),f=new Promise((P,L)=>c(this,null,function*(){T_(n,d,/Unable to open X display/).then(()=>L(new Error(["Unable to open X display!","================================","Most likely this is because there is no X server available.","Use 'xvfb-run' on Linux to launch your tests with an emulated display server.","For example: 'xvfb-run npm run test:e2e'","================================",n.metadata.log].join(`
`)))).catch(()=>{})})),m=yield T_(n,d,/^Debugger listening on (ws:\/\/.*)$/),_=yield rO.WebSocketTransport.connect(n,m[1]),g=new fH.CRConnection(_,O_.helper.debugProtocolLogger(),u),w=yield Promise.race([T_(n,d,/^DevTools listening on (ws:\/\/.*)$/),f]),b=yield rO.WebSocketTransport.connect(n,w[1]),C={onclose:void 0,process:d,close:h,kill:p},E=R(y({},this._playwrightOptions),{name:"electron",isChromium:!0,headful:!0,persistent:{noDefaultViewport:!0,acceptDownloads:e.acceptDownloads,bypassCSP:e.bypassCSP,colorScheme:e.colorScheme,extraHTTPHeaders:e.extraHTTPHeaders,geolocation:e.geolocation,httpCredentials:e.httpCredentials,ignoreHTTPSErrors:e.ignoreHTTPSErrors,locale:e.locale,offline:e.offline,recordHar:e.recordHar,recordVideo:e.recordVideo,timezoneId:e.timezoneId},browserProcess:C,protocolLogger:O_.helper.debugProtocolLogger(),browserLogsCollector:u,artifactsDir:l,downloadsPath:l,tracesDir:l}),N=yield pH.CRBrowser.connect(b,E);return s=new jn(this,N,g),s}),tO.TimeoutSettings.timeout(e))})}};vo.Electron=aO;function T_(r,e,t){return new Promise((i,n)=>{let s=gH.createInterface({input:e.stderr}),o=new Error("Process failed to launch!"),l=[uc.eventsHelper.addEventListener(s,"line",u),uc.eventsHelper.addEventListener(s,"close",n.bind(null,o)),uc.eventsHelper.addEventListener(e,"exit",n.bind(null,o)),uc.eventsHelper.addEventListener(e,"error",n.bind(null,o))];r.cleanupWhenAborted(d);function u(h){let p=h.match(t);!p||(d(),i(p))}function d(){uc.eventsHelper.removeEventListeners(l)}})}});var Dd=v(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.FFSession=nr.FFSessionEvents=nr.FFConnection=nr.kBrowserCloseMessageId=nr.ConnectionEvents=void 0;var cO=x("events"),yH=G(),I_=Bt(),bH=Xe(),lO=Mt(),dc=Xr(),uO={Disconnected:Symbol("Disconnected")};nr.ConnectionEvents=uO;var dO=-9999;nr.kBrowserCloseMessageId=dO;var hO=class extends cO.EventEmitter{constructor(e,t,i){super();this._lastId=void 0,this._callbacks=void 0,this._transport=void 0,this._protocolLogger=void 0,this._browserLogsCollector=void 0,this._sessions=void 0,this._closed=void 0,this.on=void 0,this.addListener=void 0,this.off=void 0,this.removeListener=void 0,this.once=void 0,this.setMaxListeners(0),this._transport=e,this._protocolLogger=t,this._browserLogsCollector=i,this._lastId=0,this._callbacks=new Map,this._transport.onmessage=this._onMessage.bind(this),this._transport.onclose=this._onClose.bind(this),this._sessions=new Map,this._closed=!1,this.on=super.on,this.addListener=super.addListener,this.off=super.removeListener,this.removeListener=super.removeListener,this.once=super.once}send(e,t){return c(this,null,function*(){this._checkClosed(e);let i=this.nextMessageId();return this._rawSend({id:i,method:e,params:t}),new Promise((n,s)=>{this._callbacks.set(i,{resolve:n,reject:s,error:new dc.ProtocolError(!1),method:e})})})}nextMessageId(){return++this._lastId}_checkClosed(e){if(this._closed)throw new dc.ProtocolError(!0,`${e}): Browser closed.`+lO.helper.formatBrowserLogs(this._browserLogsCollector.recentLogs()))}_rawSend(e){this._protocolLogger("send",e),this._transport.send(e)}_onMessage(e){return c(this,null,function*(){if(this._protocolLogger("receive",e),e.id!==dO)if(e.sessionId){let t=this._sessions.get(e.sessionId);t&&t.dispatchMessage(e)}else if(e.id){let t=this._callbacks.get(e.id);t&&(this._callbacks.delete(e.id),e.error?t.reject(fO(t.error,t.method,e.error)):t.resolve(e.result))}else Promise.resolve().then(()=>this.emit(e.method,e.params))})}_onClose(){this._closed=!0,this._transport.onmessage=void 0,this._transport.onclose=void 0;let e=lO.helper.formatBrowserLogs(this._browserLogsCollector.recentLogs());for(let t of this._sessions.values())t.dispose();this._sessions.clear();for(let t of this._callbacks.values()){let i=(0,I_.rewriteErrorMessage)(t.error,`Protocol error (${t.method}): Browser closed.`+e);i.sessionClosed=!0,t.reject(i)}this._callbacks.clear(),Promise.resolve().then(()=>this.emit(uO.Disconnected))}close(){this._closed||this._transport.close()}createSession(e){let t=new M_(this,e,i=>this._rawSend(R(y({},i),{sessionId:e})));return this._sessions.set(e,t),t}};nr.FFConnection=hO;var pO={Disconnected:Symbol("Disconnected")};nr.FFSessionEvents=pO;var M_=class extends cO.EventEmitter{constructor(e,t,i){super();this._connection=void 0,this._disposed=!1,this._callbacks=void 0,this._sessionId=void 0,this._rawSend=void 0,this._crashed=!1,this.on=void 0,this.addListener=void 0,this.off=void 0,this.removeListener=void 0,this.once=void 0,this.setMaxListeners(0),this._callbacks=new Map,this._connection=e,this._sessionId=t,this._rawSend=i,this.on=super.on,this.addListener=super.addListener,this.off=super.removeListener,this.removeListener=super.removeListener,this.once=super.once}markAsCrashed(){this._crashed=!0}send(e,t){return c(this,null,function*(){if(this._crashed)throw new dc.ProtocolError(!0,"Target crashed");if(this._connection._checkClosed(e),this._disposed)throw new dc.ProtocolError(!0,"Target closed");let i=this._connection.nextMessageId();return this._rawSend({method:e,params:t,id:i}),new Promise((n,s)=>{this._callbacks.set(i,{resolve:n,reject:s,error:new dc.ProtocolError(!1),method:e})})})}sendMayFail(e,t){return this.send(e,t).catch(i=>bH.debugLogger.log("error",i))}dispatchMessage(e){if(e.id&&this._callbacks.has(e.id)){let t=this._callbacks.get(e.id);this._callbacks.delete(e.id),e.error?t.reject(fO(t.error,t.method,e.error)):t.resolve(e.result)}else(0,yH.assert)(!e.id),Promise.resolve().then(()=>this.emit(e.method,e.params))}dispose(){for(let e of this._callbacks.values())e.error.sessionClosed=!0,e.reject((0,I_.rewriteErrorMessage)(e.error,"Target closed"));this._callbacks.clear(),this._disposed=!0,this._connection._sessions.delete(this._sessionId),Promise.resolve().then(()=>this.emit(pO.Disconnected))}};nr.FFSession=M_;function fO(r,e,t){let i=`Protocol error (${e}): ${t.message}`;return"data"in t&&(i+=` ${t.data}`),(0,I_.rewriteErrorMessage)(r,i)}});var mO=v(F_=>{"use strict";Object.defineProperty(F_,"__esModule",{value:!0});F_.getAccessibilityTree=xH;function xH(r,e){return c(this,null,function*(){let t=e?e._objectId:void 0,{tree:i}=yield r.send("Accessibility.getFullAXTree",{objectId:t}),n=new Ld(i);return{tree:n,needle:e?n._findNeedle():null}})}var SH=new Map(Object.entries({pushbutton:"button",checkbutton:"checkbox",editcombobox:"combobox","content deletion":"deletion",footnote:"doc-footnote","non-native document":"document",grouping:"group",graphic:"img","content insertion":"insertion",animation:"marquee","flat equation":"math",menupopup:"menu","check menu item":"menuitemcheckbox","radio menu item":"menuitemradio","listbox option":"option",radiobutton:"radio",statusbar:"status",pagetab:"tab",pagetablist:"tablist",propertypage:"tabpanel",entry:"textbox",outline:"tree","tree table":"treegrid",outlineitem:"treeitem"})),Ld=class{constructor(e){this._children=void 0,this._payload=void 0,this._editable=void 0,this._richlyEditable=void 0,this._focusable=void 0,this._expanded=void 0,this._name=void 0,this._role=void 0,this._cachedHasFocusableChild=void 0,this._payload=e,this._children=(e.children||[]).map(t=>new Ld(t)),this._editable=!!e.editable,this._richlyEditable=this._editable&&e.tag!=="textarea"&&e.tag!=="input",this._focusable=!!e.focusable,this._expanded=!!e.expanded,this._name=this._payload.name,this._role=this._payload.role}_isPlainTextField(){return this._richlyEditable?!1:this._editable?!0:this._role==="entry"}_isTextOnlyObject(){let e=this._role;return e==="text leaf"||e==="text"||e==="statictext"}_hasFocusableChild(){if(this._cachedHasFocusableChild===void 0){this._cachedHasFocusableChild=!1;for(let e of this._children)if(e._focusable||e._hasFocusableChild()){this._cachedHasFocusableChild=!0;break}}return this._cachedHasFocusableChild}children(){return this._children}_findNeedle(){if(this._payload.foundObject)return this;for(let e of this._children){let t=e._findNeedle();if(t)return t}return null}isLeafNode(){if(!this._children.length||this._isPlainTextField()||this._isTextOnlyObject())return!0;switch(this._role){case"graphic":case"scrollbar":case"slider":case"separator":case"progressbar":return!0;default:break}return this._hasFocusableChild()?!1:!!(this._focusable&&this._role!=="document"&&this._name||this._role==="heading"&&this._name)}isControl(){switch(this._role){case"checkbutton":case"check menu item":case"check rich option":case"combobox":case"combobox option":case"color chooser":case"listbox":case"listbox option":case"listbox rich option":case"popup menu":case"menupopup":case"menuitem":case"menubar":case"button":case"pushbutton":case"radiobutton":case"radio menuitem":case"scrollbar":case"slider":case"spinbutton":case"switch":case"pagetab":case"entry":case"tree table":return!0;default:return!1}}isInteresting(e){return this._focusable||this._richlyEditable||this.isControl()?!0:e?!1:this.isLeafNode()&&!!this._name.trim()}serialize(){let e={role:SH.get(this._role)||this._role,name:this._name||""},t=["name","description","roledescription","valuetext","keyshortcuts"];for(let l of t)l in this._payload&&(e[l]=this._payload[l]);let i=["disabled","expanded","focused","modal","multiline","multiselectable","readonly","required","selected"];for(let l of i){if(this._role==="document"&&l==="focused")continue;let u=this._payload[l];!u||(e[l]=u)}let n=["level"];for(let l of n)l in this._payload&&(e[l]=this._payload[l]);let s=["autocomplete","haspopup","invalid","orientation"];for(let l of s){let u=this._payload[l];!u||u==="false"||(e[l]=u)}let o=e;return o.valueString=this._payload.value,"checked"in this._payload&&(o.checked=this._payload.checked===!0?"checked":this._payload.checked==="mixed"?"mixed":"unchecked"),"pressed"in this._payload&&(o.pressed=this._payload.pressed===!0?"pressed":"released"),o}}});var wO=v(qd=>{"use strict";Object.defineProperty(qd,"__esModule",{value:!0});qd.FFExecutionContext=void 0;var yo=OH(xi()),EH=Bt(),CH=Pa(),kH=Xr();function _O(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(_O=function(i){return i?t:e})(r)}function OH(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=_O(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var gO=class{constructor(e,t){this._session=void 0,this._executionContextId=void 0,this._session=e,this._executionContextId=t}rawEvaluateJSON(e){return c(this,null,function*(){let t=yield this._session.send("Runtime.evaluate",{expression:e,returnByValue:!0,executionContextId:this._executionContextId}).catch(N_);return R_(t.exceptionDetails),t.result.value})}rawEvaluateHandle(e){return c(this,null,function*(){let t=yield this._session.send("Runtime.evaluate",{expression:e,returnByValue:!1,executionContextId:this._executionContextId}).catch(N_);return R_(t.exceptionDetails),t.result.objectId})}rawCallFunctionNoReply(e,...t){this._session.send("Runtime.callFunction",{functionDeclaration:e.toString(),args:t.map(i=>i instanceof yo.JSHandle?{objectId:i._objectId}:{value:i}),returnByValue:!0,executionContextId:this._executionContextId}).catch(()=>{})}evaluateWithArguments(e,t,i,n,s){return c(this,null,function*(){let o=yield this._session.send("Runtime.callFunction",{functionDeclaration:e,args:[{objectId:i._objectId,value:void 0},...n.map(l=>({value:l})),...s.map(l=>({objectId:l,value:void 0}))],returnByValue:t,executionContextId:this._executionContextId}).catch(N_);return R_(o.exceptionDetails),t?(0,CH.parseEvaluationResultValue)(o.result.value):i._context.createHandle(o.result)})}getProperties(e,t){return c(this,null,function*(){let i=yield this._session.send("Runtime.getObjectProperties",{executionContextId:this._executionContextId,objectId:t}),n=new Map;for(let s of i.properties)n.set(s.name,e.createHandle(s.value));return n})}createHandle(e,t){return new yo.JSHandle(e,t.subtype||t.type||"",TH(t),t.objectId,PH(t))}releaseHandle(e){return c(this,null,function*(){yield this._session.send("Runtime.disposeObject",{executionContextId:this._executionContextId,objectId:e})})}};qd.FFExecutionContext=gO;function R_(r){if(!!r)throw r.value?new yo.JavaScriptErrorInEvaluate(JSON.stringify(r.value)):new yo.JavaScriptErrorInEvaluate(r.text+(r.stack?`
`+r.stack:""))}function N_(r){if(r.message.includes("cyclic object value")||r.message.includes("Object is not serializable"))return{result:{type:"undefined",value:void 0}};throw r instanceof TypeError&&r.message.startsWith("Converting circular structure to JSON")&&(0,EH.rewriteErrorMessage)(r,r.message+" Are you passing a nested JSHandle?"),!yo.isJavaScriptErrorInEvaluate(r)&&!(0,kH.isSessionClosedError)(r)?new Error("Execution context was destroyed, most likely because of a navigation."):r}function PH(r){let e=r.value,t=r.unserializableValue;return t?yo.parseUnserializableValue(t):e}function TH(r){if(r.type==="undefined")return"undefined";if(r.unserializableValue)return String(r.unserializableValue);if(r.type==="symbol")return"Symbol()";if(r.subtype==="regexp")return"RegExp";if(r.subtype==="weakmap")return"WeakMap";if(r.subtype==="weakset")return"WeakSet";if(r.subtype)return r.subtype[0].toUpperCase()+r.subtype.slice(1);if("value"in r)return String(r.value)}});var SO=v($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});$i.RawTouchscreenImpl=$i.RawMouseImpl=$i.RawKeyboardImpl=void 0;function hc(r){let e=0;return r.has("Alt")&&(e|=1),r.has("Control")&&(e|=2),r.has("Shift")&&(e|=4),r.has("Meta")&&(e|=8),e}function vO(r){return r==="left"?0:r==="middle"?1:r==="right"?2:0}function D_(r){let e=0;return r.has("left")&&(e|=1),r.has("right")&&(e|=2),r.has("middle")&&(e|=4),e}var yO=class{constructor(e){this._client=void 0,this._client=e}keydown(e,t,i,n,s,o,l,u){return c(this,null,function*(){t==="MetaLeft"&&(t="OSLeft"),t==="MetaRight"&&(t="OSRight"),u==="\r"&&(u=""),yield this._client.send("Page.dispatchKeyEvent",{type:"keydown",keyCode:n,code:t,key:s,repeat:l,location:o,text:u})})}keyup(e,t,i,n,s,o){return c(this,null,function*(){t==="MetaLeft"&&(t="OSLeft"),t==="MetaRight"&&(t="OSRight"),yield this._client.send("Page.dispatchKeyEvent",{type:"keyup",key:s,keyCode:n,code:t,location:o,repeat:!1})})}sendText(e){return c(this,null,function*(){yield this._client.send("Page.insertText",{text:e})})}};$i.RawKeyboardImpl=yO;var bO=class{constructor(e){this._client=void 0,this._page=void 0,this._client=e}move(e,t,i,n,s){return c(this,null,function*(){yield this._client.send("Page.dispatchMouseEvent",{type:"mousemove",button:0,buttons:D_(n),x:e,y:t,modifiers:hc(s)})})}down(e,t,i,n,s,o){return c(this,null,function*(){yield this._client.send("Page.dispatchMouseEvent",{type:"mousedown",button:vO(i),buttons:D_(n),x:e,y:t,modifiers:hc(s),clickCount:o})})}up(e,t,i,n,s,o){return c(this,null,function*(){yield this._client.send("Page.dispatchMouseEvent",{type:"mouseup",button:vO(i),buttons:D_(n),x:e,y:t,modifiers:hc(s),clickCount:o})})}wheel(e,t,i,n,s,o){return c(this,null,function*(){yield this._page.mainFrame().evaluateExpression("new Promise(requestAnimationFrame)",!1,!1,"utility"),yield this._client.send("Page.dispatchWheelEvent",{deltaX:s,deltaY:o,x:e,y:t,deltaZ:0,modifiers:hc(n)})})}setPage(e){this._page=e}};$i.RawMouseImpl=bO;var xO=class{constructor(e){this._client=void 0,this._client=e}tap(e,t,i){return c(this,null,function*(){yield this._client.send("Page.dispatchTapEvent",{x:e,y:t,modifiers:hc(i)})})}};$i.RawTouchscreenImpl=xO});var PO=v(Hd=>{"use strict";Object.defineProperty(Hd,"__esModule",{value:!0});Hd.FFNetworkManager=void 0;var pc=_t(),Bd=AH(jt());function EO(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(EO=function(i){return i?t:e})(r)}function AH(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=EO(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var CO=class{constructor(e,t){this._session=void 0,this._requests=void 0,this._page=void 0,this._eventListeners=void 0,this._session=e,this._requests=new Map,this._page=t,this._eventListeners=[pc.eventsHelper.addEventListener(e,"Network.requestWillBeSent",this._onRequestWillBeSent.bind(this)),pc.eventsHelper.addEventListener(e,"Network.responseReceived",this._onResponseReceived.bind(this)),pc.eventsHelper.addEventListener(e,"Network.requestFinished",this._onRequestFinished.bind(this)),pc.eventsHelper.addEventListener(e,"Network.requestFailed",this._onRequestFailed.bind(this))]}dispose(){pc.eventsHelper.removeEventListeners(this._eventListeners)}setRequestInterception(e){return c(this,null,function*(){yield this._session.send("Network.setRequestInterception",{enabled:e})})}_onRequestWillBeSent(e){let t=e.redirectedFrom&&this._requests.get(e.redirectedFrom)||null,i=t?t.request.frame():e.frameId?this._page._frameManager.frame(e.frameId):null;if(!i)return;t&&this._requests.delete(t._id);let n=new kO(i,t,e),s;e.isIntercepted&&(s=new OO(this._session,n)),this._requests.set(n._id,n),this._page._frameManager.requestStarted(n.request,s)}_onResponseReceived(e){var t,i,n,s,o;let l=this._requests.get(e.requestId);if(!l)return;let u=()=>c(this,null,function*(){let m=yield this._session.send("Network.getResponseBody",{requestId:l._id});if(m.evicted)throw new Error(`Response body for ${l.request.method()} ${l.request.url()} was evicted!`);return Buffer.from(m.base64body,"base64")}),d=e.timing.startTime;function h(m){return m?(m-d)/1e3:-1}let p={startTime:d/1e3,domainLookupStart:h(e.timing.domainLookupStart),domainLookupEnd:h(e.timing.domainLookupEnd),connectStart:h(e.timing.connectStart),secureConnectionStart:h(e.timing.secureConnectionStart),connectEnd:h(e.timing.connectEnd),requestStart:h(e.timing.requestStart),responseStart:h(e.timing.responseStart)},f=new Bd.Response(l.request,e.status,e.statusText,FH(e.headers),p,u);e!=null&&e.remoteIPAddress&&typeof(e==null?void 0:e.remotePort)=="number"?f._serverAddrFinished({ipAddress:e.remoteIPAddress,port:e.remotePort}):f._serverAddrFinished(),f._securityDetailsFinished({protocol:e==null||(t=e.securityDetails)===null||t===void 0?void 0:t.protocol,subjectName:e==null||(i=e.securityDetails)===null||i===void 0?void 0:i.subjectName,issuer:e==null||(n=e.securityDetails)===null||n===void 0?void 0:n.issuer,validFrom:e==null||(s=e.securityDetails)===null||s===void 0?void 0:s.validFrom,validTo:e==null||(o=e.securityDetails)===null||o===void 0?void 0:o.validTo}),this._page._frameManager.requestReceivedResponse(f)}_onRequestFinished(e){let t=this._requests.get(e.requestId);if(!t)return;let i=t.request._existingResponse();t.request.responseSize.transferSize=e.transferSize;let n=i.status()>=300&&i.status()<=399,s=e.responseEndTime?e.responseEndTime/1e3-i.timing().startTime:-1;n||this._requests.delete(t._id),i._requestFinished(s),i._setHttpVersion(e.protocolVersion),this._page._frameManager.reportRequestFinished(t.request,i)}_onRequestFailed(e){let t=this._requests.get(e.requestId);if(!t)return;this._requests.delete(t._id);let i=t.request._existingResponse();i&&i._requestFinished(-1),t.request._setFailureText(e.errorCode),this._page._frameManager.requestFailed(t.request,e.errorCode==="NS_BINDING_ABORTED")}};Hd.FFNetworkManager=CO;var IH={TYPE_INVALID:"other",TYPE_OTHER:"other",TYPE_SCRIPT:"script",TYPE_IMAGE:"image",TYPE_STYLESHEET:"stylesheet",TYPE_OBJECT:"other",TYPE_DOCUMENT:"document",TYPE_SUBDOCUMENT:"document",TYPE_REFRESH:"document",TYPE_XBL:"other",TYPE_PING:"other",TYPE_XMLHTTPREQUEST:"xhr",TYPE_OBJECT_SUBREQUEST:"other",TYPE_DTD:"other",TYPE_FONT:"font",TYPE_MEDIA:"media",TYPE_WEBSOCKET:"websocket",TYPE_CSP_REPORT:"other",TYPE_XSLT:"other",TYPE_BEACON:"other",TYPE_FETCH:"fetch",TYPE_IMAGESET:"images",TYPE_WEB_MANIFEST:"manifest"},MH={TYPE_INTERNAL_EVENTSOURCE:"eventsource"},kO=class{constructor(e,t,i){this.request=void 0,this._id=void 0,this._redirectedTo=void 0,this._id=i.requestId,t&&(t._redirectedTo=this);let n=null;i.postData&&(n=Buffer.from(i.postData,"base64")),this.request=new Bd.Request(e,t?t.request:null,i.navigationId,i.url,MH[i.internalCause]||IH[i.cause]||"other",i.method,n,i.headers)}_finalRequest(){let e=this;for(;e._redirectedTo;)e=e._redirectedTo;return e}},OO=class{constructor(e,t){this._request=void 0,this._session=void 0,this._session=e,this._request=t}responseBody(){return c(this,null,function*(){let e=yield this._session.send("Network.getResponseBody",{requestId:this._request._finalRequest()._id});return Buffer.from(e.base64body,"base64")})}continue(e,t){return c(this,null,function*(){let i=yield this._session.sendMayFail("Network.resumeInterceptedRequest",{requestId:this._request._id,url:t.url,method:t.method,headers:t.headers,postData:t.postData?Buffer.from(t.postData).toString("base64"):void 0,interceptResponse:t.interceptResponse});if(!t.interceptResponse)return null;if(i.error)throw new Error(`Request failed: ${i.error}`);return new Bd.InterceptedResponse(e,i.response.status,i.response.statusText,i.response.headers)})}fulfill(e){return c(this,null,function*(){let t=e.isBase64?e.body:Buffer.from(e.body).toString("base64");yield this._session.sendMayFail("Network.fulfillInterceptedRequest",{requestId:this._request._id,status:e.status,statusText:Bd.STATUS_TEXTS[String(e.status)]||"",headers:e.headers,base64body:t})})}abort(e){return c(this,null,function*(){yield this._session.sendMayFail("Network.abortInterceptedRequest",{requestId:this._request._id,errorCode:e})})}};function FH(r){let e=[];for(let t of r){let i=t.name.toLowerCase()==="set-cookie"?`
`:",",n=t.value.split(i).map(s=>s.trim());for(let s of n)e.push({name:t.name,value:s})}return e}});var DO=v(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});xo.FFPage=xo.UTILITY_WORLD_NAME=void 0;var RH=RO(cd()),TO=RO(Is()),Ue=_t(),AO=G(),fc=Ot(),NH=mO(),IO=Dd(),MO=wO(),L_=SO(),DH=PO(),LH=Bt(),qH=Xe(),BH=Vt();function FO(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(FO=function(i){return i?t:e})(r)}function RO(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=FO(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var q_="__playwright_utility_world__";xo.UTILITY_WORLD_NAME=q_;var NO=class{constructor(e,t,i){this.cspErrorsAsynchronousForInlineScipts=!0,this.rawMouse=void 0,this.rawKeyboard=void 0,this.rawTouchscreen=void 0,this._session=void 0,this._page=void 0,this._networkManager=void 0,this._browserContext=void 0,this._pagePromise=new BH.ManualPromise,this._initializedPage=null,this._initializationFailed=!1,this._opener=void 0,this._contextIdToContext=void 0,this._eventListeners=void 0,this._workers=new Map,this._screencastId=void 0,this._session=e,this._opener=i,this.rawKeyboard=new L_.RawKeyboardImpl(e),this.rawMouse=new L_.RawMouseImpl(e),this.rawTouchscreen=new L_.RawTouchscreenImpl(e),this._contextIdToContext=new Map,this._browserContext=t,this._page=new fc.Page(this,t),this.rawMouse.setPage(this._page),this._networkManager=new DH.FFNetworkManager(e,this._page),this._page.on(fc.Page.Events.FrameDetached,n=>this._removeContextsForFrame(n)),this._eventListeners=[Ue.eventsHelper.addEventListener(this._session,"Page.eventFired",this._onEventFired.bind(this)),Ue.eventsHelper.addEventListener(this._session,"Page.frameAttached",this._onFrameAttached.bind(this)),Ue.eventsHelper.addEventListener(this._session,"Page.frameDetached",this._onFrameDetached.bind(this)),Ue.eventsHelper.addEventListener(this._session,"Page.navigationAborted",this._onNavigationAborted.bind(this)),Ue.eventsHelper.addEventListener(this._session,"Page.navigationCommitted",this._onNavigationCommitted.bind(this)),Ue.eventsHelper.addEventListener(this._session,"Page.navigationStarted",this._onNavigationStarted.bind(this)),Ue.eventsHelper.addEventListener(this._session,"Page.sameDocumentNavigation",this._onSameDocumentNavigation.bind(this)),Ue.eventsHelper.addEventListener(this._session,"Runtime.executionContextCreated",this._onExecutionContextCreated.bind(this)),Ue.eventsHelper.addEventListener(this._session,"Runtime.executionContextDestroyed",this._onExecutionContextDestroyed.bind(this)),Ue.eventsHelper.addEventListener(this._session,"Page.linkClicked",n=>this._onLinkClicked(n.phase)),Ue.eventsHelper.addEventListener(this._session,"Page.uncaughtError",this._onUncaughtError.bind(this)),Ue.eventsHelper.addEventListener(this._session,"Runtime.console",this._onConsole.bind(this)),Ue.eventsHelper.addEventListener(this._session,"Page.dialogOpened",this._onDialogOpened.bind(this)),Ue.eventsHelper.addEventListener(this._session,"Page.bindingCalled",this._onBindingCalled.bind(this)),Ue.eventsHelper.addEventListener(this._session,"Page.fileChooserOpened",this._onFileChooserOpened.bind(this)),Ue.eventsHelper.addEventListener(this._session,"Page.workerCreated",this._onWorkerCreated.bind(this)),Ue.eventsHelper.addEventListener(this._session,"Page.workerDestroyed",this._onWorkerDestroyed.bind(this)),Ue.eventsHelper.addEventListener(this._session,"Page.dispatchMessageFromWorker",this._onDispatchMessageFromWorker.bind(this)),Ue.eventsHelper.addEventListener(this._session,"Page.crashed",this._onCrashed.bind(this)),Ue.eventsHelper.addEventListener(this._session,"Page.videoRecordingStarted",this._onVideoRecordingStarted.bind(this)),Ue.eventsHelper.addEventListener(this._session,"Page.webSocketCreated",this._onWebSocketCreated.bind(this)),Ue.eventsHelper.addEventListener(this._session,"Page.webSocketClosed",this._onWebSocketClosed.bind(this)),Ue.eventsHelper.addEventListener(this._session,"Page.webSocketFrameReceived",this._onWebSocketFrameReceived.bind(this)),Ue.eventsHelper.addEventListener(this._session,"Page.webSocketFrameSent",this._onWebSocketFrameSent.bind(this)),Ue.eventsHelper.addEventListener(this._session,"Page.screencastFrame",this._onScreencastFrame.bind(this))],e.once(IO.FFSessionEvents.Disconnected,()=>{this._markAsError(new Error("Page closed")),this._page._didDisconnect()}),this._session.once("Page.ready",()=>c(this,null,function*(){yield this._page.initOpener(this._opener),!this._initializationFailed&&(this._initializedPage=this._page,this._page.reportAsNew(),this._pagePromise.resolve(this._page))})),this._session.send("Page.addScriptToEvaluateOnNewDocument",{script:"",worldName:q_}).catch(n=>this._markAsError(n))}_markAsError(e){return c(this,null,function*(){this._initializationFailed||(this._initializationFailed=!0,this._initializedPage||(yield this._page.initOpener(this._opener),this._page.reportAsNew(e),this._pagePromise.resolve(e)))})}pageOrError(){return c(this,null,function*(){return this._pagePromise})}_onWebSocketCreated(e){this._page._frameManager.onWebSocketCreated(bo(e.frameId,e.wsid),e.requestURL),this._page._frameManager.onWebSocketRequest(bo(e.frameId,e.wsid))}_onWebSocketClosed(e){e.error&&this._page._frameManager.webSocketError(bo(e.frameId,e.wsid),e.error),this._page._frameManager.webSocketClosed(bo(e.frameId,e.wsid))}_onWebSocketFrameReceived(e){this._page._frameManager.webSocketFrameReceived(bo(e.frameId,e.wsid),e.opcode,e.data)}_onWebSocketFrameSent(e){this._page._frameManager.onWebSocketFrameSent(bo(e.frameId,e.wsid),e.opcode,e.data)}_onExecutionContextCreated(e){let{executionContextId:t,auxData:i}=e,n=this._page._frameManager.frame(i.frameId);if(!n)return;let s=new MO.FFExecutionContext(this._session,t),o=null;i.name===q_?o="utility":i.name||(o="main");let l=new TO.FrameExecutionContext(s,n,o);o&&n._contextCreated(o,l),this._contextIdToContext.set(t,l)}_onExecutionContextDestroyed(e){let{executionContextId:t}=e,i=this._contextIdToContext.get(t);!i||(this._contextIdToContext.delete(t),i.frame._contextDestroyed(i))}_removeContextsForFrame(e){for(let[t,i]of this._contextIdToContext)i.frame===e&&this._contextIdToContext.delete(t)}_onLinkClicked(e){e==="before"?this._page._frameManager.frameWillPotentiallyRequestNavigation():this._page._frameManager.frameDidPotentiallyRequestNavigation()}_onNavigationStarted(e){this._page._frameManager.frameRequestedNavigation(e.frameId,e.navigationId)}_onNavigationAborted(e){this._page._frameManager.frameAbortedNavigation(e.frameId,e.errorText,e.navigationId)}_onNavigationCommitted(e){for(let[t,i]of this._workers)i.frameId===e.frameId&&this._onWorkerDestroyed({workerId:t});this._page._frameManager.frameCommittedNewDocumentNavigation(e.frameId,e.url,e.name||"",e.navigationId||"",!1)}_onSameDocumentNavigation(e){this._page._frameManager.frameCommittedSameDocumentNavigation(e.frameId,e.url)}_onFrameAttached(e){this._page._frameManager.frameAttached(e.frameId,e.parentFrameId)}_onFrameDetached(e){this._page._frameManager.frameDetached(e.frameId)}_onEventFired(e){let{frameId:t,name:i}=e;i==="load"&&this._page._frameManager.frameLifecycleEvent(t,"load"),i==="DOMContentLoaded"&&this._page._frameManager.frameLifecycleEvent(t,"domcontentloaded")}_onUncaughtError(e){let{name:t,message:i}=(0,LH.splitErrorMessage)(e.message),n=new Error(i);n.stack=e.message+`
`+e.stack.split(`
`).filter(Boolean).map(s=>s.replace(/([^@]*)@(.*)/,"    at $1 ($2)")).join(`
`),n.name=t,this._page.firePageError(n)}_onConsole(e){let{type:t,args:i,executionContextId:n,location:s}=e,o=this._contextIdToContext.get(n);this._page._addConsoleMessage(t,i.map(l=>o.createHandle(l)),s)}_onDialogOpened(e){this._page.emit(fc.Page.Events.Dialog,new RH.Dialog(this._page,e.type,e.message,(t,i)=>c(this,null,function*(){yield this._session.sendMayFail("Page.handleDialog",{dialogId:e.dialogId,accept:t,promptText:i})}),e.defaultValue))}_onBindingCalled(e){return c(this,null,function*(){let t=this._contextIdToContext.get(e.executionContextId);(yield this.pageOrError())instanceof Error||(yield this._page._onBindingCalled(e.payload,t))})}_onFileChooserOpened(e){return c(this,null,function*(){let{executionContextId:t,element:i}=e,s=this._contextIdToContext.get(t).createHandle(i).asElement();yield this._page._onFileChooserOpened(s)})}_onWorkerCreated(e){return c(this,null,function*(){let t=e.workerId,i=new fc.Worker(this._page,e.url),n=new IO.FFSession(this._session._connection,t,s=>{this._session.send("Page.sendMessageToWorker",{frameId:e.frameId,workerId:t,message:JSON.stringify(s)}).catch(o=>{n.dispatchMessage({id:s.id,method:"",params:{},error:{message:o.message,data:void 0}})})});this._workers.set(t,{session:n,frameId:e.frameId}),this._page._addWorker(t,i),n.once("Runtime.executionContextCreated",s=>{i._createExecutionContext(new MO.FFExecutionContext(n,s.executionContextId))}),n.on("Runtime.console",s=>{let{type:o,args:l,location:u}=s,d=i._existingExecutionContext;this._page._addConsoleMessage(o,l.map(h=>d.createHandle(h)),u)})})}_onWorkerDestroyed(e){let t=e.workerId,i=this._workers.get(t);!i||(i.session.dispose(),this._workers.delete(t),this._page._removeWorker(t))}_onDispatchMessageFromWorker(e){return c(this,null,function*(){let t=this._workers.get(e.workerId);!t||t.session.dispatchMessage(JSON.parse(e.message))})}_onCrashed(e){return c(this,null,function*(){this._session.markAsCrashed(),this._page._didCrash()})}_onVideoRecordingStarted(e){this._browserContext._browser._videoStarted(this._browserContext,e.screencastId,e.file,this.pageOrError())}exposeBinding(e){return c(this,null,function*(){yield this._session.send("Page.addBinding",{name:e.name,script:e.source})})}didClose(){this._session.dispose(),Ue.eventsHelper.removeEventListeners(this._eventListeners),this._networkManager.dispose(),this._page._didClose()}navigateFrame(e,t,i){return c(this,null,function*(){return{newDocumentId:(yield this._session.send("Page.navigate",{url:t,referer:i,frameId:e._id})).navigationId||void 0}})}updateExtraHTTPHeaders(){return c(this,null,function*(){yield this._session.send("Network.setExtraHTTPHeaders",{headers:this._page._state.extraHTTPHeaders||[]})})}setEmulatedSize(e){return c(this,null,function*(){(0,AO.assert)(this._page._state.emulatedSize===e),yield this._session.send("Page.setViewportSize",{viewportSize:{width:e.viewport.width,height:e.viewport.height}})})}bringToFront(){return c(this,null,function*(){yield this._session.send("Page.bringToFront",{})})}updateEmulateMedia(){return c(this,null,function*(){let e=this._page._state.colorScheme===null?void 0:this._page._state.colorScheme,t=this._page._state.reducedMotion===null?void 0:this._page._state.reducedMotion,i=this._page._state.forcedColors===null?void 0:this._page._state.forcedColors;yield this._session.send("Page.setEmulatedMedia",{type:this._page._state.mediaType===null?"":this._page._state.mediaType,colorScheme:e,reducedMotion:t,forcedColors:i})})}updateRequestInterception(){return c(this,null,function*(){yield this._networkManager.setRequestInterception(this._page._needsRequestInterception())})}setFileChooserIntercepted(e){return c(this,null,function*(){yield this._session.send("Page.setInterceptFileChooserDialog",{enabled:e}).catch(t=>{})})}reload(){return c(this,null,function*(){yield this._session.send("Page.reload",{frameId:this._page.mainFrame()._id})})}goBack(){return c(this,null,function*(){let{success:e}=yield this._session.send("Page.goBack",{frameId:this._page.mainFrame()._id});return e})}goForward(){return c(this,null,function*(){let{success:e}=yield this._session.send("Page.goForward",{frameId:this._page.mainFrame()._id});return e})}evaluateOnNewDocument(e){return c(this,null,function*(){yield this._session.send("Page.addScriptToEvaluateOnNewDocument",{script:e})})}closePage(e){return c(this,null,function*(){yield this._session.send("Page.close",{runBeforeUnload:e})})}canScreenshotOutsideViewport(){return!0}setBackgroundColor(e){return c(this,null,function*(){if(e)throw new Error("Not implemented")})}takeScreenshot(e,t,i,n,s){return c(this,null,function*(){if(!i){let l=yield this._page.mainFrame().waitForFunctionValueInUtility(e,()=>({x:window.scrollX,y:window.scrollY}));i={x:n.x+l.x,y:n.y+l.y,width:n.width,height:n.height}}e.throwIfAborted();let{data:o}=yield this._session.send("Page.screenshot",{mimeType:"image/"+t,clip:i});return Buffer.from(o,"base64")})}resetViewport(){return c(this,null,function*(){(0,AO.assert)(!1,"Should not be called")})}getContentFrame(e){return c(this,null,function*(){let{contentFrameId:t}=yield this._session.send("Page.describeNode",{frameId:e._context.frame._id,objectId:e._objectId});return t?this._page._frameManager.frame(t):null})}getOwnerFrame(e){return c(this,null,function*(){let{ownerFrameId:t}=yield this._session.send("Page.describeNode",{frameId:e._context.frame._id,objectId:e._objectId});return t||null})}isElementHandle(e){return e.subtype==="node"}getBoundingBox(e){return c(this,null,function*(){let t=yield this.getContentQuads(e);if(!t||!t.length)return null;let i=1/0,n=-1/0,s=1/0,o=-1/0;for(let l of t)for(let u of l)i=Math.min(i,u.x),n=Math.max(n,u.x),s=Math.min(s,u.y),o=Math.max(o,u.y);return{x:i,y:s,width:n-i,height:o-s}})}scrollRectIntoViewIfNeeded(e,t){return c(this,null,function*(){return yield this._session.send("Page.scrollIntoViewIfNeeded",{frameId:e._context.frame._id,objectId:e._objectId,rect:t}).then(()=>"done").catch(i=>{if(i instanceof Error&&i.message.includes("Node is detached from document"))return"error:notconnected";if(i instanceof Error&&i.message.includes("Node does not have a layout object"))return"error:notvisible";throw i})})}setScreencastOptions(e){return c(this,null,function*(){if(e){let{screencastId:t}=yield this._session.send("Page.startScreencast",e);this._screencastId=t}else yield this._session.send("Page.stopScreencast")})}_onScreencastFrame(e){if(!this._screencastId)return;this._session.send("Page.screencastFrameAck",{screencastId:this._screencastId}).catch(i=>qH.debugLogger.log("error",i));let t=Buffer.from(e.data,"base64");this._page.emit(fc.Page.Events.ScreencastFrame,{buffer:t,width:e.deviceWidth,height:e.deviceHeight})}rafCountForStablePosition(){return 1}getContentQuads(e){return c(this,null,function*(){let t=yield this._session.sendMayFail("Page.getContentQuads",{frameId:e._context.frame._id,objectId:e._objectId});return t?t.quads.map(i=>[i.p1,i.p2,i.p3,i.p4]):null})}setInputFiles(e,t){return c(this,null,function*(){yield e.evaluateInUtility(([i,n,s])=>i.setInputFiles(n,s),t)})}adoptElementHandle(e,t){return c(this,null,function*(){let i=yield this._session.send("Page.adoptNode",{frameId:e._context.frame._id,objectId:e._objectId,executionContextId:t._delegate._executionContextId});if(!i.remoteObject)throw new Error(TO.kUnableToAdoptErrorMessage);return t.createHandle(i.remoteObject)})}getAccessibilityTree(e){return c(this,null,function*(){return(0,NH.getAccessibilityTree)(this._session,e)})}inputActionEpilogue(){return c(this,null,function*(){})}getFrameElement(e){return c(this,null,function*(){let t=e.parentFrame();if(!t)throw new Error("Frame has been detached.");let i=yield this._page.selectors._queryAll(t,"frame,iframe",void 0),n=yield Promise.all(i.map(o=>c(this,null,function*(){let l=yield o.contentFrame().catch(u=>null);return{handle:o,frame:l}}))),s=n.find(o=>o.frame===e);if(n.map(o=>o===s?Promise.resolve():o.handle.dispose()),!s)throw new Error("Frame has been detached.");return s.handle})}};xo.FFPage=NO;function bo(r,e){return`${r}---${e}`}});var HO=v(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});So.FFBrowserContext=So.FFBrowser=void 0;var HH=qt(),mc=G(),jH=no(),jd=gt(),Wd=UH(jt()),LO=Dd(),WH=DO();function qO(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(qO=function(i){return i?t:e})(r)}function UH(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=qO(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var Ud=class extends jH.Browser{static connect(e,t){return c(this,null,function*(){let i=new LO.FFConnection(e,t.protocolLogger,t.browserLogsCollector),n=new Ud(i,t);t.__testHookOnConnectToBrowser&&(yield t.__testHookOnConnectToBrowser());let s=[i.send("Browser.enable",{attachToDefaultContext:!!t.persistent}),n._initVersion()];return t.persistent&&(n._defaultContext=new $d(n,void 0,t.persistent),s.push(n._defaultContext._initialize())),t.proxy&&s.push(n._connection.send("Browser.setBrowserProxy",BO(t.proxy))),yield Promise.all(s),n})}constructor(e,t){super(t);this._connection=void 0,this._ffPages=void 0,this._contexts=void 0,this._version="",this._userAgent="",this._connection=e,this._ffPages=new Map,this._contexts=new Map,this._connection.on(LO.ConnectionEvents.Disconnected,()=>this._onDisconnect()),this._connection.on("Browser.attachedToTarget",this._onAttachedToTarget.bind(this)),this._connection.on("Browser.detachedFromTarget",this._onDetachedFromTarget.bind(this)),this._connection.on("Browser.downloadCreated",this._onDownloadCreated.bind(this)),this._connection.on("Browser.downloadFinished",this._onDownloadFinished.bind(this)),this._connection.on("Browser.videoRecordingFinished",this._onVideoRecordingFinished.bind(this))}_initVersion(){return c(this,null,function*(){let e=yield this._connection.send("Browser.getInfo");this._version=e.version.substring(e.version.indexOf("/")+1),this._userAgent=e.userAgent})}isConnected(){return!this._connection._closed}newContext(e){return c(this,null,function*(){if((0,jd.validateBrowserContextOptions)(e,this.options),e.isMobile)throw new Error("options.isMobile is not supported in Firefox");let{browserContextId:t}=yield this._connection.send("Browser.createBrowserContext",{removeOnDetach:!0}),i=new $d(this,t,e);return yield i._initialize(),this._contexts.set(t,i),i})}contexts(){return Array.from(this._contexts.values())}version(){return this._version}userAgent(){return this._userAgent}_onDetachedFromTarget(e){let t=this._ffPages.get(e.targetId);this._ffPages.delete(e.targetId),t.didClose()}_onAttachedToTarget(e){let{targetId:t,browserContextId:i,openerId:n,type:s}=e.targetInfo;(0,mc.assert)(s==="page");let o=i?this._contexts.get(i):this._defaultContext;(0,mc.assert)(o,`Unknown context id:${i}, _defaultContext: ${this._defaultContext}`);let l=this._connection.createSession(e.sessionId),u=n?this._ffPages.get(n):null,d=new WH.FFPage(l,o,u);this._ffPages.set(t,d)}_onDownloadCreated(e){let t=this._ffPages.get(e.pageTargetId);if((0,mc.assert)(t),!t)return;let i=t._initializedPage;i||(t._markAsError(new Error("Starting new page download")),t._opener&&(i=t._opener._initializedPage)),!!i&&this._downloadCreated(i,e.uuid,e.url,e.suggestedFileName)}_onDownloadFinished(e){let t=e.canceled?"canceled":e.error;this._downloadFinished(e.uuid,t)}_onVideoRecordingFinished(e){var t;(t=this._takeVideo(e.screencastId))===null||t===void 0||t.reportFinished()}_onDisconnect(){for(let e of this._idToVideo.values())e.artifact.reportFinished(HH.kBrowserClosedError);this._idToVideo.clear(),this._didClose()}};So.FFBrowser=Ud;var $d=class extends jd.BrowserContext{constructor(e,t,i){super(e,i,t)}_initialize(){var e=t=>super[t];return c(this,null,function*(){(0,mc.assert)(!this._ffPages().length);let i=this._browserContextId,n=[e("_initialize").call(this)];if(n.push(this._browser._connection.send("Browser.setDownloadOptions",{browserContextId:i,downloadOptions:{behavior:this._options.acceptDownloads?"saveToDisk":"cancel",downloadsDir:this._browser.options.downloadsPath}})),this._options.viewport){let s={viewportSize:{width:this._options.viewport.width,height:this._options.viewport.height},deviceScaleFactor:this._options.deviceScaleFactor||1};n.push(this._browser._connection.send("Browser.setDefaultViewport",{browserContextId:i,viewport:s}))}this._options.hasTouch&&n.push(this._browser._connection.send("Browser.setTouchOverride",{browserContextId:i,hasTouch:!0})),this._options.userAgent&&n.push(this._browser._connection.send("Browser.setUserAgentOverride",{browserContextId:i,userAgent:this._options.userAgent})),this._options.bypassCSP&&n.push(this._browser._connection.send("Browser.setBypassCSP",{browserContextId:i,bypassCSP:!0})),this._options.ignoreHTTPSErrors&&n.push(this._browser._connection.send("Browser.setIgnoreHTTPSErrors",{browserContextId:i,ignoreHTTPSErrors:!0})),this._options.javaScriptEnabled===!1&&n.push(this._browser._connection.send("Browser.setJavaScriptDisabled",{browserContextId:i,javaScriptDisabled:!0})),this._options.locale&&n.push(this._browser._connection.send("Browser.setLocaleOverride",{browserContextId:i,locale:this._options.locale})),this._options.timezoneId&&n.push(this._browser._connection.send("Browser.setTimezoneOverride",{browserContextId:i,timezoneId:this._options.timezoneId})),this._options.permissions&&n.push(this.grantPermissions(this._options.permissions)),(this._options.extraHTTPHeaders||this._options.locale)&&n.push(this.setExtraHTTPHeaders(this._options.extraHTTPHeaders||[])),this._options.httpCredentials&&n.push(this.setHTTPCredentials(this._options.httpCredentials)),this._options.geolocation&&n.push(this.setGeolocation(this._options.geolocation)),this._options.offline&&n.push(this.setOffline(this._options.offline)),n.push(this._browser._connection.send("Browser.setColorScheme",{browserContextId:i,colorScheme:this._options.colorScheme!==void 0?this._options.colorScheme:"light"})),n.push(this._browser._connection.send("Browser.setReducedMotion",{browserContextId:i,reducedMotion:this._options.reducedMotion!==void 0?this._options.reducedMotion:"no-preference"})),n.push(this._browser._connection.send("Browser.setForcedColors",{browserContextId:i,forcedColors:this._options.forcedColors!==void 0?this._options.forcedColors:"none"})),this._options.recordVideo&&n.push(this._ensureVideosPath().then(()=>this._browser._connection.send("Browser.setVideoRecordingOptions",{options:R(y({},this._options.recordVideo.size),{dir:this._options.recordVideo.dir}),browserContextId:this._browserContextId}))),this._options.proxy&&n.push(this._browser._connection.send("Browser.setContextProxy",y({browserContextId:this._browserContextId},BO(this._options.proxy)))),yield Promise.all(n)})}_ffPages(){return Array.from(this._browser._ffPages.values()).filter(e=>e._browserContext===this)}pages(){return this._ffPages().map(e=>e._initializedPage).filter(e=>!!e)}newPageDelegate(){return c(this,null,function*(){(0,jd.assertBrowserContextIsNotOwned)(this);let{targetId:e}=yield this._browser._connection.send("Browser.newPage",{browserContextId:this._browserContextId}).catch(t=>{throw t.message.includes("Failed to override timezone")?new Error(`Invalid timezone ID: ${this._options.timezoneId}`):t});return this._browser._ffPages.get(e)})}_doCookies(e){return c(this,null,function*(){let{cookies:t}=yield this._browser._connection.send("Browser.getCookies",{browserContextId:this._browserContextId});return Wd.filterCookies(t.map(i=>{let n=y({},i);return delete n.size,delete n.session,n}),e)})}addCookies(e){return c(this,null,function*(){let t=Wd.rewriteCookies(e).map(i=>R(y({},i),{expires:i.expires&&i.expires!==-1?i.expires:void 0}));yield this._browser._connection.send("Browser.setCookies",{browserContextId:this._browserContextId,cookies:t})})}clearCookies(){return c(this,null,function*(){yield this._browser._connection.send("Browser.clearCookies",{browserContextId:this._browserContextId})})}_doGrantPermissions(e,t){return c(this,null,function*(){let i=new Map([["geolocation","geo"],["persistent-storage","persistent-storage"],["push","push"],["notifications","desktop-notification"]]),n=t.map(s=>{let o=i.get(s);if(!o)throw new Error("Unknown permission: "+s);return o});yield this._browser._connection.send("Browser.grantPermissions",{origin:e,browserContextId:this._browserContextId,permissions:n})})}_doClearPermissions(){return c(this,null,function*(){yield this._browser._connection.send("Browser.resetPermissions",{browserContextId:this._browserContextId})})}setGeolocation(e){return c(this,null,function*(){(0,jd.verifyGeolocation)(e),this._options.geolocation=e,yield this._browser._connection.send("Browser.setGeolocationOverride",{browserContextId:this._browserContextId,geolocation:e||null})})}setExtraHTTPHeaders(e){return c(this,null,function*(){this._options.extraHTTPHeaders=e;let t=this._options.extraHTTPHeaders;this._options.locale&&(t=Wd.mergeHeaders([t,Wd.singleHeader("Accept-Language",this._options.locale)])),yield this._browser._connection.send("Browser.setExtraHTTPHeaders",{browserContextId:this._browserContextId,headers:t})})}setOffline(e){return c(this,null,function*(){this._options.offline=e,yield this._browser._connection.send("Browser.setOnlineOverride",{browserContextId:this._browserContextId,override:e?"offline":"online"})})}_doSetHTTPCredentials(e){return c(this,null,function*(){this._options.httpCredentials=e,yield this._browser._connection.send("Browser.setHTTPCredentials",{browserContextId:this._browserContextId,credentials:e||null})})}_doAddInitScript(e){return c(this,null,function*(){yield this._browser._connection.send("Browser.addScriptToEvaluateOnNewDocument",{browserContextId:this._browserContextId,script:e})})}_doExposeBinding(e){return c(this,null,function*(){yield this._browser._connection.send("Browser.addBinding",{browserContextId:this._browserContextId,name:e.name,script:e.source})})}_doUpdateRequestInterception(){return c(this,null,function*(){yield this._browser._connection.send("Browser.setRequestInterception",{browserContextId:this._browserContextId,enabled:!!this._requestInterceptor})})}_onClosePersistent(){}_doClose(){return c(this,null,function*(){(0,mc.assert)(this._browserContextId),yield this._browser._connection.send("Browser.removeBrowserContext",{browserContextId:this._browserContextId}),this._browser._contexts.delete(this._browserContextId)})}_doCancelDownload(e){return c(this,null,function*(){yield this._browser._connection.send("Browser.cancelDownload",{uuid:e})})}};So.FFBrowserContext=$d;function BO(r){let e=new URL(r.server),t=parseInt(e.port,10),i="http";return e.protocol==="socks5:"?i="socks":e.protocol==="socks4:"?i="socks4":e.protocol==="https:"&&(i="https"),e.port===""&&(e.protocol==="http:"?t=80:e.protocol==="https:"&&(t=443)),{type:i,bypass:r.bypass?r.bypass.split(",").map(n=>n.trim()):[],host:e.hostname,port:t,username:r.username,password:r.password}}});var $O=v(zd=>{"use strict";Object.defineProperty(zd,"__esModule",{value:!0});zd.Firefox=void 0;var B_=KH(x("os")),$H=jO(x("fs")),H_=jO(x("path")),zH=HO(),VH=Dd(),GH=Md();function jO(r){return r&&r.__esModule?r:{default:r}}function WO(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(WO=function(i){return i?t:e})(r)}function KH(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=WO(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var UO=class extends GH.BrowserType{constructor(e){super("firefox",e)}_connectToTransport(e,t){return zH.FFBrowser.connect(e,t)}_rewriteStartupError(e){return e}_amendEnvironment(e,t,i,n){if(!H_.default.isAbsolute(B_.homedir()))throw new Error(`Cannot launch Firefox with relative home directory. Did you set ${B_.platform()==="win32"?"USERPROFILE":"HOME"} to a relative path?`);return B_.platform()==="linux"?R(y({},e),{LD_LIBRARY_PATH:`${H_.default.dirname(i)}:${process.env.LD_LIBRARY_PATH}`}):e}_attemptToGracefullyCloseBrowser(e){let t={method:"Browser.close",params:{},id:VH.kBrowserCloseMessageId};e.send(t)}_defaultArgs(e,t,i){let{args:n=[],devtools:s,headless:o}=e;if(s&&console.warn("devtools parameter is not supported as a launch argument in Firefox. You can launch the devtools window manually."),n.find(h=>h.startsWith("-profile")||h.startsWith("--profile")))throw new Error("Pass userDataDir parameter to `browserType.launchPersistentContext(userDataDir, ...)` instead of specifying --profile argument");if(n.find(h=>h.startsWith("-juggler")))throw new Error("Use the port parameter instead of -juggler argument");let u=t?void 0:e.firefoxUserPrefs;if(u){let h=[];for(let[p,f]of Object.entries(u))h.push(`user_pref(${JSON.stringify(p)}, ${JSON.stringify(f)});`);$H.default.writeFileSync(H_.default.join(i,"user.js"),h.join(`
`))}let d=["-no-remote"];return o?d.push("-headless"):(d.push("-wait-for-browser"),d.push("-foreground")),d.push("-profile",i),d.push("-juggler-pipe"),d.push(...n),t?d.push("about:blank"):d.push("-silent"),d}};zd.Firefox=UO});var zO=v(Vd=>{(function(r,e){typeof define=="function"&&define.amd?define(["exports"],e):e(typeof Vd!="undefined"?Vd:r)})(Vd,function(r){var e=function(k,V,te){return k>=V&&k<=te};function t(k){return e(k,48,57)}function i(k){return t(k)||e(k,65,70)||e(k,97,102)}function n(k){return e(k,65,90)}function s(k){return e(k,97,122)}function o(k){return n(k)||s(k)}function l(k){return k>=128}function u(k){return o(k)||l(k)||k==95}function d(k){return u(k)||t(k)||k==45}function h(k){return e(k,0,8)||k==11||e(k,14,31)||k==127}function p(k){return k==10}function f(k){return p(k)||k==9||k==32}function m(k){return p(k)||isNaN(k)}var _=1114111,g=function(k){this.message=k};g.prototype=new Error,g.prototype.name="InvalidCharacterError";function w(k){for(var V=[],te=0;te<k.length;te++){var O=k.charCodeAt(te);if(O==13&&k.charCodeAt(te+1)==10&&(O=10,te++),(O==13||O==12)&&(O=10),O==0&&(O=65533),e(O,55296,56319)&&e(k.charCodeAt(te+1),56320,57343)){var Q=O-55296,Oe=k.charCodeAt(te+1)-56320;O=Math.pow(2,16)+Q*Math.pow(2,10)+Oe,te++}V.push(O)}return V}function b(k){if(k<=65535)return String.fromCharCode(k);k-=Math.pow(2,16);var V=Math.floor(k/Math.pow(2,10))+55296,te=k%Math.pow(2,10)+56320;return String.fromCharCode(V)+String.fromCharCode(te)}function C(k){k=w(k);for(var V=-1,te=[],O,Q=0,Oe=0,qe=0,ue=function(){Q+=1,qe=Oe,Oe=0},X={line:Q,column:Oe},oe=function(U){return U>=k.length?-1:k[U]},D=function(U){if(U===void 0&&(U=1),U>3)throw"Spec Error: no more than three codepoints of lookahead.";return oe(V+U)},J=function(U){return U===void 0&&(U=1),V+=U,O=oe(V),p(O)?ue():Oe+=U,!0},le=function(){return V-=1,p(O)?(Q-=1,Oe=qe):Oe-=1,X.line=Q,X.column=Oe,!0},Se=function(U){return U===void 0&&(U=O),U==-1},Te=function(){},ce=function(){return console.log("Parse error at index "+V+", processing codepoint 0x"+O.toString(16)+"."),!0},Re=function(){if(rt(),J(),f(O)){for(;f(D());)J();return new L}else{if(O==34)return Er();if(O==35)if(d(D())||jr(D(1),D(2))){var U=new K;return kr(D(1),D(2),D(3))&&(U.type="id"),U.value=Or(),U}else return new fe(O);else return O==36?D()==61?(J(),new re):new fe(O):O==39?Er():O==40?new pe:O==41?new ie:O==42?D()==61?(J(),new we):new fe(O):O==43?Wr()?(le(),ze()):new fe(O):O==44?new z:O==45?Wr()?(le(),ze()):D(1)==45&&D(2)==62?(J(2),new T):as()?(le(),ct()):new fe(O):O==46?Wr()?(le(),ze()):new fe(O):O==58?new F:O==59?new q:O==60?D(1)==33&&D(2)==45&&D(3)==45?(J(3),new S):new fe(O):O==64?kr(D(1),D(2),D(3))?new ge(Or()):new fe(O):O==91?new j:O==92?Cr()?(le(),ct()):(ce(),new fe(O)):O==93?new H:O==94?D()==61?(J(),new ae):new fe(O):O==123?new I:O==124?D()==61?(J(),new ee):D()==124?(J(),new A):new fe(O):O==125?new Z:O==126?D()==61?(J(),new W):new fe(O):t(O)?(le(),ze()):u(O)?(le(),ct()):Se()?new ne:new fe(O)}},rt=function(){for(;D(1)==47&&D(2)==42;)for(J(2);;)if(J(),O==42&&D()==47){J();break}else if(Se()){ce();return}},ze=function(){var U=ln();if(kr(D(1),D(2),D(3))){var be=new tt;return be.value=U.value,be.repr=U.repr,be.type=U.type,be.unit=Or(),be}else if(D()==37){J();var be=new me;return be.value=U.value,be.repr=U.repr,be}else{var be=new he;return be.value=U.value,be.repr=U.repr,be.type=U.type,be}},ct=function(){var U=Or();if(U.toLowerCase()=="url"&&D()==40){for(J();f(D(1))&&f(D(2));)J();return D()==34||D()==39?new ve(U):f(D())&&(D(2)==34||D(2)==39)?new ve(U):Hr()}else return D()==40?(J(),new ve(U)):new ye(U)},Er=function(U){U===void 0&&(U=O);for(var be="";J();){if(O==U||Se())return new $(be);if(p(O))return ce(),le(),new N;O==92?Se(D())?Te():p(D())?J():be+=b(cr()):be+=b(O)}},Hr=function(){for(var U=new Pe("");f(D());)J();if(Se(D()))return U;for(;J();){if(O==41||Se())return U;if(f(O)){for(;f(D());)J();return D()==41||Se(D())?(J(),U):(cs(),new P)}else{if(O==34||O==39||O==40||h(O))return ce(),cs(),new P;if(O==92)if(Cr())U.value+=b(cr());else return ce(),cs(),new P;else U.value+=b(O)}}},cr=function(){if(J(),i(O)){for(var U=[O],be=0;be<5&&i(D());be++)J(),U.push(O);f(D())&&J();var It=parseInt(U.map(function(un){return String.fromCharCode(un)}).join(""),16);return It>_&&(It=65533),It}else return Se()?65533:O},jr=function(U,be){return!(U!=92||p(be))},Cr=function(){return jr(O,D())},kr=function(U,be,It){return U==45?u(be)||be==45||jr(be,It):u(U)?!0:U==92?jr(U,be):!1},as=function(){return kr(O,D(1),D(2))},cn=function(U,be,It){return U==43||U==45?!!(t(be)||be==46&&t(It)):U==46?!!t(be):!!t(U)},Wr=function(){return cn(O,D(1),D(2))},Or=function(){for(var U="";J();)if(d(O))U+=b(O);else if(Cr())U+=b(cr());else return le(),U},ln=function(){var U=[],be="integer";for((D()==43||D()==45)&&(J(),U+=b(O));t(D());)J(),U+=b(O);if(D(1)==46&&t(D(2)))for(J(),U+=b(O),J(),U+=b(O),be="number";t(D());)J(),U+=b(O);var It=D(1),un=D(2),dn=D(3);if((It==69||It==101)&&t(un))for(J(),U+=b(O),J(),U+=b(O),be="number";t(D());)J(),U+=b(O);else if((It==69||It==101)&&(un==43||un==45)&&t(dn))for(J(),U+=b(O),J(),U+=b(O),J(),U+=b(O),be="number";t(D());)J(),U+=b(O);var Ko=Vo(U);return{type:be,value:Ko,repr:U}},Vo=function(U){return+U},cs=function(){for(;J();){if(O==41||Se())return;Cr()&&cr(),Te()}},Go=0;!Se(D());)if(te.push(Re()),Go++,Go>k.length*2)return"I'm infinite-looping!";return te}function E(){throw"Abstract Base Class"}E.prototype.toJSON=function(){return{token:this.tokenType}},E.prototype.toString=function(){return this.tokenType},E.prototype.toSource=function(){return""+this};function N(){return this}N.prototype=Object.create(E.prototype),N.prototype.tokenType="BADSTRING";function P(){return this}P.prototype=Object.create(E.prototype),P.prototype.tokenType="BADURL";function L(){return this}L.prototype=Object.create(E.prototype),L.prototype.tokenType="WHITESPACE",L.prototype.toString=function(){return"WS"},L.prototype.toSource=function(){return" "};function S(){return this}S.prototype=Object.create(E.prototype),S.prototype.tokenType="CDO",S.prototype.toSource=function(){return"<!--"};function T(){return this}T.prototype=Object.create(E.prototype),T.prototype.tokenType="CDC",T.prototype.toSource=function(){return"-->"};function F(){return this}F.prototype=Object.create(E.prototype),F.prototype.tokenType=":";function q(){return this}q.prototype=Object.create(E.prototype),q.prototype.tokenType=";";function z(){return this}z.prototype=Object.create(E.prototype),z.prototype.tokenType=",";function Y(){throw"Abstract Base Class"}Y.prototype=Object.create(E.prototype);function I(){return this.value="{",this.mirror="}",this}I.prototype=Object.create(Y.prototype),I.prototype.tokenType="{";function Z(){return this.value="}",this.mirror="{",this}Z.prototype=Object.create(Y.prototype),Z.prototype.tokenType="}";function j(){return this.value="[",this.mirror="]",this}j.prototype=Object.create(Y.prototype),j.prototype.tokenType="[";function H(){return this.value="]",this.mirror="[",this}H.prototype=Object.create(Y.prototype),H.prototype.tokenType="]";function pe(){return this.value="(",this.mirror=")",this}pe.prototype=Object.create(Y.prototype),pe.prototype.tokenType="(";function ie(){return this.value=")",this.mirror="(",this}ie.prototype=Object.create(Y.prototype),ie.prototype.tokenType=")";function W(){return this}W.prototype=Object.create(E.prototype),W.prototype.tokenType="~=";function ee(){return this}ee.prototype=Object.create(E.prototype),ee.prototype.tokenType="|=";function ae(){return this}ae.prototype=Object.create(E.prototype),ae.prototype.tokenType="^=";function re(){return this}re.prototype=Object.create(E.prototype),re.prototype.tokenType="$=";function we(){return this}we.prototype=Object.create(E.prototype),we.prototype.tokenType="*=";function A(){return this}A.prototype=Object.create(E.prototype),A.prototype.tokenType="||";function ne(){return this}ne.prototype=Object.create(E.prototype),ne.prototype.tokenType="EOF",ne.prototype.toSource=function(){return""};function fe(k){return this.value=b(k),this}fe.prototype=Object.create(E.prototype),fe.prototype.tokenType="DELIM",fe.prototype.toString=function(){return"DELIM("+this.value+")"},fe.prototype.toJSON=function(){var k=this.constructor.prototype.constructor.prototype.toJSON.call(this);return k.value=this.value,k},fe.prototype.toSource=function(){return this.value=="\\"?`\\
`:this.value};function Ee(){throw"Abstract Base Class"}Ee.prototype=Object.create(E.prototype),Ee.prototype.ASCIIMatch=function(k){return this.value.toLowerCase()==k.toLowerCase()},Ee.prototype.toJSON=function(){var k=this.constructor.prototype.constructor.prototype.toJSON.call(this);return k.value=this.value,k};function ye(k){this.value=k}ye.prototype=Object.create(Ee.prototype),ye.prototype.tokenType="IDENT",ye.prototype.toString=function(){return"IDENT("+this.value+")"},ye.prototype.toSource=function(){return M(this.value)};function ve(k){this.value=k,this.mirror=")"}ve.prototype=Object.create(Ee.prototype),ve.prototype.tokenType="FUNCTION",ve.prototype.toString=function(){return"FUNCTION("+this.value+")"},ve.prototype.toSource=function(){return M(this.value)+"("};function ge(k){this.value=k}ge.prototype=Object.create(Ee.prototype),ge.prototype.tokenType="AT-KEYWORD",ge.prototype.toString=function(){return"AT("+this.value+")"},ge.prototype.toSource=function(){return"@"+M(this.value)};function K(k){this.value=k,this.type="unrestricted"}K.prototype=Object.create(Ee.prototype),K.prototype.tokenType="HASH",K.prototype.toString=function(){return"HASH("+this.value+")"},K.prototype.toJSON=function(){var k=this.constructor.prototype.constructor.prototype.toJSON.call(this);return k.value=this.value,k.type=this.type,k},K.prototype.toSource=function(){return this.type=="id"?"#"+M(this.value):"#"+se(this.value)};function $(k){this.value=k}$.prototype=Object.create(Ee.prototype),$.prototype.tokenType="STRING",$.prototype.toString=function(){return'"'+_e(this.value)+'"'};function Pe(k){this.value=k}Pe.prototype=Object.create(Ee.prototype),Pe.prototype.tokenType="URL",Pe.prototype.toString=function(){return"URL("+this.value+")"},Pe.prototype.toSource=function(){return'url("'+_e(this.value)+'")'};function he(){this.value=null,this.type="integer",this.repr=""}he.prototype=Object.create(E.prototype),he.prototype.tokenType="NUMBER",he.prototype.toString=function(){return this.type=="integer"?"INT("+this.value+")":"NUMBER("+this.value+")"},he.prototype.toJSON=function(){var k=this.constructor.prototype.constructor.prototype.toJSON.call(this);return k.value=this.value,k.type=this.type,k.repr=this.repr,k},he.prototype.toSource=function(){return this.repr};function me(){this.value=null,this.repr=""}me.prototype=Object.create(E.prototype),me.prototype.tokenType="PERCENTAGE",me.prototype.toString=function(){return"PERCENTAGE("+this.value+")"},me.prototype.toJSON=function(){var k=this.constructor.prototype.constructor.prototype.toJSON.call(this);return k.value=this.value,k.repr=this.repr,k},me.prototype.toSource=function(){return this.repr+"%"};function tt(){this.value=null,this.type="integer",this.repr="",this.unit=""}tt.prototype=Object.create(E.prototype),tt.prototype.tokenType="DIMENSION",tt.prototype.toString=function(){return"DIM("+this.value+","+this.unit+")"},tt.prototype.toJSON=function(){var k=this.constructor.prototype.constructor.prototype.toJSON.call(this);return k.value=this.value,k.type=this.type,k.repr=this.repr,k.unit=this.unit,k},tt.prototype.toSource=function(){var k=this.repr,V=M(this.unit);return V[0].toLowerCase()=="e"&&(V[1]=="-"||e(V.charCodeAt(1),48,57))&&(V="\\65 "+V.slice(1,V.length)),k+V};function M(k){k=""+k;for(var V="",te=k.charCodeAt(0),O=0;O<k.length;O++){var Q=k.charCodeAt(O);if(Q==0)throw new g("Invalid character: the input contains U+0000.");e(Q,1,31)||Q==127||O==0&&e(Q,48,57)||O==1&&e(Q,48,57)&&te==45?V+="\\"+Q.toString(16)+" ":Q>=128||Q==45||Q==95||e(Q,48,57)||e(Q,65,90)||e(Q,97,122)?V+=k[O]:V+="\\"+k[O]}return V}function se(k){k=""+k;for(var V="",te=k.charCodeAt(0),O=0;O<k.length;O++){var Q=k.charCodeAt(O);if(Q==0)throw new g("Invalid character: the input contains U+0000.");Q>=128||Q==45||Q==95||e(Q,48,57)||e(Q,65,90)||e(Q,97,122)?V+=k[O]:V+="\\"+Q.toString(16)+" "}return V}function _e(k){k=""+k;for(var V="",te=0;te<k.length;te++){var O=k.charCodeAt(te);if(O==0)throw new g("Invalid character: the input contains U+0000.");e(O,1,31)||O==127?V+="\\"+O.toString(16)+" ":O==34||O==92?V+="\\"+k[te]:V+=k[te]}return V}r.tokenize=C,r.IdentToken=ye,r.FunctionToken=ve,r.AtKeywordToken=ge,r.HashToken=K,r.StringToken=$,r.BadStringToken=N,r.URLToken=Pe,r.BadURLToken=P,r.DelimToken=fe,r.NumberToken=he,r.PercentageToken=me,r.DimensionToken=tt,r.IncludeMatchToken=W,r.DashMatchToken=ee,r.PrefixMatchToken=ae,r.SuffixMatchToken=re,r.SubstringMatchToken=we,r.ColumnToken=A,r.WhitespaceToken=L,r.CDOToken=S,r.CDCToken=T,r.ColonToken=F,r.SemicolonToken=q,r.CommaToken=z,r.OpenParenToken=pe,r.CloseParenToken=ie,r.OpenSquareToken=j,r.CloseSquareToken=H,r.OpenCurlyToken=I,r.CloseCurlyToken=Z,r.EOFToken=ne,r.CSSParserToken=E,r.GroupingToken=Y})});var KO=v(Gd=>{"use strict";Object.defineProperty(Gd,"__esModule",{value:!0});Gd.parseCSS=XH;Gd.serializeSelector=GO;var Fe=JH(zO());function VO(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(VO=function(i){return i?t:e})(r)}function JH(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=VO(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function XH(r,e){let t;try{t=Fe.tokenize(r),t[t.length-1]instanceof Fe.EOFToken||t.push(new Fe.EOFToken)}catch(S){let T=S.message+` while parsing selector "${r}"`,F=(S.stack||"").indexOf(S.message);throw F!==-1&&(S.stack=S.stack.substring(0,F)+T+S.stack.substring(F+S.message.length)),S.message=T,S}let i=t.find(S=>S instanceof Fe.AtKeywordToken||S instanceof Fe.BadStringToken||S instanceof Fe.BadURLToken||S instanceof Fe.ColumnToken||S instanceof Fe.CDOToken||S instanceof Fe.CDCToken||S instanceof Fe.SemicolonToken||S instanceof Fe.OpenCurlyToken||S instanceof Fe.CloseCurlyToken||S instanceof Fe.URLToken||S instanceof Fe.PercentageToken);if(i)throw new Error(`Unsupported token "${i.toSource()}" while parsing selector "${r}"`);let n=0,s=new Set;function o(){return new Error(`Unexpected token "${t[n].toSource()}" while parsing selector "${r}"`)}function l(){for(;t[n]instanceof Fe.WhitespaceToken;)n++}function u(S=n){return t[S]instanceof Fe.IdentToken}function d(S=n){return t[S]instanceof Fe.StringToken}function h(S=n){return t[S]instanceof Fe.NumberToken}function p(S=n){return t[S]instanceof Fe.CommaToken}function f(S=n){return t[S]instanceof Fe.CloseParenToken}function m(S=n){return t[S]instanceof Fe.DelimToken&&t[S].value==="*"}function _(S=n){return t[S]instanceof Fe.EOFToken}function g(S=n){return t[S]instanceof Fe.DelimToken&&[">","+","~"].includes(t[S].value)}function w(S=n){return p(S)||f(S)||_(S)||g(S)||t[S]instanceof Fe.WhitespaceToken}function b(){let S=[C()];for(;l(),!!p();)n++,S.push(C());return S}function C(){return l(),h()||d()?t[n++].value:E()}function E(){let S={simples:[]};for(l(),g()?S.simples.push({selector:{functions:[{name:"scope",args:[]}]},combinator:""}):S.simples.push({selector:N(),combinator:""});;){if(l(),g())S.simples[S.simples.length-1].combinator=t[n++].value,l();else if(w())break;S.simples.push({combinator:"",selector:N()})}return S}function N(){let S="",T=[];for(;!w();)if(u()||m())S+=t[n++].toSource();else if(t[n]instanceof Fe.HashToken)S+=t[n++].toSource();else if(t[n]instanceof Fe.DelimToken&&t[n].value===".")if(n++,u())S+="."+t[n++].toSource();else throw o();else if(t[n]instanceof Fe.ColonToken)if(n++,u())if(!e.has(t[n].value.toLowerCase()))S+=":"+t[n++].toSource();else{let F=t[n++].value.toLowerCase();T.push({name:F,args:[]}),s.add(F)}else if(t[n]instanceof Fe.FunctionToken){let F=t[n++].value.toLowerCase();if(e.has(F)?(T.push({name:F,args:b()}),s.add(F)):S+=`:${F}(${P()})`,l(),!f())throw o();n++}else throw o();else if(t[n]instanceof Fe.OpenSquareToken){for(S+="[",n++;!(t[n]instanceof Fe.CloseSquareToken)&&!_();)S+=t[n++].toSource();if(!(t[n]instanceof Fe.CloseSquareToken))throw o();S+="]",n++}else throw o();if(!S&&!T.length)throw o();return{css:S||void 0,functions:T}}function P(){let S="";for(;!f()&&!_();)S+=t[n++].toSource();return S}let L=b();if(!_())throw new Error(`Error while parsing selector "${r}"`);if(L.some(S=>typeof S!="object"||!("simples"in S)))throw new Error(`Error while parsing selector "${r}"`);return{selector:L,names:Array.from(s)}}function GO(r){return r.map(e=>typeof e=="string"?`"${e}"`:typeof e=="number"?String(e):e.simples.map(({selector:t,combinator:i})=>{let n=t.css||"";return n=n+t.functions.map(s=>`:${s.name}(${GO(s.args)})`).join(""),i&&(n+=" "+i),n}).join(" ")).join(", ")}});var XO=v(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});_c.parseSelector=ZH;_c.customCSSNames=void 0;var YH=KO(),JO=new Set(["not","is","where","has","scope","light","visible","text","text-matches","text-is","has-text","above","below","right-of","left-of","near","nth-match"]);_c.customCSSNames=JO;function ZH(r){let e=QH(r),t=e.parts.map(i=>{if(i.name==="css"||i.name==="css:light"){i.name==="css:light"&&(i.body=":light("+i.body+")");let n=(0,YH.parseCSS)(i.body,JO);return{name:"css",body:n.selector}}return i});return{selector:r,capture:e.capture,parts:t}}function QH(r){let e=0,t,i=0,n={parts:[]},s=()=>{let o=r.substring(i,e).trim(),l=o.indexOf("="),u,d;l!==-1&&o.substring(0,l).trim().match(/^[a-zA-Z_0-9-+:*]+$/)?(u=o.substring(0,l).trim(),d=o.substring(l+1)):o.length>1&&o[0]==='"'&&o[o.length-1]==='"'||o.length>1&&o[0]==="'"&&o[o.length-1]==="'"?(u="text",d=o):/^\(*\/\//.test(o)||o.startsWith("..")?(u="xpath",d=o):(u="css",d=o);let h=!1;if(u[0]==="*"&&(h=!0,u=u.substring(1)),n.parts.push({name:u,body:d}),h){if(n.capture!==void 0)throw new Error("Only one of the selectors can capture using * modifier");n.capture=n.parts.length-1}};if(!r.includes(">>"))return e=r.length,s(),n;for(;e<r.length;){let o=r[e];o==="\\"&&e+1<r.length?e+=2:o===t?(t=void 0,e++):!t&&(o==='"'||o==="'"||o==="`")?(t=o,e++):!t&&o===">"&&r[e+1]===">"?(s(),e+=2,i=e):e++}return s(),n}});var j_=v(Kd=>{"use strict";Object.defineProperty(Kd,"__esModule",{value:!0});Kd.Selectors=void 0;var e5=XO(),t5=G(),YO=class{constructor(){this._builtinEngines=void 0,this._builtinEnginesInMainWorld=void 0,this._engines=void 0,this.guid=`selectors@${(0,t5.createGuid)()}`,this._builtinEngines=new Set(["css","css:light","xpath","xpath:light","_react","_vue","text","text:light","id","id:light","data-testid","data-testid:light","data-test-id","data-test-id:light","data-test","data-test:light","nth","visible"]),this._builtinEnginesInMainWorld=new Set(["_react","_vue"]),this._engines=new Map}register(e,t,i=!1){return c(this,null,function*(){if(!e.match(/^[a-zA-Z_0-9-]+$/))throw new Error("Selector engine name may only contain [a-zA-Z0-9_] characters");if(this._builtinEngines.has(e)||e==="zs"||e==="zs:light")throw new Error(`"${e}" is a predefined selector engine`);if(this._engines.has(e))throw new Error(`"${e}" selector engine has been already registered`);this._engines.set(e,{source:t,contentScript:i})})}unregisterAll(){this._engines.clear()}query(e,t,i,n){return c(this,null,function*(){let s=e._page.parseSelector(t,i),u=yield(yield(yield e._context(s.world)).injectedScript()).evaluateHandle((p,{parsed:f,scope:m,strict:_})=>p.querySelector(f,m||document,_),{parsed:s.parsed,scope:n,strict:s.strict}),d=u.asElement();if(!d)return u.dispose(),null;let h=yield e._mainContext();return this._adoptIfNeeded(d,h)})}_queryArray(e,t,i){return c(this,null,function*(){let n=this.parseSelector(t,!1);return yield(yield(yield e._mainContext()).injectedScript()).evaluateHandle((u,{parsed:d,scope:h})=>u.querySelectorAll(d,h||document),{parsed:n.parsed,scope:i})})}_queryAll(e,t,i,n){return c(this,null,function*(){let s=this.parseSelector(t,!1),o=yield e._context(s.world),u=yield(yield o.injectedScript()).evaluateHandle((f,{parsed:m,scope:_})=>f.querySelectorAll(m,_||document),{parsed:s.parsed,scope:i}),d=yield u.getProperties();u.dispose();let h=n?yield e._mainContext():o,p=[];for(let f of d.values()){let m=f.asElement();m?p.push(this._adoptIfNeeded(m,h)):f.dispose()}return Promise.all(p)})}_adoptIfNeeded(e,t){return c(this,null,function*(){if(e._context===t)return e;let i=e._page._delegate.adoptElementHandle(e,t);return e.dispose(),i})}parseSelector(e,t){let i=(0,e5.parseSelector)(e),n=!1;for(let s of i.parts){let o=this._engines.get(s.name);if(!o&&!this._builtinEngines.has(s.name))throw new Error(`Unknown engine "${s.name}" while parsing selector ${e}`);o&&!o.contentScript&&(n=!0),this._builtinEnginesInMainWorld.has(s.name)&&(n=!0)}return{parsed:i,selector:e,world:n?"main":"utility",strict:t}}};Kd.Selectors=YO});var gc=v(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.createProtocolError=rP;_r.WKSession=_r.WKConnection=_r.kPageProxyMessageReceived=_r.kBrowserCloseMessageId=void 0;var r5=x("events"),i5=G(),ZO=Bt(),n5=Xe(),s5=Mt(),o5=qt(),W_=Xr(),QO=-9999;_r.kBrowserCloseMessageId=QO;var eP="kPageProxyMessageReceived";_r.kPageProxyMessageReceived=eP;var tP=class{constructor(e,t,i,n){this._transport=void 0,this._onDisconnect=void 0,this._protocolLogger=void 0,this._browserLogsCollector=void 0,this._lastId=0,this._closed=!1,this.browserSession=void 0,this._transport=e,this._transport.onmessage=this._dispatchMessage.bind(this),this._transport.onclose=this._onClose.bind(this),this._onDisconnect=t,this._protocolLogger=i,this._browserLogsCollector=n,this.browserSession=new U_(this,"",o5.kBrowserClosedError,s=>{this.rawSend(s)})}nextMessageId(){return++this._lastId}rawSend(e){this._protocolLogger("send",e),this._transport.send(e)}_dispatchMessage(e){if(this._protocolLogger("receive",e),e.id!==QO){if(e.pageProxyId){let t={message:e,pageProxyId:e.pageProxyId};this.browserSession.dispatchMessage({method:eP,params:t});return}this.browserSession.dispatchMessage(e)}}_onClose(){this._closed=!0,this._transport.onmessage=void 0,this._transport.onclose=void 0,this.browserSession.dispose(!0),this._onDisconnect()}isClosed(){return this._closed}close(){this._closed||this._transport.close()}};_r.WKConnection=tP;var U_=class extends r5.EventEmitter{constructor(e,t,i,n){super();this.connection=void 0,this.errorText=void 0,this.sessionId=void 0,this._disposed=!1,this._rawSend=void 0,this._callbacks=new Map,this._crashed=!1,this.on=void 0,this.addListener=void 0,this.off=void 0,this.removeListener=void 0,this.once=void 0,this.setMaxListeners(0),this.connection=e,this.sessionId=t,this._rawSend=n,this.errorText=i,this.on=super.on,this.off=super.removeListener,this.addListener=super.addListener,this.removeListener=super.removeListener,this.once=super.once}send(e,t){return c(this,null,function*(){if(this._crashed)throw new W_.ProtocolError(!0,"Target crashed");if(this._disposed)throw new W_.ProtocolError(!0,"Target closed");let i=this.connection.nextMessageId(),n={id:i,method:e,params:t};return this._rawSend(n),new Promise((s,o)=>{this._callbacks.set(i,{resolve:s,reject:o,error:new W_.ProtocolError(!1),method:e})})})}sendMayFail(e,t){return this.send(e,t).catch(i=>n5.debugLogger.log("error",i))}markAsCrashed(){this._crashed=!0}isDisposed(){return this._disposed}dispose(e){e&&(this.errorText="Browser closed."+s5.helper.formatBrowserLogs(this.connection._browserLogsCollector.recentLogs()));for(let t of this._callbacks.values())t.error.sessionClosed=!0,t.reject((0,ZO.rewriteErrorMessage)(t.error,this.errorText));this._callbacks.clear(),this._disposed=!0}dispatchMessage(e){if(e.id&&this._callbacks.has(e.id)){let t=this._callbacks.get(e.id);this._callbacks.delete(e.id),e.error?t.reject(rP(t.error,t.method,e.error)):t.resolve(e.result)}else e.id&&!e.error?(0,i5.assert)(this.isDisposed()):Promise.resolve().then(()=>this.emit(e.method,e.params))}};_r.WKSession=U_;function rP(r,e,t){let i=`Protocol error (${e}): ${t.message}`;return"data"in t&&(i+=` ${JSON.stringify(t.data)}`),(0,ZO.rewriteErrorMessage)(r,i)}});var sP=v((K9,Jd)=>{var iP=iP||function(r){return Buffer.from(r).toString("base64")};function a5(r){var e=this,t=Math.round,i=Math.floor,n=new Array(64),s=new Array(64),o=new Array(64),l=new Array(64),u,d,h,p,f=new Array(65535),m=new Array(65535),_=new Array(64),g=new Array(64),w=[],b=0,C=7,E=new Array(64),N=new Array(64),P=new Array(64),L=new Array(256),S=new Array(2048),T,F=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],q=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Z=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],pe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ie(M){for(var se=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],_e=0;_e<64;_e++){var k=i((se[_e]*M+50)/100);k<1?k=1:k>255&&(k=255),n[F[_e]]=k}for(var V=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],te=0;te<64;te++){var O=i((V[te]*M+50)/100);O<1?O=1:O>255&&(O=255),s[F[te]]=O}for(var Q=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Oe=0,qe=0;qe<8;qe++)for(var ue=0;ue<8;ue++)o[Oe]=1/(n[F[Oe]]*Q[qe]*Q[ue]*8),l[Oe]=1/(s[F[Oe]]*Q[qe]*Q[ue]*8),Oe++}function W(M,se){for(var _e=0,k=0,V=new Array,te=1;te<=16;te++){for(var O=1;O<=M[te];O++)V[se[k]]=[],V[se[k]][0]=_e,V[se[k]][1]=te,k++,_e++;_e*=2}return V}function ee(){u=W(q,z),d=W(Z,j),h=W(Y,I),p=W(H,pe)}function ae(){for(var M=1,se=2,_e=1;_e<=15;_e++){for(var k=M;k<se;k++)m[32767+k]=_e,f[32767+k]=[],f[32767+k][1]=_e,f[32767+k][0]=k;for(var V=-(se-1);V<=-M;V++)m[32767+V]=_e,f[32767+V]=[],f[32767+V][1]=_e,f[32767+V][0]=se-1+V;M<<=1,se<<=1}}function re(){for(var M=0;M<256;M++)S[M]=19595*M,S[M+256>>0]=38470*M,S[M+512>>0]=7471*M+32768,S[M+768>>0]=-11059*M,S[M+1024>>0]=-21709*M,S[M+1280>>0]=32768*M+8421375,S[M+1536>>0]=-27439*M,S[M+1792>>0]=-5329*M}function we(M){for(var se=M[0],_e=M[1]-1;_e>=0;)se&1<<_e&&(b|=1<<C),_e--,C--,C<0&&(b==255?(A(255),A(0)):A(b),C=7,b=0)}function A(M){w.push(M)}function ne(M){A(M>>8&255),A(M&255)}function fe(M,se){var _e,k,V,te,O,Q,Oe,qe,ue=0,X,oe=8,D=64;for(X=0;X<oe;++X){_e=M[ue],k=M[ue+1],V=M[ue+2],te=M[ue+3],O=M[ue+4],Q=M[ue+5],Oe=M[ue+6],qe=M[ue+7];var J=_e+qe,le=_e-qe,Se=k+Oe,Te=k-Oe,ce=V+Q,Re=V-Q,rt=te+O,ze=te-O,ct=J+rt,Er=J-rt,Hr=Se+ce,cr=Se-ce;M[ue]=ct+Hr,M[ue+4]=ct-Hr;var jr=(cr+Er)*.707106781;M[ue+2]=Er+jr,M[ue+6]=Er-jr,ct=ze+Re,Hr=Re+Te,cr=Te+le;var Cr=(ct-cr)*.382683433,kr=.5411961*ct+Cr,as=1.306562965*cr+Cr,cn=Hr*.707106781,Wr=le+cn,Or=le-cn;M[ue+5]=Or+kr,M[ue+3]=Or-kr,M[ue+1]=Wr+as,M[ue+7]=Wr-as,ue+=8}for(ue=0,X=0;X<oe;++X){_e=M[ue],k=M[ue+8],V=M[ue+16],te=M[ue+24],O=M[ue+32],Q=M[ue+40],Oe=M[ue+48],qe=M[ue+56];var ln=_e+qe,Vo=_e-qe,cs=k+Oe,Go=k-Oe,U=V+Q,be=V-Q,It=te+O,un=te-O,dn=ln+It,Ko=ln-It,Uc=cs+U,$c=cs-U;M[ue]=dn+Uc,M[ue+32]=dn-Uc;var ww=($c+Ko)*.707106781;M[ue+16]=Ko+ww,M[ue+48]=Ko-ww,dn=un+be,Uc=be+Go,$c=Go+Vo;var vw=(dn-$c)*.382683433,yw=.5411961*dn+vw,bw=1.306562965*$c+vw,xw=Uc*.707106781,Sw=Vo+xw,Ew=Vo-xw;M[ue+40]=Ew+yw,M[ue+24]=Ew-yw,M[ue+8]=Sw+bw,M[ue+56]=Sw-bw,ue++}var zc;for(X=0;X<D;++X)zc=M[X]*se[X],_[X]=zc>0?zc+.5|0:zc-.5|0;return _}function Ee(){ne(65504),ne(16),A(74),A(70),A(73),A(70),A(0),A(1),A(1),A(0),ne(1),ne(1),A(0),A(0)}function ye(M){if(!!M){ne(65505),M[0]===69&&M[1]===120&&M[2]===105&&M[3]===102?ne(M.length+2):(ne(M.length+5+2),A(69),A(120),A(105),A(102),A(0));for(var se=0;se<M.length;se++)A(M[se])}}function ve(M,se){ne(65472),ne(17),A(8),ne(se),ne(M),A(3),A(1),A(17),A(0),A(2),A(17),A(1),A(3),A(17),A(1)}function ge(){ne(65499),ne(132),A(0);for(var M=0;M<64;M++)A(n[M]);A(1);for(var se=0;se<64;se++)A(s[se])}function K(){ne(65476),ne(418),A(0);for(var M=0;M<16;M++)A(q[M+1]);for(var se=0;se<=11;se++)A(z[se]);A(16);for(var _e=0;_e<16;_e++)A(Y[_e+1]);for(var k=0;k<=161;k++)A(I[k]);A(1);for(var V=0;V<16;V++)A(Z[V+1]);for(var te=0;te<=11;te++)A(j[te]);A(17);for(var O=0;O<16;O++)A(H[O+1]);for(var Q=0;Q<=161;Q++)A(pe[Q])}function $(){ne(65498),ne(12),A(3),A(1),A(0),A(2),A(17),A(3),A(17),A(0),A(63),A(0)}function Pe(M,se,_e,k,V){for(var te=V[0],O=V[240],Q,Oe=16,qe=63,ue=64,X=fe(M,se),oe=0;oe<ue;++oe)g[F[oe]]=X[oe];var D=g[0]-_e;_e=g[0],D==0?we(k[0]):(Q=32767+D,we(k[m[Q]]),we(f[Q]));for(var J=63;J>0&&g[J]==0;J--);if(J==0)return we(te),_e;for(var le=1,Se;le<=J;){for(var Te=le;g[le]==0&&le<=J;++le);var ce=le-Te;if(ce>=Oe){Se=ce>>4;for(var Re=1;Re<=Se;++Re)we(O);ce=ce&15}Q=32767+g[le],we(V[(ce<<4)+m[Q]]),we(f[Q]),le++}return J!=qe&&we(te),_e}function he(){for(var M=String.fromCharCode,se=0;se<256;se++)L[se]=M(se)}this.encode=function(M,se){var _e=new Date().getTime();se&&me(se),w=new Array,b=0,C=7,ne(65496),Ee(),ye(M.exifBuffer),ge(),ve(M.width,M.height),K(),$();var k=0,V=0,te=0;b=0,C=7,this.encode.displayName="_encode_";for(var O=M.data,Q=M.width,Oe=M.height,qe=Q*4,ue=Q*3,X,oe=0,D,J,le,Se,Te,ce,Re,rt;oe<Oe;){for(X=0;X<qe;){for(Se=qe*oe+X,Te=Se,ce=-1,Re=0,rt=0;rt<64;rt++)Re=rt>>3,ce=(rt&7)*4,Te=Se+Re*qe+ce,oe+Re>=Oe&&(Te-=qe*(oe+1+Re-Oe)),X+ce>=qe&&(Te-=X+ce-qe+4),D=O[Te++],J=O[Te++],le=O[Te++],E[rt]=(S[D]+S[J+256>>0]+S[le+512>>0]>>16)-128,N[rt]=(S[D+768>>0]+S[J+1024>>0]+S[le+1280>>0]>>16)-128,P[rt]=(S[D+1280>>0]+S[J+1536>>0]+S[le+1792>>0]>>16)-128;k=Pe(E,o,k,u,h),V=Pe(N,l,V,d,p),te=Pe(P,l,te,d,p),X+=32}oe+=8}if(C>=0){var ze=[];ze[1]=C+1,ze[0]=(1<<C+1)-1,we(ze)}if(ne(65497),typeof Jd=="undefined")return new Uint8Array(w);return Buffer.from(w);var ct,Er};function me(M){if(M<=0&&(M=1),M>100&&(M=100),T!=M){var se=0;M<50?se=Math.floor(5e3/M):se=Math.floor(200-M*2),ie(se),T=M}}function tt(){var M=new Date().getTime();r||(r=50),he(),ee(),ae(),re(),me(r);var se=new Date().getTime()-M}tt()}typeof Jd!="undefined"?Jd.exports=nP:typeof window!="undefined"&&(window["jpeg-js"]=window["jpeg-js"]||{},window["jpeg-js"].encode=nP);function nP(r,e){typeof e=="undefined"&&(e=50);var t=new a5(e),i=t.encode(r,e);return{data:i,width:r.width,height:r.height}}});var aP=v((J9,z_)=>{var $_=function(){"use strict";var e=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),t=4017,i=799,n=3406,s=2276,o=1567,l=3784,u=5793,d=2896;function h(){}function p(C,E){for(var N=0,P=[],L,S,T=16;T>0&&!C[T-1];)T--;P.push({children:[],index:0});var F=P[0],q;for(L=0;L<T;L++){for(S=0;S<C[L];S++){for(F=P.pop(),F.children[F.index]=E[N];F.index>0;){if(P.length===0)throw new Error("Could not recreate Huffman Table");F=P.pop()}for(F.index++,P.push(F);P.length<=L;)P.push(q={children:[],index:0}),F.children[F.index]=q.children,F=q;N++}L+1<T&&(P.push(q={children:[],index:0}),F.children[F.index]=q.children,F=q)}return P[0].children}function f(C,E,N,P,L,S,T,F,q,z){var Y=N.precision,I=N.samplesPerLine,Z=N.scanLines,j=N.mcusPerLine,H=N.progressive,pe=N.maxH,ie=N.maxV,W=E,ee=0,ae=0;function re(){if(ae>0)return ae--,ee>>ae&1;if(ee=C[E++],ee==255){var X=C[E++];if(X)throw new Error("unexpected marker: "+(ee<<8|X).toString(16))}return ae=7,ee>>>7}function we(X){for(var oe=X,D;(D=re())!==null;){if(oe=oe[D],typeof oe=="number")return oe;if(typeof oe!="object")throw new Error("invalid huffman sequence")}return null}function A(X){for(var oe=0;X>0;){var D=re();if(D===null)return;oe=oe<<1|D,X--}return oe}function ne(X){var oe=A(X);return oe>=1<<X-1?oe:oe+(-1<<X)+1}function fe(X,oe){var D=we(X.huffmanTableDC),J=D===0?0:ne(D);oe[0]=X.pred+=J;for(var le=1;le<64;){var Se=we(X.huffmanTableAC),Te=Se&15,ce=Se>>4;if(Te===0){if(ce<15)break;le+=16;continue}le+=ce;var Re=e[le];oe[Re]=ne(Te),le++}}function Ee(X,oe){var D=we(X.huffmanTableDC),J=D===0?0:ne(D)<<q;oe[0]=X.pred+=J}function ye(X,oe){oe[0]|=re()<<q}var ve=0;function ge(X,oe){if(ve>0){ve--;return}for(var D=S,J=T;D<=J;){var le=we(X.huffmanTableAC),Se=le&15,Te=le>>4;if(Se===0){if(Te<15){ve=A(Te)+(1<<Te)-1;break}D+=16;continue}D+=Te;var ce=e[D];oe[ce]=ne(Se)*(1<<q),D++}}var K=0,$;function Pe(X,oe){for(var D=S,J=T,le=0;D<=J;){var Se=e[D],Te=oe[Se]<0?-1:1;switch(K){case 0:var ce=we(X.huffmanTableAC),Re=ce&15,le=ce>>4;if(Re===0)le<15?(ve=A(le)+(1<<le),K=4):(le=16,K=1);else{if(Re!==1)throw new Error("invalid ACn encoding");$=ne(Re),K=le?2:3}continue;case 1:case 2:oe[Se]?oe[Se]+=(re()<<q)*Te:(le--,le===0&&(K=K==2?3:0));break;case 3:oe[Se]?oe[Se]+=(re()<<q)*Te:(oe[Se]=$<<q,K=0);break;case 4:oe[Se]&&(oe[Se]+=(re()<<q)*Te);break}D++}K===4&&(ve--,ve===0&&(K=0))}function he(X,oe,D,J,le){var Se=D/j|0,Te=D%j,ce=Se*X.v+J,Re=Te*X.h+le;X.blocks[ce]===void 0&&z.tolerantDecoding||oe(X,X.blocks[ce][Re])}function me(X,oe,D){var J=D/X.blocksPerLine|0,le=D%X.blocksPerLine;X.blocks[J]===void 0&&z.tolerantDecoding||oe(X,X.blocks[J][le])}var tt=P.length,M,se,_e,k,V,te;H?S===0?te=F===0?Ee:ye:te=F===0?ge:Pe:te=fe;var O=0,Q,Oe;tt==1?Oe=P[0].blocksPerLine*P[0].blocksPerColumn:Oe=j*N.mcusPerColumn,L||(L=Oe);for(var qe,ue;O<Oe;){for(se=0;se<tt;se++)P[se].pred=0;if(ve=0,tt==1)for(M=P[0],V=0;V<L;V++)me(M,te,O),O++;else for(V=0;V<L;V++){for(se=0;se<tt;se++)for(M=P[se],qe=M.h,ue=M.v,_e=0;_e<ue;_e++)for(k=0;k<qe;k++)he(M,te,O,_e,k);if(O++,O===Oe)break}if(O===Oe)do{if(C[E]===255&&C[E+1]!==0)break;E+=1}while(E<C.length-2);if(ae=0,Q=C[E]<<8|C[E+1],Q<65280)throw new Error("marker was not found");if(Q>=65488&&Q<=65495)E+=2;else break}return E-W}function m(C,E){var N=[],P=E.blocksPerLine,L=E.blocksPerColumn,S=P<<3,T=new Int32Array(64),F=new Uint8Array(64);function q(W,ee,ae){var re=E.quantizationTable,we,A,ne,fe,Ee,ye,ve,ge,K,$=ae,Pe;for(Pe=0;Pe<64;Pe++)$[Pe]=W[Pe]*re[Pe];for(Pe=0;Pe<8;++Pe){var he=8*Pe;if($[1+he]==0&&$[2+he]==0&&$[3+he]==0&&$[4+he]==0&&$[5+he]==0&&$[6+he]==0&&$[7+he]==0){K=u*$[0+he]+512>>10,$[0+he]=K,$[1+he]=K,$[2+he]=K,$[3+he]=K,$[4+he]=K,$[5+he]=K,$[6+he]=K,$[7+he]=K;continue}we=u*$[0+he]+128>>8,A=u*$[4+he]+128>>8,ne=$[2+he],fe=$[6+he],Ee=d*($[1+he]-$[7+he])+128>>8,ge=d*($[1+he]+$[7+he])+128>>8,ye=$[3+he]<<4,ve=$[5+he]<<4,K=we-A+1>>1,we=we+A+1>>1,A=K,K=ne*l+fe*o+128>>8,ne=ne*o-fe*l+128>>8,fe=K,K=Ee-ve+1>>1,Ee=Ee+ve+1>>1,ve=K,K=ge+ye+1>>1,ye=ge-ye+1>>1,ge=K,K=we-fe+1>>1,we=we+fe+1>>1,fe=K,K=A-ne+1>>1,A=A+ne+1>>1,ne=K,K=Ee*s+ge*n+2048>>12,Ee=Ee*n-ge*s+2048>>12,ge=K,K=ye*i+ve*t+2048>>12,ye=ye*t-ve*i+2048>>12,ve=K,$[0+he]=we+ge,$[7+he]=we-ge,$[1+he]=A+ve,$[6+he]=A-ve,$[2+he]=ne+ye,$[5+he]=ne-ye,$[3+he]=fe+Ee,$[4+he]=fe-Ee}for(Pe=0;Pe<8;++Pe){var me=Pe;if($[1*8+me]==0&&$[2*8+me]==0&&$[3*8+me]==0&&$[4*8+me]==0&&$[5*8+me]==0&&$[6*8+me]==0&&$[7*8+me]==0){K=u*ae[Pe+0]+8192>>14,$[0*8+me]=K,$[1*8+me]=K,$[2*8+me]=K,$[3*8+me]=K,$[4*8+me]=K,$[5*8+me]=K,$[6*8+me]=K,$[7*8+me]=K;continue}we=u*$[0*8+me]+2048>>12,A=u*$[4*8+me]+2048>>12,ne=$[2*8+me],fe=$[6*8+me],Ee=d*($[1*8+me]-$[7*8+me])+2048>>12,ge=d*($[1*8+me]+$[7*8+me])+2048>>12,ye=$[3*8+me],ve=$[5*8+me],K=we-A+1>>1,we=we+A+1>>1,A=K,K=ne*l+fe*o+2048>>12,ne=ne*o-fe*l+2048>>12,fe=K,K=Ee-ve+1>>1,Ee=Ee+ve+1>>1,ve=K,K=ge+ye+1>>1,ye=ge-ye+1>>1,ge=K,K=we-fe+1>>1,we=we+fe+1>>1,fe=K,K=A-ne+1>>1,A=A+ne+1>>1,ne=K,K=Ee*s+ge*n+2048>>12,Ee=Ee*n-ge*s+2048>>12,ge=K,K=ye*i+ve*t+2048>>12,ye=ye*t-ve*i+2048>>12,ve=K,$[0*8+me]=we+ge,$[7*8+me]=we-ge,$[1*8+me]=A+ve,$[6*8+me]=A-ve,$[2*8+me]=ne+ye,$[5*8+me]=ne-ye,$[3*8+me]=fe+Ee,$[4*8+me]=fe-Ee}for(Pe=0;Pe<64;++Pe){var tt=128+($[Pe]+8>>4);ee[Pe]=tt<0?0:tt>255?255:tt}}b(S*L*8);for(var z,Y,I=0;I<L;I++){var Z=I<<3;for(z=0;z<8;z++)N.push(new Uint8Array(S));for(var j=0;j<P;j++){q(E.blocks[I][j],F,T);var H=0,pe=j<<3;for(Y=0;Y<8;Y++){var ie=N[Z+Y];for(z=0;z<8;z++)ie[pe+z]=F[H++]}}}return N}function _(C){return C<0?0:C>255?255:C}h.prototype={load:function(E){var N=new XMLHttpRequest;N.open("GET",E,!0),N.responseType="arraybuffer",N.onload=function(){var P=new Uint8Array(N.response||N.mozResponseArrayBuffer);this.parse(P),this.onload&&this.onload()}.bind(this),N.send(null)},parse:function(E){var N=this.opts.maxResolutionInMP*1e3*1e3,P=0,L=E.length;function S(){var ce=E[P]<<8|E[P+1];return P+=2,ce}function T(){var ce=S(),Re=E.subarray(P,P+ce-2);return P+=Re.length,Re}function F(ce){var Re=0,rt=0,ze,ct;for(ct in ce.components)ce.components.hasOwnProperty(ct)&&(ze=ce.components[ct],Re<ze.h&&(Re=ze.h),rt<ze.v&&(rt=ze.v));var Er=Math.ceil(ce.samplesPerLine/8/Re),Hr=Math.ceil(ce.scanLines/8/rt);for(ct in ce.components)if(ce.components.hasOwnProperty(ct)){ze=ce.components[ct];var cr=Math.ceil(Math.ceil(ce.samplesPerLine/8)*ze.h/Re),jr=Math.ceil(Math.ceil(ce.scanLines/8)*ze.v/rt),Cr=Er*ze.h,kr=Hr*ze.v,as=kr*Cr,cn=[];b(as*256);for(var Wr=0;Wr<kr;Wr++){for(var Or=[],ln=0;ln<Cr;ln++)Or.push(new Int32Array(64));cn.push(Or)}ze.blocksPerLine=cr,ze.blocksPerColumn=jr,ze.blocks=cn}ce.maxH=Re,ce.maxV=rt,ce.mcusPerLine=Er,ce.mcusPerColumn=Hr}var q=null,z=null,Y=null,I,Z,j=[],H=[],pe=[],ie=[],W=S(),ee=-1;if(this.comments=[],W!=65496)throw new Error("SOI not found");for(W=S();W!=65497;){var ae,re,we;switch(W){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var A=T();if(W===65534){var ne=String.fromCharCode.apply(null,A);this.comments.push(ne)}W===65504&&A[0]===74&&A[1]===70&&A[2]===73&&A[3]===70&&A[4]===0&&(q={version:{major:A[5],minor:A[6]},densityUnits:A[7],xDensity:A[8]<<8|A[9],yDensity:A[10]<<8|A[11],thumbWidth:A[12],thumbHeight:A[13],thumbData:A.subarray(14,14+3*A[12]*A[13])}),W===65505&&A[0]===69&&A[1]===120&&A[2]===105&&A[3]===102&&A[4]===0&&(this.exifBuffer=A.subarray(5,A.length)),W===65518&&A[0]===65&&A[1]===100&&A[2]===111&&A[3]===98&&A[4]===101&&A[5]===0&&(z={version:A[6],flags0:A[7]<<8|A[8],flags1:A[9]<<8|A[10],transformCode:A[11]});break;case 65499:for(var fe=S(),Ee=fe+P-2;P<Ee;){var ye=E[P++];b(64*4);var ve=new Int32Array(64);if(ye>>4==0)for(re=0;re<64;re++){var ge=e[re];ve[ge]=E[P++]}else if(ye>>4==1)for(re=0;re<64;re++){var ge=e[re];ve[ge]=S()}else throw new Error("DQT: invalid table spec");j[ye&15]=ve}break;case 65472:case 65473:case 65474:S(),I={},I.extended=W===65473,I.progressive=W===65474,I.precision=E[P++],I.scanLines=S(),I.samplesPerLine=S(),I.components={},I.componentsOrder=[];var K=I.scanLines*I.samplesPerLine;if(K>N){var $=Math.ceil((K-N)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${$}MP`)}var Pe=E[P++],he,me=0,tt=0;for(ae=0;ae<Pe;ae++){he=E[P];var M=E[P+1]>>4,se=E[P+1]&15,_e=E[P+2];I.componentsOrder.push(he),I.components[he]={h:M,v:se,quantizationIdx:_e},P+=3}F(I),H.push(I);break;case 65476:var k=S();for(ae=2;ae<k;){var V=E[P++],te=new Uint8Array(16),O=0;for(re=0;re<16;re++,P++)O+=te[re]=E[P];b(16+O);var Q=new Uint8Array(O);for(re=0;re<O;re++,P++)Q[re]=E[P];ae+=17+O,(V>>4==0?ie:pe)[V&15]=p(te,Q)}break;case 65501:S(),Z=S();break;case 65500:S(),S();break;case 65498:var Oe=S(),qe=E[P++],ue=[],X;for(ae=0;ae<qe;ae++){X=I.components[E[P++]];var oe=E[P++];X.huffmanTableDC=ie[oe>>4],X.huffmanTableAC=pe[oe&15],ue.push(X)}var D=E[P++],J=E[P++],le=E[P++],Se=f(E,P,I,ue,Z,D,J,le>>4,le&15,this.opts);P+=Se;break;case 65535:E[P]!==255&&P--;break;default:if(E[P-3]==255&&E[P-2]>=192&&E[P-2]<=254){P-=3;break}else if(W===224||W==225){if(ee!==-1)throw new Error(`first unknown JPEG marker at offset ${ee.toString(16)}, second unknown JPEG marker ${W.toString(16)} at offset ${(P-1).toString(16)}`);ee=P-1;let ce=S();if(E[P+ce-2]===255){P+=ce-2;break}}throw new Error("unknown JPEG marker "+W.toString(16))}W=S()}if(H.length!=1)throw new Error("only single frame JPEGs supported");for(var ae=0;ae<H.length;ae++){var Te=H[ae].components;for(var re in Te)Te[re].quantizationTable=j[Te[re].quantizationIdx],delete Te[re].quantizationIdx}this.width=I.samplesPerLine,this.height=I.scanLines,this.jfif=q,this.adobe=z,this.components=[];for(var ae=0;ae<I.componentsOrder.length;ae++){var X=I.components[I.componentsOrder[ae]];this.components.push({lines:m(I,X),scaleX:X.h/I.maxH,scaleY:X.v/I.maxV})}},getData:function(E,N){var P=this.width/E,L=this.height/N,S,T,F,q,z,Y,I,Z,j,H,pe=0,ie,W,ee,ae,re,we,A,ne,fe,Ee,ye,ve=E*N*this.components.length;b(ve);var ge=new Uint8Array(ve);switch(this.components.length){case 1:for(S=this.components[0],H=0;H<N;H++)for(z=S.lines[0|H*S.scaleY*L],j=0;j<E;j++)ie=z[0|j*S.scaleX*P],ge[pe++]=ie;break;case 2:for(S=this.components[0],T=this.components[1],H=0;H<N;H++)for(z=S.lines[0|H*S.scaleY*L],Y=T.lines[0|H*T.scaleY*L],j=0;j<E;j++)ie=z[0|j*S.scaleX*P],ge[pe++]=ie,ie=Y[0|j*T.scaleX*P],ge[pe++]=ie;break;case 3:for(ye=!0,this.adobe&&this.adobe.transformCode?ye=!0:typeof this.opts.colorTransform!="undefined"&&(ye=!!this.opts.colorTransform),S=this.components[0],T=this.components[1],F=this.components[2],H=0;H<N;H++)for(z=S.lines[0|H*S.scaleY*L],Y=T.lines[0|H*T.scaleY*L],I=F.lines[0|H*F.scaleY*L],j=0;j<E;j++)ye?(ie=z[0|j*S.scaleX*P],W=Y[0|j*T.scaleX*P],ee=I[0|j*F.scaleX*P],ne=_(ie+1.402*(ee-128)),fe=_(ie-.3441363*(W-128)-.71413636*(ee-128)),Ee=_(ie+1.772*(W-128))):(ne=z[0|j*S.scaleX*P],fe=Y[0|j*T.scaleX*P],Ee=I[0|j*F.scaleX*P]),ge[pe++]=ne,ge[pe++]=fe,ge[pe++]=Ee;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(ye=!1,this.adobe&&this.adobe.transformCode?ye=!0:typeof this.opts.colorTransform!="undefined"&&(ye=!!this.opts.colorTransform),S=this.components[0],T=this.components[1],F=this.components[2],q=this.components[3],H=0;H<N;H++)for(z=S.lines[0|H*S.scaleY*L],Y=T.lines[0|H*T.scaleY*L],I=F.lines[0|H*F.scaleY*L],Z=q.lines[0|H*q.scaleY*L],j=0;j<E;j++)ye?(ie=z[0|j*S.scaleX*P],W=Y[0|j*T.scaleX*P],ee=I[0|j*F.scaleX*P],ae=Z[0|j*q.scaleX*P],re=255-_(ie+1.402*(ee-128)),we=255-_(ie-.3441363*(W-128)-.71413636*(ee-128)),A=255-_(ie+1.772*(W-128))):(re=z[0|j*S.scaleX*P],we=Y[0|j*T.scaleX*P],A=I[0|j*F.scaleX*P],ae=Z[0|j*q.scaleX*P]),ge[pe++]=255-re,ge[pe++]=255-we,ge[pe++]=255-A,ge[pe++]=255-ae;break;default:throw new Error("Unsupported color mode")}return ge},copyToImageData:function(E,N){var P=E.width,L=E.height,S=E.data,T=this.getData(P,L),F=0,q=0,z,Y,I,Z,j,H,pe,ie,W;switch(this.components.length){case 1:for(Y=0;Y<L;Y++)for(z=0;z<P;z++)I=T[F++],S[q++]=I,S[q++]=I,S[q++]=I,N&&(S[q++]=255);break;case 3:for(Y=0;Y<L;Y++)for(z=0;z<P;z++)pe=T[F++],ie=T[F++],W=T[F++],S[q++]=pe,S[q++]=ie,S[q++]=W,N&&(S[q++]=255);break;case 4:for(Y=0;Y<L;Y++)for(z=0;z<P;z++)j=T[F++],H=T[F++],I=T[F++],Z=T[F++],pe=255-_(j*(1-Z/255)+Z),ie=255-_(H*(1-Z/255)+Z),W=255-_(I*(1-Z/255)+Z),S[q++]=pe,S[q++]=ie,S[q++]=W,N&&(S[q++]=255);break;default:throw new Error("Unsupported color mode")}}};var g=0,w=0;function b(C=0){var E=g+C;if(E>w){var N=Math.ceil((E-w)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${N}MB`)}g=E}return h.resetMaxMemoryUsage=function(C){g=0,w=C},h.getBytesAllocated=function(){return g},h.requestMemoryAllocation=b,h}();typeof z_!="undefined"?z_.exports=oP:typeof window!="undefined"&&(window["jpeg-js"]=window["jpeg-js"]||{},window["jpeg-js"].decode=oP);function oP(r,e={}){var t={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512},i=y(y({},t),e),n=new Uint8Array(r),s=new $_;s.opts=i,$_.resetMaxMemoryUsage(i.maxMemoryUsageInMB*1024*1024),s.parse(n);var o=i.formatAsRGBA?4:3,l=s.width*s.height*o;try{$_.requestMemoryAllocation(l);var u={width:s.width,height:s.height,exifBuffer:s.exifBuffer,data:i.useTArray?new Uint8Array(l):Buffer.alloc(l)};s.comments.length>0&&(u.comments=s.comments)}catch(d){throw d instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+l):d}return s.copyToImageData(u,i.formatAsRGBA),u}});var lP=v((X9,cP)=>{var c5=sP(),l5=aP();cP.exports={encode:c5,decode:l5}});var V_=v((Y9,dP)=>{"use strict";var u5=x("util"),uP=x("stream"),gr=dP.exports=function(){uP.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};u5.inherits(gr,uP);gr.prototype.read=function(r,e){this._reads.push({length:Math.abs(r),allowLess:r<0,func:e}),process.nextTick(function(){this._process(),this._paused&&this._reads&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}.bind(this))};gr.prototype.write=function(r,e){if(!this.writable)return this.emit("error",new Error("Stream not writable")),!1;let t;return Buffer.isBuffer(r)?t=r:t=Buffer.from(r,e||this._encoding),this._buffers.push(t),this._buffered+=t.length,this._process(),this._reads&&this._reads.length===0&&(this._paused=!0),this.writable&&!this._paused};gr.prototype.end=function(r,e){r&&this.write(r,e),this.writable=!1,!!this._buffers&&(this._buffers.length===0?this._end():(this._buffers.push(null),this._process()))};gr.prototype.destroySoon=gr.prototype.end;gr.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("Unexpected end of input")),this.destroy()};gr.prototype.destroy=function(){!this._buffers||(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))};gr.prototype._processReadAllowingLess=function(r){this._reads.shift();let e=this._buffers[0];e.length>r.length?(this._buffered-=r.length,this._buffers[0]=e.slice(r.length),r.func.call(this,e.slice(0,r.length))):(this._buffered-=e.length,this._buffers.shift(),r.func.call(this,e))};gr.prototype._processRead=function(r){this._reads.shift();let e=0,t=0,i=Buffer.alloc(r.length);for(;e<r.length;){let n=this._buffers[t++],s=Math.min(n.length,r.length-e);n.copy(i,e,0,s),e+=s,s!==n.length&&(this._buffers[--t]=n.slice(s))}t>0&&this._buffers.splice(0,t),this._buffered-=r.length,r.func.call(this,i)};gr.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){let r=this._reads[0];if(r.allowLess)this._processReadAllowingLess(r);else if(this._buffered>=r.length)this._processRead(r);else break}this._buffers&&!this.writable&&this._end()}catch(r){this.emit("error",r)}}});var K_=v(G_=>{"use strict";var zi=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];G_.getImagePasses=function(r,e){let t=[],i=r%8,n=e%8,s=(r-i)/8,o=(e-n)/8;for(let l=0;l<zi.length;l++){let u=zi[l],d=s*u.x.length,h=o*u.y.length;for(let p=0;p<u.x.length&&u.x[p]<i;p++)d++;for(let p=0;p<u.y.length&&u.y[p]<n;p++)h++;d>0&&h>0&&t.push({width:d,height:h,index:l})}return t};G_.getInterlaceIterator=function(r){return function(e,t,i){let n=e%zi[i].x.length,s=(e-n)/zi[i].x.length*8+zi[i].x[n],o=t%zi[i].y.length,l=(t-o)/zi[i].y.length*8+zi[i].y[o];return s*4+l*r*4}}});var J_=v((Q9,hP)=>{"use strict";hP.exports=function(e,t,i){let n=e+t-i,s=Math.abs(n-e),o=Math.abs(n-t),l=Math.abs(n-i);return s<=o&&s<=l?e:o<=l?t:i}});var X_=v((eG,fP)=>{"use strict";var d5=K_(),h5=J_();function pP(r,e,t){let i=r*e;return t!==8&&(i=Math.ceil(i/(8/t))),i}var Eo=fP.exports=function(r,e){let t=r.width,i=r.height,n=r.interlace,s=r.bpp,o=r.depth;if(this.read=e.read,this.write=e.write,this.complete=e.complete,this._imageIndex=0,this._images=[],n){let l=d5.getImagePasses(t,i);for(let u=0;u<l.length;u++)this._images.push({byteWidth:pP(l[u].width,s,o),height:l[u].height,lineIndex:0})}else this._images.push({byteWidth:pP(t,s,o),height:i,lineIndex:0});o===8?this._xComparison=s:o===16?this._xComparison=s*2:this._xComparison=1};Eo.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))};Eo.prototype._unFilterType1=function(r,e,t){let i=this._xComparison,n=i-1;for(let s=0;s<t;s++){let o=r[1+s],l=s>n?e[s-i]:0;e[s]=o+l}};Eo.prototype._unFilterType2=function(r,e,t){let i=this._lastLine;for(let n=0;n<t;n++){let s=r[1+n],o=i?i[n]:0;e[n]=s+o}};Eo.prototype._unFilterType3=function(r,e,t){let i=this._xComparison,n=i-1,s=this._lastLine;for(let o=0;o<t;o++){let l=r[1+o],u=s?s[o]:0,d=o>n?e[o-i]:0,h=Math.floor((d+u)/2);e[o]=l+h}};Eo.prototype._unFilterType4=function(r,e,t){let i=this._xComparison,n=i-1,s=this._lastLine;for(let o=0;o<t;o++){let l=r[1+o],u=s?s[o]:0,d=o>n?e[o-i]:0,h=o>n&&s?s[o-i]:0,p=h5(d,u,h);e[o]=l+p}};Eo.prototype._reverseFilterLine=function(r){let e=r[0],t,i=this._images[this._imageIndex],n=i.byteWidth;if(e===0)t=r.slice(1,n+1);else switch(t=Buffer.alloc(n),e){case 1:this._unFilterType1(r,t,n);break;case 2:this._unFilterType2(r,t,n);break;case 3:this._unFilterType3(r,t,n);break;case 4:this._unFilterType4(r,t,n);break;default:throw new Error("Unrecognised filter type - "+e)}this.write(t),i.lineIndex++,i.lineIndex>=i.height?(this._lastLine=null,this._imageIndex++,i=this._images[this._imageIndex]):this._lastLine=t,i?this.read(i.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}});var gP=v((tG,_P)=>{"use strict";var p5=x("util"),mP=V_(),f5=X_(),m5=_P.exports=function(r){mP.call(this);let e=[],t=this;this._filter=new f5(r,{read:this.read.bind(this),write:function(i){e.push(i)},complete:function(){t.emit("complete",Buffer.concat(e))}}),this._filter.start()};p5.inherits(m5,mP)});var Co=v((rG,wP)=>{"use strict";wP.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}});var Q_=v((iG,vP)=>{"use strict";var Y_=[];(function(){for(let r=0;r<256;r++){let e=r;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;Y_[r]=e}})();var Z_=vP.exports=function(){this._crc=-1};Z_.prototype.write=function(r){for(let e=0;e<r.length;e++)this._crc=Y_[(this._crc^r[e])&255]^this._crc>>>8;return!0};Z_.prototype.crc32=function(){return this._crc^-1};Z_.crc32=function(r){let e=-1;for(let t=0;t<r.length;t++)e=Y_[(e^r[t])&255]^e>>>8;return e^-1}});var eg=v((nG,yP)=>{"use strict";var at=Co(),_5=Q_(),ft=yP.exports=function(r,e){this._options=r,r.checkCRC=r.checkCRC!==!1,this._hasIHDR=!1,this._hasIEND=!1,this._emittedHeadersFinished=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[at.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[at.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[at.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[at.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[at.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[at.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=e.read,this.error=e.error,this.metadata=e.metadata,this.gamma=e.gamma,this.transColor=e.transColor,this.palette=e.palette,this.parsed=e.parsed,this.inflateData=e.inflateData,this.finished=e.finished,this.simpleTransparency=e.simpleTransparency,this.headersFinished=e.headersFinished||function(){}};ft.prototype.start=function(){this.read(at.PNG_SIGNATURE.length,this._parseSignature.bind(this))};ft.prototype._parseSignature=function(r){let e=at.PNG_SIGNATURE;for(let t=0;t<e.length;t++)if(r[t]!==e[t]){this.error(new Error("Invalid file signature"));return}this.read(8,this._parseChunkBegin.bind(this))};ft.prototype._parseChunkBegin=function(r){let e=r.readUInt32BE(0),t=r.readUInt32BE(4),i="";for(let s=4;s<8;s++)i+=String.fromCharCode(r[s]);let n=Boolean(r[4]&32);if(!this._hasIHDR&&t!==at.TYPE_IHDR){this.error(new Error("Expected IHDR on beggining"));return}if(this._crc=new _5,this._crc.write(Buffer.from(i)),this._chunks[t])return this._chunks[t](e);if(!n){this.error(new Error("Unsupported critical chunk type "+i));return}this.read(e+4,this._skipChunk.bind(this))};ft.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))};ft.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))};ft.prototype._parseChunkEnd=function(r){let e=r.readInt32BE(0),t=this._crc.crc32();if(this._options.checkCRC&&t!==e){this.error(new Error("Crc error - "+e+" - "+t));return}this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))};ft.prototype._handleIHDR=function(r){this.read(r,this._parseIHDR.bind(this))};ft.prototype._parseIHDR=function(r){this._crc.write(r);let e=r.readUInt32BE(0),t=r.readUInt32BE(4),i=r[8],n=r[9],s=r[10],o=r[11],l=r[12];if(i!==8&&i!==4&&i!==2&&i!==1&&i!==16){this.error(new Error("Unsupported bit depth "+i));return}if(!(n in at.COLORTYPE_TO_BPP_MAP)){this.error(new Error("Unsupported color type"));return}if(s!==0){this.error(new Error("Unsupported compression method"));return}if(o!==0){this.error(new Error("Unsupported filter method"));return}if(l!==0&&l!==1){this.error(new Error("Unsupported interlace method"));return}this._colorType=n;let u=at.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:e,height:t,depth:i,interlace:Boolean(l),palette:Boolean(n&at.COLORTYPE_PALETTE),color:Boolean(n&at.COLORTYPE_COLOR),alpha:Boolean(n&at.COLORTYPE_ALPHA),bpp:u,colorType:n}),this._handleChunkEnd()};ft.prototype._handlePLTE=function(r){this.read(r,this._parsePLTE.bind(this))};ft.prototype._parsePLTE=function(r){this._crc.write(r);let e=Math.floor(r.length/3);for(let t=0;t<e;t++)this._palette.push([r[t*3],r[t*3+1],r[t*3+2],255]);this.palette(this._palette),this._handleChunkEnd()};ft.prototype._handleTRNS=function(r){this.simpleTransparency(),this.read(r,this._parseTRNS.bind(this))};ft.prototype._parseTRNS=function(r){if(this._crc.write(r),this._colorType===at.COLORTYPE_PALETTE_COLOR){if(this._palette.length===0){this.error(new Error("Transparency chunk must be after palette"));return}if(r.length>this._palette.length){this.error(new Error("More transparent colors than palette size"));return}for(let e=0;e<r.length;e++)this._palette[e][3]=r[e];this.palette(this._palette)}this._colorType===at.COLORTYPE_GRAYSCALE&&this.transColor([r.readUInt16BE(0)]),this._colorType===at.COLORTYPE_COLOR&&this.transColor([r.readUInt16BE(0),r.readUInt16BE(2),r.readUInt16BE(4)]),this._handleChunkEnd()};ft.prototype._handleGAMA=function(r){this.read(r,this._parseGAMA.bind(this))};ft.prototype._parseGAMA=function(r){this._crc.write(r),this.gamma(r.readUInt32BE(0)/at.GAMMA_DIVISION),this._handleChunkEnd()};ft.prototype._handleIDAT=function(r){this._emittedHeadersFinished||(this._emittedHeadersFinished=!0,this.headersFinished()),this.read(-r,this._parseIDAT.bind(this,r))};ft.prototype._parseIDAT=function(r,e){if(this._crc.write(e),this._colorType===at.COLORTYPE_PALETTE_COLOR&&this._palette.length===0)throw new Error("Expected palette not found");this.inflateData(e);let t=r-e.length;t>0?this._handleIDAT(t):this._handleChunkEnd()};ft.prototype._handleIEND=function(r){this.read(r,this._parseIEND.bind(this))};ft.prototype._parseIEND=function(r){this._crc.write(r),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}});var tg=v(xP=>{"use strict";var bP=K_(),g5=[function(){},function(r,e,t,i){if(i===e.length)throw new Error("Ran out of data");let n=e[i];r[t]=n,r[t+1]=n,r[t+2]=n,r[t+3]=255},function(r,e,t,i){if(i+1>=e.length)throw new Error("Ran out of data");let n=e[i];r[t]=n,r[t+1]=n,r[t+2]=n,r[t+3]=e[i+1]},function(r,e,t,i){if(i+2>=e.length)throw new Error("Ran out of data");r[t]=e[i],r[t+1]=e[i+1],r[t+2]=e[i+2],r[t+3]=255},function(r,e,t,i){if(i+3>=e.length)throw new Error("Ran out of data");r[t]=e[i],r[t+1]=e[i+1],r[t+2]=e[i+2],r[t+3]=e[i+3]}],w5=[function(){},function(r,e,t,i){let n=e[0];r[t]=n,r[t+1]=n,r[t+2]=n,r[t+3]=i},function(r,e,t){let i=e[0];r[t]=i,r[t+1]=i,r[t+2]=i,r[t+3]=e[1]},function(r,e,t,i){r[t]=e[0],r[t+1]=e[1],r[t+2]=e[2],r[t+3]=i},function(r,e,t){r[t]=e[0],r[t+1]=e[1],r[t+2]=e[2],r[t+3]=e[3]}];function v5(r,e){let t=[],i=0;function n(){if(i===r.length)throw new Error("Ran out of data");let s=r[i];i++;let o,l,u,d,h,p,f,m;switch(e){default:throw new Error("unrecognised depth");case 16:f=r[i],i++,t.push((s<<8)+f);break;case 4:f=s&15,m=s>>4,t.push(m,f);break;case 2:h=s&3,p=s>>2&3,f=s>>4&3,m=s>>6&3,t.push(m,f,p,h);break;case 1:o=s&1,l=s>>1&1,u=s>>2&1,d=s>>3&1,h=s>>4&1,p=s>>5&1,f=s>>6&1,m=s>>7&1,t.push(m,f,p,h,d,u,l,o);break}}return{get:function(s){for(;t.length<s;)n();let o=t.slice(0,s);return t=t.slice(s),o},resetAfterLine:function(){t.length=0},end:function(){if(i!==r.length)throw new Error("extra data found")}}}function y5(r,e,t,i,n,s){let o=r.width,l=r.height,u=r.index;for(let d=0;d<l;d++)for(let h=0;h<o;h++){let p=t(h,d,u);g5[i](e,n,p,s),s+=i}return s}function b5(r,e,t,i,n,s){let o=r.width,l=r.height,u=r.index;for(let d=0;d<l;d++){for(let h=0;h<o;h++){let p=n.get(i),f=t(h,d,u);w5[i](e,p,f,s)}n.resetAfterLine()}}xP.dataToBitMap=function(r,e){let t=e.width,i=e.height,n=e.depth,s=e.bpp,o=e.interlace,l;n!==8&&(l=v5(r,n));let u;n<=8?u=Buffer.alloc(t*i*4):u=new Uint16Array(t*i*4);let d=Math.pow(2,n)-1,h=0,p,f;if(o)p=bP.getImagePasses(t,i),f=bP.getInterlaceIterator(t,i);else{let m=0;f=function(){let _=m;return m+=4,_},p=[{width:t,height:i}]}for(let m=0;m<p.length;m++)n===8?h=y5(p[m],u,f,s,r,h):b5(p[m],u,f,s,l,d);if(n===8){if(h!==r.length)throw new Error("extra data found")}else l.end();return u}});var rg=v((oG,SP)=>{"use strict";function x5(r,e,t,i,n){let s=0;for(let o=0;o<i;o++)for(let l=0;l<t;l++){let u=n[r[s]];if(!u)throw new Error("index "+r[s]+" not in palette");for(let d=0;d<4;d++)e[s+d]=u[d];s+=4}}function S5(r,e,t,i,n){let s=0;for(let o=0;o<i;o++)for(let l=0;l<t;l++){let u=!1;if(n.length===1?n[0]===r[s]&&(u=!0):n[0]===r[s]&&n[1]===r[s+1]&&n[2]===r[s+2]&&(u=!0),u)for(let d=0;d<4;d++)e[s+d]=0;s+=4}}function E5(r,e,t,i,n){let s=255,o=Math.pow(2,n)-1,l=0;for(let u=0;u<i;u++)for(let d=0;d<t;d++){for(let h=0;h<4;h++)e[l+h]=Math.floor(r[l+h]*s/o+.5);l+=4}}SP.exports=function(r,e){let t=e.depth,i=e.width,n=e.height,s=e.colorType,o=e.transColor,l=e.palette,u=r;return s===3?x5(r,u,i,n,l):(o&&S5(r,u,i,n,o),t!==8&&(t===16&&(u=Buffer.alloc(i*n*4)),E5(r,u,i,n,t))),u}});var kP=v((aG,CP)=>{"use strict";var C5=x("util"),ig=x("zlib"),EP=V_(),k5=gP(),O5=eg(),P5=tg(),T5=rg(),Nr=CP.exports=function(r){EP.call(this),this._parser=new O5(r,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=r,this.writable=!0,this._parser.start()};C5.inherits(Nr,EP);Nr.prototype._handleError=function(r){this.emit("error",r),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this._filter&&(this._filter.destroy(),this._filter.on("error",function(){})),this.errord=!0};Nr.prototype._inflateData=function(r){if(!this._inflate)if(this._bitmapInfo.interlace)this._inflate=ig.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{let t=((this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3)+1)*this._bitmapInfo.height,i=Math.max(t,ig.Z_MIN_CHUNK);this._inflate=ig.createInflate({chunkSize:i});let n=t,s=this.emit.bind(this,"error");this._inflate.on("error",function(l){!n||s(l)}),this._filter.on("complete",this._complete.bind(this));let o=this._filter.write.bind(this._filter);this._inflate.on("data",function(l){!n||(l.length>n&&(l=l.slice(0,n)),n-=l.length,o(l))}),this._inflate.on("end",this._filter.end.bind(this._filter))}this._inflate.write(r)};Nr.prototype._handleMetaData=function(r){this._metaData=r,this._bitmapInfo=Object.create(r),this._filter=new k5(this._bitmapInfo)};Nr.prototype._handleTransColor=function(r){this._bitmapInfo.transColor=r};Nr.prototype._handlePalette=function(r){this._bitmapInfo.palette=r};Nr.prototype._simpleTransparency=function(){this._metaData.alpha=!0};Nr.prototype._headersFinished=function(){this.emit("metadata",this._metaData)};Nr.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"))};Nr.prototype._complete=function(r){if(this.errord)return;let e;try{let t=P5.dataToBitMap(r,this._bitmapInfo);e=T5(t,this._bitmapInfo),t=null}catch(t){this._handleError(t);return}this.emit("parsed",e)}});var PP=v((cG,OP)=>{"use strict";var sr=Co();OP.exports=function(r,e,t,i){let n=[sr.COLORTYPE_COLOR_ALPHA,sr.COLORTYPE_ALPHA].indexOf(i.colorType)!==-1;if(i.colorType===i.inputColorType){let _=function(){let g=new ArrayBuffer(2);return new DataView(g).setInt16(0,256,!0),new Int16Array(g)[0]!==256}();if(i.bitDepth===8||i.bitDepth===16&&_)return r}let s=i.bitDepth!==16?r:new Uint16Array(r.buffer),o=255,l=sr.COLORTYPE_TO_BPP_MAP[i.inputColorType];l===4&&!i.inputHasAlpha&&(l=3);let u=sr.COLORTYPE_TO_BPP_MAP[i.colorType];i.bitDepth===16&&(o=65535,u*=2);let d=Buffer.alloc(e*t*u),h=0,p=0,f=i.bgColor||{};f.red===void 0&&(f.red=o),f.green===void 0&&(f.green=o),f.blue===void 0&&(f.blue=o);function m(){let _,g,w,b=o;switch(i.inputColorType){case sr.COLORTYPE_COLOR_ALPHA:b=s[h+3],_=s[h],g=s[h+1],w=s[h+2];break;case sr.COLORTYPE_COLOR:_=s[h],g=s[h+1],w=s[h+2];break;case sr.COLORTYPE_ALPHA:b=s[h+1],_=s[h],g=_,w=_;break;case sr.COLORTYPE_GRAYSCALE:_=s[h],g=_,w=_;break;default:throw new Error("input color type:"+i.inputColorType+" is not supported at present")}return i.inputHasAlpha&&(n||(b/=o,_=Math.min(Math.max(Math.round((1-b)*f.red+b*_),0),o),g=Math.min(Math.max(Math.round((1-b)*f.green+b*g),0),o),w=Math.min(Math.max(Math.round((1-b)*f.blue+b*w),0),o))),{red:_,green:g,blue:w,alpha:b}}for(let _=0;_<t;_++)for(let g=0;g<e;g++){let w=m(s,h);switch(i.colorType){case sr.COLORTYPE_COLOR_ALPHA:case sr.COLORTYPE_COLOR:i.bitDepth===8?(d[p]=w.red,d[p+1]=w.green,d[p+2]=w.blue,n&&(d[p+3]=w.alpha)):(d.writeUInt16BE(w.red,p),d.writeUInt16BE(w.green,p+2),d.writeUInt16BE(w.blue,p+4),n&&d.writeUInt16BE(w.alpha,p+6));break;case sr.COLORTYPE_ALPHA:case sr.COLORTYPE_GRAYSCALE:{let b=(w.red+w.green+w.blue)/3;i.bitDepth===8?(d[p]=b,n&&(d[p+1]=w.alpha)):(d.writeUInt16BE(b,p),n&&d.writeUInt16BE(w.alpha,p+2));break}default:throw new Error("unrecognised color Type "+i.colorType)}h+=l,p+=u}return d}});var IP=v((lG,AP)=>{"use strict";var TP=J_();function A5(r,e,t,i,n){for(let s=0;s<t;s++)i[n+s]=r[e+s]}function I5(r,e,t){let i=0,n=e+t;for(let s=e;s<n;s++)i+=Math.abs(r[s]);return i}function M5(r,e,t,i,n,s){for(let o=0;o<t;o++){let l=o>=s?r[e+o-s]:0,u=r[e+o]-l;i[n+o]=u}}function F5(r,e,t,i){let n=0;for(let s=0;s<t;s++){let o=s>=i?r[e+s-i]:0,l=r[e+s]-o;n+=Math.abs(l)}return n}function R5(r,e,t,i,n){for(let s=0;s<t;s++){let o=e>0?r[e+s-t]:0,l=r[e+s]-o;i[n+s]=l}}function N5(r,e,t){let i=0,n=e+t;for(let s=e;s<n;s++){let o=e>0?r[s-t]:0,l=r[s]-o;i+=Math.abs(l)}return i}function D5(r,e,t,i,n,s){for(let o=0;o<t;o++){let l=o>=s?r[e+o-s]:0,u=e>0?r[e+o-t]:0,d=r[e+o]-(l+u>>1);i[n+o]=d}}function L5(r,e,t,i){let n=0;for(let s=0;s<t;s++){let o=s>=i?r[e+s-i]:0,l=e>0?r[e+s-t]:0,u=r[e+s]-(o+l>>1);n+=Math.abs(u)}return n}function q5(r,e,t,i,n,s){for(let o=0;o<t;o++){let l=o>=s?r[e+o-s]:0,u=e>0?r[e+o-t]:0,d=e>0&&o>=s?r[e+o-(t+s)]:0,h=r[e+o]-TP(l,u,d);i[n+o]=h}}function B5(r,e,t,i){let n=0;for(let s=0;s<t;s++){let o=s>=i?r[e+s-i]:0,l=e>0?r[e+s-t]:0,u=e>0&&s>=i?r[e+s-(t+i)]:0,d=r[e+s]-TP(o,l,u);n+=Math.abs(d)}return n}var H5={0:A5,1:M5,2:R5,3:D5,4:q5},j5={0:I5,1:F5,2:N5,3:L5,4:B5};AP.exports=function(r,e,t,i,n){let s;if(!("filterType"in i)||i.filterType===-1)s=[0,1,2,3,4];else if(typeof i.filterType=="number")s=[i.filterType];else throw new Error("unrecognised filter types");i.bitDepth===16&&(n*=2);let o=e*n,l=0,u=0,d=Buffer.alloc((o+1)*t),h=s[0];for(let p=0;p<t;p++){if(s.length>1){let f=1/0;for(let m=0;m<s.length;m++){let _=j5[s[m]](r,u,o,n);_<f&&(h=s[m],f=_)}}d[l]=h,l++,H5[h](r,u,o,d,l,n),l+=o,u+=o}return d}});var ng=v((uG,MP)=>{"use strict";var Tt=Co(),W5=Q_(),U5=PP(),$5=IP(),z5=x("zlib"),Vi=MP.exports=function(r){if(this._options=r,r.deflateChunkSize=r.deflateChunkSize||32*1024,r.deflateLevel=r.deflateLevel!=null?r.deflateLevel:9,r.deflateStrategy=r.deflateStrategy!=null?r.deflateStrategy:3,r.inputHasAlpha=r.inputHasAlpha!=null?r.inputHasAlpha:!0,r.deflateFactory=r.deflateFactory||z5.createDeflate,r.bitDepth=r.bitDepth||8,r.colorType=typeof r.colorType=="number"?r.colorType:Tt.COLORTYPE_COLOR_ALPHA,r.inputColorType=typeof r.inputColorType=="number"?r.inputColorType:Tt.COLORTYPE_COLOR_ALPHA,[Tt.COLORTYPE_GRAYSCALE,Tt.COLORTYPE_COLOR,Tt.COLORTYPE_COLOR_ALPHA,Tt.COLORTYPE_ALPHA].indexOf(r.colorType)===-1)throw new Error("option color type:"+r.colorType+" is not supported at present");if([Tt.COLORTYPE_GRAYSCALE,Tt.COLORTYPE_COLOR,Tt.COLORTYPE_COLOR_ALPHA,Tt.COLORTYPE_ALPHA].indexOf(r.inputColorType)===-1)throw new Error("option input color type:"+r.inputColorType+" is not supported at present");if(r.bitDepth!==8&&r.bitDepth!==16)throw new Error("option bit depth:"+r.bitDepth+" is not supported at present")};Vi.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}};Vi.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())};Vi.prototype.filterData=function(r,e,t){let i=U5(r,e,t,this._options),n=Tt.COLORTYPE_TO_BPP_MAP[this._options.colorType];return $5(i,e,t,this._options,n)};Vi.prototype._packChunk=function(r,e){let t=e?e.length:0,i=Buffer.alloc(t+12);return i.writeUInt32BE(t,0),i.writeUInt32BE(r,4),e&&e.copy(i,8),i.writeInt32BE(W5.crc32(i.slice(4,i.length-4)),i.length-4),i};Vi.prototype.packGAMA=function(r){let e=Buffer.alloc(4);return e.writeUInt32BE(Math.floor(r*Tt.GAMMA_DIVISION),0),this._packChunk(Tt.TYPE_gAMA,e)};Vi.prototype.packIHDR=function(r,e){let t=Buffer.alloc(13);return t.writeUInt32BE(r,0),t.writeUInt32BE(e,4),t[8]=this._options.bitDepth,t[9]=this._options.colorType,t[10]=0,t[11]=0,t[12]=0,this._packChunk(Tt.TYPE_IHDR,t)};Vi.prototype.packIDAT=function(r){return this._packChunk(Tt.TYPE_IDAT,r)};Vi.prototype.packIEND=function(){return this._packChunk(Tt.TYPE_IEND,null)}});var DP=v((dG,NP)=>{"use strict";var V5=x("util"),FP=x("stream"),G5=Co(),K5=ng(),RP=NP.exports=function(r){FP.call(this);let e=r||{};this._packer=new K5(e),this._deflate=this._packer.createDeflate(),this.readable=!0};V5.inherits(RP,FP);RP.prototype.pack=function(r,e,t,i){this.emit("data",Buffer.from(G5.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(e,t)),i&&this.emit("data",this._packer.packGAMA(i));let n=this._packer.filterData(r,e,t);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",function(s){this.emit("data",this._packer.packIDAT(s))}.bind(this)),this._deflate.on("end",function(){this.emit("data",this._packer.packIEND()),this.emit("end")}.bind(this)),this._deflate.end(n)}});var WP=v((wc,jP)=>{"use strict";var LP=x("assert").ok,ko=x("zlib"),J5=x("util"),qP=x("buffer").kMaxLength;function Wn(r){if(!(this instanceof Wn))return new Wn(r);r&&r.chunkSize<ko.Z_MIN_CHUNK&&(r.chunkSize=ko.Z_MIN_CHUNK),ko.Inflate.call(this,r),this._offset=this._offset===void 0?this._outOffset:this._offset,this._buffer=this._buffer||this._outBuffer,r&&r.maxLength!=null&&(this._maxLength=r.maxLength)}function X5(r){return new Wn(r)}function BP(r,e){e&&process.nextTick(e),!!r._handle&&(r._handle.close(),r._handle=null)}Wn.prototype._processChunk=function(r,e,t){if(typeof t=="function")return ko.Inflate._processChunk.call(this,r,e,t);let i=this,n=r&&r.length,s=this._chunkSize-this._offset,o=this._maxLength,l=0,u=[],d=0,h;this.on("error",function(_){h=_});function p(_,g){if(i._hadError)return;let w=s-g;if(LP(w>=0,"have should not go down"),w>0){let b=i._buffer.slice(i._offset,i._offset+w);if(i._offset+=w,b.length>o&&(b=b.slice(0,o)),u.push(b),d+=b.length,o-=b.length,o===0)return!1}return(g===0||i._offset>=i._chunkSize)&&(s=i._chunkSize,i._offset=0,i._buffer=Buffer.allocUnsafe(i._chunkSize)),g===0?(l+=n-_,n=_,!0):!1}LP(this._handle,"zlib binding closed");let f;do f=this._handle.writeSync(e,r,l,n,this._buffer,this._offset,s),f=f||this._writeState;while(!this._hadError&&p(f[0],f[1]));if(this._hadError)throw h;if(d>=qP)throw BP(this),new RangeError("Cannot create final Buffer. It would be larger than 0x"+qP.toString(16)+" bytes");let m=Buffer.concat(u,d);return BP(this),m};J5.inherits(Wn,ko.Inflate);function Y5(r,e){if(typeof e=="string"&&(e=Buffer.from(e)),!(e instanceof Buffer))throw new TypeError("Not a string or buffer");let t=r._finishFlushFlag;return t==null&&(t=ko.Z_FINISH),r._processChunk(e,t)}function HP(r,e){return Y5(new Wn(e),r)}jP.exports=wc=HP;wc.Inflate=Wn;wc.createInflate=X5;wc.inflateSync=HP});var sg=v((hG,$P)=>{"use strict";var UP=$P.exports=function(r){this._buffer=r,this._reads=[]};UP.prototype.read=function(r,e){this._reads.push({length:Math.abs(r),allowLess:r<0,func:e})};UP.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){let r=this._reads[0];if(this._buffer.length&&(this._buffer.length>=r.length||r.allowLess)){this._reads.shift();let e=this._buffer;this._buffer=e.slice(r.length),r.func.call(this,e.slice(0,r.length))}else break}if(this._reads.length>0)return new Error("There are some read requests waitng on finished stream");if(this._buffer.length>0)return new Error("unrecognised content at end of stream")}});var VP=v(zP=>{"use strict";var Z5=sg(),Q5=X_();zP.process=function(r,e){let t=[],i=new Z5(r);return new Q5(e,{read:i.read.bind(i),write:function(s){t.push(s)},complete:function(){}}).start(),i.process(),Buffer.concat(t)}});var XP=v((fG,JP)=>{"use strict";var GP=!0,KP=x("zlib"),ej=WP();KP.deflateSync||(GP=!1);var tj=sg(),rj=VP(),ij=eg(),nj=tg(),sj=rg();JP.exports=function(r,e){if(!GP)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let t;function i(N){t=N}let n;function s(N){n=N}function o(N){n.transColor=N}function l(N){n.palette=N}function u(){n.alpha=!0}let d;function h(N){d=N}let p=[];function f(N){p.push(N)}let m=new tj(r);if(new ij(e,{read:m.read.bind(m),error:i,metadata:s,gamma:h,palette:l,transColor:o,inflateData:f,simpleTransparency:u}).start(),m.process(),t)throw t;let g=Buffer.concat(p);p.length=0;let w;if(n.interlace)w=KP.inflateSync(g);else{let P=((n.width*n.bpp*n.depth+7>>3)+1)*n.height;w=ej(g,{chunkSize:P,maxLength:P})}if(g=null,!w||!w.length)throw new Error("bad png - invalid inflate data response");let b=rj.process(w,n);g=null;let C=nj.dataToBitMap(b,n);b=null;let E=sj(C,n);return n.data=E,n.gamma=d||0,n}});var eT=v((mG,QP)=>{"use strict";var YP=!0,ZP=x("zlib");ZP.deflateSync||(YP=!1);var oj=Co(),aj=ng();QP.exports=function(r,e){if(!YP)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let t=e||{},i=new aj(t),n=[];n.push(Buffer.from(oj.PNG_SIGNATURE)),n.push(i.packIHDR(r.width,r.height)),r.gamma&&n.push(i.packGAMA(r.gamma));let s=i.filterData(r.data,r.width,r.height),o=ZP.deflateSync(s,i.getDeflateOptions());if(s=null,!o||!o.length)throw new Error("bad png - invalid compressed data response");return n.push(i.packIDAT(o)),n.push(i.packIEND()),Buffer.concat(n)}});var tT=v(og=>{"use strict";var cj=XP(),lj=eT();og.read=function(r,e){return cj(r,e||{})};og.write=function(r,e){return lj(r,e)}});var nT=v(iT=>{"use strict";var uj=x("util"),rT=x("stream"),dj=kP(),hj=DP(),pj=tT(),Nt=iT.PNG=function(r){rT.call(this),r=r||{},this.width=r.width|0,this.height=r.height|0,this.data=this.width>0&&this.height>0?Buffer.alloc(4*this.width*this.height):null,r.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new dj(r),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",function(e){this.data=e,this.emit("parsed",e)}.bind(this)),this._packer=new hj(r),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};uj.inherits(Nt,rT);Nt.sync=pj;Nt.prototype.pack=function(){return!this.data||!this.data.length?(this.emit("error","No data provided"),this):(process.nextTick(function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}.bind(this)),this)};Nt.prototype.parse=function(r,e){if(e){let t,i;t=function(n){this.removeListener("error",i),this.data=n,e(null,this)}.bind(this),i=function(n){this.removeListener("parsed",t),e(n,null)}.bind(this),this.once("parsed",t),this.once("error",i)}return this.end(r),this};Nt.prototype.write=function(r){return this._parser.write(r),!0};Nt.prototype.end=function(r){this._parser.end(r)};Nt.prototype._metadata=function(r){this.width=r.width,this.height=r.height,this.emit("metadata",r)};Nt.prototype._gamma=function(r){this.gamma=r};Nt.prototype._handleClose=function(){!this._parser.writable&&!this._packer.readable&&this.emit("close")};Nt.bitblt=function(r,e,t,i,n,s,o,l){if(t|=0,i|=0,n|=0,s|=0,o|=0,l|=0,t>r.width||i>r.height||t+n>r.width||i+s>r.height)throw new Error("bitblt reading outside image");if(o>e.width||l>e.height||o+n>e.width||l+s>e.height)throw new Error("bitblt writing outside image");for(let u=0;u<s;u++)r.data.copy(e.data,(l+u)*e.width+o<<2,(i+u)*r.width+t<<2,(i+u)*r.width+t+n<<2)};Nt.prototype.bitblt=function(r,e,t,i,n,s,o){return Nt.bitblt(this,r,e,t,i,n,s,o),this};Nt.adjustGamma=function(r){if(r.gamma){for(let e=0;e<r.height;e++)for(let t=0;t<r.width;t++){let i=r.width*e+t<<2;for(let n=0;n<3;n++){let s=r.data[i+n]/255;s=Math.pow(s,1/2.2/r.gamma),r.data[i+n]=Math.round(s*255)}}r.gamma=0}};Nt.prototype.adjustGamma=function(){Nt.adjustGamma(this)}});var sT=v(ag=>{"use strict";Object.defineProperty(ag,"__esModule",{value:!0});ag.getAccessibilityTree=fj;function fj(r,e){return c(this,null,function*(){let t=e?e._objectId:void 0,{axNode:i}=yield r.send("Page.accessibilitySnapshot",{objectId:t}),n=new Xd(i);return{tree:n,needle:e?n._findNeedle():null}})}var mj=new Map(Object.entries({TextField:"textbox"})),_j=new Map(Object.entries({WebArea:"HTML content",Summary:"summary",DescriptionList:"description list",ImageMap:"image map",ListMarker:"list marker",Video:"video playback",Mark:"highlighted",contentinfo:"content information",Details:"details",DescriptionListDetail:"description",DescriptionListTerm:"term",alertdialog:"web alert dialog",dialog:"web dialog",status:"application status",tabpanel:"tab panel",application:"web application"})),Xd=class{constructor(e){this._payload=void 0,this._children=void 0,this._payload=e,this._children=[];for(let t of this._payload.children||[])this._children.push(new Xd(t))}children(){return this._children}_findNeedle(){if(this._payload.found)return this;for(let e of this._children){let t=e._findNeedle();if(t)return t}return null}isControl(){switch(this._payload.role){case"button":case"checkbox":case"ColorWell":case"combobox":case"DisclosureTriangle":case"listbox":case"menu":case"menubar":case"menuitem":case"menuitemcheckbox":case"menuitemradio":case"radio":case"scrollbar":case"searchbox":case"slider":case"spinbutton":case"switch":case"tab":case"textbox":case"TextField":case"tree":return!0;default:return!1}}_isTextControl(){switch(this._payload.role){case"combobox":case"searchfield":case"textbox":case"TextField":return!0}return!1}_name(){return this._payload.role==="text"?this._payload.value||"":this._payload.name||""}isInteresting(e){let{role:t,focusable:i}=this._payload,n=this._name();return t==="ScrollArea"?!1:t==="WebArea"||i||t==="MenuListOption"||this.isControl()?!0:e?!1:this.isLeafNode()&&!!n}_hasRendundantTextChild(){if(this._children.length!==1)return!1;let e=this._children[0];return e._payload.role==="text"&&this._payload.name===e._payload.value}isLeafNode(){return!!(!this._children.length||this._isTextControl()||this._hasRendundantTextChild())}serialize(){let e={role:mj.get(this._payload.role)||this._payload.role,name:this._name()};if("description"in this._payload&&this._payload.description!==e.name&&(e.description=this._payload.description),"roledescription"in this._payload){let l=this._payload.roledescription;l!==this._payload.role&&_j.get(this._payload.role)!==l&&(e.roledescription=l)}"value"in this._payload&&this._payload.role!=="text"&&(typeof this._payload.value=="string"?e.valueString=this._payload.value:typeof this._payload.value=="number"&&(e.valueNumber=this._payload.value)),"checked"in this._payload&&(e.checked=this._payload.checked==="true"?"checked":this._payload.checked==="false"?"unchecked":"mixed"),"pressed"in this._payload&&(e.pressed=this._payload.pressed==="true"?"pressed":this._payload.pressed==="false"?"released":"mixed");let t=["keyshortcuts","valuetext"];for(let l of t)l in this._payload&&(e[l]=this._payload[l]);let i=["disabled","expanded","focused","modal","multiline","multiselectable","readonly","required","selected"];for(let l of i){if(l==="focused"&&(this._payload.role==="WebArea"||this._payload.role==="ScrollArea"))continue;let u=this._payload[l];!u||(e[l]=u)}let n=["level","valuemax","valuemin"];for(let l of n)l in this._payload&&(e[l]=this._payload[l]);let s=["autocomplete","haspopup","invalid"];for(let l of s){let u=this._payload[l];!u||u==="false"||(e[l]=u)}let o=new Set(["ScrollArea","scrollbar","listbox","combobox","menu","tree","separator","slider","tablist","toolbar"]);return this._payload.orientation&&o.has(this._payload.role)&&(e.orientation=this._payload.orientation),e}}});var lg=v(Yd=>{"use strict";Object.defineProperty(Yd,"__esModule",{value:!0});Yd.WKExecutionContext=void 0;var Gi=vj(xi()),gj=Pa(),wj=Xr();function oT(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(oT=function(i){return i?t:e})(r)}function vj(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=oT(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var aT=class{constructor(e,t){this._session=void 0,this._contextId=void 0,this._contextDestroyedCallback=()=>{},this._executionContextDestroyedPromise=void 0,this._session=e,this._contextId=t,this._executionContextDestroyedPromise=new Promise((i,n)=>{this._contextDestroyedCallback=i})}_dispose(){this._contextDestroyedCallback()}rawEvaluateJSON(e){return c(this,null,function*(){try{let t=yield this._session.send("Runtime.evaluate",{expression:e,contextId:this._contextId,returnByValue:!0});if(t.wasThrown)throw new Gi.JavaScriptErrorInEvaluate(t.result.description);return t.result.value}catch(t){throw cg(t)}})}rawEvaluateHandle(e){return c(this,null,function*(){try{let t=yield this._session.send("Runtime.evaluate",{expression:e,contextId:this._contextId,returnByValue:!1});if(t.wasThrown)throw new Gi.JavaScriptErrorInEvaluate(t.result.description);return t.result.objectId}catch(t){throw cg(t)}})}rawCallFunctionNoReply(e,...t){this._session.send("Runtime.callFunctionOn",{functionDeclaration:e.toString(),objectId:t.find(i=>i instanceof Gi.JSHandle)._objectId,arguments:t.map(i=>i instanceof Gi.JSHandle?{objectId:i._objectId}:{value:i}),returnByValue:!0,emulateUserGesture:!0}).catch(()=>{})}evaluateWithArguments(e,t,i,n,s){return c(this,null,function*(){try{let o=yield Promise.race([this._executionContextDestroyedPromise.then(()=>{throw new Error(yj)}),this._session.send("Runtime.callFunctionOn",{functionDeclaration:e,objectId:i._objectId,arguments:[{objectId:i._objectId},...n.map(l=>({value:l})),...s.map(l=>({objectId:l}))],returnByValue:t,emulateUserGesture:!0,awaitPromise:!0})]);if(o.wasThrown)throw new Gi.JavaScriptErrorInEvaluate(o.result.description);return t?(0,gj.parseEvaluationResultValue)(o.result.value):i._context.createHandle(o.result)}catch(o){throw cg(o)}})}getProperties(e,t){return c(this,null,function*(){let i=yield this._session.send("Runtime.getProperties",{objectId:t,ownProperties:!0}),n=new Map;for(let s of i.properties)!s.enumerable||!s.value||n.set(s.name,e.createHandle(s.value));return n})}createHandle(e,t){let i=t.className==="Promise";return new Gi.JSHandle(e,i?"promise":t.subtype||t.type,xj(t),t.objectId,bj(t))}releaseHandle(e){return c(this,null,function*(){yield this._session.send("Runtime.releaseObject",{objectId:e})})}};Yd.WKExecutionContext=aT;var yj="Execution context was destroyed.";function bj(r){let e=r.value;return r.type==="number"&&["NaN","-Infinity","Infinity","-0"].includes(r.description)?Gi.parseUnserializableValue(r.description):e}function cg(r){return!Gi.isJavaScriptErrorInEvaluate(r)&&!(0,wj.isSessionClosedError)(r)?new Error("Execution context was destroyed, most likely because of a navigation."):r}function xj(r){if(r.type==="undefined")return"undefined";if("value"in r)return String(r.value);if(r.description==="Object"&&r.preview){let e=[];for(let{name:t,value:i}of r.preview.properties)e.push(`${t}: ${i}`);return`{${e.join(", ")}}`}if(r.subtype==="array"&&r.preview){let e=[];for(let{name:t,value:i}of r.preview.properties)e[+t]=i;return"["+String(e)+"]"}return r.description}});var pT=v(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.RawTouchscreenImpl=Ki.RawMouseImpl=Ki.RawKeyboardImpl=void 0;var cT=Cj(Wl()),Sj=p_(),Ej=G();function lT(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(lT=function(i){return i?t:e})(r)}function Cj(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=lT(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function Un(r){let e=0;return r.has("Shift")&&(e|=1),r.has("Control")&&(e|=2),r.has("Alt")&&(e|=4),r.has("Meta")&&(e|=8),e}function ug(r){let e=0;return r.has("left")&&(e|=1),r.has("middle")&&(e|=2),r.has("right")&&(e|=4),e}var uT=class{constructor(e){this._pageProxySession=void 0,this._session=void 0,this._pageProxySession=e}setSession(e){this._session=e}keydown(e,t,i,n,s,o,l,u){return c(this,null,function*(){let d=[];for(let f of["Shift","Control","Alt","Meta"])e.has(f)&&d.push(f);d.push(t);let h=d.join("+"),p=Sj.macEditingCommands[h];(0,Ej.isString)(p)&&(p=[p]),yield this._pageProxySession.send("Input.dispatchKeyEvent",{type:"keyDown",modifiers:Un(e),windowsVirtualKeyCode:i,code:t,key:s,text:u,unmodifiedText:u,autoRepeat:l,macCommands:p,isKeypad:o===cT.keypadLocation})})}keyup(e,t,i,n,s,o){return c(this,null,function*(){yield this._pageProxySession.send("Input.dispatchKeyEvent",{type:"keyUp",modifiers:Un(e),key:s,windowsVirtualKeyCode:i,code:t,isKeypad:o===cT.keypadLocation})})}sendText(e){return c(this,null,function*(){yield this._session.send("Page.insertText",{text:e})})}};Ki.RawKeyboardImpl=uT;var dT=class{constructor(e){this._pageProxySession=void 0,this._session=void 0,this._page=void 0,this._pageProxySession=e}setSession(e){this._session=e}move(e,t,i,n,s){return c(this,null,function*(){yield this._pageProxySession.send("Input.dispatchMouseEvent",{type:"move",button:i,buttons:ug(n),x:e,y:t,modifiers:Un(s)})})}down(e,t,i,n,s,o){return c(this,null,function*(){yield this._pageProxySession.send("Input.dispatchMouseEvent",{type:"down",button:i,buttons:ug(n),x:e,y:t,modifiers:Un(s),clickCount:o})})}up(e,t,i,n,s,o){return c(this,null,function*(){yield this._pageProxySession.send("Input.dispatchMouseEvent",{type:"up",button:i,buttons:ug(n),x:e,y:t,modifiers:Un(s),clickCount:o})})}wheel(e,t,i,n,s,o){return c(this,null,function*(){yield this._session.send("Page.updateScrollingState"),yield this._page.mainFrame().evaluateExpression("new Promise(requestAnimationFrame)",!1,!1,"utility"),yield this._pageProxySession.send("Input.dispatchWheelEvent",{x:e,y:t,deltaX:s,deltaY:o,modifiers:Un(n)})})}setPage(e){this._page=e}};Ki.RawMouseImpl=dT;var hT=class{constructor(e){this._pageProxySession=void 0,this._pageProxySession=e}tap(e,t,i){return c(this,null,function*(){yield this._pageProxySession.send("Input.dispatchTapEvent",{x:e,y:t,modifiers:Un(i)})})}};Ki.RawTouchscreenImpl=hT});var wT=v(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.WKRouteImpl=Po.WKInterceptableRequest=void 0;var Zd=kj(jt()),Oo=G(),fT=Vt();function mT(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(mT=function(i){return i?t:e})(r)}function kj(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=mT(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var Oj={aborted:"Cancellation",accessdenied:"AccessControl",addressunreachable:"General",blockedbyclient:"Cancellation",blockedbyresponse:"General",connectionaborted:"General",connectionclosed:"General",connectionfailed:"General",connectionrefused:"General",connectionreset:"General",internetdisconnected:"General",namenotresolved:"General",timedout:"Timeout",failed:"General"},_T=class{constructor(e,t,i,n,s,o){this._session=void 0,this.request=void 0,this._requestId=void 0,this._timestamp=void 0,this._wallTime=void 0,this._route=void 0,this._redirectedFrom=void 0,this._session=e,this._requestId=n.requestId,this._route=t,this._redirectedFrom=s;let l=n.type?n.type.toLowerCase():s?s.request.resourceType():"other",u=null;this._timestamp=n.timestamp,this._wallTime=n.walltime*1e3,n.request.postData&&(u=Buffer.from(n.request.postData,"base64")),this.request=new Zd.Request(i,(s==null?void 0:s.request)||null,o,n.request.url,l,n.request.method,u,(0,Oo.headersObjectToArray)(n.request.headers))}_routeForRedirectChain(){let e=this;for(;e._redirectedFrom;)e=e._redirectedFrom;return e._route}createResponse(e){let t=()=>c(this,null,function*(){let o=yield this._session.send("Network.getResponseBody",{requestId:this._requestId});return Buffer.from(o.body,o.base64Encoded?"base64":"utf8")}),i=e.timing,n={startTime:this._wallTime,domainLookupStart:i?$n(i.domainLookupStart):-1,domainLookupEnd:i?$n(i.domainLookupEnd):-1,connectStart:i?$n(i.connectStart):-1,secureConnectionStart:i?$n(i.secureConnectionStart):-1,connectEnd:i?$n(i.connectEnd):-1,requestStart:i?$n(i.requestStart):-1,responseStart:i?$n(i.responseStart):-1},s=process.platform==="darwin"?",":`
`;return new Zd.Response(this.request,e.status,e.statusText,(0,Oo.headersObjectToArray)(e.headers,",",s),n,t)}};Po.WKInterceptableRequest=_T;var gT=class{constructor(e,t,i){this._session=void 0,this._requestId=void 0,this._requestInterceptedPromise=new fT.ManualPromise,this._responseInterceptedPromise=void 0,this._page=void 0,this._session=e,this._page=t,this._requestId=i}responseBody(){return c(this,null,function*(){let e=yield this._session.send("Network.getInterceptedResponseBody",{requestId:this._requestId});return Buffer.from(e.body,"base64")})}abort(e){return c(this,null,function*(){let t=Oj[e];(0,Oo.assert)(t,"Unknown error code: "+e),yield this._requestInterceptedPromise;let i=yield this._responseInterceptedPromise;yield this._session.sendMayFail(i?"Network.interceptResponseWithError":"Network.interceptRequestWithError",{requestId:this._requestId,errorType:t})})}fulfill(e){return c(this,null,function*(){if(300<=e.status&&e.status<400)throw new Error("Cannot fulfill with redirect status: "+e.status);yield this._requestInterceptedPromise;let t=e.isBase64?"application/octet-stream":"text/plain",i=(0,Oo.headersArrayToObject)(e.headers,!0),n=i["content-type"];n&&(t=n.split(";")[0].trim());let s=yield this._responseInterceptedPromise;yield this._session.sendMayFail(s?"Network.interceptWithResponse":"Network.interceptRequestWithResponse",{requestId:this._requestId,status:e.status,statusText:Zd.STATUS_TEXTS[String(e.status)],mimeType:t,headers:i,base64Encoded:e.isBase64,content:e.body})})}continue(e,t){return c(this,null,function*(){if(t.interceptResponse&&(yield this._page._ensureResponseInterceptionEnabled(),this._responseInterceptedPromise=new fT.ManualPromise),yield this._requestInterceptedPromise,yield this._session.sendMayFail("Network.interceptWithRequest",{requestId:this._requestId,url:t.url,method:t.method,headers:t.headers?(0,Oo.headersArrayToObject)(t.headers,!1):void 0,postData:t.postData?Buffer.from(t.postData).toString("base64"):void 0}),!this._responseInterceptedPromise)return null;let{response:i,error:n}=yield this._responseInterceptedPromise;if(n)throw new Error(`Request failed: ${n.errorText}`);return new Zd.InterceptedResponse(e,i.status,i.statusText,(0,Oo.headersObjectToArray)(i.headers))})}};Po.WKRouteImpl=gT;function $n(r){return r===-1e3||r<=0?-1:(r*1e3|0)/1e3}});var bT=v(Qd=>{"use strict";Object.defineProperty(Qd,"__esModule",{value:!0});Qd.WKProvisionalPage=void 0;var zn=_t(),vT=G(),yT=class{constructor(e,t){this._session=void 0,this._wkPage=void 0,this._sessionListeners=[],this._mainFrameId=null,this.initializationPromise=void 0,this._session=e,this._wkPage=t;let i=s=>o=>{o.frameId&&(o.frameId=this._wkPage._page._frameManager.mainFrame()._id),s(o)},n=this._wkPage;this._sessionListeners=[zn.eventsHelper.addEventListener(e,"Network.requestWillBeSent",i(s=>n._onRequestWillBeSent(e,s))),zn.eventsHelper.addEventListener(e,"Network.requestIntercepted",i(s=>n._onRequestIntercepted(e,s))),zn.eventsHelper.addEventListener(e,"Network.responseIntercepted",i(s=>n._onResponseIntercepted(e,s))),zn.eventsHelper.addEventListener(e,"Network.responseReceived",i(s=>n._onResponseReceived(s))),zn.eventsHelper.addEventListener(e,"Network.loadingFinished",i(s=>n._onLoadingFinished(s))),zn.eventsHelper.addEventListener(e,"Network.loadingFailed",i(s=>n._onLoadingFailed(s)))],this.initializationPromise=this._wkPage._initializeSession(e,!0,({frameTree:s})=>this._handleFrameTree(s))}dispose(){zn.eventsHelper.removeEventListeners(this._sessionListeners)}commit(){(0,vT.assert)(this._mainFrameId),this._wkPage._onFrameAttached(this._mainFrameId,null)}_handleFrameTree(e){(0,vT.assert)(!e.frame.parentId),this._mainFrameId=e.frame.id}};Qd.WKProvisionalPage=yT});var ST=v(th=>{"use strict";Object.defineProperty(th,"__esModule",{value:!0});th.WKWorkers=void 0;var eh=_t(),Pj=Ot(),Tj=gc(),Aj=lg(),xT=class{constructor(e){this._sessionListeners=[],this._page=void 0,this._workerSessions=new Map,this._page=e}setSession(e){eh.eventsHelper.removeEventListeners(this._sessionListeners),this.clear(),this._sessionListeners=[eh.eventsHelper.addEventListener(e,"Worker.workerCreated",t=>{let i=new Pj.Worker(this._page,t.url),n=new Tj.WKSession(e.connection,t.workerId,"Most likely the worker has been closed.",s=>{e.send("Worker.sendMessageToWorker",{workerId:t.workerId,message:JSON.stringify(s)}).catch(o=>{n.dispatchMessage({id:s.id,error:{message:o.message}})})});this._workerSessions.set(t.workerId,n),i._createExecutionContext(new Aj.WKExecutionContext(n,void 0)),this._page._addWorker(t.workerId,i),n.on("Console.messageAdded",s=>this._onConsoleMessage(i,s)),Promise.all([n.send("Runtime.enable"),n.send("Console.enable"),e.send("Worker.initialized",{workerId:t.workerId})]).catch(s=>{this._page._removeWorker(t.workerId)})}),eh.eventsHelper.addEventListener(e,"Worker.dispatchMessageFromWorker",t=>{let i=this._workerSessions.get(t.workerId);!i||i.dispatchMessage(JSON.parse(t.message))}),eh.eventsHelper.addEventListener(e,"Worker.workerTerminated",t=>{let i=this._workerSessions.get(t.workerId);!i||(i.dispose(!1),this._workerSessions.delete(t.workerId),this._page._removeWorker(t.workerId))})]}clear(){this._page._clearWorkers(),this._workerSessions.clear()}initializeSession(e){return c(this,null,function*(){yield e.send("Worker.enable")})}_onConsoleMessage(e,t){return c(this,null,function*(){let{type:i,level:n,text:s,parameters:o,url:l,line:u,column:d}=t.message,h=i||"";i==="log"?h=n:i==="timing"&&(h="timeEnd");let p=(o||[]).map(m=>e._existingExecutionContext.createHandle(m)),f={url:l||"",lineNumber:(u||1)-1,columnNumber:(d||1)-1};this._page._addConsoleMessage(h,p,f,p.length?void 0:s)})}};th.WKWorkers=xT});var AT=v(ih=>{"use strict";Object.defineProperty(ih,"__esModule",{value:!0});ih.WKPage=void 0;var Ij=vc(lP()),Mj=Uj(x("path")),Fj=vc(nT()),Rj=Bt(),St=G(),Nj=vc(cd()),ET=vc(Is()),Ae=_t(),rh=Mt(),CT=vc(jt()),Vn=Ot(),Dj=sT(),Lj=gc(),qj=lg(),dg=pT(),kT=wT(),Bj=bT(),Hj=ST(),jj=Xe(),Wj=Vt();function Uj(r){return r&&r.__esModule?r:{default:r}}function OT(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(OT=function(i){return i?t:e})(r)}function vc(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=OT(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var PT="__playwright_utility_world__",TT="__playwright_binding_call__",yc=class{constructor(e,t,i){if(this.rawMouse=void 0,this.rawKeyboard=void 0,this.rawTouchscreen=void 0,this._session=void 0,this._provisionalPage=null,this._page=void 0,this._pagePromise=new Wj.ManualPromise,this._pageProxySession=void 0,this._opener=void 0,this._requestIdToRequest=new Map,this._workers=void 0,this._contextIdToContext=void 0,this._mainFrameContextId=void 0,this._sessionListeners=[],this._eventListeners=void 0,this._browserContext=void 0,this._initializedPage=null,this._firstNonInitialNavigationCommittedPromise=void 0,this._firstNonInitialNavigationCommittedFulfill=()=>{},this._firstNonInitialNavigationCommittedReject=n=>{},this._lastConsoleMessage=null,this._requestIdToResponseReceivedPayloadEvent=new Map,this._needsResponseInterception=!1,this._nextWindowOpenPopupFeatures=void 0,this._recordingVideoFile=null,this._screencastGeneration=0,this._pageProxySession=t,this._opener=i,this.rawKeyboard=new dg.RawKeyboardImpl(t),this.rawMouse=new dg.RawMouseImpl(t),this.rawTouchscreen=new dg.RawTouchscreenImpl(t),this._contextIdToContext=new Map,this._page=new Vn.Page(this,e),this.rawMouse.setPage(this._page),this._workers=new Hj.WKWorkers(this._page),this._session=void 0,this._browserContext=e,this._page.on(Vn.Page.Events.FrameDetached,n=>this._removeContextsForFrame(n,!1)),this._eventListeners=[Ae.eventsHelper.addEventListener(this._pageProxySession,"Target.targetCreated",this._onTargetCreated.bind(this)),Ae.eventsHelper.addEventListener(this._pageProxySession,"Target.targetDestroyed",this._onTargetDestroyed.bind(this)),Ae.eventsHelper.addEventListener(this._pageProxySession,"Target.dispatchMessageFromTarget",this._onDispatchMessageFromTarget.bind(this)),Ae.eventsHelper.addEventListener(this._pageProxySession,"Target.didCommitProvisionalTarget",this._onDidCommitProvisionalTarget.bind(this)),Ae.eventsHelper.addEventListener(this._pageProxySession,"Screencast.screencastFrame",this._onScreencastFrame.bind(this))],this._firstNonInitialNavigationCommittedPromise=new Promise((n,s)=>{this._firstNonInitialNavigationCommittedFulfill=n,this._firstNonInitialNavigationCommittedReject=s}),i&&!e._options.noDefaultViewport&&i._nextWindowOpenPopupFeatures){let n=rh.helper.getViewportSizeFromWindowFeatures(i._nextWindowOpenPopupFeatures);i._nextWindowOpenPopupFeatures=void 0,n&&(this._page._state.emulatedSize={viewport:n,screen:n})}}_initializePageProxySession(){return c(this,null,function*(){let e=[this._pageProxySession.send("Dialog.enable"),this._pageProxySession.send("Emulation.setActiveAndFocused",{active:!0})];if(this._browserContext._options.javaScriptEnabled===!1&&e.push(this._pageProxySession.send("Emulation.setJavaScriptEnabled",{enabled:!1})),e.push(this._updateViewport()),e.push(this.updateHttpCredentials()),this._browserContext._permissions.size)for(let[i,n]of this._browserContext._permissions)e.push(this._grantPermissions(i,n));if(this._browserContext._options.recordVideo){let i=Mj.default.join(this._browserContext._options.recordVideo.dir,(0,St.createGuid)()+".webm");e.push(this._browserContext._ensureVideosPath().then(()=>this._startVideo(R(y({},this._browserContext._options.recordVideo.size),{outputFile:i}))))}yield Promise.all(e)})}_setSession(e){Ae.eventsHelper.removeEventListeners(this._sessionListeners),this._session=e,this.rawKeyboard.setSession(e),this.rawMouse.setSession(e),this._addSessionListeners(),this._workers.setSession(e)}_initializeSession(e,t,i){return c(this,null,function*(){yield this._initializeSessionMayThrow(e,i).catch(n=>{if(!(t&&e.isDisposed())&&this._session===e)throw n})})}_initializeSessionMayThrow(e,t){return c(this,null,function*(){let[,i]=yield Promise.all([e.send("Page.enable"),e.send("Page.getResourceTree")]);t(i);let n=[e.send("Runtime.enable"),e.send("Page.createUserWorld",{name:PT}).catch(l=>{}),e.send("Console.enable"),e.send("Network.enable"),this._workers.initializeSession(e)];this._page._needsRequestInterception()&&(n.push(e.send("Network.setInterceptionEnabled",{enabled:!0})),n.push(e.send("Network.addInterception",{url:".*",stage:"request",isRegex:!0})),this._needsResponseInterception&&n.push(e.send("Network.addInterception",{url:".*",stage:"response",isRegex:!0})));let s=this._browserContext._options;s.userAgent&&n.push(e.send("Page.overrideUserAgent",{value:s.userAgent})),(this._page._state.mediaType||this._page._state.colorScheme||this._page._state.reducedMotion)&&n.push(yc._setEmulateMedia(e,this._page._state.mediaType,this._page._state.colorScheme,this._page._state.reducedMotion));let o=this._calculateBootstrapScript();o.length&&n.push(e.send("Page.setBootstrapScript",{source:o})),this._page.frames().map(l=>l.evaluateExpression(o,!1,void 0).catch(u=>{})),s.bypassCSP&&n.push(e.send("Page.setBypassCSP",{enabled:!0})),this._page._state.emulatedSize&&n.push(e.send("Page.setScreenSizeOverride",{width:this._page._state.emulatedSize.screen.width,height:this._page._state.emulatedSize.screen.height})),n.push(this.updateEmulateMedia()),n.push(e.send("Network.setExtraHTTPHeaders",{headers:(0,St.headersArrayToObject)(this._calculateExtraHTTPHeaders(),!1)})),s.offline&&n.push(e.send("Network.setEmulateOfflineState",{offline:!0})),n.push(e.send("Page.setTouchEmulationEnabled",{enabled:!!s.hasTouch})),s.timezoneId&&n.push(e.send("Page.setTimeZone",{timeZone:s.timezoneId}).catch(l=>{throw new Error(`Invalid timezone ID: ${s.timezoneId}`)})),n.push(e.send("Page.overrideSetting",{setting:"DeviceOrientationEventEnabled",value:s.isMobile})),n.push(e.send("Page.overrideSetting",{setting:"FullScreenEnabled",value:!s.isMobile})),n.push(e.send("Page.overrideSetting",{setting:"NotificationsEnabled",value:!s.isMobile})),n.push(e.send("Page.overrideSetting",{setting:"PointerLockEnabled",value:!s.isMobile})),n.push(e.send("Page.overrideSetting",{setting:"InputTypeMonthEnabled",value:s.isMobile})),n.push(e.send("Page.overrideSetting",{setting:"InputTypeWeekEnabled",value:s.isMobile})),yield Promise.all(n)})}_onDidCommitProvisionalTarget(e){let{oldTargetId:t,newTargetId:i}=e;(0,St.assert)(this._provisionalPage),(0,St.assert)(this._provisionalPage._session.sessionId===i,"Unknown new target: "+i),(0,St.assert)(this._session.sessionId===t,"Unknown old target: "+t);let n=this._provisionalPage._session;this._provisionalPage.commit(),this._provisionalPage.dispose(),this._provisionalPage=null,this._setSession(n)}_onTargetDestroyed(e){let{targetId:t,crashed:i}=e;this._provisionalPage&&this._provisionalPage._session.sessionId===t?(this._provisionalPage._session.dispose(!1),this._provisionalPage.dispose(),this._provisionalPage=null):this._session.sessionId===t&&(this._session.dispose(!1),Ae.eventsHelper.removeEventListeners(this._sessionListeners),i&&(this._session.markAsCrashed(),this._page._didCrash()))}didClose(){this._page._didClose()}dispose(e){this._pageProxySession.dispose(e),Ae.eventsHelper.removeEventListeners(this._sessionListeners),Ae.eventsHelper.removeEventListeners(this._eventListeners),this._session&&this._session.dispose(e),this._provisionalPage&&(this._provisionalPage._session.dispose(e),this._provisionalPage.dispose(),this._provisionalPage=null),this._page._didDisconnect(),this._firstNonInitialNavigationCommittedReject(new Error("Page closed"))}dispatchMessageToSession(e){this._pageProxySession.dispatchMessage(e)}handleProvisionalLoadFailed(e){if(!this._initializedPage){this._firstNonInitialNavigationCommittedReject(new Error("Initial load failed"));return}if(!this._provisionalPage)return;let t=e.error;t.includes("cancelled")&&(t+="; maybe frame was detached?"),this._page._frameManager.frameAbortedNavigation(this._page.mainFrame()._id,t,e.loaderId)}handleWindowOpen(e){(0,St.debugAssert)(!this._nextWindowOpenPopupFeatures),this._nextWindowOpenPopupFeatures=e.windowFeatures}pageOrError(){return c(this,null,function*(){return this._pagePromise})}_onTargetCreated(e){return c(this,null,function*(){let{targetInfo:t}=e,i=new Lj.WKSession(this._pageProxySession.connection,t.targetId,"Target closed",n=>{this._pageProxySession.send("Target.sendMessageToTarget",{message:JSON.stringify(n),targetId:t.targetId}).catch(s=>{i.dispatchMessage({id:n.id,error:{message:s.message}})})});if((0,St.assert)(t.type==="page","Only page targets are expected in WebKit, received: "+t.type),t.isProvisional)(0,St.assert)(t.isProvisional),(0,St.assert)(!this._provisionalPage),this._provisionalPage=new Bj.WKProvisionalPage(i,this),t.isPaused&&this._provisionalPage.initializationPromise.then(()=>{this._pageProxySession.sendMayFail("Target.resume",{targetId:t.targetId})});else{(0,St.assert)(!this._initializedPage);let n;try{this._setSession(i),yield Promise.all([this._initializePageProxySession(),this._initializeSession(i,!1,({frameTree:s})=>this._handleFrameTree(s))]),n=this._page}catch(s){n=s}if(t.isPaused&&this._pageProxySession.sendMayFail("Target.resume",{targetId:t.targetId}),n instanceof Vn.Page&&this._page.mainFrame().url()==="")try{yield this._firstNonInitialNavigationCommittedPromise}catch(s){n=s}else this._firstNonInitialNavigationCommittedPromise.catch(()=>{});yield this._page.initOpener(this._opener),this._initializedPage=n instanceof Vn.Page?n:null,this._page.reportAsNew(n instanceof Vn.Page?void 0:n),this._pagePromise.resolve(n)}})}_onDispatchMessageFromTarget(e){let{targetId:t,message:i}=e;if(this._provisionalPage&&this._provisionalPage._session.sessionId===t)this._provisionalPage._session.dispatchMessage(JSON.parse(i));else if(this._session.sessionId===t)this._session.dispatchMessage(JSON.parse(i));else throw new Error("Unknown target: "+t)}_addSessionListeners(){this._sessionListeners=[Ae.eventsHelper.addEventListener(this._session,"Page.frameNavigated",e=>this._onFrameNavigated(e.frame,!1)),Ae.eventsHelper.addEventListener(this._session,"Page.navigatedWithinDocument",e=>this._onFrameNavigatedWithinDocument(e.frameId,e.url)),Ae.eventsHelper.addEventListener(this._session,"Page.frameAttached",e=>this._onFrameAttached(e.frameId,e.parentFrameId)),Ae.eventsHelper.addEventListener(this._session,"Page.frameDetached",e=>this._onFrameDetached(e.frameId)),Ae.eventsHelper.addEventListener(this._session,"Page.frameScheduledNavigation",e=>this._onFrameScheduledNavigation(e.frameId)),Ae.eventsHelper.addEventListener(this._session,"Page.frameStoppedLoading",e=>this._onFrameStoppedLoading(e.frameId)),Ae.eventsHelper.addEventListener(this._session,"Page.loadEventFired",e=>this._onLifecycleEvent(e.frameId,"load")),Ae.eventsHelper.addEventListener(this._session,"Page.domContentEventFired",e=>this._onLifecycleEvent(e.frameId,"domcontentloaded")),Ae.eventsHelper.addEventListener(this._session,"Runtime.executionContextCreated",e=>this._onExecutionContextCreated(e.context)),Ae.eventsHelper.addEventListener(this._session,"Console.messageAdded",e=>this._onConsoleMessage(e)),Ae.eventsHelper.addEventListener(this._session,"Console.messageRepeatCountUpdated",e=>this._onConsoleRepeatCountUpdated(e)),Ae.eventsHelper.addEventListener(this._pageProxySession,"Dialog.javascriptDialogOpening",e=>this._onDialog(e)),Ae.eventsHelper.addEventListener(this._session,"Page.fileChooserOpened",e=>this._onFileChooserOpened(e)),Ae.eventsHelper.addEventListener(this._session,"Network.requestWillBeSent",e=>this._onRequestWillBeSent(this._session,e)),Ae.eventsHelper.addEventListener(this._session,"Network.requestIntercepted",e=>this._onRequestIntercepted(this._session,e)),Ae.eventsHelper.addEventListener(this._session,"Network.responseIntercepted",e=>this._onResponseIntercepted(this._session,e)),Ae.eventsHelper.addEventListener(this._session,"Network.responseReceived",e=>this._onResponseReceived(e)),Ae.eventsHelper.addEventListener(this._session,"Network.loadingFinished",e=>this._onLoadingFinished(e)),Ae.eventsHelper.addEventListener(this._session,"Network.loadingFailed",e=>this._onLoadingFailed(e)),Ae.eventsHelper.addEventListener(this._session,"Network.webSocketCreated",e=>this._page._frameManager.onWebSocketCreated(e.requestId,e.url)),Ae.eventsHelper.addEventListener(this._session,"Network.webSocketWillSendHandshakeRequest",e=>this._page._frameManager.onWebSocketRequest(e.requestId)),Ae.eventsHelper.addEventListener(this._session,"Network.webSocketHandshakeResponseReceived",e=>this._page._frameManager.onWebSocketResponse(e.requestId,e.response.status,e.response.statusText)),Ae.eventsHelper.addEventListener(this._session,"Network.webSocketFrameSent",e=>e.response.payloadData&&this._page._frameManager.onWebSocketFrameSent(e.requestId,e.response.opcode,e.response.payloadData)),Ae.eventsHelper.addEventListener(this._session,"Network.webSocketFrameReceived",e=>e.response.payloadData&&this._page._frameManager.webSocketFrameReceived(e.requestId,e.response.opcode,e.response.payloadData)),Ae.eventsHelper.addEventListener(this._session,"Network.webSocketClosed",e=>this._page._frameManager.webSocketClosed(e.requestId)),Ae.eventsHelper.addEventListener(this._session,"Network.webSocketFrameError",e=>this._page._frameManager.webSocketError(e.requestId,e.errorMessage))]}_updateState(e,t){return c(this,null,function*(){yield this._forAllSessions(i=>i.send(e,t).then())})}_forAllSessions(e){return c(this,null,function*(){let t=[this._session];this._provisionalPage&&t.push(this._provisionalPage._session),yield Promise.all(t.map(i=>e(i).catch(n=>{})))})}_onFrameScheduledNavigation(e){this._page._frameManager.frameRequestedNavigation(e)}_onFrameStoppedLoading(e){this._page._frameManager.frameStoppedLoading(e)}_onLifecycleEvent(e,t){this._page._frameManager.frameLifecycleEvent(e,t)}_handleFrameTree(e){if(this._onFrameAttached(e.frame.id,e.frame.parentId||null),this._onFrameNavigated(e.frame,!0),this._page._frameManager.frameLifecycleEvent(e.frame.id,"domcontentloaded"),this._page._frameManager.frameLifecycleEvent(e.frame.id,"load"),!!e.childFrames)for(let t of e.childFrames)this._handleFrameTree(t)}_onFrameAttached(e,t){return this._page._frameManager.frameAttached(e,t)}_onFrameNavigated(e,t){let i=this._page._frameManager.frame(e.id);(0,St.assert)(i),this._removeContextsForFrame(i,!0),e.parentId||this._workers.clear(),this._page._frameManager.frameCommittedNewDocumentNavigation(e.id,e.url,e.name||"",e.loaderId,t),t||this._firstNonInitialNavigationCommittedFulfill()}_onFrameNavigatedWithinDocument(e,t){this._page._frameManager.frameCommittedSameDocumentNavigation(e,t)}_onFrameDetached(e){this._page._frameManager.frameDetached(e)}_removeContextsForFrame(e,t){for(let[i,n]of this._contextIdToContext)n.frame===e&&(n._delegate._dispose(),this._contextIdToContext.delete(i),t&&e._contextDestroyed(n))}_onExecutionContextCreated(e){if(this._contextIdToContext.has(e.id))return;let t=this._page._frameManager.frame(e.frameId);if(!t)return;let i=new qj.WKExecutionContext(this._session,e.id),n=null;e.type==="normal"?n="main":e.type==="user"&&e.name===PT&&(n="utility");let s=new ET.FrameExecutionContext(i,t,n);n&&t._contextCreated(n,s),e.type==="normal"&&t===this._page.mainFrame()&&(this._mainFrameContextId=e.id),this._contextIdToContext.set(e.id,s)}navigateFrame(e,t,i){return c(this,null,function*(){if(this._pageProxySession.isDisposed())throw new Error("Target closed");let n=this._pageProxySession.sessionId;return{newDocumentId:(yield this._pageProxySession.connection.browserSession.send("Playwright.navigate",{url:t,pageProxyId:n,frameId:e._id,referrer:i})).loaderId}})}_onConsoleMessage(e){let{type:t,level:i,text:n,parameters:s,url:o,line:l,column:u,source:d}=e.message;if(i==="debug"&&s&&s[0].value===TT){let f=JSON.parse(s[1].objectId),m=this._contextIdToContext.get(f.injectedScriptId);this.pageOrError().then(_=>{_ instanceof Error||this._page._onBindingCalled(s[2].value,m)});return}if(i==="error"&&d==="javascript"){let{name:f,message:m}=(0,Rj.splitErrorMessage)(n),_;e.message.stackTrace?_=n+`
`+e.message.stackTrace.map(w=>`    at ${w.functionName||"unknown"} (${w.url}:${w.lineNumber}:${w.columnNumber})`).join(`
`):_="";let g=new Error(m);g.stack=_,g.name=f,this._page.firePageError(g);return}let h=t||"";t==="log"?h=i:t==="timing"&&(h="timeEnd");let p=(s||[]).map(f=>{let m=null;if(f.objectId){let _=JSON.parse(f.objectId);m=this._contextIdToContext.get(_.injectedScriptId)}else m=this._contextIdToContext.get(this._mainFrameContextId);return m.createHandle(f)});this._lastConsoleMessage={derivedType:h,text:n,handles:p,count:0,location:{url:o||"",lineNumber:(l||1)-1,columnNumber:(u||1)-1}},this._onConsoleRepeatCountUpdated({count:1})}_onConsoleRepeatCountUpdated(e){if(this._lastConsoleMessage){let{derivedType:t,text:i,handles:n,count:s,location:o}=this._lastConsoleMessage;for(let l=s;l<e.count;++l)this._page._addConsoleMessage(t,n,o,n.length?void 0:i);this._lastConsoleMessage.count=e.count}}_onDialog(e){this._page.emit(Vn.Page.Events.Dialog,new Nj.Dialog(this._page,e.type,e.message,(t,i)=>c(this,null,function*(){yield this._pageProxySession.send("Dialog.handleJavaScriptDialog",{accept:t,promptText:i})}),e.defaultPrompt))}_onFileChooserOpened(e){return c(this,null,function*(){let t;try{t=(yield this._page._frameManager.frame(e.frameId)._mainContext()).createHandle(e.element).asElement()}catch(i){return}yield this._page._onFileChooserOpened(t)})}static _setEmulateMedia(e,t,i,n){return c(this,null,function*(){let s=[];s.push(e.send("Page.setEmulatedMedia",{media:t||""}));let o;switch(i){case"light":o="Light";break;case"dark":o="Dark";break}s.push(e.send("Page.setForcedAppearance",{appearance:o}));let l;switch(n){case"reduce":l="Reduce";break;case"no-preference":l="NoPreference";break}s.push(e.send("Page.setForcedReducedMotion",{reducedMotion:l})),yield Promise.all(s)})}updateExtraHTTPHeaders(){return c(this,null,function*(){yield this._updateState("Network.setExtraHTTPHeaders",{headers:(0,St.headersArrayToObject)(this._calculateExtraHTTPHeaders(),!1)})})}_calculateExtraHTTPHeaders(){let e=this._browserContext._options.locale;return CT.mergeHeaders([this._browserContext._options.extraHTTPHeaders,this._page._state.extraHTTPHeaders,e?CT.singleHeader("Accept-Language",e):void 0])}updateEmulateMedia(){return c(this,null,function*(){let e=this._page._state.colorScheme,t=this._page._state.reducedMotion;yield this._forAllSessions(i=>yc._setEmulateMedia(i,this._page._state.mediaType,e,t))})}setEmulatedSize(e){return c(this,null,function*(){(0,St.assert)(this._page._state.emulatedSize===e),yield this._updateViewport()})}bringToFront(){return c(this,null,function*(){this._pageProxySession.send("Target.activate",{targetId:this._session.sessionId})})}_updateViewport(){return c(this,null,function*(){let e=this._browserContext._options,t=this._page._state.emulatedSize;if(t===null)return;let i=t.viewport,n=t.screen,s=[this._pageProxySession.send("Emulation.setDeviceMetricsOverride",{width:i.width,height:i.height,fixedLayout:!!e.isMobile,deviceScaleFactor:e.deviceScaleFactor||1}),this._session.send("Page.setScreenSizeOverride",{width:n.width,height:n.height})];if(e.isMobile){let o=i.width>i.height?90:0;s.push(this._session.send("Page.setOrientationOverride",{angle:o}))}yield Promise.all(s)})}_ensureResponseInterceptionEnabled(){return c(this,null,function*(){this._needsResponseInterception||(this._needsResponseInterception=!0,yield this.updateRequestInterception())})}updateRequestInterception(){return c(this,null,function*(){let e=this._page._needsRequestInterception(),t=[this._updateState("Network.setInterceptionEnabled",{enabled:e}),this._updateState("Network.addInterception",{url:".*",stage:"request",isRegex:!0})];this._needsResponseInterception&&this._updateState("Network.addInterception",{url:".*",stage:"response",isRegex:!0}),yield Promise.all(t)})}updateOffline(){return c(this,null,function*(){yield this._updateState("Network.setEmulateOfflineState",{offline:!!this._browserContext._options.offline})})}updateHttpCredentials(){return c(this,null,function*(){let e=this._browserContext._options.httpCredentials||{username:"",password:""};yield this._pageProxySession.send("Emulation.setAuthCredentials",{username:e.username,password:e.password})})}setFileChooserIntercepted(e){return c(this,null,function*(){yield this._session.send("Page.setInterceptFileChooserDialog",{enabled:e}).catch(t=>{})})}reload(){return c(this,null,function*(){yield this._session.send("Page.reload")})}goBack(){return this._session.send("Page.goBack").then(()=>!0).catch(e=>{if(e instanceof Error&&e.message.includes("Protocol error (Page.goBack): Failed to go"))return!1;throw e})}goForward(){return this._session.send("Page.goForward").then(()=>!0).catch(e=>{if(e instanceof Error&&e.message.includes("Protocol error (Page.goForward): Failed to go"))return!1;throw e})}exposeBinding(e){return c(this,null,function*(){yield this._updateBootstrapScript(),yield this._evaluateBindingScript(e)})}_evaluateBindingScript(e){return c(this,null,function*(){let t=this._bindingToScript(e);yield Promise.all(this._page.frames().map(i=>i.evaluateExpression(t,!1,{}).catch(n=>{})))})}evaluateOnNewDocument(e){return c(this,null,function*(){yield this._updateBootstrapScript()})}_bindingToScript(e){return`self.${e.name} = (param) => console.debug('${TT}', {}, param); ${e.source}`}_calculateBootstrapScript(){let e=[];for(let t of this._page.allBindings())e.push(this._bindingToScript(t));return e.push(...this._browserContext._evaluateOnNewDocumentSources),e.push(...this._page._evaluateOnNewDocumentSources),e.join(";")}_updateBootstrapScript(){return c(this,null,function*(){yield this._updateState("Page.setBootstrapScript",{source:this._calculateBootstrapScript()})})}closePage(e){return c(this,null,function*(){yield this._stopVideo(),yield this._pageProxySession.sendMayFail("Target.close",{targetId:this._session.sessionId,runBeforeUnload:e})})}canScreenshotOutsideViewport(){return!0}setBackgroundColor(e){return c(this,null,function*(){yield this._session.send("Page.setDefaultBackgroundColorOverride",{color:e})})}_toolbarHeight(){var e;return(e=this._page._browserContext._browser)!==null&&e!==void 0&&e.options.headful?St.hostPlatform==="mac10.15"?55:59:0}_startVideo(e){return c(this,null,function*(){(0,St.assert)(!this._recordingVideoFile);let{screencastId:t}=yield this._pageProxySession.send("Screencast.startVideo",{file:e.outputFile,width:e.width,height:e.height,toolbarHeight:this._toolbarHeight()});this._recordingVideoFile=e.outputFile,this._browserContext._browser._videoStarted(this._browserContext,t,e.outputFile,this.pageOrError())})}_stopVideo(){return c(this,null,function*(){!this._recordingVideoFile||(yield this._pageProxySession.sendMayFail("Screencast.stopVideo"),this._recordingVideoFile=null)})}takeScreenshot(e,t,i,n,s){return c(this,null,function*(){let o=i||n,l=yield this._session.send("Page.snapshotRect",R(y({},o),{coordinateSystem:i?"Page":"Viewport"})),u="data:image/png;base64,",d=Buffer.from(l.dataURL.substr(u.length),"base64");return t==="jpeg"&&(d=Ij.encode(Fj.PNG.sync.read(d),s).data),d})}resetViewport(){return c(this,null,function*(){(0,St.assert)(!1,"Should not be called")})}getContentFrame(e){return c(this,null,function*(){let t=yield this._session.send("DOM.describeNode",{objectId:e._objectId});return t.contentFrameId?this._page._frameManager.frame(t.contentFrameId):null})}getOwnerFrame(e){return c(this,null,function*(){return e._objectId&&(yield this._session.send("DOM.describeNode",{objectId:e._objectId})).ownerFrameId||null})}isElementHandle(e){return e.subtype==="node"}getBoundingBox(e){return c(this,null,function*(){let t=yield this.getContentQuads(e);if(!t||!t.length)return null;let i=1/0,n=-1/0,s=1/0,o=-1/0;for(let l of t)for(let u of l)i=Math.min(i,u.x),n=Math.max(n,u.x),s=Math.min(s,u.y),o=Math.max(o,u.y);return{x:i,y:s,width:n-i,height:o-s}})}scrollRectIntoViewIfNeeded(e,t){return c(this,null,function*(){return yield this._session.send("DOM.scrollIntoViewIfNeeded",{objectId:e._objectId,rect:t}).then(()=>"done").catch(i=>{if(i instanceof Error&&i.message.includes("Node does not have a layout object"))return"error:notvisible";if(i instanceof Error&&i.message.includes("Node is detached from document"))return"error:notconnected";throw i})})}setScreencastOptions(e){return c(this,null,function*(){if(e){let t=R(y({},e),{toolbarHeight:this._toolbarHeight()}),{generation:i}=yield this._pageProxySession.send("Screencast.startScreencast",t);this._screencastGeneration=i}else yield this._pageProxySession.send("Screencast.stopScreencast")})}_onScreencastFrame(e){this._pageProxySession.send("Screencast.screencastFrameAck",{generation:this._screencastGeneration}).catch(i=>jj.debugLogger.log("error",i));let t=Buffer.from(e.data,"base64");this._page.emit(Vn.Page.Events.ScreencastFrame,{buffer:t,width:e.deviceWidth,height:e.deviceHeight})}rafCountForStablePosition(){return process.platform==="win32"?5:1}getContentQuads(e){return c(this,null,function*(){let t=yield this._session.sendMayFail("DOM.getContentQuads",{objectId:e._objectId});return t?t.quads.map(i=>[{x:i[0],y:i[1]},{x:i[2],y:i[3]},{x:i[4],y:i[5]},{x:i[6],y:i[7]}]):null})}setInputFiles(e,t){return c(this,null,function*(){let i=e._objectId,n=t.map(s=>({name:s.name,type:s.mimeType,data:s.buffer}));yield this._session.send("DOM.setInputFiles",{objectId:i,files:n})})}adoptElementHandle(e,t){return c(this,null,function*(){let i=yield this._session.sendMayFail("DOM.resolveNode",{objectId:e._objectId,executionContextId:t._delegate._contextId});if(!i||i.object.subtype==="null")throw new Error(ET.kUnableToAdoptErrorMessage);return t.createHandle(i.object)})}getAccessibilityTree(e){return c(this,null,function*(){return(0,Dj.getAccessibilityTree)(this._session,e)})}inputActionEpilogue(){return c(this,null,function*(){})}getFrameElement(e){return c(this,null,function*(){let t=e.parentFrame();if(!t)throw new Error("Frame has been detached.");let i=yield this._page.selectors._queryAll(t,"frame,iframe",void 0),n=yield Promise.all(i.map(o=>c(this,null,function*(){let l=yield o.contentFrame().catch(u=>null);return{handle:o,frame:l}}))),s=n.find(o=>o.frame===e);if(n.map(o=>o===s?Promise.resolve():o.handle.dispose()),!s)throw new Error("Frame has been detached.");return s.handle})}_onRequestWillBeSent(e,t){if(t.request.url.startsWith("data:"))return;let i=null;if(t.redirectResponse){let d=this._requestIdToRequest.get(t.requestId);d&&(this._handleRequestRedirect(d,t.redirectResponse,t.timestamp),i=d)}let n=i?i.request.frame():this._page._frameManager.frame(t.frameId);if(!n)return;let o=t.type==="Document"?t.loaderId:void 0,l=null;this._page._needsRequestInterception()&&!i&&(l=new kT.WKRouteImpl(e,this,t.requestId));let u=new kT.WKInterceptableRequest(e,l,n,t,i,o);this._requestIdToRequest.set(t.requestId,u),this._page._frameManager.requestStarted(u.request,l||void 0)}_handleRequestRedirect(e,t,i){let n=e.createResponse(t);n._securityDetailsFinished(),n._serverAddrFinished(),n._requestFinished(t.timing?rh.helper.secondsToRoundishMillis(i-e._timestamp):-1),this._requestIdToRequest.delete(e._requestId),this._page._frameManager.requestReceivedResponse(n),this._page._frameManager.reportRequestFinished(e.request,n)}_onRequestIntercepted(e,t){let i=this._requestIdToRequest.get(t.requestId);if(!i){e.sendMayFail("Network.interceptRequestWithError",{errorType:"Cancellation",requestId:t.requestId});return}i._route?i._route._requestInterceptedPromise.resolve():e.sendMayFail("Network.interceptWithRequest",{requestId:i._requestId})}_onResponseIntercepted(e,t){let i=this._requestIdToRequest.get(t.requestId),n=i==null?void 0:i._routeForRedirectChain();if(!(n!=null&&n._responseInterceptedPromise)){e.sendMayFail("Network.interceptContinue",{requestId:t.requestId,stage:"response"});return}n._responseInterceptedPromise.resolve({response:t.response})}_onResponseReceived(e){let t=this._requestIdToRequest.get(e.requestId);if(!t)return;this._requestIdToResponseReceivedPayloadEvent.set(t._requestId,e);let i=t.createResponse(e.response);if(e.response.requestHeaders&&Object.keys(e.response.requestHeaders).length){let n=y({},e.response.requestHeaders);n.host||(n.Host=new URL(t.request.url()).host),t.request.setRawRequestHeaders((0,St.headersObjectToArray)(n))}this._page._frameManager.requestReceivedResponse(i),i.status()===204&&this._onLoadingFailed({requestId:e.requestId,errorText:"Aborted: 204 No Content",timestamp:e.timestamp})}_onLoadingFinished(e){let t=this._requestIdToRequest.get(e.requestId);if(!t)return;let i=t.request._existingResponse();if(i){var n,s,o,l,u,d,h,p,f,m,_,g;let w=this._requestIdToResponseReceivedPayloadEvent.get(t._requestId);i._serverAddrFinished($j(e==null||(n=e.metrics)===null||n===void 0?void 0:n.remoteAddress)),i._securityDetailsFinished({protocol:zj(i.url(),i.timing())?(s=e.metrics)===null||s===void 0||(o=s.securityConnection)===null||o===void 0?void 0:o.protocol:void 0,subjectName:w==null||(l=w.response.security)===null||l===void 0||(u=l.certificate)===null||u===void 0?void 0:u.subject,validFrom:w==null||(d=w.response.security)===null||d===void 0||(h=d.certificate)===null||h===void 0?void 0:h.validFrom,validTo:w==null||(p=w.response.security)===null||p===void 0||(f=p.certificate)===null||f===void 0?void 0:f.validUntil}),(m=e.metrics)!==null&&m!==void 0&&m.protocol&&i._setHttpVersion(e.metrics.protocol),(_=e.metrics)!==null&&_!==void 0&&_.responseBodyBytesReceived&&(t.request.responseSize.encodedBodySize=e.metrics.responseBodyBytesReceived),(g=e.metrics)!==null&&g!==void 0&&g.responseHeaderBytesReceived&&(t.request.responseSize.responseHeadersSize=e.metrics.responseHeaderBytesReceived),i._requestFinished(rh.helper.secondsToRoundishMillis(e.timestamp-t._timestamp))}this._requestIdToResponseReceivedPayloadEvent.delete(t._requestId),this._requestIdToRequest.delete(t._requestId),this._page._frameManager.reportRequestFinished(t.request,i)}_onLoadingFailed(e){let t=this._requestIdToRequest.get(e.requestId);if(!t)return;let i=t._routeForRedirectChain();i!=null&&i._responseInterceptedPromise&&i._responseInterceptedPromise.resolve({error:e});let n=t.request._existingResponse();n&&(n._serverAddrFinished(),n._securityDetailsFinished(),n._requestFinished(rh.helper.secondsToRoundishMillis(e.timestamp-t._timestamp))),this._requestIdToRequest.delete(t._requestId),t.request._setFailureText(e.errorText),this._page._frameManager.requestFailed(t.request,e.errorText.includes("cancelled"))}_grantPermissions(e,t){return c(this,null,function*(){let i=new Map([["geolocation","geolocation"]]),n=t.map(s=>{let o=i.get(s);if(!o)throw new Error("Unknown permission: "+s);return o});yield this._pageProxySession.send("Emulation.grantPermissions",{origin:e,permissions:n})})}_clearPermissions(){return c(this,null,function*(){yield this._pageProxySession.send("Emulation.resetPermissions",{})})}};ih.WKPage=yc;function $j(r){if(!!r)try{let e=r.lastIndexOf(":"),t=r.lastIndexOf(".");if(t<0)return{ipAddress:`[${r.slice(0,e)}]`,port:+r.slice(e+1)};if(e>t){let[i,n]=r.split(":");return{ipAddress:i,port:+n}}else{let[i,n]=r.split(".");return{ipAddress:`[${i}]`,port:+n}}}catch(e){}}function zj(r,e){try{let t=new URL(r);return!(t.protocol!=="https:"&&t.protocol!=="wss:"&&t.protocol!=="sftp:"||e.secureConnectionStart===-1&&e.connectStart!==-1)}catch(t){}}});var NT=v(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});To.WKBrowserContext=To.WKBrowser=void 0;var Vj=no(),nh=gt(),ri=_t(),IT=G(),MT=Jj(jt()),hg=gc(),Gj=AT(),Kj=qt();function FT(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(FT=function(i){return i?t:e})(r)}function Jj(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=FT(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var RT="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Safari/605.1.15",Xj="15.4",sh=class extends Vj.Browser{static connect(e,t){return c(this,null,function*(){let i=new sh(e,t);t.__testHookOnConnectToBrowser&&(yield t.__testHookOnConnectToBrowser());let n=[i._browserSession.send("Playwright.enable")];return t.persistent&&(i._defaultContext=new oh(i,void 0,t.persistent),n.push(i._defaultContext._initialize())),yield Promise.all(n),i})}constructor(e,t){super(t);this._connection=void 0,this._browserSession=void 0,this._contexts=new Map,this._wkPages=new Map,this._eventListeners=void 0,this._connection=new hg.WKConnection(e,this._onDisconnect.bind(this),t.protocolLogger,t.browserLogsCollector),this._browserSession=this._connection.browserSession,this._eventListeners=[ri.eventsHelper.addEventListener(this._browserSession,"Playwright.pageProxyCreated",this._onPageProxyCreated.bind(this)),ri.eventsHelper.addEventListener(this._browserSession,"Playwright.pageProxyDestroyed",this._onPageProxyDestroyed.bind(this)),ri.eventsHelper.addEventListener(this._browserSession,"Playwright.provisionalLoadFailed",i=>this._onProvisionalLoadFailed(i)),ri.eventsHelper.addEventListener(this._browserSession,"Playwright.windowOpen",i=>this._onWindowOpen(i)),ri.eventsHelper.addEventListener(this._browserSession,"Playwright.downloadCreated",this._onDownloadCreated.bind(this)),ri.eventsHelper.addEventListener(this._browserSession,"Playwright.downloadFilenameSuggested",this._onDownloadFilenameSuggested.bind(this)),ri.eventsHelper.addEventListener(this._browserSession,"Playwright.downloadFinished",this._onDownloadFinished.bind(this)),ri.eventsHelper.addEventListener(this._browserSession,"Playwright.screencastFinished",this._onScreencastFinished.bind(this)),ri.eventsHelper.addEventListener(this._browserSession,hg.kPageProxyMessageReceived,this._onPageProxyMessageReceived.bind(this))]}_onDisconnect(){for(let e of this._wkPages.values())e.dispose(!0);for(let e of this._idToVideo.values())e.artifact.reportFinished(Kj.kBrowserClosedError);this._idToVideo.clear(),this._didClose()}newContext(e){return c(this,null,function*(){(0,nh.validateBrowserContextOptions)(e,this.options);let t=e.proxy?{proxyServer:e.proxy.server,proxyBypassList:e.proxy.bypass}:void 0,{browserContextId:i}=yield this._browserSession.send("Playwright.createContext",t);e.userAgent=e.userAgent||RT;let n=new oh(this,i,e);return yield n._initialize(),this._contexts.set(i,n),n})}contexts(){return Array.from(this._contexts.values())}version(){return Xj}userAgent(){return RT}_onDownloadCreated(e){let t=this._wkPages.get(e.pageProxyId);if(!t)return;t._page._frameManager.frameAbortedNavigation(e.frameId,"Download is starting");let i=t._initializedPage;i||(t._firstNonInitialNavigationCommittedReject(new Error("Starting new page download")),t._opener&&(i=t._opener._initializedPage)),!!i&&this._downloadCreated(i,e.uuid,e.url)}_onDownloadFilenameSuggested(e){this._downloadFilenameSuggested(e.uuid,e.suggestedFilename)}_onDownloadFinished(e){this._downloadFinished(e.uuid,e.error)}_onScreencastFinished(e){var t;(t=this._takeVideo(e.screencastId))===null||t===void 0||t.reportFinished()}_onPageProxyCreated(e){let t=e.pageProxyId,i=null;if(e.browserContextId&&(i=this._contexts.get(e.browserContextId)||null),i||(i=this._defaultContext),!i)return;let n=new hg.WKSession(this._connection,t,"Target closed",l=>{this._connection.rawSend(R(y({},l),{pageProxyId:t}))}),s=e.openerId?this._wkPages.get(e.openerId):void 0,o=new Gj.WKPage(i,n,s||null);this._wkPages.set(t,o)}_onPageProxyDestroyed(e){let t=e.pageProxyId,i=this._wkPages.get(t);!i||(i.didClose(),i.dispose(!1),this._wkPages.delete(t))}_onPageProxyMessageReceived(e){let t=this._wkPages.get(e.pageProxyId);!t||t.dispatchMessageToSession(e.message)}_onProvisionalLoadFailed(e){let t=this._wkPages.get(e.pageProxyId);!t||t.handleProvisionalLoadFailed(e)}_onWindowOpen(e){let t=this._wkPages.get(e.pageProxyId);!t||t.handleWindowOpen(e)}isConnected(){return!this._connection.isClosed()}};To.WKBrowser=sh;var oh=class extends nh.BrowserContext{constructor(e,t,i){super(e,i,t);this._evaluateOnNewDocumentSources=void 0,this._evaluateOnNewDocumentSources=[],this._authenticateProxyViaHeader()}_initialize(){var e=t=>super[t];return c(this,null,function*(){(0,IT.assert)(!this._wkPages().length);let i=this._browserContextId,n=[e("_initialize").call(this)];n.push(this._browser._browserSession.send("Playwright.setDownloadBehavior",{behavior:this._options.acceptDownloads?"allow":"deny",downloadPath:this._browser.options.downloadsPath,browserContextId:i})),this._options.ignoreHTTPSErrors&&n.push(this._browser._browserSession.send("Playwright.setIgnoreCertificateErrors",{browserContextId:i,ignore:!0})),this._options.locale&&n.push(this._browser._browserSession.send("Playwright.setLanguages",{browserContextId:i,languages:[this._options.locale]})),this._options.permissions&&n.push(this.grantPermissions(this._options.permissions)),this._options.geolocation&&n.push(this.setGeolocation(this._options.geolocation)),this._options.offline&&n.push(this.setOffline(this._options.offline)),this._options.httpCredentials&&n.push(this.setHTTPCredentials(this._options.httpCredentials)),yield Promise.all(n)})}_wkPages(){return Array.from(this._browser._wkPages.values()).filter(e=>e._browserContext===this)}pages(){return this._wkPages().map(e=>e._initializedPage).filter(e=>!!e)}newPageDelegate(){return c(this,null,function*(){(0,nh.assertBrowserContextIsNotOwned)(this);let{pageProxyId:e}=yield this._browser._browserSession.send("Playwright.createPage",{browserContextId:this._browserContextId});return this._browser._wkPages.get(e)})}_doCookies(e){return c(this,null,function*(){let{cookies:t}=yield this._browser._browserSession.send("Playwright.getAllCookies",{browserContextId:this._browserContextId});return MT.filterCookies(t.map(i=>{let n=y({},i);return n.expires=i.expires===-1?-1:i.expires/1e3,delete n.session,n}),e)})}addCookies(e){return c(this,null,function*(){let t=MT.rewriteCookies(e).map(i=>R(y({},i),{session:i.expires===-1||i.expires===void 0,expires:i.expires&&i.expires!==-1?i.expires*1e3:i.expires}));yield this._browser._browserSession.send("Playwright.setCookies",{cookies:t,browserContextId:this._browserContextId})})}clearCookies(){return c(this,null,function*(){yield this._browser._browserSession.send("Playwright.deleteAllCookies",{browserContextId:this._browserContextId})})}_doGrantPermissions(e,t){return c(this,null,function*(){yield Promise.all(this.pages().map(i=>i._delegate._grantPermissions(e,t)))})}_doClearPermissions(){return c(this,null,function*(){yield Promise.all(this.pages().map(e=>e._delegate._clearPermissions()))})}setGeolocation(e){return c(this,null,function*(){(0,nh.verifyGeolocation)(e),this._options.geolocation=e;let t=e?R(y({},e),{timestamp:Date.now()}):void 0;yield this._browser._browserSession.send("Playwright.setGeolocationOverride",{browserContextId:this._browserContextId,geolocation:t})})}setExtraHTTPHeaders(e){return c(this,null,function*(){this._options.extraHTTPHeaders=e;for(let t of this.pages())yield t._delegate.updateExtraHTTPHeaders()})}setOffline(e){return c(this,null,function*(){this._options.offline=e;for(let t of this.pages())yield t._delegate.updateOffline()})}_doSetHTTPCredentials(e){return c(this,null,function*(){this._options.httpCredentials=e;for(let t of this.pages())yield t._delegate.updateHttpCredentials()})}_doAddInitScript(e){return c(this,null,function*(){this._evaluateOnNewDocumentSources.push(e);for(let t of this.pages())yield t._delegate._updateBootstrapScript()})}_doExposeBinding(e){return c(this,null,function*(){for(let t of this.pages())yield t._delegate.exposeBinding(e)})}_doUpdateRequestInterception(){return c(this,null,function*(){for(let e of this.pages())yield e._delegate.updateRequestInterception()})}_onClosePersistent(){}_doClose(){return c(this,null,function*(){(0,IT.assert)(this._browserContextId),yield this._browser._browserSession.send("Playwright.deleteContext",{browserContextId:this._browserContextId}),this._browser._contexts.delete(this._browserContextId)})}_doCancelDownload(e){return c(this,null,function*(){yield this._browser._browserSession.send("Playwright.cancelDownload",{uuid:e})})}};To.WKBrowserContext=oh});var LT=v(ah=>{"use strict";Object.defineProperty(ah,"__esModule",{value:!0});ah.WebKit=void 0;var Yj=NT(),Zj=tW(x("path")),Qj=gc(),eW=Md();function tW(r){return r&&r.__esModule?r:{default:r}}var DT=class extends eW.BrowserType{constructor(e){super("webkit",e)}_connectToTransport(e,t){return Yj.WKBrowser.connect(e,t)}_amendEnvironment(e,t,i,n){return R(y({},e),{CURL_COOKIE_JAR_PATH:Zj.default.join(t,"cookiejar.db")})}_rewriteStartupError(e){return e}_attemptToGracefullyCloseBrowser(e){e.send({method:"Playwright.close",params:{},id:Qj.kBrowserCloseMessageId})}_defaultArgs(e,t,i){let{args:n=[],proxy:s,devtools:o,headless:l}=e;if(o&&console.warn("devtools parameter as a launch argument in WebKit is not supported. Also starting Web Inspector manually will terminate the execution in WebKit."),n.find(h=>h.startsWith("--user-data-dir")))throw new Error("Pass userDataDir parameter to `browserType.launchPersistentContext(userDataDir, ...)` instead of specifying --user-data-dir argument");if(n.find(h=>!h.startsWith("-")))throw new Error("Arguments can not specify page to be opened");let d=["--inspector-pipe"];return l&&d.push("--headless"),t?d.push(`--user-data-dir=${i}`):d.push("--no-startup-window"),s&&(process.platform==="darwin"?(d.push(`--proxy=${s.server}`),s.bypass&&d.push(`--proxy-bypass-list=${s.bypass}`)):process.platform==="linux"?(d.push(`--proxy=${s.server}`),s.bypass&&d.push(...s.bypass.split(",").map(h=>`--ignore-host=${h}`))):process.platform==="win32"&&(d.push(`--curl-proxy=${s.server}`),s.bypass&&d.push(`--curl-noproxy=${s.bypass}`))),d.push(...n),t&&d.push("about:blank"),d}};ah.WebKit=DT});var tc=v(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});bc.createPlaywright=uW;bc.Playwright=void 0;var rW=b_(),iW=Ok(),nW=Kk(),sW=A_(),oW=$O(),aW=j_(),cW=LT(),qT=nt(),lW=Xe(),pg=class extends qT.SdkObject{constructor(e,t){super({attribution:{isInternal:t},instrumentation:(0,qT.createInstrumentation)()},void 0,"Playwright");this.selectors=void 0,this.chromium=void 0,this.android=void 0,this.electron=void 0,this.firefox=void 0,this.webkit=void 0,this.options=void 0,this.instrumentation.addListener({onCallLog:(i,n,s,o)=>{lW.debugLogger.log(i,n)}}),this.options={rootSdkObject:this,selectors:new aW.Selectors,sdkLanguage:e},this.chromium=new nW.Chromium(this.options),this.firefox=new oW.Firefox(this.options),this.webkit=new cW.WebKit(this.options),this.electron=new sW.Electron(this.options),this.android=new rW.Android(new iW.AdbBackend,this.options),this.selectors=this.options.selectors}};bc.Playwright=pg;function uW(r,e=!1){return new pg(r,e)}});var jT=v(lh=>{"use strict";Object.defineProperty(lh,"__esModule",{value:!0});lh.SocksConnection=void 0;var dW=hW(x("net")),ch=G();function hW(r){return r&&r.__esModule?r:{default:r}}var fg;(function(r){r[r.NO_AUTHENTICATION_REQUIRED=0]="NO_AUTHENTICATION_REQUIRED",r[r.GSSAPI=1]="GSSAPI",r[r.USERNAME_PASSWORD=2]="USERNAME_PASSWORD",r[r.NO_ACCEPTABLE_METHODS=255]="NO_ACCEPTABLE_METHODS"})(fg||(fg={}));var xc;(function(r){r[r.IPv4=1]="IPv4",r[r.FqName=3]="FqName",r[r.IPv6=4]="IPv6"})(xc||(xc={}));var mg;(function(r){r[r.CONNECT=1]="CONNECT",r[r.BIND=2]="BIND",r[r.UDP_ASSOCIATE=3]="UDP_ASSOCIATE"})(mg||(mg={}));var Gn;(function(r){r[r.Succeeded=0]="Succeeded",r[r.GeneralServerFailure=1]="GeneralServerFailure",r[r.NotAllowedByRuleSet=2]="NotAllowedByRuleSet",r[r.NetworkUnreachable=3]="NetworkUnreachable",r[r.HostUnreachable=4]="HostUnreachable",r[r.ConnectionRefused=5]="ConnectionRefused",r[r.TtlExpired=6]="TtlExpired",r[r.CommandNotSupported=7]="CommandNotSupported",r[r.AddressTypeNotSupported=8]="AddressTypeNotSupported"})(Gn||(Gn={}));var BT=class{constructor(e,t,i){this._buffer=Buffer.from([]),this._offset=0,this._fence=0,this._fenceCallback=void 0,this._socket=void 0,this._boundOnData=void 0,this._uid=void 0,this._client=void 0,this._uid=e,this._socket=t,this._client=i,this._boundOnData=this._onData.bind(this),t.on("data",this._boundOnData),t.on("close",()=>this._onClose()),t.on("end",()=>this._onClose()),t.on("error",()=>this._onClose()),this._run().catch(()=>this._socket.end())}_run(){return c(this,null,function*(){(0,ch.assert)(yield this._authenticate());let{command:e,host:t,port:i}=yield this._parseRequest();if(e!==mg.CONNECT){this._writeBytes(Buffer.from([5,Gn.CommandNotSupported,0,1,0,0,0,0,0,0]));return}this._socket.off("data",this._boundOnData),this._client.onSocketRequested(this._uid,t,i)})}_authenticate(){return c(this,null,function*(){let e=yield this._readByte();(0,ch.assert)(e===5,"The VER field must be set to x05 for this version of the protocol, was "+e);let t=yield this._readByte();(0,ch.assert)(t,"No authentication methods specified");let i=yield this._readBytes(t);for(let n of i)if(n===0)return this._writeBytes(Buffer.from([e,n])),!0;return this._writeBytes(Buffer.from([e,fg.NO_ACCEPTABLE_METHODS])),!1})}_parseRequest(){return c(this,null,function*(){let e=yield this._readByte();(0,ch.assert)(e===5,"The VER field must be set to x05 for this version of the protocol, was "+e);let t=yield this._readByte();yield this._readByte();let i=yield this._readByte(),n="";switch(i){case xc.IPv4:n=(yield this._readBytes(4)).join(".");break;case xc.FqName:let o=yield this._readByte();n=(yield this._readBytes(o)).toString();break;case xc.IPv6:let l=yield this._readBytes(16),u=[];for(let d=0;d<8;++d)u.push(l.readUInt16BE(d*2));n=u.join(":");break}let s=(yield this._readBytes(2)).readUInt16BE(0);return this._buffer=Buffer.from([]),this._offset=0,this._fence=0,{command:t,host:n,port:s}})}_readByte(){return c(this,null,function*(){return(yield this._readBytes(1))[0]})}_readBytes(e){return c(this,null,function*(){return this._fence=this._offset+e,(!this._buffer||this._buffer.length<this._fence)&&(yield new Promise(t=>this._fenceCallback=t)),this._offset+=e,this._buffer.slice(this._offset-e,this._offset)})}_writeBytes(e){this._socket.writable&&this._socket.write(e)}_onClose(){this._client.onSocketClosed(this._uid)}_onData(e){if(this._buffer=Buffer.concat([this._buffer,e]),this._fenceCallback&&this._buffer.length>=this._fence){let t=this._fenceCallback;this._fenceCallback=void 0,t()}}socketConnected(e,t){this._writeBytes(Buffer.from([5,Gn.Succeeded,0,1,...HT(e),t<<8,t&255])),this._socket.on("data",i=>this._client.onSocketData(this._uid,i))}socketFailed(e){let t=Buffer.from([5,0,0,1,...HT("0.0.0.0"),0,0]);switch(e){case"ENOENT":case"ENOTFOUND":case"ETIMEDOUT":case"EHOSTUNREACH":t[1]=Gn.HostUnreachable;break;case"ENETUNREACH":t[1]=Gn.NetworkUnreachable;break;case"ECONNREFUSED":t[1]=Gn.ConnectionRefused;break}this._writeBytes(t),this._socket.end()}sendData(e){this._socket.write(e)}end(){this._socket.end()}error(e){this._socket.destroy(new Error(e))}};lh.SocksConnection=BT;function HT(r){if(!dW.default.isIPv4(r))throw new Error("IPv6 is not supported");return r.split(".",4).map(e=>+e)}});var Sc=v(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn.parseArgument=wg;Kn.parseValue=fW;Kn.serializeResult=vg;Kn.JSHandleDispatcher=void 0;var pW=Je(),_g=Ao(),gg=li(),WT=class extends pW.Dispatcher{constructor(e,t){super(e,t,t.asElement()?"ElementHandle":"JSHandle",{preview:t.toString()});t._setPreviewCallback(i=>this._dispatchEvent("previewUpdated",{preview:i}))}evaluateExpression(e){return c(this,null,function*(){return{value:vg(yield this._object.evaluateExpressionAndWaitForSignals(e.expression,e.isFunction,!0,wg(e.arg)))}})}evaluateExpressionHandle(e){return c(this,null,function*(){let t=yield this._object.evaluateExpressionAndWaitForSignals(e.expression,e.isFunction,!1,wg(e.arg));return{handle:_g.ElementHandleDispatcher.fromJSHandle(this._scope,t)}})}getProperty(e){return c(this,null,function*(){let t=yield this._object.getProperty(e.name);return{handle:_g.ElementHandleDispatcher.fromJSHandle(this._scope,t)}})}getPropertyList(){return c(this,null,function*(){let e=yield this._object.getProperties(),t=[];for(let[i,n]of e)t.push({name:i,value:_g.ElementHandleDispatcher.fromJSHandle(this._scope,n)});return{properties:t}})}jsonValue(){return c(this,null,function*(){return{value:vg(yield this._object.jsonValue())}})}dispose(){return c(this,null,function*(){yield this._object.dispose()})}};Kn.JSHandleDispatcher=WT;function wg(r){return(0,gg.parseSerializedValue)(r.value,r.handles.map(e=>e._object))}function fW(r){return(0,gg.parseSerializedValue)(r,[])}function vg(r){return(0,gg.serializeValue)(r,e=>({fallThrough:e}),new Set)}});var Ao=v(uh=>{"use strict";Object.defineProperty(uh,"__esModule",{value:!0});uh.ElementHandleDispatcher=void 0;var Ec=Je(),Jn=Sc(),ii=class extends Jn.JSHandleDispatcher{static from(e,t){return(0,Ec.existingDispatcher)(t)||new ii(e,t)}static fromNullable(e,t){if(!!t)return(0,Ec.existingDispatcher)(t)||new ii(e,t)}static fromJSHandle(e,t){let i=(0,Ec.existingDispatcher)(t);return i||(t.asElement()?new ii(e,t.asElement()):new Jn.JSHandleDispatcher(e,t))}constructor(e,t){super(e,t);this._elementHandle=void 0,this._elementHandle=t}ownerFrame(e,t){return c(this,null,function*(){return{frame:(0,Ec.lookupNullableDispatcher)(yield this._elementHandle.ownerFrame())}})}contentFrame(e,t){return c(this,null,function*(){return{frame:(0,Ec.lookupNullableDispatcher)(yield this._elementHandle.contentFrame())}})}getAttribute(e,t){return c(this,null,function*(){let i=yield this._elementHandle.getAttribute(e.name);return{value:i===null?void 0:i}})}inputValue(e,t){return c(this,null,function*(){return{value:yield this._elementHandle.inputValue()}})}textContent(e,t){return c(this,null,function*(){let i=yield this._elementHandle.textContent();return{value:i===null?void 0:i}})}innerText(e,t){return c(this,null,function*(){return{value:yield this._elementHandle.innerText()}})}innerHTML(e,t){return c(this,null,function*(){return{value:yield this._elementHandle.innerHTML()}})}isChecked(e,t){return c(this,null,function*(){return{value:yield this._elementHandle.isChecked()}})}isDisabled(e,t){return c(this,null,function*(){return{value:yield this._elementHandle.isDisabled()}})}isEditable(e,t){return c(this,null,function*(){return{value:yield this._elementHandle.isEditable()}})}isEnabled(e,t){return c(this,null,function*(){return{value:yield this._elementHandle.isEnabled()}})}isHidden(e,t){return c(this,null,function*(){return{value:yield this._elementHandle.isHidden()}})}isVisible(e,t){return c(this,null,function*(){return{value:yield this._elementHandle.isVisible()}})}dispatchEvent(e,t){return c(this,null,function*(){yield this._elementHandle.dispatchEvent(e.type,(0,Jn.parseArgument)(e.eventInit))})}scrollIntoViewIfNeeded(e,t){return c(this,null,function*(){yield this._elementHandle.scrollIntoViewIfNeeded(t,e)})}hover(e,t){return c(this,null,function*(){return yield this._elementHandle.hover(t,e)})}click(e,t){return c(this,null,function*(){return yield this._elementHandle.click(t,e)})}dblclick(e,t){return c(this,null,function*(){return yield this._elementHandle.dblclick(t,e)})}tap(e,t){return c(this,null,function*(){return yield this._elementHandle.tap(t,e)})}selectOption(e,t){return c(this,null,function*(){let i=(e.elements||[]).map(n=>n._elementHandle);return{values:yield this._elementHandle.selectOption(t,i,e.options||[],e)}})}fill(e,t){return c(this,null,function*(){return yield this._elementHandle.fill(t,e.value,e)})}selectText(e,t){return c(this,null,function*(){yield this._elementHandle.selectText(t,e)})}setInputFiles(e,t){return c(this,null,function*(){return yield this._elementHandle.setInputFiles(t,e.files,e)})}focus(e,t){return c(this,null,function*(){yield this._elementHandle.focus(t)})}type(e,t){return c(this,null,function*(){return yield this._elementHandle.type(t,e.text,e)})}press(e,t){return c(this,null,function*(){return yield this._elementHandle.press(t,e.key,e)})}check(e,t){return c(this,null,function*(){return yield this._elementHandle.check(t,e)})}uncheck(e,t){return c(this,null,function*(){return yield this._elementHandle.uncheck(t,e)})}boundingBox(e,t){return c(this,null,function*(){return{value:(yield this._elementHandle.boundingBox())||void 0}})}screenshot(e,t){return c(this,null,function*(){return{binary:(yield this._elementHandle.screenshot(t,e)).toString("base64")}})}querySelector(e,t){return c(this,null,function*(){let i=yield this._elementHandle.querySelector(e.selector,e);return{element:ii.fromNullable(this._scope,i)}})}querySelectorAll(e,t){return c(this,null,function*(){return{elements:(yield this._elementHandle.querySelectorAll(e.selector)).map(n=>ii.from(this._scope,n))}})}evalOnSelector(e,t){return c(this,null,function*(){return{value:(0,Jn.serializeResult)(yield this._elementHandle.evalOnSelectorAndWaitForSignals(e.selector,!!e.strict,e.expression,e.isFunction,(0,Jn.parseArgument)(e.arg)))}})}evalOnSelectorAll(e,t){return c(this,null,function*(){return{value:(0,Jn.serializeResult)(yield this._elementHandle.evalOnSelectorAllAndWaitForSignals(e.selector,e.expression,e.isFunction,(0,Jn.parseArgument)(e.arg)))}})}waitForElementState(e,t){return c(this,null,function*(){yield this._elementHandle.waitForElementState(t,e.state,e)})}waitForSelector(e,t){return c(this,null,function*(){return{element:ii.fromNullable(this._scope,yield this._elementHandle.waitForSelector(t,e.selector,e))}})}};uh.ElementHandleDispatcher=ii});var $T=v(dh=>{"use strict";Object.defineProperty(dh,"__esModule",{value:!0});dh.ConsoleMessageDispatcher=void 0;var mW=Je(),_W=Ao(),UT=class extends mW.Dispatcher{constructor(e,t){super(e,t,"ConsoleMessage",{type:t.type(),text:t.text(),args:t.args().map(i=>_W.ElementHandleDispatcher.fromJSHandle(e,i)),location:t.location()})}};dh.ConsoleMessageDispatcher=UT});var VT=v(hh=>{"use strict";Object.defineProperty(hh,"__esModule",{value:!0});hh.DialogDispatcher=void 0;var gW=Je(),zT=class extends gW.Dispatcher{constructor(e,t){super(e,t,"Dialog",{type:t.type(),message:t.message(),defaultValue:t.defaultValue()})}accept(e){return c(this,null,function*(){yield this._object.accept(e.promptText)})}dismiss(){return c(this,null,function*(){yield this._object.dismiss()})}};hh.DialogDispatcher=zT});var Oc=v(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.FetchRequestDispatcher=or.WebSocketDispatcher=or.RouteDispatcher=or.ResponseDispatcher=or.RequestDispatcher=void 0;var wW=Ca(),ph=jt(),Dr=Je(),vW=yg(),ni=class extends Dr.Dispatcher{static from(e,t){return(0,Dr.existingDispatcher)(t)||new ni(e,t)}static fromNullable(e,t){return t?ni.from(e,t):void 0}constructor(e,t){let i=t.postDataBuffer();super(e,t,"Request",{frame:vW.FrameDispatcher.from(e,t.frame()),url:t.url(),resourceType:t.resourceType(),method:t.method(),postData:i===null?void 0:i.toString("base64"),headers:t.headers(),isNavigationRequest:t.isNavigationRequest(),redirectedFrom:ni.fromNullable(e,t.redirectedFrom())})}rawRequestHeaders(e){return c(this,null,function*(){return{headers:yield this._object.rawRequestHeaders()}})}response(){return c(this,null,function*(){return{response:(0,Dr.lookupNullableDispatcher)(yield this._object.response())}})}};or.RequestDispatcher=ni;var Cc=class extends Dr.Dispatcher{static from(e,t){return(0,Dr.existingDispatcher)(t)||new Cc(e,t)}static fromNullable(e,t){return t?Cc.from(e,t):void 0}constructor(e,t){super(e,t,"Response",{request:ni.from(e,t.request()),url:t.url(),status:t.status(),statusText:t.statusText(),headers:t.headers(),timing:t.timing()})}body(){return c(this,null,function*(){return{binary:(yield this._object.body()).toString("base64")}})}securityDetails(){return c(this,null,function*(){return{value:(yield this._object.securityDetails())||void 0}})}serverAddr(){return c(this,null,function*(){return{value:(yield this._object.serverAddr())||void 0}})}rawResponseHeaders(e){return c(this,null,function*(){return{headers:yield this._object.rawResponseHeaders()}})}sizes(e){return c(this,null,function*(){return{sizes:yield this._object.sizes()}})}};or.ResponseDispatcher=Cc;var fh=class extends Dr.Dispatcher{static from(e,t){return(0,Dr.existingDispatcher)(t)||new fh(e,t)}constructor(e,t){super(e,t,"Route",{request:ni.from(e,t.request())})}responseBody(e){return c(this,null,function*(){return{binary:(yield this._object.responseBody()).toString("base64")}})}continue(e,t){return c(this,null,function*(){let i=yield this._object.continue({url:e.url,method:e.method,headers:e.headers,postData:e.postData?Buffer.from(e.postData,"base64"):void 0,interceptResponse:e.interceptResponse}),n={};return i&&(n.response={request:ni.from(this._scope,i.request()),status:i.status(),statusText:i.statusText(),headers:i.headers()}),n})}fulfill(e){return c(this,null,function*(){yield this._object.fulfill(e)})}abort(e){return c(this,null,function*(){yield this._object.abort(e.errorCode||"failed")})}};or.RouteDispatcher=fh;var GT=class extends Dr.Dispatcher{constructor(e,t){super(e,t,"WebSocket",{url:t.url()});t.on(ph.WebSocket.Events.FrameSent,i=>this._dispatchEvent("frameSent",i)),t.on(ph.WebSocket.Events.FrameReceived,i=>this._dispatchEvent("frameReceived",i)),t.on(ph.WebSocket.Events.SocketError,i=>this._dispatchEvent("socketError",{error:i})),t.on(ph.WebSocket.Events.Close,()=>this._dispatchEvent("close",{}))}};or.WebSocketDispatcher=GT;var kc=class extends Dr.Dispatcher{static from(e,t){return(0,Dr.existingDispatcher)(t)||new kc(e,t)}static fromNullable(e,t){return t?kc.from(e,t):void 0}constructor(e,t){super(e,t,"FetchRequest",{},!0);t.once(wW.FetchRequest.Events.Dispose,()=>{this._disposed||super._dispose()})}storageState(e){return c(this,null,function*(){return this._object.storageState()})}dispose(e){return c(this,null,function*(){this._object.dispose()})}fetch(e,t){return c(this,null,function*(){let{fetchResponse:i,error:n}=yield this._object.fetch(e),s;return i&&(s={url:i.url,status:i.status,statusText:i.statusText,headers:i.headers,fetchUid:i.fetchUid}),{response:s,error:n}})}fetchResponseBody(e,t){return c(this,null,function*(){let i=this._object.fetchResponses.get(e.fetchUid);return{binary:i?i.toString("base64"):void 0}})}disposeFetchResponse(e,t){return c(this,null,function*(){this._object.fetchResponses.delete(e.fetchUid)})}};or.FetchRequestDispatcher=kc});var yg=v(mh=>{"use strict";Object.defineProperty(mh,"__esModule",{value:!0});mh.FrameDispatcher=void 0;var bg=Aa(),xg=Je(),Ji=Ao(),wr=Sc(),yW=Oc(),Io=class extends xg.Dispatcher{static from(e,t){return(0,xg.existingDispatcher)(t)||new Io(e,t)}static fromNullable(e,t){if(!!t)return Io.from(e,t)}constructor(e,t){super(e,t,"Frame",{url:t.url(),name:t.name(),parentFrame:Io.fromNullable(e,t.parentFrame()),loadStates:Array.from(t._subtreeLifecycleEvents)});this._frame=void 0,this._frame=t,t.on(bg.Frame.Events.AddLifecycle,i=>{this._dispatchEvent("loadstate",{add:i})}),t.on(bg.Frame.Events.RemoveLifecycle,i=>{this._dispatchEvent("loadstate",{remove:i})}),t.on(bg.Frame.Events.Navigation,i=>{let n={url:i.url,name:i.name,error:i.error?i.error.message:void 0};i.newDocument&&(n.newDocument={request:yW.RequestDispatcher.fromNullable(this._scope,i.newDocument.request||null)}),this._dispatchEvent("navigated",n)})}goto(e,t){return c(this,null,function*(){return{response:(0,xg.lookupNullableDispatcher)(yield this._frame.goto(t,e.url,e))}})}frameElement(){return c(this,null,function*(){return{element:Ji.ElementHandleDispatcher.from(this._scope,yield this._frame.frameElement())}})}evaluateExpression(e,t){return c(this,null,function*(){return{value:(0,wr.serializeResult)(yield this._frame.evaluateExpressionAndWaitForSignals(e.expression,e.isFunction,(0,wr.parseArgument)(e.arg),"main"))}})}evaluateExpressionHandle(e,t){return c(this,null,function*(){return{handle:Ji.ElementHandleDispatcher.fromJSHandle(this._scope,yield this._frame.evaluateExpressionHandleAndWaitForSignals(e.expression,e.isFunction,(0,wr.parseArgument)(e.arg),"main"))}})}waitForSelector(e,t){return c(this,null,function*(){return{element:Ji.ElementHandleDispatcher.fromNullable(this._scope,yield this._frame.waitForSelector(t,e.selector,e))}})}dispatchEvent(e,t){return c(this,null,function*(){return this._frame.dispatchEvent(t,e.selector,e.type,(0,wr.parseArgument)(e.eventInit),e)})}evalOnSelector(e,t){return c(this,null,function*(){return{value:(0,wr.serializeResult)(yield this._frame.evalOnSelectorAndWaitForSignals(e.selector,!!e.strict,e.expression,e.isFunction,(0,wr.parseArgument)(e.arg)))}})}evalOnSelectorAll(e,t){return c(this,null,function*(){return{value:(0,wr.serializeResult)(yield this._frame.evalOnSelectorAllAndWaitForSignals(e.selector,e.expression,e.isFunction,(0,wr.parseArgument)(e.arg)))}})}querySelector(e,t){return c(this,null,function*(){return{element:Ji.ElementHandleDispatcher.fromNullable(this._scope,yield this._frame.querySelector(e.selector,e))}})}querySelectorAll(e,t){return c(this,null,function*(){return{elements:(yield this._frame.querySelectorAll(e.selector)).map(n=>Ji.ElementHandleDispatcher.from(this._scope,n))}})}content(){return c(this,null,function*(){return{value:yield this._frame.content()}})}setContent(e,t){return c(this,null,function*(){return yield this._frame.setContent(t,e.html,e)})}addScriptTag(e,t){return c(this,null,function*(){return{element:Ji.ElementHandleDispatcher.from(this._scope,yield this._frame.addScriptTag(e))}})}addStyleTag(e,t){return c(this,null,function*(){return{element:Ji.ElementHandleDispatcher.from(this._scope,yield this._frame.addStyleTag(e))}})}click(e,t){return c(this,null,function*(){return yield this._frame.click(t,e.selector,e)})}dblclick(e,t){return c(this,null,function*(){return yield this._frame.dblclick(t,e.selector,e)})}dragAndDrop(e,t){return c(this,null,function*(){return yield this._frame.dragAndDrop(t,e.source,e.target,e)})}tap(e,t){return c(this,null,function*(){return yield this._frame.tap(t,e.selector,e)})}fill(e,t){return c(this,null,function*(){return yield this._frame.fill(t,e.selector,e.value,e)})}focus(e,t){return c(this,null,function*(){yield this._frame.focus(t,e.selector,e)})}textContent(e,t){return c(this,null,function*(){let i=yield this._frame.textContent(t,e.selector,e);return{value:i===null?void 0:i}})}innerText(e,t){return c(this,null,function*(){return{value:yield this._frame.innerText(t,e.selector,e)}})}innerHTML(e,t){return c(this,null,function*(){return{value:yield this._frame.innerHTML(t,e.selector,e)}})}getAttribute(e,t){return c(this,null,function*(){let i=yield this._frame.getAttribute(t,e.selector,e.name,e);return{value:i===null?void 0:i}})}inputValue(e,t){return c(this,null,function*(){return{value:yield this._frame.inputValue(t,e.selector,e)}})}isChecked(e,t){return c(this,null,function*(){return{value:yield this._frame.isChecked(t,e.selector,e)}})}isDisabled(e,t){return c(this,null,function*(){return{value:yield this._frame.isDisabled(t,e.selector,e)}})}isEditable(e,t){return c(this,null,function*(){return{value:yield this._frame.isEditable(t,e.selector,e)}})}isEnabled(e,t){return c(this,null,function*(){return{value:yield this._frame.isEnabled(t,e.selector,e)}})}isHidden(e,t){return c(this,null,function*(){return{value:yield this._frame.isHidden(t,e.selector,e)}})}isVisible(e,t){return c(this,null,function*(){return{value:yield this._frame.isVisible(t,e.selector,e)}})}hover(e,t){return c(this,null,function*(){return yield this._frame.hover(t,e.selector,e)})}selectOption(e,t){return c(this,null,function*(){let i=(e.elements||[]).map(n=>n._elementHandle);return{values:yield this._frame.selectOption(t,e.selector,i,e.options||[],e)}})}setInputFiles(e,t){return c(this,null,function*(){return yield this._frame.setInputFiles(t,e.selector,e.files,e)})}type(e,t){return c(this,null,function*(){return yield this._frame.type(t,e.selector,e.text,e)})}press(e,t){return c(this,null,function*(){return yield this._frame.press(t,e.selector,e.key,e)})}check(e,t){return c(this,null,function*(){return yield this._frame.check(t,e.selector,e)})}uncheck(e,t){return c(this,null,function*(){return yield this._frame.uncheck(t,e.selector,e)})}waitForTimeout(e,t){return c(this,null,function*(){return yield this._frame.waitForTimeout(t,e.timeout)})}waitForFunction(e,t){return c(this,null,function*(){return{handle:Ji.ElementHandleDispatcher.fromJSHandle(this._scope,yield this._frame._waitForFunctionExpression(t,e.expression,e.isFunction,(0,wr.parseArgument)(e.arg),e))}})}title(e,t){return c(this,null,function*(){return{value:yield this._frame.title()}})}expect(e,t){return c(this,null,function*(){let i=e.expectedValue?(0,wr.parseArgument)(e.expectedValue):void 0,n=yield this._frame.expect(t,e.selector,R(y({},e),{expectedValue:i}));return n.received!==void 0&&(n.received=(0,wr.serializeResult)(n.received)),n.matches===e.isNot&&(t.error={error:{name:"Expect",message:"Expect failed"}}),n})}};mh.FrameDispatcher=Io});var JT=v(_h=>{"use strict";Object.defineProperty(_h,"__esModule",{value:!0});_h.StreamDispatcher=void 0;var bW=Je(),xW=G(),KT=class extends bW.Dispatcher{constructor(e,t){super(e,{guid:"stream@"+(0,xW.createGuid)(),stream:t},"Stream",{});this._ended=!1,t.once("end",()=>this._ended=!0),t.once("error",()=>this._ended=!0)}read(e){return c(this,null,function*(){let t=this._object.stream;if(this._ended)return{binary:""};t.readableLength||(yield new Promise((n,s)=>{t.once("readable",n),t.once("end",n),t.once("error",s)}));let i=t.read(Math.min(t.readableLength,e.size||t.readableLength));return{binary:i?i.toString("base64"):""}})}close(){return c(this,null,function*(){this._object.stream.destroy()})}};_h.StreamDispatcher=KT});var Eg=v(gh=>{"use strict";Object.defineProperty(gh,"__esModule",{value:!0});gh.ArtifactDispatcher=void 0;var SW=Je(),XT=JT(),Sg=CW(x("fs")),EW=G();function CW(r){return r&&r.__esModule?r:{default:r}}var YT=class extends SW.Dispatcher{constructor(e,t){super(e,t,"Artifact",{absolutePath:t.localPath()})}pathAfterFinished(){return c(this,null,function*(){return{value:(yield this._object.localPathAfterFinished())||void 0}})}saveAs(e){return c(this,null,function*(){return yield new Promise((t,i)=>{this._object.saveAs((n,s)=>c(this,null,function*(){if(s!==void 0){i(new Error(s));return}try{yield(0,EW.mkdirIfNeeded)(e.path),yield Sg.default.promises.copyFile(n,e.path),t()}catch(o){i(o)}}))})})}saveAsStream(){return c(this,null,function*(){return yield new Promise((e,t)=>{this._object.saveAs((i,n)=>c(this,null,function*(){if(n!==void 0){t(new Error(n));return}try{let s=Sg.default.createReadStream(i),o=new XT.StreamDispatcher(this._scope,s);e({stream:o}),yield new Promise(l=>{s.on("close",l),s.on("end",l),s.on("error",l)})}catch(s){t(s)}}))})})}stream(){return c(this,null,function*(){let e=yield this._object.localPathAfterFinished();if(!e)return{};let t=Sg.default.createReadStream(e);return{stream:new XT.StreamDispatcher(this._scope,t)}})}failure(){return c(this,null,function*(){return{error:(yield this._object.failureError())||void 0}})}cancel(){return c(this,null,function*(){yield this._object.cancel()})}delete(){return c(this,null,function*(){yield this._object.delete(),this._dispose()})}};gh.ArtifactDispatcher=YT});var e1=v(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});Xi.BindingCallDispatcher=Xi.WorkerDispatcher=Xi.PageDispatcher=void 0;var Dt=Ot(),vr=Je(),ZT=li(),kW=$T(),OW=VT(),QT=yg(),Cg=Oc(),Pc=Sc(),kg=Ao(),PW=Eg(),TW=G(),Tc=class extends vr.Dispatcher{static fromNullable(e,t){return t?(0,vr.existingDispatcher)(t)||new Tc(e,t):void 0}constructor(e,t){super(e,t,"Page",{mainFrame:QT.FrameDispatcher.from(e,t.mainFrame()),viewportSize:t.viewportSize()||void 0,isClosed:t.isClosed(),opener:Tc.fromNullable(e,t.opener())},!0);this._page=void 0,this._page=t,t.on(Dt.Page.Events.Close,()=>{this._dispatchEvent("close"),this._dispose()}),t.on(Dt.Page.Events.Console,n=>this._dispatchEvent("console",{message:new kW.ConsoleMessageDispatcher(this._scope,n)})),t.on(Dt.Page.Events.Crash,()=>this._dispatchEvent("crash")),t.on(Dt.Page.Events.DOMContentLoaded,()=>this._dispatchEvent("domcontentloaded")),t.on(Dt.Page.Events.Dialog,n=>this._dispatchEvent("dialog",{dialog:new OW.DialogDispatcher(this._scope,n)})),t.on(Dt.Page.Events.Download,n=>{this._dispatchEvent("download",{url:n.url,suggestedFilename:n.suggestedFilename(),artifact:new PW.ArtifactDispatcher(e,n.artifact)})}),this._page.on(Dt.Page.Events.FileChooser,n=>this._dispatchEvent("fileChooser",{element:kg.ElementHandleDispatcher.from(this._scope,n.element()),isMultiple:n.isMultiple()})),t.on(Dt.Page.Events.FrameAttached,n=>this._onFrameAttached(n)),t.on(Dt.Page.Events.FrameDetached,n=>this._onFrameDetached(n)),t.on(Dt.Page.Events.Load,()=>this._dispatchEvent("load")),t.on(Dt.Page.Events.PageError,n=>this._dispatchEvent("pageError",{error:(0,ZT.serializeError)(n)})),t.on(Dt.Page.Events.WebSocket,n=>this._dispatchEvent("webSocket",{webSocket:new Cg.WebSocketDispatcher(this._scope,n)})),t.on(Dt.Page.Events.Worker,n=>this._dispatchEvent("worker",{worker:new Og(this._scope,n)})),t.on(Dt.Page.Events.Video,n=>this._dispatchEvent("video",{artifact:(0,vr.existingDispatcher)(n)})),t._video&&this._dispatchEvent("video",{artifact:(0,vr.existingDispatcher)(t._video)});let i=t._frameManager.frames();for(let n=1;n<i.length;n++)this._onFrameAttached(i[n])}page(){return this._page}setDefaultNavigationTimeoutNoReply(e,t){return c(this,null,function*(){this._page.setDefaultNavigationTimeout(e.timeout)})}setDefaultTimeoutNoReply(e,t){return c(this,null,function*(){this._page.setDefaultTimeout(e.timeout)})}exposeBinding(e,t){return c(this,null,function*(){yield this._page.exposeBinding(e.name,!!e.needsHandle,(i,...n)=>{let s=new Pg(this._scope,e.name,!!e.needsHandle,i,n);return this._dispatchEvent("bindingCall",{binding:s}),s.promise()})})}setExtraHTTPHeaders(e,t){return c(this,null,function*(){yield this._page.setExtraHTTPHeaders(e.headers)})}reload(e,t){return c(this,null,function*(){return{response:(0,vr.lookupNullableDispatcher)(yield this._page.reload(t,e))}})}goBack(e,t){return c(this,null,function*(){return{response:(0,vr.lookupNullableDispatcher)(yield this._page.goBack(t,e))}})}goForward(e,t){return c(this,null,function*(){return{response:(0,vr.lookupNullableDispatcher)(yield this._page.goForward(t,e))}})}emulateMedia(e,t){return c(this,null,function*(){yield this._page.emulateMedia({media:e.media==="null"?null:e.media,colorScheme:e.colorScheme==="null"?null:e.colorScheme,reducedMotion:e.reducedMotion==="null"?null:e.reducedMotion,forcedColors:e.forcedColors==="null"?null:e.forcedColors})})}setViewportSize(e,t){return c(this,null,function*(){yield this._page.setViewportSize(e.viewportSize)})}addInitScript(e,t){return c(this,null,function*(){yield this._page._addInitScriptExpression(e.source)})}setNetworkInterceptionEnabled(e,t){return c(this,null,function*(){if(!e.enabled){yield this._page._setClientRequestInterceptor(void 0);return}yield this._page._setClientRequestInterceptor((i,n)=>{this._dispatchEvent("route",{route:Cg.RouteDispatcher.from(this._scope,i),request:Cg.RequestDispatcher.from(this._scope,n)})})})}screenshot(e,t){return c(this,null,function*(){return{binary:(yield this._page.screenshot(t,e)).toString("base64")}})}close(e,t){return c(this,null,function*(){yield this._page.close(t,e)})}setFileChooserInterceptedNoReply(e,t){return c(this,null,function*(){yield this._page._setFileChooserIntercepted(e.intercepted)})}keyboardDown(e,t){return c(this,null,function*(){yield this._page.keyboard.down(e.key)})}keyboardUp(e,t){return c(this,null,function*(){yield this._page.keyboard.up(e.key)})}keyboardInsertText(e,t){return c(this,null,function*(){yield this._page.keyboard.insertText(e.text)})}keyboardType(e,t){return c(this,null,function*(){yield this._page.keyboard.type(e.text,e)})}keyboardPress(e,t){return c(this,null,function*(){yield this._page.keyboard.press(e.key,e)})}mouseMove(e,t){return c(this,null,function*(){yield this._page.mouse.move(e.x,e.y,e)})}mouseDown(e,t){return c(this,null,function*(){yield this._page.mouse.down(e)})}mouseUp(e,t){return c(this,null,function*(){yield this._page.mouse.up(e)})}mouseClick(e,t){return c(this,null,function*(){yield this._page.mouse.click(e.x,e.y,e)})}mouseWheel(e,t){return c(this,null,function*(){yield this._page.mouse.wheel(e.deltaX,e.deltaY)})}touchscreenTap(e,t){return c(this,null,function*(){yield this._page.touchscreen.tap(e.x,e.y)})}accessibilitySnapshot(e,t){return c(this,null,function*(){return{rootAXNode:(yield this._page.accessibility.snapshot({interestingOnly:e.interestingOnly,root:e.root?e.root._elementHandle:void 0}))||void 0}})}pdf(e,t){return c(this,null,function*(){if(!this._page.pdf)throw new Error("PDF generation is only supported for Headless Chromium");return{pdf:(yield this._page.pdf(e)).toString("base64")}})}bringToFront(e,t){return c(this,null,function*(){yield this._page.bringToFront()})}startJSCoverage(e,t){return c(this,null,function*(){yield this._page.coverage.startJSCoverage(e)})}stopJSCoverage(e,t){return c(this,null,function*(){return{entries:yield this._page.coverage.stopJSCoverage()}})}startCSSCoverage(e,t){return c(this,null,function*(){yield this._page.coverage.startCSSCoverage(e)})}stopCSSCoverage(e,t){return c(this,null,function*(){return{entries:yield this._page.coverage.stopCSSCoverage()}})}_onFrameAttached(e){this._dispatchEvent("frameAttached",{frame:QT.FrameDispatcher.from(this._scope,e)})}_onFrameDetached(e){this._dispatchEvent("frameDetached",{frame:(0,vr.lookupDispatcher)(e)})}};Xi.PageDispatcher=Tc;var Og=class extends vr.Dispatcher{constructor(e,t){super(e,t,"Worker",{url:t.url()});t.on(Dt.Worker.Events.Close,()=>this._dispatchEvent("close"))}evaluateExpression(e,t){return c(this,null,function*(){return{value:(0,Pc.serializeResult)(yield this._object.evaluateExpression(e.expression,e.isFunction,(0,Pc.parseArgument)(e.arg)))}})}evaluateExpressionHandle(e,t){return c(this,null,function*(){return{handle:kg.ElementHandleDispatcher.fromJSHandle(this._scope,yield this._object.evaluateExpressionHandle(e.expression,e.isFunction,(0,Pc.parseArgument)(e.arg)))}})}};Xi.WorkerDispatcher=Og;var Pg=class extends vr.Dispatcher{constructor(e,t,i,n,s){super(e,{guid:"bindingCall@"+(0,TW.createGuid)()},"BindingCall",{frame:(0,vr.lookupDispatcher)(n.frame),name:t,args:i?void 0:s.map(Pc.serializeResult),handle:i?kg.ElementHandleDispatcher.fromJSHandle(e,s[0]):void 0});this._resolve=void 0,this._reject=void 0,this._promise=void 0,this._promise=new Promise((o,l)=>{this._resolve=o,this._reject=l})}promise(){return this._promise}resolve(e,t){return c(this,null,function*(){this._resolve((0,Pc.parseArgument)(e.result))})}reject(e,t){return c(this,null,function*(){this._reject((0,ZT.parseError)(e.error))})}};Xi.BindingCallDispatcher=Pg});var vh=v(wh=>{"use strict";Object.defineProperty(wh,"__esModule",{value:!0});wh.CDPSessionDispatcher=void 0;var AW=so(),IW=Je(),t1=class extends IW.Dispatcher{constructor(e,t){super(e,t,"CDPSession",{},!0);t._eventListener=(i,n)=>{this._dispatchEvent("event",{method:i,params:n})},t.on(AW.CRSessionEvents.Disconnected,()=>this._dispose())}send(e){return c(this,null,function*(){return{result:yield this._object.send(e.method,e.params)}})}detach(){return c(this,null,function*(){return this._object.detach()})}};wh.CDPSessionDispatcher=t1});var Mo=v(yh=>{"use strict";Object.defineProperty(yh,"__esModule",{value:!0});yh.BrowserContextDispatcher=void 0;var Xn=gt(),r1=Je(),yr=e1(),Yi=Oc(),i1=po(),MW=vh(),FW=c_(),Tg=Eg(),n1=class extends r1.Dispatcher{constructor(e,t){super(e,t,"BrowserContext",{isChromium:t._browser.options.isChromium,fetchRequest:Yi.FetchRequestDispatcher.from(e,t.fetchRequest)},!0);this._context=void 0,this._context=t;let i=n=>{let s=new Tg.ArtifactDispatcher(e,n);this._dispatchEvent("video",{artifact:s})};t.on(Xn.BrowserContext.Events.VideoStarted,i);for(let n of t._browser._idToVideo.values())n.context===t&&i(n.artifact);for(let n of t.pages())this._dispatchEvent("page",{page:new yr.PageDispatcher(this._scope,n)});if(t.on(Xn.BrowserContext.Events.Page,n=>this._dispatchEvent("page",{page:new yr.PageDispatcher(this._scope,n)})),t.on(Xn.BrowserContext.Events.Close,()=>{this._dispatchEvent("close"),this._dispose()}),t._browser.options.name==="chromium"){for(let n of t.backgroundPages())this._dispatchEvent("backgroundPage",{page:new yr.PageDispatcher(this._scope,n)});t.on(i1.CRBrowserContext.CREvents.BackgroundPage,n=>this._dispatchEvent("backgroundPage",{page:new yr.PageDispatcher(this._scope,n)}));for(let n of t.serviceWorkers())this._dispatchEvent("serviceWorker",{worker:new yr.WorkerDispatcher(this._scope,n)});t.on(i1.CRBrowserContext.CREvents.ServiceWorker,n=>this._dispatchEvent("serviceWorker",{worker:new yr.WorkerDispatcher(this._scope,n)}))}t.on(Xn.BrowserContext.Events.Request,n=>this._dispatchEvent("request",{request:Yi.RequestDispatcher.from(this._scope,n),page:yr.PageDispatcher.fromNullable(this._scope,n.frame()._page.initializedOrUndefined())})),t.on(Xn.BrowserContext.Events.Response,n=>this._dispatchEvent("response",{response:Yi.ResponseDispatcher.from(this._scope,n),page:yr.PageDispatcher.fromNullable(this._scope,n.frame()._page.initializedOrUndefined())})),t.on(Xn.BrowserContext.Events.RequestFailed,n=>this._dispatchEvent("requestFailed",{request:Yi.RequestDispatcher.from(this._scope,n),failureText:n._failureText||void 0,responseEndTiming:n._responseEndTiming,page:yr.PageDispatcher.fromNullable(this._scope,n.frame()._page.initializedOrUndefined())})),t.on(Xn.BrowserContext.Events.RequestFinished,({request:n,response:s})=>this._dispatchEvent("requestFinished",{request:Yi.RequestDispatcher.from(e,n),response:Yi.ResponseDispatcher.fromNullable(e,s),responseEndTiming:n._responseEndTiming,page:yr.PageDispatcher.fromNullable(this._scope,n.frame()._page.initializedOrUndefined())}))}setDefaultNavigationTimeoutNoReply(e){return c(this,null,function*(){this._context.setDefaultNavigationTimeout(e.timeout)})}setDefaultTimeoutNoReply(e){return c(this,null,function*(){this._context.setDefaultTimeout(e.timeout)})}exposeBinding(e){return c(this,null,function*(){yield this._context.exposeBinding(e.name,!!e.needsHandle,(t,...i)=>{let n=new yr.BindingCallDispatcher(this._scope,e.name,!!e.needsHandle,t,i);return this._dispatchEvent("bindingCall",{binding:n}),n.promise()})})}newPage(e,t){return c(this,null,function*(){return{page:(0,r1.lookupDispatcher)(yield this._context.newPage(t))}})}cookies(e){return c(this,null,function*(){return{cookies:yield this._context.cookies(e.urls)}})}addCookies(e){return c(this,null,function*(){yield this._context.addCookies(e.cookies)})}clearCookies(){return c(this,null,function*(){yield this._context.clearCookies()})}grantPermissions(e){return c(this,null,function*(){yield this._context.grantPermissions(e.permissions,e.origin)})}clearPermissions(){return c(this,null,function*(){yield this._context.clearPermissions()})}setGeolocation(e){return c(this,null,function*(){yield this._context.setGeolocation(e.geolocation)})}setExtraHTTPHeaders(e){return c(this,null,function*(){yield this._context.setExtraHTTPHeaders(e.headers)})}setOffline(e){return c(this,null,function*(){yield this._context.setOffline(e.offline)})}setHTTPCredentials(e){return c(this,null,function*(){yield this._context.setHTTPCredentials(e.httpCredentials)})}addInitScript(e){return c(this,null,function*(){yield this._context._doAddInitScript(e.source)})}setNetworkInterceptionEnabled(e){return c(this,null,function*(){if(!e.enabled){yield this._context._setRequestInterceptor(void 0);return}yield this._context._setRequestInterceptor((t,i)=>{this._dispatchEvent("route",{route:Yi.RouteDispatcher.from(this._scope,t),request:Yi.RequestDispatcher.from(this._scope,i)})})})}storageState(e,t){return c(this,null,function*(){return yield this._context.storageState()})}close(e,t){return c(this,null,function*(){yield this._context.close(t)})}recorderSupplementEnable(e){return c(this,null,function*(){yield FW.RecorderSupplement.show(this._context,e)})}pause(e,t){return c(this,null,function*(){})}newCDPSession(e){return c(this,null,function*(){if(!this._object._browser.options.isChromium)throw new Error("CDP session is only available in Chromium");if(!e.page&&!e.frame||e.page&&e.frame)throw new Error("CDP session must be initiated with either Page or Frame, not none or both");let t=this._object;return{session:new MW.CDPSessionDispatcher(this._scope,yield t.newCDPSession((e.page?e.page:e.frame)._object))}})}tracingStart(e){return c(this,null,function*(){yield this._context.tracing.start(e)})}tracingStartChunk(e){return c(this,null,function*(){yield this._context.tracing.startChunk()})}tracingStopChunk(e){return c(this,null,function*(){let t=yield this._context.tracing.stopChunk(e.save);return{artifact:t?new Tg.ArtifactDispatcher(this._scope,t):void 0}})}tracingStop(e){return c(this,null,function*(){yield this._context.tracing.stop()})}harExport(e){return c(this,null,function*(){var t;let i=yield(t=this._context._harRecorder)===null||t===void 0?void 0:t.export();if(!i)throw new Error("No HAR artifact. Ensure record.harPath is set.");return{artifact:new Tg.ArtifactDispatcher(this._scope,i)}})}};yh.BrowserContextDispatcher=n1});var c1=v(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});Zi.AndroidSocketDispatcher=Zi.AndroidDeviceDispatcher=Zi.AndroidDispatcher=void 0;var bh=Je(),s1=b_(),o1=Mo(),a1=class extends bh.Dispatcher{constructor(e,t){super(e,t,"Android",{},!0)}devices(e){return c(this,null,function*(){return{devices:(yield this._object.devices()).map(i=>Ac.from(this._scope,i))}})}setDefaultTimeoutNoReply(e){return c(this,null,function*(){this._object.setDefaultTimeout(e.timeout)})}};Zi.AndroidDispatcher=a1;var Ac=class extends bh.Dispatcher{static from(e,t){return(0,bh.existingDispatcher)(t)||new Ac(e,t)}constructor(e,t){super(e,t,"AndroidDevice",{model:t.model,serial:t.serial},!0);for(let i of t.webViews())this._dispatchEvent("webViewAdded",{webView:i});t.on(s1.AndroidDevice.Events.WebViewAdded,i=>this._dispatchEvent("webViewAdded",{webView:i})),t.on(s1.AndroidDevice.Events.WebViewRemoved,i=>this._dispatchEvent("webViewRemoved",{pid:i}))}wait(e){return c(this,null,function*(){yield this._object.send("wait",e)})}fill(e){return c(this,null,function*(){yield this._object.send("click",{selector:e.selector}),yield this._object.send("fill",e)})}tap(e){return c(this,null,function*(){yield this._object.send("click",e)})}drag(e){return c(this,null,function*(){yield this._object.send("drag",e)})}fling(e){return c(this,null,function*(){yield this._object.send("fling",e)})}longTap(e){return c(this,null,function*(){yield this._object.send("longClick",e)})}pinchClose(e){return c(this,null,function*(){yield this._object.send("pinchClose",e)})}pinchOpen(e){return c(this,null,function*(){yield this._object.send("pinchOpen",e)})}scroll(e){return c(this,null,function*(){yield this._object.send("scroll",e)})}swipe(e){return c(this,null,function*(){yield this._object.send("swipe",e)})}info(e){return c(this,null,function*(){return{info:yield this._object.send("info",e)}})}inputType(e){return c(this,null,function*(){let t=e.text,i=[];for(let n=0;n<t.length;++n){let s=Ig.get(t[n].toUpperCase());if(s===void 0)throw new Error("No mapping for "+t[n]+" found");i.push(s)}yield Promise.all(i.map(n=>this._object.send("inputPress",{keyCode:n})))})}inputPress(e){return c(this,null,function*(){if(!Ig.has(e.key))throw new Error("Unknown key: "+e.key);yield this._object.send("inputPress",{keyCode:Ig.get(e.key)})})}inputTap(e){return c(this,null,function*(){yield this._object.send("inputClick",e)})}inputSwipe(e){return c(this,null,function*(){yield this._object.send("inputSwipe",e)})}inputDrag(e){return c(this,null,function*(){yield this._object.send("inputDrag",e)})}screenshot(e){return c(this,null,function*(){return{binary:(yield this._object.screenshot()).toString("base64")}})}shell(e){return c(this,null,function*(){return{result:(yield this._object.shell(e.command)).toString("base64")}})}open(e,t){return c(this,null,function*(){let i=yield this._object.open(e.command);return{socket:new Ag(this._scope,i)}})}installApk(e){return c(this,null,function*(){yield this._object.installApk(Buffer.from(e.file,"base64"),{args:e.args})})}push(e){return c(this,null,function*(){yield this._object.push(Buffer.from(e.file,"base64"),e.path,e.mode)})}launchBrowser(e){return c(this,null,function*(){let t=yield this._object.launchBrowser(e.pkg,e);return{context:new o1.BrowserContextDispatcher(this._scope,t)}})}close(e){return c(this,null,function*(){yield this._object.close()})}setDefaultTimeoutNoReply(e){return c(this,null,function*(){this._object.setDefaultTimeout(e.timeout)})}connectToWebView(e){return c(this,null,function*(){return{context:new o1.BrowserContextDispatcher(this._scope,yield this._object.connectToWebView(e.pid))}})}};Zi.AndroidDeviceDispatcher=Ac;var Ag=class extends bh.Dispatcher{constructor(e,t){super(e,t,"AndroidSocket",{},!0);t.on("data",i=>this._dispatchEvent("data",{data:i.toString("base64")})),t.on("close",()=>{this._dispatchEvent("close"),this._dispose()})}write(e,t){return c(this,null,function*(){yield this._object.write(Buffer.from(e.data,"base64"))})}close(e,t){return c(this,null,function*(){this._object.close()})}};Zi.AndroidSocketDispatcher=Ag;var Ig=new Map([["Unknown",0],["SoftLeft",1],["SoftRight",2],["Home",3],["Back",4],["Call",5],["EndCall",6],["0",7],["1",8],["2",9],["3",10],["4",11],["5",12],["6",13],["7",14],["8",15],["9",16],["Star",17],["*",17],["Pound",18],["#",18],["DialUp",19],["DialDown",20],["DialLeft",21],["DialRight",22],["DialCenter",23],["VolumeUp",24],["VolumeDown",25],["Power",26],["Camera",27],["Clear",28],["A",29],["B",30],["C",31],["D",32],["E",33],["F",34],["G",35],["H",36],["I",37],["J",38],["K",39],["L",40],["M",41],["N",42],["O",43],["P",44],["Q",45],["R",46],["S",47],["T",48],["U",49],["V",50],["W",51],["X",52],["Y",53],["Z",54],["Comma",55],[",",55],["Period",56],[".",56],["AltLeft",57],["AltRight",58],["ShiftLeft",59],["ShiftRight",60],["Tab",61],["	",61],["Space",62],[" ",62],["Sym",63],["Explorer",64],["Envelop",65],["Enter",66],["Del",67],["Grave",68],["Minus",69],["-",69],["Equals",70],["=",70],["LeftBracket",71],["(",71],["RightBracket",72],[")",72],["Backslash",73],["\\",73],["Semicolon",74],[";",74],["Apostrophe",75],["`",75],["Slash",76],["/",76],["At",77],["@",77],["Num",78],["HeadsetHook",79],["Focus",80],["Plus",81],["Menu",82],["Notification",83],["Search",84],["AppSwitch",187],["Assist",219],["Cut",277],["Copy",278],["Paste",279]])});var u1=v(xh=>{"use strict";Object.defineProperty(xh,"__esModule",{value:!0});xh.BrowserDispatcher=void 0;var RW=no(),NW=Mo(),DW=vh(),LW=Je(),l1=class extends LW.Dispatcher{constructor(e,t){super(e,t,"Browser",{version:t.version(),name:t.options.name},!0);t.on(RW.Browser.Events.Disconnected,()=>this._didClose())}_didClose(){this._dispatchEvent("close"),this._dispose()}newContext(e,t){return c(this,null,function*(){let i=yield this._object.newContext(e);return e.storageState&&(yield i.setStorageState(t,e.storageState)),{context:new NW.BrowserContextDispatcher(this._scope,i)}})}close(){return c(this,null,function*(){yield this._object.close()})}killForTests(){return c(this,null,function*(){yield this._object.killForTests()})}newBrowserCDPSession(){return c(this,null,function*(){if(!this._object.options.isChromium)throw new Error("CDP session is only available in Chromium");let e=this._object;return{session:new DW.CDPSessionDispatcher(this._scope,yield e.newBrowserCDPSession())}})}startTracing(e){return c(this,null,function*(){if(!this._object.options.isChromium)throw new Error("Tracing is only available in Chromium");yield this._object.startTracing(e.page?e.page._object:void 0,e)})}stopTracing(){return c(this,null,function*(){if(!this._object.options.isChromium)throw new Error("Tracing is only available in Chromium");return{binary:(yield this._object.stopTracing()).toString("base64")}})}};xh.BrowserDispatcher=l1});var h1=v(Sh=>{"use strict";Object.defineProperty(Sh,"__esModule",{value:!0});Sh.JsonPipeDispatcher=void 0;var qW=Je(),BW=G(),HW=li(),d1=class extends qW.Dispatcher{constructor(e){super(e,{guid:"jsonPipe@"+(0,BW.createGuid)()},"JsonPipe",{})}send(e){return c(this,null,function*(){this.emit("message",e.message)})}close(){return c(this,null,function*(){this.emit("close"),this._disposed||(this._dispatchEvent("closed",{}),this._dispose())})}dispatch(e){this._disposed||this._dispatchEvent("message",{message:e})}wasClosed(e){if(!this._disposed){let t=e?{error:(0,HW.serializeError)(e)}:{};this._dispatchEvent("closed",t),this._dispose()}}dispose(){this._dispose()}};Sh.JsonPipeDispatcher=d1});var g1=v(Eh=>{"use strict";Object.defineProperty(Eh,"__esModule",{value:!0});Eh.BrowserTypeDispatcher=void 0;var p1=u1(),jW=Je(),f1=Mo(),WW=zW(xs()),UW=h1(),m1=G(),$W=Vt();function zW(r){return r&&r.__esModule?r:{default:r}}var _1=class extends jW.Dispatcher{constructor(e,t){super(e,t,"BrowserType",{executablePath:t.executablePath(),name:t.name()},!0)}launch(e,t){return c(this,null,function*(){let i=yield this._object.launch(t,e);return{browser:new p1.BrowserDispatcher(this._scope,i)}})}launchPersistentContext(e,t){return c(this,null,function*(){let i=yield this._object.launchPersistentContext(t,e.userDataDir,e);return{context:new f1.BrowserContextDispatcher(this._scope,i)}})}connectOverCDP(e,t){return c(this,null,function*(){let i=yield this._object.connectOverCDP(t,e.endpointURL,e,e.timeout),n=new p1.BrowserDispatcher(this._scope,i);return{browser:n,defaultContext:i._defaultContext?new f1.BrowserContextDispatcher(n._scope,i._defaultContext):void 0}})}connect(e){return c(this,null,function*(){let t=e.slowMo?l=>setTimeout(l,e.slowMo):(0,m1.makeWaitForNextTask)(),i=Object.assign({"User-Agent":(0,m1.getUserAgent)()},e.headers||{}),n=new WW.default(e.wsEndpoint,[],{perMessageDeflate:!1,maxPayload:256*1024*1024,handshakeTimeout:e.timeout,headers:i}),s=new UW.JsonPipeDispatcher(this._scope),o=new $W.ManualPromise;return n.on("open",()=>o.resolve({pipe:s})),n.on("close",()=>s.wasClosed()),n.on("error",l=>{o.isDone()?s.wasClosed(l):(s.dispose(),o.reject(l))}),s.on("close",()=>n.close()),s.on("message",l=>n.send(JSON.stringify(l))),n.addEventListener("message",l=>{t(()=>{try{s.dispatch(JSON.parse(l.data))}catch(u){n.close()}})}),o})}};Eh.BrowserTypeDispatcher=_1});var b1=v(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.ElectronApplicationDispatcher=Fo.ElectronDispatcher=void 0;var w1=Je(),VW=A_(),GW=Mo(),Mg=Sc(),v1=Ao(),y1=class extends w1.Dispatcher{constructor(e,t){super(e,t,"Electron",{},!0)}launch(e){return c(this,null,function*(){let t=yield this._object.launch(e);return{electronApplication:new Fg(this._scope,t)}})}};Fo.ElectronDispatcher=y1;var Fg=class extends w1.Dispatcher{constructor(e,t){super(e,t,"ElectronApplication",{context:new GW.BrowserContextDispatcher(e,t.context())},!0);t.on(VW.ElectronApplication.Events.Close,()=>{this._dispatchEvent("close"),this._dispose()})}browserWindow(e){return c(this,null,function*(){let t=yield this._object.browserWindow(e.page.page());return{handle:v1.ElementHandleDispatcher.fromJSHandle(this._scope,t)}})}evaluateExpression(e){return c(this,null,function*(){let t=yield this._object._nodeElectronHandlePromise;return{value:(0,Mg.serializeResult)(yield t.evaluateExpressionAndWaitForSignals(e.expression,e.isFunction,!0,(0,Mg.parseArgument)(e.arg)))}})}evaluateExpressionHandle(e){return c(this,null,function*(){let i=yield(yield this._object._nodeElectronHandlePromise).evaluateExpressionAndWaitForSignals(e.expression,e.isFunction,!1,(0,Mg.parseArgument)(e.arg));return{handle:v1.ElementHandleDispatcher.fromJSHandle(this._scope,i)}})}close(){return c(this,null,function*(){yield this._object.close()})}};Fo.ElectronApplicationDispatcher=Fg});var Rg=v(Ch=>{"use strict";Object.defineProperty(Ch,"__esModule",{value:!0});Ch.SelectorsDispatcher=void 0;var KW=Je(),x1=class extends KW.Dispatcher{constructor(e,t){super(e,t,"Selectors",{})}register(e){return c(this,null,function*(){yield this._object.register(e.name,e.source,e.contentScript)})}};Ch.SelectorsDispatcher=x1});var Oh=v(kh=>{"use strict";Object.defineProperty(kh,"__esModule",{value:!0});kh.PlaywrightDispatcher=void 0;var JW=sU(x("net")),XW=Ca(),YW=Xe(),ZW=jT(),QW=G(),eU=c1(),Ng=g1(),tU=Je(),rU=b1(),iU=Oc(),nU=Rg();function sU(r){return r&&r.__esModule?r:{default:r}}var S1=class extends tU.Dispatcher{constructor(e,t,i,n){let s=Hs(),o=Object.entries(s).map(([l,u])=>({name:l,descriptor:u}));super(e,t,"Playwright",{chromium:new Ng.BrowserTypeDispatcher(e,t.chromium),firefox:new Ng.BrowserTypeDispatcher(e,t.firefox),webkit:new Ng.BrowserTypeDispatcher(e,t.webkit),android:new eU.AndroidDispatcher(e,t.android),electron:new rU.ElectronDispatcher(e,t.electron),deviceDescriptors:o,selectors:i||new nU.SelectorsDispatcher(e,t.selectors),preLaunchedBrowser:n},!1);this._socksProxy=void 0}enableSocksProxy(){return c(this,null,function*(){this._socksProxy=new E1(this),this._object.options.socksProxyPort=yield this._socksProxy.listen(0),YW.debugLogger.log("proxy",`Starting socks proxy server on port ${this._object.options.socksProxyPort}`)})}socksConnected(e){return c(this,null,function*(){var t;(t=this._socksProxy)===null||t===void 0||t.socketConnected(e)})}socksFailed(e){return c(this,null,function*(){var t;(t=this._socksProxy)===null||t===void 0||t.socketFailed(e)})}socksData(e){return c(this,null,function*(){var t;(t=this._socksProxy)===null||t===void 0||t.sendSocketData(e)})}socksError(e){return c(this,null,function*(){var t;(t=this._socksProxy)===null||t===void 0||t.sendSocketError(e)})}socksEnd(e){return c(this,null,function*(){var t;(t=this._socksProxy)===null||t===void 0||t.sendSocketEnd(e)})}newRequest(e,t){return c(this,null,function*(){let i=new XW.GlobalFetchRequest(this._object,e);return{request:iU.FetchRequestDispatcher.from(this._scope,i)}})}};kh.PlaywrightDispatcher=S1;var E1=class{constructor(e){this._server=void 0,this._connections=new Map,this._dispatcher=void 0,this._dispatcher=e,this._server=new JW.default.Server(t=>{let i=(0,QW.createGuid)(),n=new ZW.SocksConnection(i,t,this);this._connections.set(i,n)})}listen(e){return c(this,null,function*(){return new Promise(t=>{this._server.listen(e,()=>{t(this._server.address().port)})})})}onSocketRequested(e,t,i){this._dispatcher._dispatchEvent("socksRequested",{uid:e,host:t,port:i})}onSocketData(e,t){this._dispatcher._dispatchEvent("socksData",{uid:e,data:t.toString("base64")})}onSocketClosed(e){this._dispatcher._dispatchEvent("socksClosed",{uid:e})}socketConnected(e){var t;(t=this._connections.get(e.uid))===null||t===void 0||t.socketConnected(e.host,e.port)}socketFailed(e){var t;(t=this._connections.get(e.uid))===null||t===void 0||t.socketFailed(e.errorCode)}sendSocketData(e){var t;(t=this._connections.get(e.uid))===null||t===void 0||t.sendData(Buffer.from(e.data,"base64"))}sendSocketEnd(e){var t;(t=this._connections.get(e.uid))===null||t===void 0||t.end()}sendSocketError(e){var t;(t=this._connections.get(e.uid))===null||t===void 0||t.error(e.error)}}});var Lr=v(Ph=>{"use strict";Object.defineProperty(Ph,"__esModule",{value:!0});Ph.Events=void 0;var oU={AndroidDevice:{WebView:"webview",Close:"close"},AndroidSocket:{Data:"data",Close:"close"},AndroidWebView:{Close:"close"},Browser:{Disconnected:"disconnected"},BrowserContext:{Close:"close",Page:"page",BackgroundPage:"backgroundpage",ServiceWorker:"serviceworker",Request:"request",Response:"response",RequestFailed:"requestfailed",RequestFinished:"requestfinished"},BrowserServer:{Close:"close"},Page:{Close:"close",Crash:"crash",Console:"console",Dialog:"dialog",Download:"download",FileChooser:"filechooser",DOMContentLoaded:"domcontentloaded",PageError:"pageerror",Request:"request",Response:"response",RequestFailed:"requestfailed",RequestFinished:"requestfinished",FrameAttached:"frameattached",FrameDetached:"framedetached",FrameNavigated:"framenavigated",Load:"load",Popup:"popup",WebSocket:"websocket",Worker:"worker"},WebSocket:{Close:"close",Error:"socketerror",FrameReceived:"framereceived",FrameSent:"framesent"},Worker:{Close:"close"},ElectronApplication:{Close:"close",Window:"window"}};Ph.Events=oU});var O1=v(Th=>{"use strict";Object.defineProperty(Th,"__esModule",{value:!0});Th.Accessibility=void 0;function C1(r){let e=R(y({},r),{value:r.valueNumber!==void 0?r.valueNumber:r.valueString,checked:r.checked==="checked"?!0:r.checked==="unchecked"?!1:r.checked,pressed:r.pressed==="pressed"?!0:r.pressed==="released"?!1:r.pressed,children:r.children?r.children.map(C1):void 0});return delete e.valueNumber,delete e.valueString,e}var k1=class{constructor(e){this._channel=void 0,this._channel=e}snapshot(){return c(this,arguments,function*(e={}){let t=e.root?e.root._elementChannel:void 0,i=yield this._channel.accessibilitySnapshot({interestingOnly:e.interestingOnly,root:t});return i.rootAXNode?C1(i.rootAXNode):null})}};Th.Accessibility=k1});var Ze=v(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});Ic.renderCallWithParams=A1;Ic.ChannelOwner=void 0;var P1=x("events"),T1=Qp(),aU=Xe(),cU=Bt(),lU=G(),Ro=class extends P1.EventEmitter{constructor(e,t,i,n){super();this._connection=void 0,this._parent=void 0,this._objects=new Map,this._type=void 0,this._guid=void 0,this._channel=void 0,this._initializer=void 0,this._logger=void 0,this._csi=void 0,this.setMaxListeners(0),this._connection=e instanceof Ro?e._connection:e,this._type=t,this._guid=i,this._parent=e instanceof Ro?e:void 0,this._connection._objects.set(i,this),this._parent&&(this._parent._objects.set(i,this),this._logger=this._parent._logger),this._channel=this._createChannel(new P1.EventEmitter,null),this._initializer=n}_dispose(){this._parent&&this._parent._objects.delete(this._guid),this._connection._objects.delete(this._guid);for(let e of[...this._objects.values()])e._dispose();this._objects.clear()}_debugScopeState(){return{_guid:this._guid,objects:Array.from(this._objects.values()).map(e=>e._debugScopeState())}}_createChannel(e,t,i,n){let s=new Proxy(e,{get:(o,l)=>{if(l==="debugScopeState")return u=>this._connection.sendMessageToServer(this,l,u,t);if(typeof l=="string"){let u=pU[uU(this._type,l)];if(u)return d=>(n&&i&&(n.userObject=i.onApiCallBegin(A1(t.apiName,d),t).userObject,i=void 0),this._connection.sendMessageToServer(this,l,u(d,""),t))}return o[l]}});return s._object=this,s}_wrapApiCall(e,t,i){return c(this,null,function*(){t=t||this._logger;let n=(0,cU.captureStackTrace)(),{apiName:s,frameTexts:o}=n,l=this;for(;!l._csi&&l._parent;)l=l._parent;i=i||n.allFrames.filter(h=>{var p;return(p=h.function)===null||p===void 0?void 0:p.includes("_wrapApiCall")}).length>1,i&&delete n.apiName;let u=i?void 0:l._csi,d={userObject:null};try{Dg(t,`=> ${s} started`,i);let h=this._createChannel({},n,u,d),p=yield e(h,n);return u==null||u.onApiCallEnd(d),Dg(t,`<= ${s} succeeded`,i),p}catch(h){let p=(process.env.PWDEBUGIMPL||(0,lU.isUnderTest)())&&h.stack?`
<inner error>
`+h.stack:"";throw h.message=s+": "+h.message,h.stack=h.message+`
`+o.join(`
`)+p,u==null||u.onApiCallEnd(d,h),Dg(t,`<= ${s} failed`,i),h}})}toJSON(){return{_type:this._type,_guid:this._guid}}};Ic.ChannelOwner=Ro;function Dg(r,e,t){t||(r&&r.isEnabled("api","info")&&r.log("api","info",e,[],{color:"cyan"}),aU.debugLogger.log("api",e))}function uU(r,e){return r+e[0].toUpperCase()+e.substring(1)+"Params"}var dU=["url","selector","text","key"];function A1(r,e){let t=[];if(e)for(let n of dU)e[n]&&t.push(e[n]);let i=t.length?"("+t.join(", ")+")":"";return r+i}var hU=r=>(e,t)=>{if(e._object instanceof Ro&&(r==="*"||e._object._type===r))return{guid:e._object._guid};throw new T1.ValidationError(`${t}: expected ${r}`)},pU=(0,T1.createScheme)(hU)});var si=v(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});Zn.serializeArgument=Lg;Zn.parseResult=qg;Zn.assertMaxArguments=mU;Zn.JSHandle=void 0;var fU=Ze(),I1=li(),Yn=class extends fU.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n);this._preview=void 0,this._preview=this._initializer.preview,this._channel.on("previewUpdated",({preview:s})=>this._preview=s)}evaluate(e,t){return c(this,null,function*(){return this._wrapApiCall(i=>c(this,null,function*(){let n=yield i.evaluateExpression({expression:String(e),isFunction:typeof e=="function",arg:Lg(t)});return qg(n.value)}))})}evaluateHandle(e,t){return c(this,null,function*(){return this._wrapApiCall(i=>c(this,null,function*(){let n=yield i.evaluateExpressionHandle({expression:String(e),isFunction:typeof e=="function",arg:Lg(t)});return Yn.from(n.handle)}))})}getProperty(e){return c(this,null,function*(){return this._wrapApiCall(t=>c(this,null,function*(){let i=yield t.getProperty({name:e});return Yn.from(i.handle)}))})}getProperties(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){let t=new Map;for(let{name:i,value:n}of(yield e.getPropertyList()).properties)t.set(i,Yn.from(n));return t}))})}jsonValue(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return qg((yield e.jsonValue()).value)}))})}asElement(){return null}dispose(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return yield e.dispose()}))})}toString(){return this._preview}};Zn.JSHandle=Yn;function Lg(r){let e=[],t=n=>(e.push(n),e.length-1);return{value:(0,I1.serializeValue)(r,n=>n instanceof Yn?{h:t(n._channel)}:{fallThrough:n},new Set),handles:e}}function qg(r){return(0,I1.parseSerializedValue)(r,void 0)}function mU(r,e){if(r>e)throw new Error("Too many arguments. If you need to pass more than 1 argument to the function wrap them in an object.")}});var Bg=v(Ah=>{"use strict";Object.defineProperty(Ah,"__esModule",{value:!0});Ah.ConsoleMessage=void 0;var _U=vU(x("util")),gU=si(),wU=Ze();function M1(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(M1=function(i){return i?t:e})(r)}function vU(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=M1(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var F1=class extends wU.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n)}type(){return this._initializer.type}text(){return this._initializer.text}args(){return this._initializer.args.map(gU.JSHandle.from)}location(){return this._initializer.location}[_U.inspect.custom](){return this.text()}};Ah.ConsoleMessage=F1});var Hg=v(Ih=>{"use strict";Object.defineProperty(Ih,"__esModule",{value:!0});Ih.Dialog=void 0;var yU=Ze(),R1=class extends yU.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n)}type(){return this._initializer.type}message(){return this._initializer.message}defaultValue(){return this._initializer.defaultValue}accept(e){return c(this,null,function*(){return this._wrapApiCall(t=>c(this,null,function*(){yield t.accept({promptText:e})}))})}dismiss(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){yield e.dismiss()}))})}};Ih.Dialog=R1});var D1=v(Mh=>{"use strict";Object.defineProperty(Mh,"__esModule",{value:!0});Mh.Download=void 0;var N1=class{constructor(e,t,i,n){this._page=void 0,this._url=void 0,this._suggestedFilename=void 0,this._artifact=void 0,this._page=e,this._url=t,this._suggestedFilename=i,this._artifact=n}page(){return this._page}url(){return this._url}suggestedFilename(){return this._suggestedFilename}path(){return c(this,null,function*(){return this._artifact.pathAfterFinished()})}saveAs(e){return c(this,null,function*(){return this._artifact.saveAs(e)})}failure(){return c(this,null,function*(){return this._artifact.failure()})}createReadStream(){return c(this,null,function*(){return this._artifact.createReadStream()})}cancel(){return c(this,null,function*(){return this._artifact.cancel()})}delete(){return c(this,null,function*(){return this._artifact.delete()})}};Mh.Download=N1});var j1=v(Fh=>{"use strict";Object.defineProperty(Fh,"__esModule",{value:!0});Fh.Locator=void 0;var bU=SU(x("util")),L1=G(),xU=Mc(),q1=si(),B1;function H1(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(H1=function(i){return i?t:e})(r)}function SU(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=H1(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}B1=bU.inspect.custom;var Qn=class{constructor(e,t){this._frame=void 0,this._selector=void 0,this._frame=e,this._selector=t}_withElement(e,t){return c(this,null,function*(){t=this._frame.page()._timeoutSettings.timeout({timeout:t});let i=t?(0,L1.monotonicTime)()+t:0;return this._frame._wrapApiCall(n=>c(this,null,function*(){let s=yield n.waitForSelector({selector:this._selector,strict:!0,state:"attached",timeout:t}),o=xU.ElementHandle.fromNullable(s.element);if(!o)throw new Error(`Could not resolve ${this._selector} to DOM Element`);try{return yield e(o,i?i-(0,L1.monotonicTime)():0)}finally{yield o.dispose()}}))})}boundingBox(e){return c(this,null,function*(){return this._withElement(t=>t.boundingBox(),e==null?void 0:e.timeout)})}check(){return c(this,arguments,function*(e={}){return this._frame.check(this._selector,y({strict:!0},e))})}click(){return c(this,arguments,function*(e={}){return this._frame.click(this._selector,y({strict:!0},e))})}dblclick(){return c(this,arguments,function*(e={}){return this._frame.dblclick(this._selector,y({strict:!0},e))})}dispatchEvent(n){return c(this,arguments,function*(e,t={},i){return this._frame.dispatchEvent(this._selector,e,t,y({strict:!0},i))})}evaluate(e,t,i){return c(this,null,function*(){return this._withElement(n=>n.evaluate(e,t),i==null?void 0:i.timeout)})}evaluateAll(e,t){return c(this,null,function*(){return this._frame.$$eval(this._selector,e,t)})}evaluateHandle(e,t,i){return c(this,null,function*(){return this._withElement(n=>n.evaluateHandle(e,t),i==null?void 0:i.timeout)})}fill(i){return c(this,arguments,function*(e,t={}){return this._frame.fill(this._selector,e,y({strict:!0},t))})}locator(e){return new Qn(this._frame,this._selector+" >> "+e)}elementHandle(e){return c(this,null,function*(){return yield this._frame.waitForSelector(this._selector,y({strict:!0,state:"attached"},e))})}elementHandles(){return c(this,null,function*(){return this._frame.$$(this._selector)})}first(){return new Qn(this._frame,this._selector+" >> nth=0")}last(){return new Qn(this._frame,this._selector+" >> nth=-1")}nth(e){return new Qn(this._frame,this._selector+` >> nth=${e}`)}focus(e){return c(this,null,function*(){return this._frame.focus(this._selector,y({strict:!0},e))})}count(){return c(this,null,function*(){return this.evaluateAll(e=>e.length)})}getAttribute(e,t){return c(this,null,function*(){return this._frame.getAttribute(this._selector,e,y({strict:!0},t))})}hover(){return c(this,arguments,function*(e={}){return this._frame.hover(this._selector,y({strict:!0},e))})}innerHTML(e){return c(this,null,function*(){return this._frame.innerHTML(this._selector,y({strict:!0},e))})}innerText(e){return c(this,null,function*(){return this._frame.innerText(this._selector,y({strict:!0},e))})}inputValue(e){return c(this,null,function*(){return this._frame.inputValue(this._selector,y({strict:!0},e))})}isChecked(e){return c(this,null,function*(){return this._frame.isChecked(this._selector,y({strict:!0},e))})}isDisabled(e){return c(this,null,function*(){return this._frame.isDisabled(this._selector,y({strict:!0},e))})}isEditable(e){return c(this,null,function*(){return this._frame.isEditable(this._selector,y({strict:!0},e))})}isEnabled(e){return c(this,null,function*(){return this._frame.isEnabled(this._selector,y({strict:!0},e))})}isHidden(e){return c(this,null,function*(){return this._frame.isHidden(this._selector,y({strict:!0},e))})}isVisible(e){return c(this,null,function*(){return this._frame.isVisible(this._selector,y({strict:!0},e))})}press(i){return c(this,arguments,function*(e,t={}){return this._frame.press(this._selector,e,y({strict:!0},t))})}screenshot(){return c(this,arguments,function*(e={}){return this._withElement((t,i)=>t.screenshot(R(y({},e),{timeout:i})),e.timeout)})}scrollIntoViewIfNeeded(){return c(this,arguments,function*(e={}){return this._withElement((t,i)=>t.scrollIntoViewIfNeeded(R(y({},e),{timeout:i})),e.timeout)})}selectOption(i){return c(this,arguments,function*(e,t={}){return this._frame.selectOption(this._selector,e,y({strict:!0},t))})}selectText(){return c(this,arguments,function*(e={}){return this._withElement((t,i)=>t.selectText(R(y({},e),{timeout:i})),e.timeout)})}setChecked(e,t){return c(this,null,function*(){e?yield this.check(t):yield this.uncheck(t)})}setInputFiles(i){return c(this,arguments,function*(e,t={}){return this._frame.setInputFiles(this._selector,e,y({strict:!0},t))})}tap(){return c(this,arguments,function*(e={}){return this._frame.tap(this._selector,y({strict:!0},e))})}textContent(e){return c(this,null,function*(){return this._frame.textContent(this._selector,y({strict:!0},e))})}type(i){return c(this,arguments,function*(e,t={}){return this._frame.type(this._selector,e,y({strict:!0},t))})}uncheck(){return c(this,arguments,function*(e={}){return this._frame.uncheck(this._selector,y({strict:!0},e))})}allInnerTexts(){return c(this,null,function*(){return this._frame.$$eval(this._selector,e=>e.map(t=>t.innerText))})}allTextContents(){return c(this,null,function*(){return this._frame.$$eval(this._selector,e=>e.map(t=>t.textContent||""))})}waitFor(e){return c(this,null,function*(){return this._frame._wrapApiCall(t=>c(this,null,function*(){yield t.waitForSelector(y({selector:this._selector,strict:!0,omitReturnValue:!0},e))}))})}_expect(e,t){return c(this,null,function*(){return this._frame._wrapApiCall(i=>c(this,null,function*(){let n=R(y({selector:this._selector,expression:e},t),{isNot:!!t.isNot});t.expectedValue&&(n.expectedValue=(0,q1.serializeArgument)(t.expectedValue));let s=yield i.expect(n);return s.received!==void 0&&(s.received=(0,q1.parseResult)(s.received)),s}))})}[B1](){return this.toString()}toString(){return`Locator@${this._selector}`}};Fh.Locator=Qn});var es=v(Nh=>{"use strict";Object.defineProperty(Nh,"__esModule",{value:!0});Nh.Waiter=void 0;var EU=Bt(),CU=qt(),kU=G(),Rh=class{constructor(e,t){this._dispose=void 0,this._failures=[],this._immediateError=void 0,this._logs=[],this._channel=void 0,this._waitId=void 0,this._error=void 0,this._waitId=(0,kU.createGuid)(),this._channel=e,this._channel.waitForEventInfo({info:{waitId:this._waitId,phase:"before",event:t}}).catch(()=>{}),this._dispose=[()=>this._channel.waitForEventInfo({info:{waitId:this._waitId,phase:"after",error:this._error}}).catch(()=>{})]}static createForEvent(e,t){return new Rh(e,t)}waitForEvent(e,t,i){return c(this,null,function*(){let{promise:n,dispose:s}=W1(e,t,i);return this.waitForPromise(n,s)})}rejectOnEvent(e,t,i,n){let{promise:s,dispose:o}=W1(e,t,n);this._rejectOn(s.then(()=>{throw i}),o)}rejectOnTimeout(e,t){if(!e)return;let{promise:i,dispose:n}=OU(e);this._rejectOn(i.then(()=>{throw new CU.TimeoutError(t)}),n)}rejectImmediately(e){this._immediateError=e}dispose(){for(let e of this._dispose)e()}waitForPromise(e,t){return c(this,null,function*(){try{if(this._immediateError)throw this._immediateError;let i=yield Promise.race([e,...this._failures]);return t&&t(),i}catch(i){throw t&&t(),this._error=i.message,this.dispose(),(0,EU.rewriteErrorMessage)(i,i.message+PU(this._logs)),i}})}log(e){this._logs.push(e),this._channel.waitForEventInfo({info:{waitId:this._waitId,phase:"log",message:e}}).catch(()=>{})}_rejectOn(e,t){this._failures.push(e),t&&this._dispose.push(t)}};Nh.Waiter=Rh;function W1(r,e,t){let i;return{promise:new Promise((o,l)=>{i=u=>c(this,null,function*(){try{if(t&&!(yield t(u)))return;r.removeListener(e,i),o(u)}catch(d){r.removeListener(e,i),l(d)}}),r.addListener(e,i)}),dispose:()=>r.removeListener(e,i)}}function OU(r){let e;return{promise:new Promise(n=>e=setTimeout(n,r)),dispose:()=>clearTimeout(e)}}function PU(r){if(!r.length)return"";let e=" logs ",t=60,i=(t-e.length)/2,n=t-e.length-i;return`
${"=".repeat(i)}${e}${"=".repeat(n)}
${r.join(`
`)}
${"=".repeat(t)}`}});var oi=v(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.deprecate=IU;Qi.envObjectToArray=MU;Qi.evaluationScript=FU;Qi.parsedURL=$1;Qi.urlMatches=RU;Qi.globToRegex=z1;var TU=AU(x("fs")),Fc=G();function AU(r){return r&&r.__esModule?r:{default:r}}var U1=new Set;function IU(r,e){U1.has(r)||(U1.add(r),console.warn(e))}function MU(r){let e=[];for(let t in r)Object.is(r[t],void 0)||e.push({name:t,value:String(r[t])});return e}function FU(r,e,t=!0){return c(this,null,function*(){if(typeof r=="function"){let i=r.toString(),n=Object.is(e,void 0)?"undefined":JSON.stringify(e);return`(${i})(${n})`}if(e!==void 0)throw new Error("Cannot evaluate a string with arguments");if((0,Fc.isString)(r))return r;if(r.content!==void 0)return r.content;if(r.path!==void 0){let i=yield TU.default.promises.readFile(r.path,"utf8");return t&&(i+="//# sourceURL="+r.path.replace(/\n/g,"")),i}throw new Error("Either path or content property must be present")})}function $1(r){try{return new URL(r)}catch(e){return null}}function RU(r,e,t){if(t===void 0||t==="")return!0;if((0,Fc.isString)(t)&&!t.startsWith("*")&&(t=(0,Fc.constructURLBasedOnBaseURL)(r,t)),(0,Fc.isString)(t)&&(t=z1(t)),(0,Fc.isRegExp)(t))return t.test(e);if(typeof t=="string"&&t===e)return!0;let i=$1(e);if(!i)return!1;if(typeof t=="string")return i.pathname===t;if(typeof t!="function")throw new Error("url parameter should be string, RegExp or function");return t(i)}var NU=new Set(["/","$","^","+",".","(",")","=","!","|"]);function z1(r){let e=["^"],t;for(let i=0;i<r.length;++i){let n=r[i];if(NU.has(n)){e.push("\\"+n);continue}if(n==="*"){let s=r[i-1],o=1;for(;r[i+1]==="*";)o++,i++;let l=r[i+1];o>1&&(s==="/"||s===void 0)&&(l==="/"||l===void 0)?(e.push("((?:[^/]*(?:/|$))*)"),i++):e.push("([^/]*)");continue}switch(n){case"?":e.push(".");break;case"{":t=!0,e.push("(");break;case"}":t=!1,e.push(")");break;case",":if(t){e.push("|");break}e.push("\\"+n);break;default:e.push(n)}}return e.push("$"),new RegExp(e.join(""))}});var G1=v(Dh=>{"use strict";Object.defineProperty(Dh,"__esModule",{value:!0});Dh.MultiMap=void 0;var V1=class{constructor(){this._map=void 0,this._map=new Map}set(e,t){let i=this._map.get(e);i||(i=[],this._map.set(e,i)),i.push(t)}get(e){return this._map.get(e)||[]}has(e){return this._map.has(e)}hasValue(e,t){let i=this._map.get(e);return i?i.includes(t):!1}get size(){return this._map.size}keys(){return this._map.keys()}values(){let e=[];for(let t of this.keys())e.push(...this.get(t));return e}clear(){this._map.clear()}};Dh.MultiMap=V1});var Rc=v(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.FetchResponse=en.FetchRequest=en.Fetch=void 0;var jg=Y1(x("fs")),DU=Y1(x("path")),LU=X1(bi()),qU=qt(),ai=G(),BU=Ze(),K1=X1(No());function J1(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(J1=function(i){return i?t:e})(r)}function X1(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=J1(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function Y1(r){return r&&r.__esModule?r:{default:r}}var Z1=class{constructor(e){this._playwright=void 0,this._playwright=e}newContext(){return c(this,arguments,function*(e={}){return yield this._playwright._wrapApiCall(t=>c(this,null,function*(){let i=typeof e.storageState=="string"?JSON.parse(yield jg.default.promises.readFile(e.storageState,"utf8")):e.storageState;return Wg.from((yield t.newRequest(R(y({},e),{extraHTTPHeaders:e.extraHTTPHeaders?(0,ai.headersObjectToArray)(e.extraHTTPHeaders):void 0,storageState:i}))).request)}))})}};en.Fetch=Z1;var Wg=class extends BU.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n)}dispose(){return this._wrapApiCall(e=>c(this,null,function*(){yield e.dispose()}))}delete(e,t){return c(this,null,function*(){return this.fetch(e,R(y({},t),{method:"DELETE"}))})}head(e,t){return c(this,null,function*(){return this.fetch(e,R(y({},t),{method:"HEAD"}))})}get(e,t){return c(this,null,function*(){return this.fetch(e,R(y({},t),{method:"GET"}))})}patch(e,t){return c(this,null,function*(){return this.fetch(e,R(y({},t),{method:"PATCH"}))})}post(e,t){return c(this,null,function*(){return this.fetch(e,R(y({},t),{method:"POST"}))})}put(e,t){return c(this,null,function*(){return this.fetch(e,R(y({},t),{method:"PUT"}))})}fetch(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){let s=e instanceof K1.Request?e:void 0;(0,ai.assert)(s||typeof e=="string","First argument must be either URL string or Request"),(0,ai.assert)((t.data===void 0?0:1)+(t.form===void 0?0:1)+(t.multipart===void 0?0:1)<=1,"Only one of 'data', 'form' or 'multipart' can be specified");let o=s?s.url():e,l=(0,ai.objectToArray)(t.params),u=t.method||(s==null?void 0:s.method()),d=t.headers||(s==null?void 0:s.headers()),h=d?(0,ai.headersObjectToArray)(d):void 0,p,f,m,_;if(t.data!==void 0)if((0,ai.isString)(t.data))_=Buffer.from(t.data,"utf8");else if(Buffer.isBuffer(t.data))_=t.data;else if(typeof t.data=="object")p=t.data;else throw new Error("Unexpected 'data' type");else if(t.form)f=(0,ai.objectToArray)(t.form);else if(t.multipart){m=[];for(let[b,C]of Object.entries(t.multipart))if((0,ai.isFilePayload)(C)){let E=C;if(!Buffer.isBuffer(E.buffer))throw new Error(`Unexpected buffer type of 'data.${b}'`);m.push({name:b,file:HU(E)})}else C instanceof jg.default.ReadStream?m.push({name:b,file:yield jU(C)}):m.push({name:b,value:String(C)})}_===void 0&&p===void 0&&f===void 0&&m===void 0&&(_=(s==null?void 0:s.postDataBuffer())||void 0);let g=_?_.toString("base64"):void 0,w=yield n.fetch({url:o,params:l,method:u,headers:h,postData:g,jsonData:p,formData:f,multipartData:m,timeout:t.timeout,failOnStatusCode:t.failOnStatusCode,ignoreHTTPSErrors:t.ignoreHTTPSErrors});if(w.error)throw new Error(w.error);return new Ug(this,w.response)}))})}storageState(){return c(this,arguments,function*(e={}){return yield this._wrapApiCall(t=>c(this,null,function*(){let i=yield t.storageState();return e.path&&(yield(0,ai.mkdirIfNeeded)(e.path),yield jg.default.promises.writeFile(e.path,JSON.stringify(i,void 0,2),"utf8")),i}))})}};en.FetchRequest=Wg;var Ug=class{constructor(e,t){this._initializer=void 0,this._headers=void 0,this._request=void 0,this._request=e,this._initializer=t,this._headers=new K1.RawHeaders(this._initializer.headers)}ok(){return this._initializer.status===0||this._initializer.status>=200&&this._initializer.status<=299}url(){return this._initializer.url}status(){return this._initializer.status}statusText(){return this._initializer.statusText}headers(){return this._headers.headers()}headersArray(){return this._headers.headersArray()}body(){return c(this,null,function*(){return this._request._wrapApiCall(e=>c(this,null,function*(){try{let t=yield e.fetchResponseBody({fetchUid:this._fetchUid()});if(t.binary===void 0)throw new Error("Response has been disposed");return Buffer.from(t.binary,"base64")}catch(t){throw t.message===qU.kBrowserOrContextClosedError?new Error("Response has been disposed"):t}}))})}text(){return c(this,null,function*(){return(yield this.body()).toString("utf8")})}json(){return c(this,null,function*(){let e=yield this.text();return JSON.parse(e)})}dispose(){return c(this,null,function*(){return this._request._wrapApiCall(e=>c(this,null,function*(){yield e.disposeFetchResponse({fetchUid:this._fetchUid()})}))})}_fetchUid(){return this._initializer.fetchUid}};en.FetchResponse=Ug;function HU(r){return{name:r.name,mimeType:r.mimeType,buffer:r.buffer.toString("base64")}}function jU(r){return c(this,null,function*(){let e=yield new Promise((i,n)=>{let s=[];r.on("data",o=>s.push(o)),r.on("end",()=>i(Buffer.concat(s))),r.on("error",o=>n(o))}),t=Buffer.isBuffer(r.path)?r.path.toString("utf8"):r.path;return{name:DU.default.basename(t),mimeType:LU.getType(t)||"application/octet-stream",buffer:e.toString("base64")}})}});var No=v(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.validateHeaders=QU;Et.RawHeaders=Et.RouteHandler=Et.WebSocket=Et.Response=Et.Route=Et.InterceptedResponse=Et.Request=void 0;var WU=x("url"),Lh=Ze(),UU=Lo(),$U=ZU(x("fs")),zU=YU(bi()),Nc=G(),VU=Vt(),br=Lr(),GU=es(),KU=oi(),JU=G1(),XU=Rc();function Q1(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(Q1=function(i){return i?t:e})(r)}function YU(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=Q1(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function ZU(r){return r&&r.__esModule?r:{default:r}}var tn=class extends Lh.ChannelOwner{static from(e){return e._object}static fromNullable(e){return e?tn.from(e):null}constructor(e,t,i,n){super(e,t,i,n);this._redirectedFrom=null,this._redirectedTo=null,this._failureText=null,this._provisionalHeaders=void 0,this._actualHeadersPromise=void 0,this._postData=void 0,this._timing=void 0,this._redirectedFrom=tn.fromNullable(n.redirectedFrom),this._redirectedFrom&&(this._redirectedFrom._redirectedTo=this),this._provisionalHeaders=new ts(n.headers),this._postData=n.postData?Buffer.from(n.postData,"base64"):null,this._timing={startTime:0,domainLookupStart:-1,domainLookupEnd:-1,connectStart:-1,secureConnectionStart:-1,connectEnd:-1,requestStart:-1,responseStart:-1,responseEnd:-1}}url(){return this._initializer.url}resourceType(){return this._initializer.resourceType}method(){return this._initializer.method}postData(){return this._postData?this._postData.toString("utf8"):null}postDataBuffer(){return this._postData}postDataJSON(){let e=this.postData();if(!e)return null;if(this.headers()["content-type"]==="application/x-www-form-urlencoded"){let i={},n=new WU.URLSearchParams(e);for(let[s,o]of n.entries())i[s]=o;return i}try{return JSON.parse(e)}catch(i){throw new Error("POST data is not a valid JSON object: "+e)}}headers(){return this._provisionalHeaders.headers()}_actualHeaders(){return this._actualHeadersPromise||(this._actualHeadersPromise=this._wrapApiCall(e=>c(this,null,function*(){return new ts((yield e.rawRequestHeaders()).headers)}))),this._actualHeadersPromise}allHeaders(){return c(this,null,function*(){return(yield this._actualHeaders()).headers()})}headersArray(){return c(this,null,function*(){return(yield this._actualHeaders()).headersArray()})}headerValue(e){return c(this,null,function*(){return(yield this._actualHeaders()).get(e)})}response(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return Do.fromNullable((yield e.response()).response)}))})}_internalResponse(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return Do.fromNullable((yield e.response()).response)}),void 0,!0)})}frame(){return UU.Frame.from(this._initializer.frame)}isNavigationRequest(){return this._initializer.isNavigationRequest}redirectedFrom(){return this._redirectedFrom}redirectedTo(){return this._redirectedTo}failure(){return this._failureText===null?null:{errorText:this._failureText}}timing(){return this._timing}sizes(){return c(this,null,function*(){let e=yield this.response();if(!e)throw new Error("Unable to fetch sizes for failed request");return e._wrapApiCall(t=>c(this,null,function*(){return(yield t.sizes()).sizes}))})}_finalRequest(){return this._redirectedTo?this._redirectedTo._finalRequest():this}};Et.Request=tn;var $g=class{constructor(e,t){this._route=void 0,this._initializer=void 0,this._request=void 0,this._headers=void 0,this._route=e,this._initializer=t,this._headers=new ts(t.headers),this._request=tn.from(t.request)}securityDetails(){return c(this,null,function*(){return null})}serverAddr(){return c(this,null,function*(){return null})}finished(){return c(this,null,function*(){let e=yield this._request.response();return e?yield e.finished():null})}frame(){return this._request.frame()}ok(){return this._initializer.status===0||this._initializer.status>=200&&this._initializer.status<=299}url(){return this._request.url()}status(){return this._initializer.status}statusText(){return this._initializer.statusText}headers(){return this._headers.headers()}allHeaders(){return c(this,null,function*(){return this.headers()})}headersArray(){return c(this,null,function*(){return this._headers.headersArray()})}headerValue(e){return c(this,null,function*(){return this._headers.get(e)})}headerValues(e){return c(this,null,function*(){return this._headers.getAll(e)})}body(){return c(this,null,function*(){return this._route._responseBody()})}text(){return c(this,null,function*(){return(yield this.body()).toString("utf8")})}json(){return c(this,null,function*(){let e=yield this.text();return JSON.parse(e)})}request(){return this._request}};Et.InterceptedResponse=$g;var eA=class extends Lh.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n);this._interceptedResponse=void 0}request(){return tn.from(this._initializer.request)}abort(e){return c(this,null,function*(){return this._wrapApiCall(t=>c(this,null,function*(){yield t.abort({errorCode:e})}))})}fulfill(){return c(this,arguments,function*(e={}){return this._wrapApiCall(t=>c(this,null,function*(){let i,n,{status:s,headers:o,body:l}=e;e.response&&(s||(s=e.response.status()),o||(o=e.response.headers()),e.body===void 0&&e.path===void 0&&(e.response instanceof XU.FetchResponse?n=e.response._fetchUid():e.response===this._interceptedResponse?i=!0:l=yield e.response.body()));let u,d=!1,h=0;if(e.path){let f=yield $U.default.promises.readFile(e.path);u=f.toString("base64"),d=!0,h=f.length}else(0,Nc.isString)(l)?(u=l,d=!1,h=Buffer.byteLength(u)):l&&(u=l.toString("base64"),d=!0,h=l.length);let p={};for(let f of Object.keys(o||{}))p[f.toLowerCase()]=String(o[f]);e.contentType?p["content-type"]=String(e.contentType):e.path&&(p["content-type"]=zU.getType(e.path)||"application/octet-stream"),h&&!("content-length"in p)&&(p["content-length"]=String(h)),yield t.fulfill({status:s||200,headers:(0,Nc.headersObjectToArray)(p),body:u,isBase64:d,useInterceptedResponseBody:i,fetchResponseUid:n})}))})}_continueToResponse(){return c(this,arguments,function*(e={}){return this._interceptedResponse=yield this._continue(e,!0),this._interceptedResponse})}continue(){return c(this,arguments,function*(e={}){yield this._continue(e,!1)})}_internalContinue(){return c(this,arguments,function*(e={}){yield this._continue(e,!1,!0).catch(()=>{})})}_continue(e,t,i){return c(this,null,function*(){return yield this._wrapApiCall(n=>c(this,null,function*(){let s=(0,Nc.isString)(e.postData)?Buffer.from(e.postData,"utf8"):e.postData,o=yield n.continue({url:e.url,method:e.method,headers:e.headers?(0,Nc.headersObjectToArray)(e.headers):void 0,postData:s?s.toString("base64"):void 0,interceptResponse:t});return o.response?new $g(this,o.response):null}),void 0,i)})}_responseBody(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return Buffer.from((yield e.responseBody()).binary,"base64")}))})}};Et.Route=eA;var Do=class extends Lh.ChannelOwner{static from(e){return e._object}static fromNullable(e){return e?Do.from(e):null}constructor(e,t,i,n){super(e,t,i,n);this._provisionalHeaders=void 0,this._actualHeadersPromise=void 0,this._request=void 0,this._finishedPromise=new VU.ManualPromise,this._provisionalHeaders=new ts(n.headers),this._request=tn.from(this._initializer.request),Object.assign(this._request._timing,this._initializer.timing)}url(){return this._initializer.url}ok(){return this._initializer.status===0||this._initializer.status>=200&&this._initializer.status<=299}status(){return this._initializer.status}statusText(){return this._initializer.statusText}headers(){return this._provisionalHeaders.headers()}_actualHeaders(){return c(this,null,function*(){return this._actualHeadersPromise||(this._actualHeadersPromise=this._wrapApiCall(e=>c(this,null,function*(){return new ts((yield e.rawResponseHeaders()).headers)}))),this._actualHeadersPromise})}allHeaders(){return c(this,null,function*(){return(yield this._actualHeaders()).headers()})}headersArray(){return c(this,null,function*(){return(yield this._actualHeaders()).headersArray().slice()})}headerValue(e){return c(this,null,function*(){return(yield this._actualHeaders()).get(e)})}headerValues(e){return c(this,null,function*(){return(yield this._actualHeaders()).getAll(e)})}finished(){return c(this,null,function*(){return this._finishedPromise.then(()=>null)})}body(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return Buffer.from((yield e.body()).binary,"base64")}))})}text(){return c(this,null,function*(){return(yield this.body()).toString("utf8")})}json(){return c(this,null,function*(){let e=yield this.text();return JSON.parse(e)})}request(){return this._request}frame(){return this._request.frame()}serverAddr(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return(yield e.serverAddr()).value||null}))})}securityDetails(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return(yield e.securityDetails()).value||null}))})}};Et.Response=Do;var tA=class extends Lh.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n);this._page=void 0,this._isClosed=void 0,this._isClosed=!1,this._page=e,this._channel.on("frameSent",s=>{s.opcode===1?this.emit(br.Events.WebSocket.FrameSent,{payload:s.data}):s.opcode===2&&this.emit(br.Events.WebSocket.FrameSent,{payload:Buffer.from(s.data,"base64")})}),this._channel.on("frameReceived",s=>{s.opcode===1?this.emit(br.Events.WebSocket.FrameReceived,{payload:s.data}):s.opcode===2&&this.emit(br.Events.WebSocket.FrameReceived,{payload:Buffer.from(s.data,"base64")})}),this._channel.on("socketError",({error:s})=>this.emit(br.Events.WebSocket.Error,s)),this._channel.on("close",()=>{this._isClosed=!0,this.emit(br.Events.WebSocket.Close,this)})}url(){return this._initializer.url}isClosed(){return this._isClosed}waitForEvent(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){let s=this._page._timeoutSettings.timeout(typeof t=="function"?{}:t),o=typeof t=="function"?t:t.predicate,l=GU.Waiter.createForEvent(n,e);l.rejectOnTimeout(s,`Timeout while waiting for event "${e}"`),e!==br.Events.WebSocket.Error&&l.rejectOnEvent(this,br.Events.WebSocket.Error,new Error("Socket error")),e!==br.Events.WebSocket.Close&&l.rejectOnEvent(this,br.Events.WebSocket.Close,new Error("Socket closed")),l.rejectOnEvent(this._page,br.Events.Page.Close,new Error("Page closed"));let u=yield l.waitForEvent(this,e,o);return l.dispose(),u}))})}};Et.WebSocket=tA;function QU(r){for(let e of Object.keys(r)){let t=r[e];if(!Object.is(t,void 0)&&!(0,Nc.isString)(t))throw new Error(`Expected value of header "${e}" to be String, but "${typeof t}" is found.`)}}var rA=class{constructor(e,t,i,n){this.handledCount=0,this._baseURL=void 0,this._times=void 0,this.url=void 0,this.handler=void 0,this._baseURL=e,this._times=n,this.url=t,this.handler=i}expired(){return!!this._times&&this.handledCount>=this._times}matches(e){return(0,KU.urlMatches)(this._baseURL,e,this.url)}handle(e,t){this.handler(e,t),this._times&&this.handledCount++}};Et.RouteHandler=rA;var ts=class{constructor(e){this._headersArray=void 0,this._headersMap=new JU.MultiMap,this._headersArray=e;for(let t of e)this._headersMap.set(t.name.toLowerCase(),t.value)}get(e){let t=this.getAll(e);return!t||!t.length?null:t.join(e.toLowerCase()==="set-cookie"?`
`:", ")}getAll(e){return[...this._headersMap.get(e.toLowerCase())]}headers(){let e={};for(let t of this._headersMap.keys())e[t]=this.get(t);return e}headersArray(){return this._headersArray}};Et.RawHeaders=ts});var iA=v(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});Object.defineProperty(xr,"Size",{enumerable:!0,get:function(){return rs.Size}});Object.defineProperty(xr,"Point",{enumerable:!0,get:function(){return rs.Point}});Object.defineProperty(xr,"Rect",{enumerable:!0,get:function(){return rs.Rect}});Object.defineProperty(xr,"Quad",{enumerable:!0,get:function(){return rs.Quad}});Object.defineProperty(xr,"URLMatch",{enumerable:!0,get:function(){return rs.URLMatch}});Object.defineProperty(xr,"TimeoutOptions",{enumerable:!0,get:function(){return rs.TimeoutOptions}});Object.defineProperty(xr,"HeadersArray",{enumerable:!0,get:function(){return rs.HeadersArray}});xr.kLifecycleEvents=void 0;var rs=Vf(),e$=new Set(["load","domcontentloaded","networkidle"]);xr.kLifecycleEvents=e$});var Lo=v(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});qc.verifyLoadState=Lc;qc.Frame=void 0;var t$=G(),r$=Ze(),i$=j1(),rn=Mc(),Lt=si(),nA=c$(x("fs")),sA=a$(No()),n$=x("events"),s$=es(),qh=Lr(),o$=iA(),oA=oi();function aA(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(aA=function(i){return i?t:e})(r)}function a$(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=aA(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function c$(r){return r&&r.__esModule?r:{default:r}}var Dc=class extends r$.ChannelOwner{static from(e){return e._object}static fromNullable(e){return e?Dc.from(e):null}constructor(e,t,i,n){super(e,t,i,n);this._eventEmitter=void 0,this._loadStates=void 0,this._parentFrame=null,this._url="",this._name="",this._detached=!1,this._childFrames=new Set,this._page=void 0,this._eventEmitter=new n$.EventEmitter,this._eventEmitter.setMaxListeners(0),this._parentFrame=Dc.fromNullable(n.parentFrame),this._parentFrame&&this._parentFrame._childFrames.add(this),this._name=n.name,this._url=n.url,this._loadStates=new Set(n.loadStates),this._channel.on("loadstate",s=>{s.add&&(this._loadStates.add(s.add),this._eventEmitter.emit("loadstate",s.add)),s.remove&&this._loadStates.delete(s.remove)}),this._channel.on("navigated",s=>{this._url=s.url,this._name=s.name,this._eventEmitter.emit("navigated",s),!s.error&&this._page&&this._page.emit(qh.Events.Page.FrameNavigated,this)})}page(){return this._page}goto(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){let s=Lc("waitUntil",t.waitUntil===void 0?"load":t.waitUntil);return sA.Response.fromNullable((yield n.goto(R(y({url:e},t),{waitUntil:s}))).response)}))})}_setupNavigationWaiter(e,t){let i=new s$.Waiter(e,"");this._page.isClosed()&&i.rejectImmediately(new Error("Navigation failed because page was closed!")),i.rejectOnEvent(this._page,qh.Events.Page.Close,new Error("Navigation failed because page was closed!")),i.rejectOnEvent(this._page,qh.Events.Page.Crash,new Error("Navigation failed because page crashed!")),i.rejectOnEvent(this._page,qh.Events.Page.FrameDetached,new Error("Navigating frame was detached!"),s=>s===this);let n=this._page._timeoutSettings.navigationTimeout(t);return i.rejectOnTimeout(n,`Timeout ${n}ms exceeded.`),i}waitForNavigation(){return c(this,arguments,function*(e={}){return this._page._wrapApiCall(t=>c(this,null,function*(){let i=Lc("waitUntil",e.waitUntil===void 0?"load":e.waitUntil),n=this._setupNavigationWaiter(t,e),s=typeof e.url=="string"?` to "${e.url}"`:"";n.log(`waiting for navigation${s} until "${i}"`);let o=yield n.waitForEvent(this._eventEmitter,"navigated",d=>{var h;return d.error?!0:(n.log(`  navigated to "${d.url}"`),(0,oA.urlMatches)((h=this._page)===null||h===void 0?void 0:h.context()._options.baseURL,d.url,e.url))});if(o.error){let d=new Error(o.error);d.stack="",yield n.waitForPromise(Promise.reject(d))}this._loadStates.has(i)||(yield n.waitForEvent(this._eventEmitter,"loadstate",d=>(n.log(`  "${d}" event fired`),d===i)));let l=o.newDocument?sA.Request.fromNullable(o.newDocument.request):null,u=l?yield n.waitForPromise(l._finalRequest()._internalResponse()):null;return n.dispose(),u}))})}waitForLoadState(){return c(this,arguments,function*(e="load",t={}){if(e=Lc("state",e),!this._loadStates.has(e))return this._page._wrapApiCall(i=>c(this,null,function*(){let n=this._setupNavigationWaiter(i,t);yield n.waitForEvent(this._eventEmitter,"loadstate",s=>(n.log(`  "${s}" event fired`),s===e)),n.dispose()}))})}waitForURL(i){return c(this,arguments,function*(e,t={}){var n;if((0,oA.urlMatches)((n=this._page)===null||n===void 0?void 0:n.context()._options.baseURL,this.url(),e))return yield this.waitForLoadState(t==null?void 0:t.waitUntil,t);yield this.waitForNavigation(y({url:e},t))})}frameElement(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return rn.ElementHandle.from((yield e.frameElement()).element)}))})}evaluateHandle(i,n){return c(this,arguments,function*(e,t){return(0,Lt.assertMaxArguments)(arguments.length,2),this._wrapApiCall(s=>c(this,null,function*(){let o=yield s.evaluateExpressionHandle({expression:String(e),isFunction:typeof e=="function",arg:(0,Lt.serializeArgument)(t)});return Lt.JSHandle.from(o.handle)}))})}evaluate(i,n){return c(this,arguments,function*(e,t){return(0,Lt.assertMaxArguments)(arguments.length,2),this._wrapApiCall(s=>c(this,null,function*(){let o=yield s.evaluateExpression({expression:String(e),isFunction:typeof e=="function",arg:(0,Lt.serializeArgument)(t)});return(0,Lt.parseResult)(o.value)}))})}$(e,t){return c(this,null,function*(){return this._wrapApiCall(i=>c(this,null,function*(){let n=yield i.querySelector(y({selector:e},t));return rn.ElementHandle.fromNullable(n.element)}))})}waitForSelector(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){if(t.visibility)throw new Error("options.visibility is not supported, did you mean options.state?");if(t.waitFor&&t.waitFor!=="visible")throw new Error("options.waitFor is not supported, did you mean options.state?");let s=yield n.waitForSelector(y({selector:e},t));return rn.ElementHandle.fromNullable(s.element)}))})}dispatchEvent(s,o,l){return c(this,arguments,function*(e,t,i,n={}){return this._wrapApiCall(u=>c(this,null,function*(){yield u.dispatchEvent(y({selector:e,type:t,eventInit:(0,Lt.serializeArgument)(i)},n))}))})}$eval(n,s,o){return c(this,arguments,function*(e,t,i){return(0,Lt.assertMaxArguments)(arguments.length,3),this._wrapApiCall(l=>c(this,null,function*(){let u=yield l.evalOnSelector({selector:e,expression:String(t),isFunction:typeof t=="function",arg:(0,Lt.serializeArgument)(i)});return(0,Lt.parseResult)(u.value)}))})}$$eval(n,s,o){return c(this,arguments,function*(e,t,i){return(0,Lt.assertMaxArguments)(arguments.length,3),this._wrapApiCall(l=>c(this,null,function*(){let u=yield l.evalOnSelectorAll({selector:e,expression:String(t),isFunction:typeof t=="function",arg:(0,Lt.serializeArgument)(i)});return(0,Lt.parseResult)(u.value)}))})}$$(e){return c(this,null,function*(){return this._wrapApiCall(t=>c(this,null,function*(){return(yield t.querySelectorAll({selector:e})).elements.map(n=>rn.ElementHandle.from(n))}))})}content(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return(yield e.content()).value}))})}setContent(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){let s=Lc("waitUntil",t.waitUntil===void 0?"load":t.waitUntil);yield n.setContent(R(y({html:e},t),{waitUntil:s}))}))})}name(){return this._name||""}url(){return this._url}parentFrame(){return this._parentFrame}childFrames(){return Array.from(this._childFrames)}isDetached(){return this._detached}addScriptTag(){return c(this,arguments,function*(e={}){return this._wrapApiCall(t=>c(this,null,function*(){let i=y({},e);return i.path&&(i.content=(yield nA.default.promises.readFile(i.path)).toString(),i.content+="//# sourceURL="+i.path.replace(/\n/g,"")),rn.ElementHandle.from((yield t.addScriptTag(y({},i))).element)}))})}addStyleTag(){return c(this,arguments,function*(e={}){return this._wrapApiCall(t=>c(this,null,function*(){let i=y({},e);return i.path&&(i.content=(yield nA.default.promises.readFile(i.path)).toString(),i.content+="/*# sourceURL="+i.path.replace(/\n/g,"")+"*/"),rn.ElementHandle.from((yield t.addStyleTag(y({},i))).element)}))})}click(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){return yield n.click(y({selector:e},t))}))})}dblclick(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){return yield n.dblclick(y({selector:e},t))}))})}dragAndDrop(n,s){return c(this,arguments,function*(e,t,i={}){return this._wrapApiCall(o=>c(this,null,function*(){return yield o.dragAndDrop(y({source:e,target:t},i))}))})}tap(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){return yield n.tap(y({selector:e},t))}))})}fill(n,s){return c(this,arguments,function*(e,t,i={}){return this._wrapApiCall(o=>c(this,null,function*(){return yield o.fill(y({selector:e,value:t},i))}))})}locator(e){return new i$.Locator(this,e)}focus(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){yield n.focus(y({selector:e},t))}))})}textContent(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){let s=(yield n.textContent(y({selector:e},t))).value;return s===void 0?null:s}))})}innerText(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){return(yield n.innerText(y({selector:e},t))).value}))})}innerHTML(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){return(yield n.innerHTML(y({selector:e},t))).value}))})}getAttribute(n,s){return c(this,arguments,function*(e,t,i={}){return this._wrapApiCall(o=>c(this,null,function*(){let l=(yield o.getAttribute(y({selector:e,name:t},i))).value;return l===void 0?null:l}))})}inputValue(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){return(yield n.inputValue(y({selector:e},t))).value}))})}isChecked(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){return(yield n.isChecked(y({selector:e},t))).value}))})}isDisabled(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){return(yield n.isDisabled(y({selector:e},t))).value}))})}isEditable(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){return(yield n.isEditable(y({selector:e},t))).value}))})}isEnabled(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){return(yield n.isEnabled(y({selector:e},t))).value}))})}isHidden(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){return(yield n.isHidden(y({selector:e},t))).value}))})}isVisible(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){return(yield n.isVisible(y({selector:e},t))).value}))})}hover(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){yield n.hover(y({selector:e},t))}))})}selectOption(n,s){return c(this,arguments,function*(e,t,i={}){return this._wrapApiCall(o=>c(this,null,function*(){return(yield o.selectOption(y(y({selector:e},(0,rn.convertSelectOptionValues)(t)),i))).values}))})}setInputFiles(n,s){return c(this,arguments,function*(e,t,i={}){return this._wrapApiCall(o=>c(this,null,function*(){yield o.setInputFiles(y({selector:e,files:yield(0,rn.convertInputFiles)(t)},i))}))})}type(n,s){return c(this,arguments,function*(e,t,i={}){return this._wrapApiCall(o=>c(this,null,function*(){yield o.type(y({selector:e,text:t},i))}))})}press(n,s){return c(this,arguments,function*(e,t,i={}){return this._wrapApiCall(o=>c(this,null,function*(){yield o.press(y({selector:e,key:t},i))}))})}check(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){yield n.check(y({selector:e},t))}))})}uncheck(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){yield n.uncheck(y({selector:e},t))}))})}setChecked(e,t,i){return c(this,null,function*(){t?yield this.check(e,i):yield this.uncheck(e,i)})}waitForTimeout(e){return c(this,null,function*(){return this._wrapApiCall(t=>c(this,null,function*(){yield t.waitForTimeout({timeout:e})}))})}waitForFunction(n,s){return c(this,arguments,function*(e,t,i={}){return this._wrapApiCall(o=>c(this,null,function*(){typeof i.polling=="string"&&(0,t$.assert)(i.polling==="raf","Unknown polling option: "+i.polling);let l=yield o.waitForFunction(R(y({},i),{pollingInterval:i.polling==="raf"?void 0:i.polling,expression:String(e),isFunction:typeof e=="function",arg:(0,Lt.serializeArgument)(t)}));return Lt.JSHandle.from(l.handle)}))})}title(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return(yield e.title()).value}))})}};qc.Frame=Dc;function Lc(r,e){if(e==="networkidle0"&&(e="networkidle"),!o$.kLifecycleEvents.has(e))throw new Error(`${r}: expected one of (load|domcontentloaded|networkidle)`);return e}});var Mc=v(is=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});is.convertSelectOptionValues=hA;is.convertInputFiles=pA;is.determineScreenshotType=fA;is.ElementHandle=void 0;var cA=Lo(),qo=si(),lA=dA(x("fs")),l$=d$(bi()),u$=dA(x("path")),zg=G();function uA(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(uA=function(i){return i?t:e})(r)}function d$(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=uA(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function dA(r){return r&&r.__esModule?r:{default:r}}var nn=class extends qo.JSHandle{static from(e){return e._object}static fromNullable(e){return e?nn.from(e):null}constructor(e,t,i,n){super(e,t,i,n);this._elementChannel=void 0,this._elementChannel=this._channel}asElement(){return this}ownerFrame(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return cA.Frame.fromNullable((yield e.ownerFrame()).frame)}))})}contentFrame(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return cA.Frame.fromNullable((yield e.contentFrame()).frame)}))})}getAttribute(e){return c(this,null,function*(){return this._wrapApiCall(t=>c(this,null,function*(){let i=(yield t.getAttribute({name:e})).value;return i===void 0?null:i}))})}inputValue(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return(yield e.inputValue()).value}))})}textContent(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){let t=(yield e.textContent()).value;return t===void 0?null:t}))})}innerText(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return(yield e.innerText()).value}))})}innerHTML(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return(yield e.innerHTML()).value}))})}isChecked(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return(yield e.isChecked()).value}))})}isDisabled(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return(yield e.isDisabled()).value}))})}isEditable(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return(yield e.isEditable()).value}))})}isEnabled(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return(yield e.isEnabled()).value}))})}isHidden(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return(yield e.isHidden()).value}))})}isVisible(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return(yield e.isVisible()).value}))})}dispatchEvent(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){yield n.dispatchEvent({type:e,eventInit:(0,qo.serializeArgument)(t)})}))})}scrollIntoViewIfNeeded(){return c(this,arguments,function*(e={}){return this._wrapApiCall(t=>c(this,null,function*(){yield t.scrollIntoViewIfNeeded(e)}))})}hover(){return c(this,arguments,function*(e={}){return this._wrapApiCall(t=>c(this,null,function*(){yield t.hover(e)}))})}click(){return c(this,arguments,function*(e={}){return this._wrapApiCall(t=>c(this,null,function*(){return yield t.click(e)}))})}dblclick(){return c(this,arguments,function*(e={}){return this._wrapApiCall(t=>c(this,null,function*(){return yield t.dblclick(e)}))})}tap(){return c(this,arguments,function*(e={}){return this._wrapApiCall(t=>c(this,null,function*(){return yield t.tap(e)}))})}selectOption(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){return(yield n.selectOption(y(y({},hA(e)),t))).values}))})}fill(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){return yield n.fill(y({value:e},t))}))})}selectText(){return c(this,arguments,function*(e={}){return this._wrapApiCall(t=>c(this,null,function*(){yield t.selectText(e)}))})}setInputFiles(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){yield n.setInputFiles(y({files:yield pA(e)},t))}))})}focus(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){yield e.focus()}))})}type(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){yield n.type(y({text:e},t))}))})}press(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){yield n.press(y({key:e},t))}))})}check(){return c(this,arguments,function*(e={}){return this._wrapApiCall(t=>c(this,null,function*(){return yield t.check(e)}))})}uncheck(){return c(this,arguments,function*(e={}){return this._wrapApiCall(t=>c(this,null,function*(){return yield t.uncheck(e)}))})}setChecked(e,t){return c(this,null,function*(){e?yield this.check(t):yield this.uncheck(t)})}boundingBox(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){let t=(yield e.boundingBox()).value;return t===void 0?null:t}))})}screenshot(){return c(this,arguments,function*(e={}){return this._wrapApiCall(t=>c(this,null,function*(){let i=y({},e);i.type||(i.type=fA(e));let n=yield t.screenshot(i),s=Buffer.from(n.binary,"base64");return e.path&&(yield(0,zg.mkdirIfNeeded)(e.path),yield lA.default.promises.writeFile(e.path,s)),s}))})}$(e){return c(this,null,function*(){return this._wrapApiCall(t=>c(this,null,function*(){return nn.fromNullable((yield t.querySelector({selector:e})).element)}))})}$$(e){return c(this,null,function*(){return this._wrapApiCall(t=>c(this,null,function*(){return(yield t.querySelectorAll({selector:e})).elements.map(n=>nn.from(n))}))})}$eval(e,t,i){return c(this,null,function*(){return this._wrapApiCall(n=>c(this,null,function*(){let s=yield n.evalOnSelector({selector:e,expression:String(t),isFunction:typeof t=="function",arg:(0,qo.serializeArgument)(i)});return(0,qo.parseResult)(s.value)}))})}$$eval(e,t,i){return c(this,null,function*(){return this._wrapApiCall(n=>c(this,null,function*(){let s=yield n.evalOnSelectorAll({selector:e,expression:String(t),isFunction:typeof t=="function",arg:(0,qo.serializeArgument)(i)});return(0,qo.parseResult)(s.value)}))})}waitForElementState(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){return yield n.waitForElementState(y({state:e},t))}))})}waitForSelector(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){let s=yield n.waitForSelector(y({selector:e},t));return nn.fromNullable(s.element)}))})}};is.ElementHandle=nn;function hA(r){if(r===null)return{};if(Array.isArray(r)||(r=[r]),!r.length)return{};for(let e=0;e<r.length;e++)(0,zg.assert)(r[e]!==null,`options[${e}]: expected object, got null`);return r[0]instanceof nn?{elements:r.map(e=>e._elementChannel)}:(0,zg.isString)(r[0])?{options:r.map(e=>({value:e}))}:{options:r}}function pA(r){return c(this,null,function*(){let e=Array.isArray(r)?r:[r];return yield Promise.all(e.map(i=>c(this,null,function*(){return typeof i=="string"?{name:u$.default.basename(i),buffer:(yield lA.default.promises.readFile(i)).toString("base64")}:{name:i.name,mimeType:i.mimeType,buffer:i.buffer.toString("base64")}})))})}function fA(r){if(r.path){let e=l$.getType(r.path);if(e==="image/png")return"png";if(e==="image/jpeg")return"jpeg";throw new Error(`path: unsupported mime type "${e}"`)}return r.type}});var Hh=v(Bh=>{"use strict";Object.defineProperty(Bh,"__esModule",{value:!0});Bh.Worker=void 0;var h$=Lr(),p$=Ze(),Bo=si(),mA=class extends p$.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n);this._page=void 0,this._context=void 0,this._channel.on("close",()=>{this._page&&this._page._workers.delete(this),this._context&&this._context._serviceWorkers.delete(this),this.emit(h$.Events.Worker.Close,this)})}url(){return this._initializer.url}evaluate(i,n){return c(this,arguments,function*(e,t){return(0,Bo.assertMaxArguments)(arguments.length,2),this._wrapApiCall(s=>c(this,null,function*(){let o=yield s.evaluateExpression({expression:String(e),isFunction:typeof e=="function",arg:(0,Bo.serializeArgument)(t)});return(0,Bo.parseResult)(o.value)}))})}evaluateHandle(i,n){return c(this,arguments,function*(e,t){return(0,Bo.assertMaxArguments)(arguments.length,2),this._wrapApiCall(s=>c(this,null,function*(){let o=yield s.evaluateExpressionHandle({expression:String(e),isFunction:typeof e=="function",arg:(0,Bo.serializeArgument)(t)});return Bo.JSHandle.from(o.handle)}))})}};Bh.Worker=mA});var vA=v(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.Touchscreen=sn.Mouse=sn.Keyboard=void 0;var _A=class{constructor(e){this._page=void 0,this._page=e}down(e){return c(this,null,function*(){yield this._page._wrapApiCall(t=>c(this,null,function*(){yield t.keyboardDown({key:e})}))})}up(e){return c(this,null,function*(){yield this._page._wrapApiCall(t=>c(this,null,function*(){yield t.keyboardUp({key:e})}))})}insertText(e){return c(this,null,function*(){yield this._page._wrapApiCall(t=>c(this,null,function*(){yield t.keyboardInsertText({text:e})}))})}type(i){return c(this,arguments,function*(e,t={}){yield this._page._wrapApiCall(n=>c(this,null,function*(){yield n.keyboardType(y({text:e},t))}))})}press(i){return c(this,arguments,function*(e,t={}){yield this._page._wrapApiCall(n=>c(this,null,function*(){yield n.keyboardPress(y({key:e},t))}))})}};sn.Keyboard=_A;var gA=class{constructor(e){this._page=void 0,this._page=e}move(n,s){return c(this,arguments,function*(e,t,i={}){yield this._page._wrapApiCall(o=>c(this,null,function*(){yield o.mouseMove(y({x:e,y:t},i))}))})}down(){return c(this,arguments,function*(e={}){yield this._page._wrapApiCall(t=>c(this,null,function*(){yield t.mouseDown(y({},e))}))})}up(){return c(this,arguments,function*(e={}){yield this._page._wrapApiCall(t=>c(this,null,function*(){yield t.mouseUp(e)}))})}click(n,s){return c(this,arguments,function*(e,t,i={}){yield this._page._wrapApiCall(o=>c(this,null,function*(){yield o.mouseClick(y({x:e,y:t},i))}))})}dblclick(n,s){return c(this,arguments,function*(e,t,i={}){yield this.click(e,t,R(y({},i),{clickCount:2}))})}wheel(e,t){return c(this,null,function*(){yield this._page._wrapApiCall(i=>c(this,null,function*(){yield i.mouseWheel({deltaX:e,deltaY:t})}))})}};sn.Mouse=gA;var wA=class{constructor(e){this._page=void 0,this._page=e}tap(e,t){return c(this,null,function*(){yield this._page._wrapApiCall(i=>c(this,null,function*(){yield i.touchscreenTap({x:e,y:t})}))})}};sn.Touchscreen=wA});var bA=v(jh=>{"use strict";Object.defineProperty(jh,"__esModule",{value:!0});jh.FileChooser=void 0;var yA=class{constructor(e,t,i){this._page=void 0,this._elementHandle=void 0,this._isMultiple=void 0,this._page=e,this._elementHandle=t,this._isMultiple=i}element(){return this._elementHandle}isMultiple(){return this._isMultiple}page(){return this._page}setFiles(e,t){return c(this,null,function*(){return this._page._wrapApiCall(()=>c(this,null,function*(){return this._elementHandle.setInputFiles(e,t)}))})}};jh.FileChooser=yA});var SA=v(Wh=>{"use strict";Object.defineProperty(Wh,"__esModule",{value:!0});Wh.Coverage=void 0;var xA=class{constructor(e){this._channel=void 0,this._channel=e}startJSCoverage(){return c(this,arguments,function*(e={}){yield this._channel.startJSCoverage(e)})}stopJSCoverage(){return c(this,null,function*(){return(yield this._channel.stopJSCoverage()).entries})}startCSSCoverage(){return c(this,arguments,function*(e={}){yield this._channel.startCSSCoverage(e)})}stopCSSCoverage(){return c(this,null,function*(){return(yield this._channel.stopCSSCoverage()).entries})}};Wh.Coverage=xA});var CA=v(Uh=>{"use strict";Object.defineProperty(Uh,"__esModule",{value:!0});Uh.Video=void 0;var EA=class{constructor(e,t){this._artifact=null,this._artifactCallback=i=>{},this._isRemote=!1,this._isRemote=t.isRemote(),this._artifact=Promise.race([new Promise(i=>this._artifactCallback=i),e._closedOrCrashedPromise.then(()=>null)])}_artifactReady(e){this._artifactCallback(e)}path(){return c(this,null,function*(){if(this._isRemote)throw new Error("Path is not available when connecting remotely. Use saveAs() to save a local copy.");let e=yield this._artifact;if(!e)throw new Error("Page did not produce any video frames");return e._initializer.absolutePath})}saveAs(e){return c(this,null,function*(){let t=yield this._artifact;if(!t)throw new Error("Page did not produce any video frames");return t.saveAs(e)})}delete(){return c(this,null,function*(){let e=yield this._artifact;e&&(yield e.delete())})}};Uh.Video=EA});var Vg=v($h=>{"use strict";Object.defineProperty($h,"__esModule",{value:!0});$h.Stream=void 0;var f$=x("stream"),m$=Ze(),kA=class extends m$.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n)}stream(){return new OA(this._channel)}};$h.Stream=kA;var OA=class extends f$.Readable{constructor(e){super();this._channel=void 0,this._channel=e}_read(e){return c(this,null,function*(){let t=yield this._channel.read({size:e});t.binary?this.push(Buffer.from(t.binary,"base64")):this.push(null)})}_destroy(e,t){this._channel.close().catch(i=>null),super._destroy(e,t)}}});var Bc=v(zh=>{"use strict";Object.defineProperty(zh,"__esModule",{value:!0});zh.Artifact=void 0;var _$=v$(x("fs")),PA=Vg(),g$=G(),w$=Ze();function TA(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(TA=function(i){return i?t:e})(r)}function v$(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=TA(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var AA=class extends w$.ChannelOwner{static from(e){return e._object}pathAfterFinished(){return c(this,null,function*(){if(this._connection.isRemote())throw new Error("Path is not available when connecting remotely. Use saveAs() to save a local copy.");return this._wrapApiCall(e=>c(this,null,function*(){return(yield e.pathAfterFinished()).value||null}))})}saveAs(e){return c(this,null,function*(){return this._wrapApiCall(t=>c(this,null,function*(){if(!this._connection.isRemote()){yield t.saveAs({path:e});return}let i=yield t.saveAsStream(),n=PA.Stream.from(i.stream);yield(0,g$.mkdirIfNeeded)(e),yield new Promise((s,o)=>{n.stream().pipe(_$.createWriteStream(e)).on("finish",s).on("error",o)})}))})}failure(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return(yield e.failure()).error||null}))})}createReadStream(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){let t=yield e.stream();return t.stream?PA.Stream.from(t.stream).stream():null}))})}cancel(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return e.cancel()}))})}delete(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return e.delete()}))})}};zh.Artifact=AA});var Xg=v(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});Ho.BindingCall=Ho.Page=void 0;var $e=Lr(),Sr=G(),y$=er(),IA=li(),b$=O1(),MA=Ze(),x$=Bg(),S$=Hg(),E$=D1(),FA=Mc(),C$=Hh(),ns=Lo(),Gg=vA(),ss=si(),on=No(),k$=bA(),RA=x("buffer"),O$=SA(),P$=es(),Kg=DA(x("fs")),T$=DA(x("path")),Vh=oi(),A$=qt(),I$=CA(),NA=Bc();function DA(r){return r&&r.__esModule?r:{default:r}}var Hc=class extends MA.ChannelOwner{static from(e){return e._object}static fromNullable(e){return e?Hc.from(e):null}constructor(e,t,i,n){super(e,t,i,n);this._browserContext=void 0,this._ownedContext=void 0,this._mainFrame=void 0,this._frames=new Set,this._workers=new Set,this._closed=!1,this._closedOrCrashedPromise=void 0,this._viewportSize=void 0,this._routes=[],this.accessibility=void 0,this.coverage=void 0,this.keyboard=void 0,this.mouse=void 0,this.request=void 0,this.touchscreen=void 0,this._bindings=new Map,this._timeoutSettings=void 0,this._video=null,this._opener=void 0,this._browserContext=e,this._timeoutSettings=new y$.TimeoutSettings(this._browserContext._timeoutSettings),this.accessibility=new b$.Accessibility(this._channel),this.keyboard=new Gg.Keyboard(this),this.mouse=new Gg.Mouse(this),this.request=this._browserContext.request,this.touchscreen=new Gg.Touchscreen(this),this._mainFrame=ns.Frame.from(n.mainFrame),this._mainFrame._page=this,this._frames.add(this._mainFrame),this._viewportSize=n.viewportSize||null,this._closed=n.isClosed,this._opener=Hc.fromNullable(n.opener),this._channel.on("bindingCall",({binding:s})=>this._onBinding(Jg.from(s))),this._channel.on("close",()=>this._onClose()),this._channel.on("console",({message:s})=>this.emit($e.Events.Page.Console,x$.ConsoleMessage.from(s))),this._channel.on("crash",()=>this._onCrash()),this._channel.on("dialog",({dialog:s})=>{let o=S$.Dialog.from(s);this.emit($e.Events.Page.Dialog,o)||(o.type()==="beforeunload"?s.accept({}).catch(()=>{}):s.dismiss().catch(()=>{}))}),this._channel.on("domcontentloaded",()=>this.emit($e.Events.Page.DOMContentLoaded,this)),this._channel.on("download",({url:s,suggestedFilename:o,artifact:l})=>{let u=NA.Artifact.from(l);this.emit($e.Events.Page.Download,new E$.Download(this,s,o,u))}),this._channel.on("fileChooser",({element:s,isMultiple:o})=>this.emit($e.Events.Page.FileChooser,new k$.FileChooser(this,FA.ElementHandle.from(s),o))),this._channel.on("frameAttached",({frame:s})=>this._onFrameAttached(ns.Frame.from(s))),this._channel.on("frameDetached",({frame:s})=>this._onFrameDetached(ns.Frame.from(s))),this._channel.on("load",()=>this.emit($e.Events.Page.Load,this)),this._channel.on("pageError",({error:s})=>this.emit($e.Events.Page.PageError,(0,IA.parseError)(s))),this._channel.on("route",({route:s,request:o})=>this._onRoute(on.Route.from(s),on.Request.from(o))),this._channel.on("video",({artifact:s})=>{let o=NA.Artifact.from(s);this._forceVideo()._artifactReady(o)}),this._channel.on("webSocket",({webSocket:s})=>this.emit($e.Events.Page.WebSocket,on.WebSocket.from(s))),this._channel.on("worker",({worker:s})=>this._onWorker(C$.Worker.from(s))),this.coverage=new O$.Coverage(this._channel),this._closedOrCrashedPromise=Promise.race([new Promise(s=>this.once($e.Events.Page.Close,s)),new Promise(s=>this.once($e.Events.Page.Crash,s))])}_onFrameAttached(e){e._page=this,this._frames.add(e),e._parentFrame&&e._parentFrame._childFrames.add(e),this.emit($e.Events.Page.FrameAttached,e)}_onFrameDetached(e){this._frames.delete(e),e._detached=!0,e._parentFrame&&e._parentFrame._childFrames.delete(e),this.emit($e.Events.Page.FrameDetached,e)}_onRoute(e,t){let i=!1;for(let n of this._routes)if(n.matches(t.url())){n.handle(e,t),i=!0;break}i?this._routes=this._routes.filter(n=>!n.expired()):this._browserContext._onRoute(e,t)}_onBinding(e){return c(this,null,function*(){let t=this._bindings.get(e._initializer.name);if(t){yield e.call(t);return}yield this._browserContext._onBinding(e)})}_onWorker(e){this._workers.add(e),e._page=this,this.emit($e.Events.Page.Worker,e)}_onClose(){this._closed=!0,this._browserContext._pages.delete(this),this._browserContext._backgroundPages.delete(this),this.emit($e.Events.Page.Close,this)}_onCrash(){this.emit($e.Events.Page.Crash,this)}context(){return this._browserContext}opener(){return c(this,null,function*(){return!this._opener||this._opener.isClosed()?null:this._opener})}mainFrame(){return this._mainFrame}frame(e){let t=(0,Sr.isString)(e)?e:e.name,i=(0,Sr.isObject)(e)?e.url:void 0;return(0,Sr.assert)(t||i,"Either name or url matcher should be specified"),this.frames().find(n=>t?n.name()===t:(0,Vh.urlMatches)(this._browserContext._options.baseURL,n.url(),i))||null}frames(){return[...this._frames]}setDefaultNavigationTimeout(e){this._timeoutSettings.setDefaultNavigationTimeout(e),this._channel.setDefaultNavigationTimeoutNoReply({timeout:e})}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e),this._channel.setDefaultTimeoutNoReply({timeout:e})}_forceVideo(){return this._video||(this._video=new I$.Video(this,this._connection)),this._video}video(){return this._browserContext._options.recordVideo?this._forceVideo():null}$(e,t){return c(this,null,function*(){return this._mainFrame.$(e,t)})}waitForSelector(e,t){return c(this,null,function*(){return this._mainFrame.waitForSelector(e,t)})}dispatchEvent(e,t,i,n){return c(this,null,function*(){return this._mainFrame.dispatchEvent(e,t,i,n)})}evaluateHandle(i,n){return c(this,arguments,function*(e,t){return(0,ss.assertMaxArguments)(arguments.length,2),this._mainFrame.evaluateHandle(e,t)})}$eval(n,s,o){return c(this,arguments,function*(e,t,i){return(0,ss.assertMaxArguments)(arguments.length,3),this._mainFrame.$eval(e,t,i)})}$$eval(n,s,o){return c(this,arguments,function*(e,t,i){return(0,ss.assertMaxArguments)(arguments.length,3),this._mainFrame.$$eval(e,t,i)})}$$(e){return c(this,null,function*(){return this._mainFrame.$$(e)})}addScriptTag(){return c(this,arguments,function*(e={}){return this._mainFrame.addScriptTag(e)})}addStyleTag(){return c(this,arguments,function*(e={}){return this._mainFrame.addStyleTag(e)})}exposeFunction(e,t){return c(this,null,function*(){return this._wrapApiCall(i=>c(this,null,function*(){yield i.exposeBinding({name:e});let n=(s,...o)=>t(...o);this._bindings.set(e,n)}))})}exposeBinding(n,s){return c(this,arguments,function*(e,t,i={}){return this._wrapApiCall(o=>c(this,null,function*(){yield o.exposeBinding({name:e,needsHandle:i.handle}),this._bindings.set(e,t)}))})}setExtraHTTPHeaders(e){return c(this,null,function*(){return this._wrapApiCall(t=>c(this,null,function*(){(0,on.validateHeaders)(e),yield t.setExtraHTTPHeaders({headers:(0,Sr.headersObjectToArray)(e)})}))})}url(){return this._mainFrame.url()}content(){return c(this,null,function*(){return this._mainFrame.content()})}setContent(e,t){return c(this,null,function*(){return this._mainFrame.setContent(e,t)})}goto(e,t){return c(this,null,function*(){return this._mainFrame.goto(e,t)})}reload(){return c(this,arguments,function*(e={}){return this._wrapApiCall(t=>c(this,null,function*(){let i=(0,ns.verifyLoadState)("waitUntil",e.waitUntil===void 0?"load":e.waitUntil);return on.Response.fromNullable((yield t.reload(R(y({},e),{waitUntil:i}))).response)}))})}waitForLoadState(e,t){return c(this,null,function*(){return this._mainFrame.waitForLoadState(e,t)})}waitForNavigation(e){return c(this,null,function*(){return this._mainFrame.waitForNavigation(e)})}waitForURL(e,t){return c(this,null,function*(){return this._mainFrame.waitForURL(e,t)})}waitForRequest(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){let s=u=>(0,Sr.isString)(e)||(0,Sr.isRegExp)(e)?(0,Vh.urlMatches)(this._browserContext._options.baseURL,u.url(),e):e(u),o=qA(e),l=o?`waiting for request ${o}`:void 0;return this._waitForEvent(n,$e.Events.Page.Request,{predicate:s,timeout:t.timeout},l)}))})}waitForResponse(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){let s=u=>(0,Sr.isString)(e)||(0,Sr.isRegExp)(e)?(0,Vh.urlMatches)(this._browserContext._options.baseURL,u.url(),e):e(u),o=qA(e),l=o?`waiting for response ${o}`:void 0;return this._waitForEvent(n,$e.Events.Page.Response,{predicate:s,timeout:t.timeout},l)}))})}waitForEvent(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){return this._waitForEvent(n,e,t,`waiting for event "${e}"`)}))})}_waitForEvent(e,t,i,n){return c(this,null,function*(){let s=this._timeoutSettings.timeout(typeof i=="function"?{}:i),o=typeof i=="function"?i:i.predicate,l=P$.Waiter.createForEvent(e,t);n&&l.log(n),l.rejectOnTimeout(s,`Timeout while waiting for event "${t}"`),t!==$e.Events.Page.Crash&&l.rejectOnEvent(this,$e.Events.Page.Crash,new Error("Page crashed")),t!==$e.Events.Page.Close&&l.rejectOnEvent(this,$e.Events.Page.Close,new Error("Page closed"));let u=yield l.waitForEvent(this,t,o);return l.dispose(),u})}goBack(){return c(this,arguments,function*(e={}){return this._wrapApiCall(t=>c(this,null,function*(){let i=(0,ns.verifyLoadState)("waitUntil",e.waitUntil===void 0?"load":e.waitUntil);return on.Response.fromNullable((yield t.goBack(R(y({},e),{waitUntil:i}))).response)}))})}goForward(){return c(this,arguments,function*(e={}){return this._wrapApiCall(t=>c(this,null,function*(){let i=(0,ns.verifyLoadState)("waitUntil",e.waitUntil===void 0?"load":e.waitUntil);return on.Response.fromNullable((yield t.goForward(R(y({},e),{waitUntil:i}))).response)}))})}emulateMedia(){return c(this,arguments,function*(e={}){return this._wrapApiCall(t=>c(this,null,function*(){yield t.emulateMedia({media:e.media===null?"null":e.media,colorScheme:e.colorScheme===null?"null":e.colorScheme,reducedMotion:e.reducedMotion===null?"null":e.reducedMotion,forcedColors:e.forcedColors===null?"null":e.forcedColors})}))})}setViewportSize(e){return c(this,null,function*(){return this._wrapApiCall(t=>c(this,null,function*(){this._viewportSize=e,yield t.setViewportSize({viewportSize:e})}))})}viewportSize(){return this._viewportSize}evaluate(i,n){return c(this,arguments,function*(e,t){return(0,ss.assertMaxArguments)(arguments.length,2),this._mainFrame.evaluate(e,t)})}addInitScript(e,t){return c(this,null,function*(){return this._wrapApiCall(i=>c(this,null,function*(){let n=yield(0,Vh.evaluationScript)(e,t);yield i.addInitScript({source:n})}))})}route(n,s){return c(this,arguments,function*(e,t,i={}){return this._wrapApiCall(o=>c(this,null,function*(){this._routes.unshift(new on.RouteHandler(this._browserContext._options.baseURL,e,t,i.times)),this._routes.length===1&&(yield o.setNetworkInterceptionEnabled({enabled:!0}))}))})}unroute(e,t){return c(this,null,function*(){return this._wrapApiCall(i=>c(this,null,function*(){this._routes=this._routes.filter(n=>n.url!==e||t&&n.handler!==t),this._routes.length===0&&(yield i.setNetworkInterceptionEnabled({enabled:!1}))}))})}screenshot(){return c(this,arguments,function*(e={}){return this._wrapApiCall(t=>c(this,null,function*(){let i=y({},e);i.type||(i.type=(0,FA.determineScreenshotType)(e));let n=yield t.screenshot(i),s=RA.Buffer.from(n.binary,"base64");return e.path&&(yield(0,Sr.mkdirIfNeeded)(e.path),yield Kg.default.promises.writeFile(e.path,s)),s}))})}title(){return c(this,null,function*(){return this._mainFrame.title()})}bringToFront(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){yield e.bringToFront()}))})}close(){return c(this,arguments,function*(e={runBeforeUnload:void 0}){try{yield this._wrapApiCall(t=>c(this,null,function*(){this._ownedContext?yield this._ownedContext.close():yield t.close(e)}))}catch(t){if((0,A$.isSafeCloseError)(t))return;throw t}})}isClosed(){return this._closed}click(e,t){return c(this,null,function*(){return this._mainFrame.click(e,t)})}dragAndDrop(e,t,i){return c(this,null,function*(){return this._mainFrame.dragAndDrop(e,t,i)})}dblclick(e,t){return c(this,null,function*(){return this._mainFrame.dblclick(e,t)})}tap(e,t){return c(this,null,function*(){return this._mainFrame.tap(e,t)})}fill(e,t,i){return c(this,null,function*(){return this._mainFrame.fill(e,t,i)})}locator(e){return this.mainFrame().locator(e)}focus(e,t){return c(this,null,function*(){return this._mainFrame.focus(e,t)})}textContent(e,t){return c(this,null,function*(){return this._mainFrame.textContent(e,t)})}innerText(e,t){return c(this,null,function*(){return this._mainFrame.innerText(e,t)})}innerHTML(e,t){return c(this,null,function*(){return this._mainFrame.innerHTML(e,t)})}getAttribute(e,t,i){return c(this,null,function*(){return this._mainFrame.getAttribute(e,t,i)})}inputValue(e,t){return c(this,null,function*(){return this._mainFrame.inputValue(e,t)})}isChecked(e,t){return c(this,null,function*(){return this._mainFrame.isChecked(e,t)})}isDisabled(e,t){return c(this,null,function*(){return this._mainFrame.isDisabled(e,t)})}isEditable(e,t){return c(this,null,function*(){return this._mainFrame.isEditable(e,t)})}isEnabled(e,t){return c(this,null,function*(){return this._mainFrame.isEnabled(e,t)})}isHidden(e,t){return c(this,null,function*(){return this._mainFrame.isHidden(e,t)})}isVisible(e,t){return c(this,null,function*(){return this._mainFrame.isVisible(e,t)})}hover(e,t){return c(this,null,function*(){return this._mainFrame.hover(e,t)})}selectOption(e,t,i){return c(this,null,function*(){return this._mainFrame.selectOption(e,t,i)})}setInputFiles(e,t,i){return c(this,null,function*(){return this._mainFrame.setInputFiles(e,t,i)})}type(e,t,i){return c(this,null,function*(){return this._mainFrame.type(e,t,i)})}press(e,t,i){return c(this,null,function*(){return this._mainFrame.press(e,t,i)})}check(e,t){return c(this,null,function*(){return this._mainFrame.check(e,t)})}uncheck(e,t){return c(this,null,function*(){return this._mainFrame.uncheck(e,t)})}setChecked(e,t,i){return c(this,null,function*(){return this._mainFrame.setChecked(e,t,i)})}waitForTimeout(e){return c(this,null,function*(){return this._mainFrame.waitForTimeout(e)})}waitForFunction(e,t,i){return c(this,null,function*(){return this._mainFrame.waitForFunction(e,t,i)})}workers(){return[...this._workers]}on(e,t){return e===$e.Events.Page.FileChooser&&!this.listenerCount(e)&&this._channel.setFileChooserInterceptedNoReply({intercepted:!0}),super.on(e,t),this}addListener(e,t){return e===$e.Events.Page.FileChooser&&!this.listenerCount(e)&&this._channel.setFileChooserInterceptedNoReply({intercepted:!0}),super.addListener(e,t),this}off(e,t){return super.off(e,t),e===$e.Events.Page.FileChooser&&!this.listenerCount(e)&&this._channel.setFileChooserInterceptedNoReply({intercepted:!1}),this}removeListener(e,t){return super.removeListener(e,t),e===$e.Events.Page.FileChooser&&!this.listenerCount(e)&&this._channel.setFileChooserInterceptedNoReply({intercepted:!1}),this}pause(){return c(this,null,function*(){return this.context()._wrapApiCall(e=>c(this,null,function*(){yield e.pause()}))})}pdf(){return c(this,arguments,function*(e={}){return this._wrapApiCall(t=>c(this,null,function*(){let i=y({},e);i.margin&&(i.margin=y({},i.margin)),typeof e.width=="number"&&(i.width=e.width+"px"),typeof e.height=="number"&&(i.height=e.height+"px");for(let o of["top","right","bottom","left"]){let l=o;e.margin&&typeof e.margin[l]=="number"&&(i.margin[l]=i.margin[l]+"px")}let n=yield t.pdf(i),s=RA.Buffer.from(n.pdf,"base64");return e.path&&(yield Kg.default.promises.mkdir(T$.default.dirname(e.path),{recursive:!0}),yield Kg.default.promises.writeFile(e.path,s)),s}))})}};Ho.Page=Hc;var Jg=class extends MA.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n)}call(e){return c(this,null,function*(){try{let t=ns.Frame.from(this._initializer.frame),i={context:t._page.context(),page:t._page,frame:t},n;this._initializer.handle?n=yield e(i,ss.JSHandle.from(this._initializer.handle)):n=yield e(i,...this._initializer.args.map(ss.parseResult)),this._channel.resolve({result:(0,ss.serializeArgument)(n)}).catch(()=>{})}catch(t){this._channel.reject({error:(0,IA.serializeError)(t)}).catch(()=>{})}})}};Ho.BindingCall=Jg;function LA(r){return r.length>50&&(r=r.substring(0,50)+"\u2026"),r}function qA(r){if((0,Sr.isRegExp)(r))return`/${LA(r.source)}/${r.flags}`;if((0,Sr.isString)(r))return`"${LA(r)}"`}});var Kh=v(Gh=>{"use strict";Object.defineProperty(Gh,"__esModule",{value:!0});Gh.CDPSession=void 0;var M$=Ze(),BA=class extends M$.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n);this._channel.on("event",({method:s,params:o})=>{this.emit(s,o)}),this.on=super.on,this.addListener=super.addListener,this.off=super.removeListener,this.removeListener=super.removeListener,this.once=super.once}send(e,t){return c(this,null,function*(){return this._wrapApiCall(i=>c(this,null,function*(){return(yield i.send({method:e,params:t})).result}))})}detach(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return e.detach()}))})}};Gh.CDPSession=BA});var jA=v(Jh=>{"use strict";Object.defineProperty(Jh,"__esModule",{value:!0});Jh.Tracing=void 0;var F$=Bc(),HA=class{constructor(e){this._context=void 0,this._context=e}start(){return c(this,arguments,function*(e={}){yield this._context._wrapApiCall(t=>c(this,null,function*(){yield t.tracingStart(e),yield t.tracingStartChunk()}))})}startChunk(){return c(this,null,function*(){yield this._context._wrapApiCall(e=>c(this,null,function*(){yield e.tracingStartChunk()}))})}stopChunk(){return c(this,arguments,function*(e={}){yield this._context._wrapApiCall(t=>c(this,null,function*(){yield this._doStopChunk(t,e.path)}))})}stop(){return c(this,arguments,function*(e={}){yield this._context._wrapApiCall(t=>c(this,null,function*(){yield this._doStopChunk(t,e.path),yield t.tracingStop()}))})}_doStopChunk(e,t){return c(this,null,function*(){let i=yield e.tracingStopChunk({save:!!t});if(!i.artifact)return;let n=F$.Artifact.from(i.artifact);yield n.saveAs(t),yield n.delete()})}};Jh.Tracing=HA});var jo=v(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});jc.prepareBrowserContextParams=G$;jc.BrowserContext=void 0;var qr=Xg(),R$=Lo(),Br=V$(No()),WA=z$(x("fs")),N$=Ze(),UA=oi(),D$=Zh(),L$=Hh(),At=Lr(),q$=er(),B$=es(),Xh=G(),H$=qt(),j$=Kh(),W$=jA(),U$=Bc(),$$=Rc();function z$(r){return r&&r.__esModule?r:{default:r}}function $A(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return($A=function(i){return i?t:e})(r)}function V$(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=$A(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var Yh=class extends N$.ChannelOwner{static from(e){return e._object}static fromNullable(e){return e?Yh.from(e):null}constructor(e,t,i,n){var s;super(e,t,i,n);this._pages=new Set,this._routes=[],this._browser=null,this._browserType=void 0,this._bindings=new Map,this._timeoutSettings=new q$.TimeoutSettings,this._ownerPage=void 0,this._closedPromise=void 0,this._options={},this.request=void 0,this.tracing=void 0,this._backgroundPages=new Set,this._serviceWorkers=new Set,this._isChromium=void 0,e instanceof D$.Browser&&(this._browser=e),this._isChromium=((s=this._browser)===null||s===void 0?void 0:s._name)==="chromium",this.tracing=new W$.Tracing(this),this.request=$$.FetchRequest.from(n.fetchRequest),this._channel.on("bindingCall",({binding:o})=>this._onBinding(qr.BindingCall.from(o))),this._channel.on("close",()=>this._onClose()),this._channel.on("page",({page:o})=>this._onPage(qr.Page.from(o))),this._channel.on("route",({route:o,request:l})=>this._onRoute(Br.Route.from(o),Br.Request.from(l))),this._channel.on("backgroundPage",({page:o})=>{let l=qr.Page.from(o);this._backgroundPages.add(l),this.emit(At.Events.BrowserContext.BackgroundPage,l)}),this._channel.on("serviceWorker",({worker:o})=>{let l=L$.Worker.from(o);l._context=this,this._serviceWorkers.add(l),this.emit(At.Events.BrowserContext.ServiceWorker,l)}),this._channel.on("request",({request:o,page:l})=>this._onRequest(Br.Request.from(o),qr.Page.fromNullable(l))),this._channel.on("requestFailed",({request:o,failureText:l,responseEndTiming:u,page:d})=>this._onRequestFailed(Br.Request.from(o),u,l,qr.Page.fromNullable(d))),this._channel.on("requestFinished",o=>this._onRequestFinished(o)),this._channel.on("response",({response:o,page:l})=>this._onResponse(Br.Response.from(o),qr.Page.fromNullable(l))),this._closedPromise=new Promise(o=>this.once(At.Events.BrowserContext.Close,o))}_setBrowserType(e){this._browserType=e,e._contexts.add(this)}_onPage(e){this._pages.add(e),this.emit(At.Events.BrowserContext.Page,e),e._opener&&!e._opener.isClosed()&&e._opener.emit(At.Events.Page.Popup,e)}_onRequest(e,t){this.emit(At.Events.BrowserContext.Request,e),t&&t.emit(At.Events.Page.Request,e)}_onResponse(e,t){this.emit(At.Events.BrowserContext.Response,e),t&&t.emit(At.Events.Page.Response,e)}_onRequestFailed(e,t,i,n){e._failureText=i||null,e._timing&&(e._timing.responseEnd=t),this.emit(At.Events.BrowserContext.RequestFailed,e),n&&n.emit(At.Events.Page.RequestFailed,e)}_onRequestFinished(e){let{responseEndTiming:t}=e,i=Br.Request.from(e.request),n=Br.Response.fromNullable(e.response),s=qr.Page.fromNullable(e.page);i._timing&&(i._timing.responseEnd=t),this.emit(At.Events.BrowserContext.RequestFinished,i),s&&s.emit(At.Events.Page.RequestFinished,i),n&&n._finishedPromise.resolve()}_onRoute(e,t){let i=!1;for(let n of this._routes)if(n.matches(t.url())){n.handle(e,t),i=!0;break}i?this._routes=this._routes.filter(n=>!n.expired()):e._internalContinue()}_onBinding(e){return c(this,null,function*(){let t=this._bindings.get(e._initializer.name);!t||(yield e.call(t))})}setDefaultNavigationTimeout(e){this._timeoutSettings.setDefaultNavigationTimeout(e),this._channel.setDefaultNavigationTimeoutNoReply({timeout:e})}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e),this._channel.setDefaultTimeoutNoReply({timeout:e})}browser(){return this._browser}pages(){return[...this._pages]}newPage(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){if(this._ownerPage)throw new Error("Please use browser.newContext()");return qr.Page.from((yield e.newPage()).page)}))})}cookies(e){return c(this,null,function*(){return e||(e=[]),e&&typeof e=="string"&&(e=[e]),this._wrapApiCall(t=>c(this,null,function*(){return(yield t.cookies({urls:e})).cookies}))})}addCookies(e){return c(this,null,function*(){return this._wrapApiCall(t=>c(this,null,function*(){yield t.addCookies({cookies:e})}))})}clearCookies(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){yield e.clearCookies()}))})}grantPermissions(e,t){return c(this,null,function*(){return this._wrapApiCall(i=>c(this,null,function*(){yield i.grantPermissions(y({permissions:e},t))}))})}clearPermissions(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){yield e.clearPermissions()}))})}setGeolocation(e){return c(this,null,function*(){return this._wrapApiCall(t=>c(this,null,function*(){yield t.setGeolocation({geolocation:e||void 0})}))})}setExtraHTTPHeaders(e){return c(this,null,function*(){return this._wrapApiCall(t=>c(this,null,function*(){Br.validateHeaders(e),yield t.setExtraHTTPHeaders({headers:(0,Xh.headersObjectToArray)(e)})}))})}setOffline(e){return c(this,null,function*(){return this._wrapApiCall(t=>c(this,null,function*(){yield t.setOffline({offline:e})}))})}setHTTPCredentials(e){return c(this,null,function*(){return(0,Xh.isUnderTest)()||(0,UA.deprecate)("context.setHTTPCredentials","warning: method |context.setHTTPCredentials()| is deprecated. Instead of changing credentials, create another browser context with new credentials."),this._wrapApiCall(t=>c(this,null,function*(){yield t.setHTTPCredentials({httpCredentials:e||void 0})}))})}addInitScript(e,t){return c(this,null,function*(){return this._wrapApiCall(i=>c(this,null,function*(){let n=yield(0,UA.evaluationScript)(e,t);yield i.addInitScript({source:n})}))})}exposeBinding(n,s){return c(this,arguments,function*(e,t,i={}){return this._wrapApiCall(o=>c(this,null,function*(){yield o.exposeBinding({name:e,needsHandle:i.handle}),this._bindings.set(e,t)}))})}exposeFunction(e,t){return c(this,null,function*(){return this._wrapApiCall(i=>c(this,null,function*(){yield i.exposeBinding({name:e});let n=(s,...o)=>t(...o);this._bindings.set(e,n)}))})}route(n,s){return c(this,arguments,function*(e,t,i={}){return this._wrapApiCall(o=>c(this,null,function*(){this._routes.unshift(new Br.RouteHandler(this._options.baseURL,e,t,i.times)),this._routes.length===1&&(yield o.setNetworkInterceptionEnabled({enabled:!0}))}))})}unroute(e,t){return c(this,null,function*(){return this._wrapApiCall(i=>c(this,null,function*(){this._routes=this._routes.filter(n=>n.url!==e||t&&n.handler!==t),this._routes.length===0&&(yield i.setNetworkInterceptionEnabled({enabled:!1}))}))})}waitForEvent(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){let s=this._timeoutSettings.timeout(typeof t=="function"?{}:t),o=typeof t=="function"?t:t.predicate,l=B$.Waiter.createForEvent(n,e);l.rejectOnTimeout(s,`Timeout while waiting for event "${e}"`),e!==At.Events.BrowserContext.Close&&l.rejectOnEvent(this,At.Events.BrowserContext.Close,new Error("Context closed"));let u=yield l.waitForEvent(this,e,o);return l.dispose(),u}))})}storageState(){return c(this,arguments,function*(e={}){return yield this._wrapApiCall(t=>c(this,null,function*(){let i=yield t.storageState();return e.path&&(yield(0,Xh.mkdirIfNeeded)(e.path),yield WA.default.promises.writeFile(e.path,JSON.stringify(i,void 0,2),"utf8")),i}))})}backgroundPages(){return[...this._backgroundPages]}serviceWorkers(){return[...this._serviceWorkers]}newCDPSession(e){return c(this,null,function*(){if(!(e instanceof qr.Page)&&!(e instanceof R$.Frame))throw new Error("page: expected Page or Frame");return this._wrapApiCall(t=>c(this,null,function*(){let i=yield t.newCDPSession(e instanceof qr.Page?{page:e._channel}:{frame:e._channel});return j$.CDPSession.from(i.session)}))})}_onClose(){var e,t;this._browser&&this._browser._contexts.delete(this),(e=this._browserType)===null||e===void 0||(t=e._contexts)===null||t===void 0||t.delete(this),this.emit(At.Events.BrowserContext.Close,this)}close(){return c(this,null,function*(){try{yield this._wrapApiCall(e=>c(this,null,function*(){var t,i;if(yield(t=this._browserType)===null||t===void 0||(i=t._onWillCloseContext)===null||i===void 0?void 0:i.call(t,this),this._options.recordHar){let n=yield this._channel.harExport(),s=U$.Artifact.from(n.artifact);yield s.saveAs(this._options.recordHar.path),yield s.delete()}yield e.close(),yield this._closedPromise}))}catch(e){if((0,H$.isSafeCloseError)(e))return;throw e}})}_enableRecorder(e){return c(this,null,function*(){yield this._channel.recorderSupplementEnable(e)})}};jc.BrowserContext=Yh;function G$(r){return c(this,null,function*(){if(r.videoSize&&!r.videosPath)throw new Error('"videoSize" option requires "videosPath" to be specified');r.extraHTTPHeaders&&Br.validateHeaders(r.extraHTTPHeaders);let e=R(y({},r),{viewport:r.viewport===null?void 0:r.viewport,noDefaultViewport:r.viewport===null,extraHTTPHeaders:r.extraHTTPHeaders?(0,Xh.headersObjectToArray)(r.extraHTTPHeaders):void 0,storageState:typeof r.storageState=="string"?JSON.parse(yield WA.default.promises.readFile(r.storageState,"utf8")):r.storageState});return!e.recordVideo&&r.videosPath&&(e.recordVideo={dir:r.videosPath,size:r.videoSize}),e})}});var Zh=v(ep=>{"use strict";Object.defineProperty(ep,"__esModule",{value:!0});ep.Browser=void 0;var zA=jo(),K$=Ze(),VA=Lr(),GA=qt(),J$=Kh(),Qh=class extends K$.ChannelOwner{static from(e){return e._object}static fromNullable(e){return e?Qh.from(e):null}constructor(e,t,i,n){super(e,t,i,n);this._contexts=new Set,this._isConnected=!0,this._closedPromise=void 0,this._shouldCloseConnectionOnClose=!1,this._browserType=void 0,this._name=void 0,this._name=n.name,this._channel.on("close",()=>this._didClose()),this._closedPromise=new Promise(s=>this.once(VA.Events.Browser.Disconnected,s))}_setBrowserType(e){this._browserType=e;for(let t of this._contexts)t._setBrowserType(e)}newContext(){return c(this,arguments,function*(e={}){return this._wrapApiCall(t=>c(this,null,function*(){var i,n;e=y(y({},this._browserType._defaultContextOptions),e);let s=yield(0,zA.prepareBrowserContextParams)(e),o=zA.BrowserContext.from((yield t.newContext(s)).context);return o._options=s,this._contexts.add(o),o._logger=e.logger||this._logger,o._setBrowserType(this._browserType),yield(i=(n=this._browserType)._onDidCreateContext)===null||i===void 0?void 0:i.call(n,o),o}))})}contexts(){return[...this._contexts]}version(){return this._initializer.version}newPage(){return c(this,arguments,function*(e={}){let t=yield this.newContext(e),i=yield t.newPage();return i._ownedContext=t,t._ownerPage=i,i})}isConnected(){return this._isConnected}newBrowserCDPSession(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return J$.CDPSession.from((yield e.newBrowserCDPSession()).session)}))})}startTracing(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){yield n.startTracing(R(y({},t),{page:e?e._channel:void 0}))}))})}stopTracing(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return Buffer.from((yield e.stopTracing()).binary,"base64")}))})}close(){return c(this,null,function*(){try{yield this._wrapApiCall(e=>c(this,null,function*(){this._shouldCloseConnectionOnClose?this._connection.close(GA.kBrowserClosedError):yield e.close(),yield this._closedPromise}))}catch(e){if((0,GA.isSafeCloseError)(e))return;throw e}})}_didClose(){this._isConnected=!1,this.emit(VA.Events.Browser.Disconnected,this)}};ep.Browser=Qh});var Qg=v(tp=>{"use strict";Object.defineProperty(tp,"__esModule",{value:!0});tp.BrowserType=void 0;var Yg=Zh(),Zg=jo(),X$=Ze(),Y$=ew(),Z$=Lr(),KA=oi(),an=G(),Q$=qt(),ez=Vt(),JA=class extends X$.ChannelOwner{constructor(...e){super(...e);this._serverLauncher=void 0,this._contexts=new Set,this._playwright=void 0,this._defaultContextOptions={},this._defaultLaunchOptions={},this._onDidCreateContext=void 0,this._onWillCloseContext=void 0}static from(e){return e._object}executablePath(){if(!this._initializer.executablePath)throw new Error("Browser is not supported on current platform");return this._initializer.executablePath}name(){return this._initializer.name}launch(){return c(this,arguments,function*(e={}){let t=e.logger||this._defaultLaunchOptions.logger;return this._wrapApiCall(i=>c(this,null,function*(){(0,an.assert)(!e.userDataDir,"userDataDir option is not supported in `browserType.launch`. Use `browserType.launchPersistentContext` instead"),(0,an.assert)(!e.port,"Cannot specify a port without launching as a server."),e=y(y({},this._defaultLaunchOptions),e);let n=R(y({},e),{ignoreDefaultArgs:Array.isArray(e.ignoreDefaultArgs)?e.ignoreDefaultArgs:void 0,ignoreAllDefaultArgs:!!e.ignoreDefaultArgs&&!Array.isArray(e.ignoreDefaultArgs),env:e.env?(0,KA.envObjectToArray)(e.env):void 0}),s=Yg.Browser.from((yield i.launch(n)).browser);return s._logger=t,s._setBrowserType(this),s}),t)})}launchServer(){return c(this,arguments,function*(e={}){if(!this._serverLauncher)throw new Error("Launching server is not supported");return this._serverLauncher.launchServer(e)})}launchPersistentContext(i){return c(this,arguments,function*(e,t={}){let n=t.logger||this._defaultLaunchOptions.logger;return this._wrapApiCall(s=>c(this,null,function*(){var o;(0,an.assert)(!t.port,"Cannot specify a port without launching as a server."),t=y(y(y({},this._defaultLaunchOptions),this._defaultContextOptions),t);let l=yield(0,Zg.prepareBrowserContextParams)(t),u=R(y({},l),{ignoreDefaultArgs:Array.isArray(t.ignoreDefaultArgs)?t.ignoreDefaultArgs:void 0,ignoreAllDefaultArgs:!!t.ignoreDefaultArgs&&!Array.isArray(t.ignoreDefaultArgs),env:t.env?(0,KA.envObjectToArray)(t.env):void 0,channel:t.channel,userDataDir:e}),d=yield s.launchPersistentContext(u),h=Zg.BrowserContext.from(d.context);return h._options=l,h._logger=n,h._setBrowserType(this),yield(o=this._onDidCreateContext)===null||o===void 0?void 0:o.call(this,h),h}),n)})}connect(e,t){return c(this,null,function*(){return typeof e=="string"?this._connect(e,t):((0,an.assert)(e.wsEndpoint,"options.wsEndpoint is required"),this._connect(e.wsEndpoint,e))})}_connect(i){return c(this,arguments,function*(e,t={}){let n=t.logger;return yield this._wrapApiCall(s=>c(this,null,function*(){let o=t.timeout?(0,an.monotonicTime)()+t.timeout:0,l,{pipe:u}=yield s.connect({wsEndpoint:e,headers:t.headers,slowMo:t.slowMo,timeout:t.timeout}),d=()=>u.close().catch(()=>{}),h=new Y$.Connection;h.markAsRemote(),h.on("close",d);let p=()=>{var _;for(let w of((g=l)===null||g===void 0?void 0:g.contexts())||[]){var g;for(let b of w.pages())b._onClose();w._onClose()}(_=l)===null||_===void 0||_._didClose(),h.close(Q$.kBrowserClosedError)};u.on("closed",p),h.onmessage=_=>u.send({message:_}).catch(p),u.on("message",({message:_})=>{try{h.dispatch(_)}catch(g){console.error("Playwright: Connection dispatch error"),console.error(g),d()}});let f=new Promise((_,g)=>c(this,null,function*(){try{t.__testHookBeforeCreateBrowser&&(yield t.__testHookBeforeCreateBrowser());let w=yield h.initializePlaywright();if(!w._initializer.preLaunchedBrowser){g(new Error("Malformed endpoint. Did you use launchServer method?")),d();return}w._setSelectors(this._playwright.selectors),l=Yg.Browser.from(w._initializer.preLaunchedBrowser),l._logger=n,l._shouldCloseConnectionOnClose=!0,l._setBrowserType(w[l._name]),l.on(Z$.Events.Browser.Disconnected,d),_(l)}catch(w){g(w)}})),m=yield(0,ez.raceAgainstDeadline)(f,o);if(m.result)return m.result;throw d(),new Error(`Timeout ${t.timeout}ms exceeded`)}),n)})}connectOverCDP(e,t){if(typeof e=="string")return this._connectOverCDP(e,t);let i="endpointURL"in e?e.endpointURL:e.wsEndpoint;return(0,an.assert)(i,"Cannot connect over CDP without wsEndpoint."),this.connectOverCDP(i,e)}_connectOverCDP(i){return c(this,arguments,function*(e,t={}){if(this.name()!=="chromium")throw new Error("Connecting over CDP is only supported in Chromium.");let n=t.logger;return this._wrapApiCall(s=>c(this,null,function*(){let o=Object.assign({"User-Agent":(0,an.getUserAgent)()},t.headers),l=o?(0,an.headersObjectToArray)(o):void 0,u=yield s.connectOverCDP({endpointURL:e,headers:l,slowMo:t.slowMo,timeout:t.timeout}),d=Yg.Browser.from(u.browser);return u.defaultContext&&d._contexts.add(Zg.BrowserContext.from(u.defaultContext)),d._logger=n,d._setBrowserType(this),d}),n)})}};tp.BrowserType=JA});var XA=v(tw=>{"use strict";Object.defineProperty(tw,"__esModule",{value:!0});tw.createSocket=iz;var tz=rz(x("net"));function rz(r){return r&&r.__esModule?r:{default:r}}function iz(r,e){return c(this,null,function*(){return new Promise((t,i)=>{let n=tz.default.createConnection({host:r,port:e});n.on("connect",()=>t(n)),n.on("error",s=>i(s))})})}});var cw=v(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.AndroidWebView=ar.AndroidInput=ar.AndroidSocket=ar.AndroidDevice=ar.Android=void 0;var YA=az(x("fs")),nz=G(),os=Lr(),rw=jo(),iw=Ze(),ZA=er(),sz=es(),oz=x("events");function az(r){return r&&r.__esModule?r:{default:r}}var QA=class extends iw.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n);this._timeoutSettings=void 0,this._timeoutSettings=new ZA.TimeoutSettings}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e),this._channel.setDefaultTimeoutNoReply({timeout:e})}devices(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){let{devices:t}=yield e.devices();return t.map(i=>nw.from(i))}))})}};ar.Android=QA;var nw=class extends iw.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n);this._timeoutSettings=void 0,this._webViews=new Map,this.input=void 0,this.input=new ow(this),this._timeoutSettings=new ZA.TimeoutSettings(e._timeoutSettings),this._channel.on("webViewAdded",({webView:s})=>this._onWebViewAdded(s)),this._channel.on("webViewRemoved",({pid:s})=>this._onWebViewRemoved(s))}_onWebViewAdded(e){let t=new aw(this,e);this._webViews.set(e.pid,t),this.emit(os.Events.AndroidDevice.WebView,t)}_onWebViewRemoved(e){let t=this._webViews.get(e);this._webViews.delete(e),t&&t.emit(os.Events.AndroidWebView.Close)}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e),this._channel.setDefaultTimeoutNoReply({timeout:e})}serial(){return this._initializer.serial}model(){return this._initializer.model}webViews(){return[...this._webViews.values()]}webView(e,t){return c(this,null,function*(){let i=[...this._webViews.values()].find(n=>n.pkg()===e.pkg);return i||this.waitForEvent("webview",R(y({},t),{predicate:n=>n.pkg()===e.pkg}))})}wait(e,t){return c(this,null,function*(){yield this._wrapApiCall(i=>c(this,null,function*(){yield i.wait(y({selector:Yt(e)},t))}))})}fill(e,t,i){return c(this,null,function*(){yield this._wrapApiCall(n=>c(this,null,function*(){yield n.fill(y({selector:Yt(e),text:t},i))}))})}press(e,t,i){return c(this,null,function*(){yield this.tap(e,i),yield this.input.press(t)})}tap(e,t){return c(this,null,function*(){yield this._wrapApiCall(i=>c(this,null,function*(){yield i.tap(y({selector:Yt(e)},t))}))})}drag(e,t,i){return c(this,null,function*(){yield this._wrapApiCall(n=>c(this,null,function*(){yield n.drag(y({selector:Yt(e),dest:t},i))}))})}fling(e,t,i){return c(this,null,function*(){yield this._wrapApiCall(n=>c(this,null,function*(){yield n.fling(y({selector:Yt(e),direction:t},i))}))})}longTap(e,t){return c(this,null,function*(){yield this._wrapApiCall(i=>c(this,null,function*(){yield i.longTap(y({selector:Yt(e)},t))}))})}pinchClose(e,t,i){return c(this,null,function*(){yield this._wrapApiCall(n=>c(this,null,function*(){yield n.pinchClose(y({selector:Yt(e),percent:t},i))}))})}pinchOpen(e,t,i){return c(this,null,function*(){yield this._wrapApiCall(n=>c(this,null,function*(){yield n.pinchOpen(y({selector:Yt(e),percent:t},i))}))})}scroll(e,t,i,n){return c(this,null,function*(){yield this._wrapApiCall(s=>c(this,null,function*(){yield s.scroll(y({selector:Yt(e),direction:t,percent:i},n))}))})}swipe(e,t,i,n){return c(this,null,function*(){yield this._wrapApiCall(s=>c(this,null,function*(){yield s.swipe(y({selector:Yt(e),direction:t,percent:i},n))}))})}info(e){return c(this,null,function*(){return yield this._wrapApiCall(t=>c(this,null,function*(){return(yield t.info({selector:Yt(e)})).info}))})}screenshot(){return c(this,arguments,function*(e={}){return yield this._wrapApiCall(t=>c(this,null,function*(){let{binary:i}=yield t.screenshot(),n=Buffer.from(i,"base64");return e.path&&(yield YA.default.promises.writeFile(e.path,n)),n}))})}close(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){yield e.close(),this.emit(os.Events.AndroidDevice.Close)}))})}shell(e){return c(this,null,function*(){return this._wrapApiCall(t=>c(this,null,function*(){let{result:i}=yield t.shell({command:e});return Buffer.from(i,"base64")}))})}open(e){return c(this,null,function*(){return this._wrapApiCall(t=>c(this,null,function*(){return sw.from((yield t.open({command:e})).socket)}))})}installApk(e,t){return c(this,null,function*(){return this._wrapApiCall(i=>c(this,null,function*(){yield i.installApk({file:yield eI(e),args:t&&t.args})}))})}push(e,t,i){return c(this,null,function*(){return this._wrapApiCall(n=>c(this,null,function*(){yield n.push({file:yield eI(e),path:t,mode:i?i.mode:void 0})}))})}launchBrowser(){return c(this,arguments,function*(e={}){return this._wrapApiCall(t=>c(this,null,function*(){let i=yield(0,rw.prepareBrowserContextParams)(e),{context:n}=yield t.launchBrowser(i);return rw.BrowserContext.from(n)}))})}waitForEvent(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){let s=this._timeoutSettings.timeout(typeof t=="function"?{}:t),o=typeof t=="function"?t:t.predicate,l=sz.Waiter.createForEvent(n,e);l.rejectOnTimeout(s,`Timeout while waiting for event "${e}"`),e!==os.Events.AndroidDevice.Close&&l.rejectOnEvent(this,os.Events.AndroidDevice.Close,new Error("Device closed"));let u=yield l.waitForEvent(this,e,o);return l.dispose(),u}))})}};ar.AndroidDevice=nw;var sw=class extends iw.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n);this._channel.on("data",({data:s})=>this.emit(os.Events.AndroidSocket.Data,Buffer.from(s,"base64"))),this._channel.on("close",()=>this.emit(os.Events.AndroidSocket.Close))}write(e){return c(this,null,function*(){return this._wrapApiCall(t=>c(this,null,function*(){yield t.write({data:e.toString("base64")})}))})}close(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){yield e.close()}))})}};ar.AndroidSocket=sw;function eI(r){return c(this,null,function*(){return(0,nz.isString)(r)?YA.default.promises.readFile(r,{encoding:"base64"}).toString():r.toString("base64")})}var ow=class{constructor(e){this._device=void 0,this._device=e}type(e){return c(this,null,function*(){return this._device._wrapApiCall(t=>c(this,null,function*(){yield t.inputType({text:e})}))})}press(e){return c(this,null,function*(){return this._device._wrapApiCall(t=>c(this,null,function*(){yield t.inputPress({key:e})}))})}tap(e){return c(this,null,function*(){return this._device._wrapApiCall(t=>c(this,null,function*(){yield t.inputTap({point:e})}))})}swipe(e,t,i){return c(this,null,function*(){return this._device._wrapApiCall(n=>c(this,null,function*(){yield n.inputSwipe({segments:t,steps:i})}))})}drag(e,t,i){return c(this,null,function*(){return this._device._wrapApiCall(n=>c(this,null,function*(){yield n.inputDrag({from:e,to:t,steps:i})}))})}};ar.AndroidInput=ow;function Yt(r){let{checkable:e,checked:t,clazz:i,clickable:n,depth:s,desc:o,enabled:l,focusable:u,focused:d,hasChild:h,hasDescendant:p,longClickable:f,pkg:m,res:_,scrollable:g,selected:w,text:b}=r,C=E=>{if(E!==void 0)return E instanceof RegExp?E.source:"^"+E.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")+"$"};return{checkable:e,checked:t,clazz:C(i),pkg:C(m),desc:C(o),res:C(_),text:C(b),clickable:n,depth:s,enabled:l,focusable:u,focused:d,hasChild:h?{selector:Yt(h.selector)}:void 0,hasDescendant:p?{selector:Yt(p.selector),maxDepth:p.maxDepth}:void 0,longClickable:f,scrollable:g,selected:w}}var aw=class extends oz.EventEmitter{constructor(e,t){super();this._device=void 0,this._data=void 0,this._pagePromise=void 0,this._device=e,this._data=t}pid(){return this._data.pid}pkg(){return this._data.pkg}page(){return c(this,null,function*(){return this._pagePromise||(this._pagePromise=this._fetchPage()),this._pagePromise})}_fetchPage(){return c(this,null,function*(){return this._device._wrapApiCall(e=>c(this,null,function*(){let{context:t}=yield e.connectToWebView({pid:this._data.pid});return rw.BrowserContext.from(t).pages()[0]}))})}};ar.AndroidWebView=aw});var uw=v(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});Uo.ElectronApplication=Uo.Electron=void 0;var cz=er(),lz=G(),uz=jo(),tI=Ze(),dz=oi(),Wo=Lr(),Wc=si(),hz=es(),rI=class extends tI.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n)}launch(){return c(this,arguments,function*(e={}){return this._wrapApiCall(t=>c(this,null,function*(){let i=R(y({},e),{extraHTTPHeaders:e.extraHTTPHeaders&&(0,lz.headersObjectToArray)(e.extraHTTPHeaders),env:(0,dz.envObjectToArray)(e.env?e.env:process.env)});return lw.from((yield t.launch(i)).electronApplication)}))})}};Uo.Electron=rI;var lw=class extends tI.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n);this._context=void 0,this._windows=new Set,this._timeoutSettings=new cz.TimeoutSettings,this._context=uz.BrowserContext.from(n.context);for(let s of this._context._pages)this._onPage(s);this._context.on(Wo.Events.BrowserContext.Page,s=>this._onPage(s)),this._channel.on("close",()=>this.emit(Wo.Events.ElectronApplication.Close))}_onPage(e){this._windows.add(e),this.emit(Wo.Events.ElectronApplication.Window,e),e.once(Wo.Events.Page.Close,()=>this._windows.delete(e))}windows(){return[...this._windows]}firstWindow(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){return this._windows.size?this._windows.values().next().value:this.waitForEvent("window")}))})}context(){return this._context}close(){return c(this,null,function*(){return this._wrapApiCall(e=>c(this,null,function*(){yield e.close()}))})}waitForEvent(i){return c(this,arguments,function*(e,t={}){return this._wrapApiCall(n=>c(this,null,function*(){let s=this._timeoutSettings.timeout(typeof t=="function"?{}:t),o=typeof t=="function"?t:t.predicate,l=hz.Waiter.createForEvent(n,e);l.rejectOnTimeout(s,`Timeout while waiting for event "${e}"`),e!==Wo.Events.ElectronApplication.Close&&l.rejectOnEvent(this,Wo.Events.ElectronApplication.Close,new Error("Electron application closed"));let u=yield l.waitForEvent(this,e,o);return l.dispose(),u}))})}browserWindow(e){return c(this,null,function*(){return this._wrapApiCall(t=>c(this,null,function*(){let i=yield t.browserWindow({page:e._channel});return Wc.JSHandle.from(i.handle)}))})}evaluate(e,t){return c(this,null,function*(){return this._wrapApiCall(i=>c(this,null,function*(){let n=yield i.evaluateExpression({expression:String(e),isFunction:typeof e=="function",arg:(0,Wc.serializeArgument)(t)});return(0,Wc.parseResult)(n.value)}))})}evaluateHandle(e,t){return c(this,null,function*(){return this._wrapApiCall(i=>c(this,null,function*(){let n=yield i.evaluateExpressionHandle({expression:String(e),isFunction:typeof e=="function",arg:(0,Wc.serializeArgument)(t)});return Wc.JSHandle.from(n.handle)}))})}};Uo.ElectronApplication=lw});var dw=v($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.SelectorsOwner=$o.Selectors=void 0;var pz=oi(),fz=Ze(),iI=class{constructor(){this._channels=new Set,this._registrations=[]}register(n,s){return c(this,arguments,function*(e,t,i={}){let o=yield(0,pz.evaluationScript)(t,void 0,!1),l=R(y({},i),{name:e,source:o});for(let u of this._channels)yield u._channel.register(l);this._registrations.push(l)})}_addChannel(e){this._channels.add(e);for(let t of this._registrations)e._channel.register(t).catch(i=>{})}_removeChannel(e){this._channels.delete(e)}};$o.Selectors=iI;var nI=class extends fz.ChannelOwner{static from(e){return e._object}};$o.SelectorsOwner=nI});var aI=v(rp=>{"use strict";Object.defineProperty(rp,"__esModule",{value:!0});rp.Playwright=void 0;var mz=sI(x("dns")),_z=sI(x("util")),gz=qt(),wz=XA(),vz=cw(),hw=Qg(),yz=Ze(),bz=uw(),xz=Rc(),pw=dw();function sI(r){return r&&r.__esModule?r:{default:r}}var Sz=_z.default.promisify(mz.default.lookup),oI=class extends yz.ChannelOwner{constructor(e,t,i,n){super(e,t,i,n);this._android=void 0,this._electron=void 0,this.chromium=void 0,this.firefox=void 0,this.webkit=void 0,this.devices=void 0,this.selectors=void 0,this.request=void 0,this.errors=void 0,this._sockets=new Map,this._redirectPortForTest=void 0,this.request=new xz.Fetch(this),this.chromium=hw.BrowserType.from(n.chromium),this.chromium._playwright=this,this.firefox=hw.BrowserType.from(n.firefox),this.firefox._playwright=this,this.webkit=hw.BrowserType.from(n.webkit),this.webkit._playwright=this,this._android=vz.Android.from(n.android),this._electron=bz.Electron.from(n.electron),this.devices={};for(let{name:o,descriptor:l}of n.deviceDescriptors)this.devices[o]=l;this.selectors=new pw.Selectors,this.errors={TimeoutError:gz.TimeoutError};let s=pw.SelectorsOwner.from(n.selectors);this.selectors._addChannel(s),this._connection.on("close",()=>{this.selectors._removeChannel(s);for(let o of this._sockets.keys())this._onSocksClosed(o)})}_setSelectors(e){let t=pw.SelectorsOwner.from(this._initializer.selectors);this.selectors._removeChannel(t),this.selectors=e,this.selectors._addChannel(t)}_enablePortForwarding(e){this._redirectPortForTest=e,this._channel.on("socksRequested",({uid:t,host:i,port:n})=>this._onSocksRequested(t,i,n)),this._channel.on("socksData",({uid:t,data:i})=>this._onSocksData(t,Buffer.from(i,"base64"))),this._channel.on("socksClosed",({uid:t})=>this._onSocksClosed(t))}_onSocksRequested(e,t,i){return c(this,null,function*(){t==="local.playwright"&&(t="localhost");try{this._redirectPortForTest&&(i=this._redirectPortForTest);let{address:n}=yield Sz(t),s=yield(0,wz.createSocket)(n,i);s.on("data",u=>this._channel.socksData({uid:e,data:u.toString("base64")}).catch(()=>{})),s.on("error",u=>{this._channel.socksError({uid:e,error:u.message}).catch(()=>{}),this._sockets.delete(e)}),s.on("end",()=>{this._channel.socksEnd({uid:e}).catch(()=>{}),this._sockets.delete(e)});let o=s.localAddress,l=s.localPort;this._sockets.set(e,s),this._channel.socksConnected({uid:e,host:o,port:l}).catch(()=>{})}catch(n){this._channel.socksFailed({uid:e,errorCode:n.code}).catch(()=>{})}})}_onSocksData(e,t){var i;(i=this._sockets.get(e))===null||i===void 0||i.write(t)}static from(e){return e._object}_onSocksClosed(e){var t;(t=this._sockets.get(e))===null||t===void 0||t.destroy(),this._sockets.delete(e)}};rp.Playwright=oI});var lI=v(ip=>{"use strict";Object.defineProperty(ip,"__esModule",{value:!0});ip.JsonPipe=void 0;var Ez=Ze(),cI=class extends Ez.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n)}channel(){return this._channel}};ip.JsonPipe=cI});var ew=v(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});sp.Connection=void 0;var Cz=Zh(),kz=jo(),Oz=Qg(),Pz=Ze(),Tz=Mc(),Az=Lo(),Iz=si(),np=No(),uI=Xg(),Mz=Hh(),Fz=Bg(),Rz=Hg(),Nz=li(),Dz=Kh(),dI=aI(),hI=uw(),Lz=Vg(),fw=Xe(),qz=dw(),mw=cw(),Bz=Bc(),Hz=x("events"),jz=lI(),Wz=Rc(),pI=class extends Pz.ChannelOwner{constructor(e){super(e,"Root","",{})}initialize(){return c(this,null,function*(){return dI.Playwright.from((yield this._channel.initialize({sdkLanguage:"javascript"})).playwright)})}},fI=class extends Hz.EventEmitter{constructor(){super();this._objects=new Map,this._waitingForObject=new Map,this.onmessage=e=>{},this._lastId=0,this._callbacks=new Map,this._rootObject=void 0,this._closedErrorMessage=void 0,this._isRemote=!1,this._rootObject=new pI(this)}markAsRemote(){this._isRemote=!0}isRemote(){return this._isRemote}initializePlaywright(){return c(this,null,function*(){return yield this._rootObject.initialize()})}pendingProtocolCalls(){return Array.from(this._callbacks.values()).map(e=>e.stackTrace)}getObjectWithKnownName(e){return this._objects.get(e)}sendMessageToServer(e,t,i,n){return c(this,null,function*(){if(this._closedErrorMessage)throw new Error(this._closedErrorMessage);let s=e._guid,o=n||{frameTexts:[],frames:[],apiName:"",allFrames:[]},{frames:l,apiName:u}=o,d=++this._lastId,h={id:d,guid:s,method:t,params:i};fw.debugLogger.log("channel:command",h);let p={stack:l,apiName:u,internal:!u};return this.onmessage(R(y({},h),{metadata:p})),yield new Promise((f,m)=>this._callbacks.set(d,{resolve:f,reject:m,stackTrace:o}))})}_debugScopeState(){return this._rootObject._debugScopeState()}dispatch(e){if(this._closedErrorMessage)return;let{id:t,guid:i,method:n,params:s,result:o,error:l}=e;if(t){fw.debugLogger.log("channel:response",e);let d=this._callbacks.get(t);if(!d)throw new Error(`Cannot find command to respond: ${t}`);this._callbacks.delete(t),l&&!o?d.reject((0,Nz.parseError)(l)):d.resolve(this._replaceGuidsWithChannels(o));return}if(fw.debugLogger.log("channel:event",e),n==="__create__"){this._createRemoteObject(i,s.type,s.guid,s.initializer);return}if(n==="__dispose__"){let d=this._objects.get(i);if(!d)throw new Error(`Cannot find object to dispose: ${i}`);d._dispose();return}let u=this._objects.get(i);if(!u)throw new Error(`Cannot find object to emit "${n}": ${i}`);u._channel.emit(n,u._type==="JsonPipe"?s:this._replaceGuidsWithChannels(s))}close(e="Connection closed"){this._closedErrorMessage=e;for(let t of this._callbacks.values())t.reject(new Error(e));this._callbacks.clear(),this.emit("close")}_replaceGuidsWithChannels(e){if(!e)return e;if(Array.isArray(e))return e.map(t=>this._replaceGuidsWithChannels(t));if(e.guid&&this._objects.has(e.guid))return this._objects.get(e.guid)._channel;if(typeof e=="object"){let t={};for(let i of Object.keys(e))t[i]=this._replaceGuidsWithChannels(e[i]);return t}return e}_createRemoteObject(e,t,i,n){let s=this._objects.get(e);if(!s)throw new Error(`Cannot find parent object ${e} to create ${i}`);let o;switch(n=this._replaceGuidsWithChannels(n),t){case"Android":o=new mw.Android(s,t,i,n);break;case"AndroidSocket":o=new mw.AndroidSocket(s,t,i,n);break;case"AndroidDevice":o=new mw.AndroidDevice(s,t,i,n);break;case"Artifact":o=new Bz.Artifact(s,t,i,n);break;case"BindingCall":o=new uI.BindingCall(s,t,i,n);break;case"Browser":o=new Cz.Browser(s,t,i,n);break;case"BrowserContext":o=new kz.BrowserContext(s,t,i,n);break;case"BrowserType":o=new Oz.BrowserType(s,t,i,n);break;case"CDPSession":o=new Dz.CDPSession(s,t,i,n);break;case"ConsoleMessage":o=new Fz.ConsoleMessage(s,t,i,n);break;case"Dialog":o=new Rz.Dialog(s,t,i,n);break;case"Electron":o=new hI.Electron(s,t,i,n);break;case"ElectronApplication":o=new hI.ElectronApplication(s,t,i,n);break;case"ElementHandle":o=new Tz.ElementHandle(s,t,i,n);break;case"FetchRequest":o=new Wz.FetchRequest(s,t,i,n);break;case"Frame":o=new Az.Frame(s,t,i,n);break;case"JSHandle":o=new Iz.JSHandle(s,t,i,n);break;case"JsonPipe":o=new jz.JsonPipe(s,t,i,n);break;case"Page":o=new uI.Page(s,t,i,n);break;case"Playwright":o=new dI.Playwright(s,t,i,n);break;case"Request":o=new np.Request(s,t,i,n);break;case"Response":o=new np.Response(s,t,i,n);break;case"Route":o=new np.Route(s,t,i,n);break;case"Stream":o=new Lz.Stream(s,t,i,n);break;case"Selectors":o=new qz.SelectorsOwner(s,t,i,n);break;case"WebSocket":o=new np.WebSocket(s,t,i,n);break;case"Worker":o=new Mz.Worker(s,t,i,n);break;default:throw new Error("Missing type "+t)}let l=this._waitingForObject.get(i);return l&&(l(o),this._waitingForObject.delete(i)),o}};sp.Connection=fI});var vI=v(ap=>{"use strict";Object.defineProperty(ap,"__esModule",{value:!0});ap.PlaywrightServer=void 0;var Uz=Kz(Pr()),$z=wI(x("http")),mI=wI(xs()),_I=Je(),zz=Oh(),Vz=tc(),Gz=lo();function gI(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(gI=function(i){return i?t:e})(r)}function wI(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=gI(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function Kz(r){return r&&r.__esModule?r:{default:r}}var zo=(0,Uz.default)("pw:server"),op=class{static startDefault(){return c(this,null,function*(){let e=()=>c(this,null,function*(){yield(0,Gz.gracefullyCloseAll)().catch(i=>{})}),t={path:"/ws",allowMultipleClients:!1,onClose:e,onConnect:i=>c(this,null,function*(){let n;return new _I.Root(i,s=>c(this,null,function*(){n=(0,Vz.createPlaywright)("javascript");let o=new zz.PlaywrightDispatcher(s,n);return process.env.PW_SOCKS_PROXY_PORT&&(yield o.enableSocksProxy()),o})),()=>{var s;e(),(s=n)===null||s===void 0||s.selectors.unregisterAll()}})};return new op(t)})}constructor(e){this._wsServer=void 0,this._clientsCount=0,this._delegate=void 0,this._delegate=e}listen(e=0){return c(this,null,function*(){let t=$z.createServer((s,o)=>{o.end("Running")});t.on("error",s=>zo(s));let i=this._delegate.path,n=yield new Promise((s,o)=>{t.listen(e,()=>{let l=t.address();if(!l){o(new Error("Could not bind server socket"));return}let u=typeof l=="string"?`${l}${i}`:`ws://127.0.0.1:${l.port}${i}`;s(u)}).on("error",o)});return zo("Listening at "+n),this._wsServer=new mI.Server({server:t,path:i}),this._wsServer.on("connection",s=>c(this,null,function*(){if(this._clientsCount&&!this._delegate.allowMultipleClients){s.close();return}this._clientsCount++,zo("Incoming connection");let o=new _I.DispatcherConnection;o.onmessage=h=>{s.readyState!==mI.CLOSING&&s.send(JSON.stringify(h))},s.on("message",h=>{o.dispatch(JSON.parse(Buffer.from(h).toString()))});let l=()=>s.close(),u=()=>{},d=()=>{this._clientsCount--,o.onmessage=()=>{},u()};s.on("close",()=>{zo("Client closed"),d()}),s.on("error",h=>{zo("Client error "+h),d()}),u=yield this._delegate.onConnect(o,l)})),n})}close(){return c(this,null,function*(){!this._wsServer||(zo("Closing server"),yield new Promise(e=>this._wsServer.close(e)),yield new Promise(e=>this._wsServer.options.server.close(e)),this._wsServer=void 0,yield this._delegate.onClose())})}};ap.PlaywrightServer=op});var EI=v(cp=>{"use strict";Object.defineProperty(cp,"__esModule",{value:!0});cp.BrowserServerLauncherImpl=void 0;var Jz=no(),Xz=xs(),yI=Je(),Yz=Mo(),Zz=oi(),Qz=G(),e8=Rg(),t8=j_(),bI=nt(),r8=tc(),i8=Oh(),n8=vI(),s8=gt(),o8=vh(),xI=class{constructor(e){this._browserName=void 0,this._browserName=e}launchServer(){return c(this,arguments,function*(e={}){let t=(0,r8.createPlaywright)("javascript"),i=yield t[this._browserName].launch((0,bI.internalCallMetadata)(),R(y({},e),{ignoreDefaultArgs:Array.isArray(e.ignoreDefaultArgs)?e.ignoreDefaultArgs:void 0,ignoreAllDefaultArgs:!!e.ignoreDefaultArgs&&!Array.isArray(e.ignoreDefaultArgs),env:e.env?(0,Zz.envObjectToArray)(e.env):void 0}),a8(e.logger)),n=`/${(0,Qz.createGuid)()}`;e.wsPath&&(n=e.wsPath.startsWith("/")?e.wsPath:`/${e.wsPath}`);let s={path:n,allowMultipleClients:!0,onClose:()=>{},onConnect:this._onConnect.bind(this,t,i)},o=new n8.PlaywrightServer(s),l=yield o.listen(e.port),u=new Xz.EventEmitter;return u.process=()=>i.options.browserProcess.process,u.wsEndpoint=()=>l,u.close=()=>i.options.browserProcess.close(),u.kill=()=>i.options.browserProcess.kill(),u._disconnectForTest=()=>o.close(),i.options.browserProcess.onclose=(d,h)=>c(this,null,function*(){o.close(),u.emit("close",d,h)}),u})}_onConnect(e,t,i,n){return c(this,null,function*(){let s;return new yI.Root(i,o=>c(this,null,function*(){let l=new t8.Selectors,u=new e8.SelectorsDispatcher(o,l);return s=new SI(o,t,l),t.on(Jz.Browser.Events.Disconnected,()=>{n()}),new i8.PlaywrightDispatcher(o,e,u,s)})),()=>{var o;(o=s)===null||o===void 0||o.cleanupContexts().catch(l=>{})}})}};cp.BrowserServerLauncherImpl=xI;var SI=class extends yI.Dispatcher{constructor(e,t,i){super(e,t,"Browser",{version:t.version(),name:t.options.name},!0);this._contexts=new Set,this._selectors=void 0,this._selectors=i}newContext(e,t){return c(this,null,function*(){e.recordVideo&&(e.recordVideo.dir=this._object.options.artifactsDir);let i=yield this._object.newContext(e);return this._contexts.add(i),i._setSelectors(this._selectors),i.on(s8.BrowserContext.Events.Close,()=>this._contexts.delete(i)),e.storageState&&(yield i.setStorageState(t,e.storageState)),{context:new Yz.BrowserContextDispatcher(this._scope,i)}})}close(){return c(this,null,function*(){})}killForTests(){return c(this,null,function*(){})}newBrowserCDPSession(){return c(this,null,function*(){if(!this._object.options.isChromium)throw new Error("CDP session is only available in Chromium");let e=this._object;return{session:new o8.CDPSessionDispatcher(this._scope,yield e.newBrowserCDPSession())}})}startTracing(e){return c(this,null,function*(){if(!this._object.options.isChromium)throw new Error("Tracing is only available in Chromium");yield this._object.startTracing(e.page?e.page._object:void 0,e)})}stopTracing(){return c(this,null,function*(){if(!this._object.options.isChromium)throw new Error("Tracing is only available in Chromium");return{binary:(yield this._object.stopTracing()).toString("base64")}})}cleanupContexts(){return c(this,null,function*(){yield Promise.all(Array.from(this._contexts).map(e=>e.close((0,bI.internalCallMetadata)())))})}};function a8(r){return r?(e,t)=>{r.isEnabled("protocol","verbose")&&r.log("protocol","verbose",(e==="send"?"SEND \u25BA ":"\u25C0 RECV ")+JSON.stringify(t),[],{})}:void 0}});var kI=v(gw=>{"use strict";Object.defineProperty(gw,"__esModule",{value:!0});gw.createInProcessPlaywright=d8;var CI=Je(),c8=tc(),l8=Oh(),u8=ew(),_w=EI();function d8(){let r=(0,c8.createPlaywright)("javascript"),e=new u8.Connection,t=new CI.DispatcherConnection;t.onmessage=s=>e.dispatch(s),e.onmessage=s=>t.dispatch(s);let i=new CI.Root(t);new l8.PlaywrightDispatcher(i,r);let n=e.getObjectWithKnownName("Playwright");return n.chromium._serverLauncher=new _w.BrowserServerLauncherImpl("chromium"),n.firefox._serverLauncher=new _w.BrowserServerLauncherImpl("firefox"),n.webkit._serverLauncher=new _w.BrowserServerLauncherImpl("webkit"),t.onmessage=s=>setImmediate(()=>e.dispatch(s)),e.onmessage=s=>setImmediate(()=>t.dispatch(s)),n._toImpl=s=>t._dispatchers.get(s._guid)._object,n}});var PI=v((MK,OI)=>{"use strict";var h8=kI();OI.exports=(0,h8.createInProcessPlaywright)()});var AI=v((FK,TI)=>{TI.exports=PI()});var ci=HI(AI()),RK=ci.default.chromium,NK=ci.default.firefox,DK=ci.default.webkit,LK=ci.default.selectors,qK=ci.default.devices,BK=ci.default.errors,HK=ci.default._electron,jK=ci.default._android;})();
/*!
 * node-progress
 * Copyright(c) 2011 TJ Holowaychuk <tj@vision-media.ca>
 * MIT Licensed
 */
